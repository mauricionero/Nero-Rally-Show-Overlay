/*! For license information please see main.db88105d.js.LICENSE.txt */
(()=>{var e={259(e,t,n){var r;r=()=>{var e,t={},r={exports:t},o=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&h(e,n,t[n]);if(c)for(var n of c(t))d.call(t,n)&&h(e,n,t[n]);return e},p=(e,t)=>a(e,i(t)),m=(e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})},g=function(e,t){this[0]=e,this[1]=t},v={};m(v,{ErrorInfo:()=>E,Realtime:()=>cr,Rest:()=>_n,default:()=>io,makeProtocolMessageFromDeserialized:()=>bn,msgpack:()=>oo}),r.exports=(e=v,((e,t,n,r)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let a of l(t))u.call(e,a)||a===n||o(e,a,{get:()=>t[a],enumerable:!(r=s(t,a))||r.enumerable});return e})(o({},"__esModule",{value:!0}),e));var y=class{},b="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:self;function x(e,t){return"".concat(e).padStart(t?3:2,"0")}function w(e){return y.Config.logTimestamps?function(t){const n=new Date;e(x(n.getHours())+":"+x(n.getMinutes())+":"+x(n.getSeconds())+"."+x(n.getMilliseconds(),1)+" "+t)}:function(t){e(t)}}var k=class e{constructor(){this.deprecated=(e,t)=>{this.deprecationWarning("".concat(e," is deprecated and will be removed in a future version. ").concat(t))},this.shouldLog=e=>e<=this.logLevel,this.setLog=(e,t)=>{void 0!==e&&(this.logLevel=e),void 0!==t&&(this.logHandler=this.logErrorHandler=t)},this.logLevel=e.defaultLogLevel,this.logHandler=e.defaultLogHandler,this.logErrorHandler=e.defaultLogErrorHandler}static initLogHandlers(){const[t,n]=(()=>{var e;let t,n;return"function"===typeof(null==(e=null==b?void 0:b.console)?void 0:e.log)?(t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log.apply(console,t)},n=console.warn?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn.apply(console,t)}:t):t=n=function(){},[t,n].map(w)})();this.defaultLogHandler=t,this.defaultLogErrorHandler=n,this.defaultLogger=new e}static logActionNoStrip(e,t,n,r){e.logAction(t,n,r)}logAction(e,t,n){this.shouldLog(e)&&(1===e?this.logErrorHandler:this.logHandler)("Ably: "+t+": "+n,e)}renamedClientOption(e,t){this.deprecationWarning("The `".concat(e,"` client option has been renamed to `").concat(t,"`. Please update your code to use `").concat(t,"` instead. `").concat(e,"` will be removed in a future version."))}renamedMethod(e,t,n){this.deprecationWarning("`".concat(e,"`\u2019s `").concat(t,"` method has been renamed to `").concat(n,"`. Please update your code to use `").concat(n,"` instead. `").concat(t,"` will be removed in a future version."))}deprecationWarning(e){this.shouldLog(1)&&this.logErrorHandler("Ably: Deprecation warning - ".concat(e),1)}};k.defaultLogLevel=1,k.LOG_NONE=0,k.LOG_ERROR=1,k.LOG_MAJOR=2,k.LOG_MINOR=3,k.LOG_MICRO=4,k.logAction=(e,t,n,r)=>{k.logActionNoStrip(e,t,n,r)};var S=k,C={};function N(e){let t="["+e.constructor.name;return e.message&&(t+=": "+e.message),e.statusCode&&(t+="; statusCode="+e.statusCode),e.code&&(t+="; code="+e.code),e.cause&&(t+="; cause="+Z(e.cause)),!e.href||e.message&&e.message.indexOf("help.ably.io")>-1||(t+="; see "+e.href+" "),t+="]",t}m(C,{Format:()=>K,allSame:()=>G,allToLowerCase:()=>le,allToUpperCase:()=>ce,arrChooseN:()=>oe,arrDeleteValue:()=>U,arrEquals:()=>ve,arrIntersect:()=>D,arrIntersectOb:()=>B,arrPopRandomElement:()=>$,arrWithoutValue:()=>H,cheapRandStr:()=>ne,containsValue:()=>F,copy:()=>R,createMissingPluginError:()=>ye,dataSizeBytes:()=>te,decodeBody:()=>se,encodeBody:()=>ie,ensureArray:()=>T,forInOwnNonNullProperties:()=>V,getBackoffCoefficient:()=>ue,getGlobalObject:()=>fe,getJitterCoefficient:()=>de,getRetryTime:()=>he,inherits:()=>L,inspectBody:()=>ee,inspectError:()=>Z,intersect:()=>z,isEmpty:()=>_,isErrorInfoOrPartialErrorInfo:()=>X,isNil:()=>M,isObject:()=>A,keysArray:()=>W,listenerToAsyncIterator:()=>we,matchDerivedChannel:()=>me,mixin:()=>O,parseQueryString:()=>Y,prototypicalClone:()=>I,randomString:()=>re,shallowClone:()=>P,shallowEquals:()=>pe,stringifyValues:()=>Q,throwMissingPluginError:()=>be,toBase64:()=>ge,toQueryString:()=>J,valuesArray:()=>q,whenPromiseSettles:()=>ae,withTimeoutAsync:()=>xe});var E=class e extends Error{constructor(t,n,r,o){super(t),"undefined"!==typeof Object.setPrototypeOf&&Object.setPrototypeOf(this,e.prototype),this.code=n,this.statusCode=r,this.cause=o}toString(){return N(this)}static fromValues(t){const{message:n,code:r,statusCode:o}=t;if("string"!==typeof n||"number"!==typeof r||"number"!==typeof o)throw new Error("ErrorInfo.fromValues(): invalid values: "+y.Config.inspect(t));const a=Object.assign(new e(n,r,o),t);return a.code&&!a.href&&(a.href="https://help.ably.io/error/"+a.code),a}},j=class e extends Error{constructor(t,n,r,o){super(t),"undefined"!==typeof Object.setPrototypeOf&&Object.setPrototypeOf(this,e.prototype),this.code=n,this.statusCode=r,this.cause=o}toString(){return N(this)}static fromValues(t){const{message:n,code:r,statusCode:o}=t;if("string"!==typeof n||!M(r)&&"number"!==typeof r||!M(o)&&"number"!==typeof o)throw new Error("PartialErrorInfo.fromValues(): invalid values: "+y.Config.inspect(t));const a=Object.assign(new e(n,r,o),t);return a.code&&!a.href&&(a.href="https://help.ably.io/error/"+a.code),a}};function O(e){for(let t=0;t<(arguments.length<=1?0:arguments.length-1);t++){const n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];if(!n)break;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}function R(e){return O({},e)}function T(e){return M(e)?[]:Array.isArray(e)?e:[e]}function A(e){return"[object Object]"==Object.prototype.toString.call(e)}function _(e){for(const t in e)return!1;return!0}function M(e){return null==e}function P(e){const t=new Object;for(const n in e)t[n]=e[n];return t}function I(e,t){class n{}n.prototype=e;const r=new n;return t&&O(r,t),r}var L=function(e,t){y.Config.inherits?y.Config.inherits(e,t):(e.super_=t,e.prototype=I(t.prototype,{constructor:e}))};function F(e,t){for(const n in e)if(e[n]==t)return!0;return!1}function z(e,t){return Array.isArray(t)?D(e,t):B(e,t)}function D(e,t){const n=[];for(let r=0;r<e.length;r++){const o=e[r];-1!=t.indexOf(o)&&n.push(o)}return n}function B(e,t){const n=[];for(let r=0;r<e.length;r++){const o=e[r];o in t&&n.push(o)}return n}function U(e,t){const n=e.indexOf(t),r=-1!=n;return r&&e.splice(n,1),r}function H(e,t){const n=e.slice();return U(n,t),n}function W(e,t){const n=[];for(const r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||n.push(r);return n}function q(e,t){const n=[];for(const r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||n.push(e[r]);return n}function V(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n]&&t(n)}function G(e,t){if(0===e.length)return!0;const n=e[0][t];return e.every(function(e){return e[t]===n})}var K=(e=>(e.msgpack="msgpack",e.json="json",e))(K||{});function $(e){return e.splice((t=e,Math.floor(Math.random()*t.length)),1)[0];var t}function J(e){const t=[];if(e)for(const n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function Q(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,String(n)]}))}function Y(e){let t;const n=/([^?&=]+)=?([^&]*)/g,r={};for(;t=n.exec(e);)r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return r}function X(e){return"object"==typeof e&&null!==e&&(e instanceof E||e instanceof j)}function Z(e){var t,n;return e instanceof Error||"ErrorInfo"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)||"PartialErrorInfo"===(null==(n=null==e?void 0:e.constructor)?void 0:n.name)?e.toString():y.Config.inspect(e)}function ee(e){return y.BufferUtils.isBuffer(e)?e.toString():"string"===typeof e?e:y.Config.inspect(e)}function te(e){if(y.BufferUtils.isBuffer(e))return y.BufferUtils.byteLength(e);if("string"===typeof e)return y.Config.stringByteSize(e);if("number"===typeof e)return 8;if("boolean"===typeof e)return 1;throw new Error("Expected input of Utils.dataSizeBytes to be a string, a number, a boolean or a buffer, but was: ".concat(typeof e))}function ne(){return String(Math.random()).substr(2)}var re=async e=>{const t=await y.Config.getRandomArrayBuffer(e);return y.BufferUtils.base64Encode(t)};function oe(e,t){const n=Math.min(t,e.length),r=e.slice(),o=[];for(let a=0;a<n;a++)o.push($(r));return o}function ae(e,t){e.then(e=>{null==t||t(null,e)}).catch(e=>{null==t||t(e)})}function se(e,t,n){return"msgpack"==n?(t||be("MsgPack"),t.decode(e)):JSON.parse(String(e))}function ie(e,t,n){return"msgpack"==n?(t||be("MsgPack"),t.encode(e,!0)):JSON.stringify(e)}function le(e){return e.map(function(e){return e&&e.toLowerCase()})}function ce(e){return e.map(function(e){return e&&e.toUpperCase()})}function ue(e){return Math.min((e+2)/3,2)}function de(){return 1-.2*Math.random()}function he(e,t){return e*ue(t)*de()}function fe(){return"undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:self}function pe(e,t){return Object.keys(e).every(n=>e[n]===t[n])&&Object.keys(t).every(n=>t[n]===e[n])}function me(e){const t=e.match(/^(\[([^?]*)(?:(.*))\])?(.+)$/);if(!t||!t.length||t.length<5)throw new E("regex match failed",400,40010);if(t[2])throw new E("cannot use a derived option with a ".concat(t[2]," channel"),400,40010);return{qualifierParam:t[3]||"",channelName:t[4]}}function ge(e){const t=y.BufferUtils,n=t.utf8Encode(e);return t.base64Encode(n)}function ve(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})}function ye(e){return new E("".concat(e," plugin not provided"),40019,400)}function be(e){throw ye(e)}async function xe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=new E(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Timeout expired",5e4,500);return Promise.race([e,new Promise((e,r)=>setTimeout(()=>r(n),t))])}function we(e){return((e,t,n)=>{var r=(e,t,o,a)=>{try{var s=n[e](t),i=(t=s.value)instanceof g,l=s.done;Promise.resolve(i?t[0]:t).then(n=>i?r("return"===e?e:"next",t[1]?{done:n.done,value:n.value}:n,o,a):o({value:n,done:l})).catch(e=>r("throw",e,o,a))}catch(c){a(c)}},o=e=>a[e]=t=>new Promise((n,o)=>r(e,t,n,o)),a={};return n=n.apply(e,t),a[Symbol.asyncIterator]=()=>a,o("next"),o("throw"),o("return"),a})(this,null,function*(){const t=[];let n=null;const r=e(e=>{if(n){const t=n;n=null,t(e)}else t.push(e)});try{for(;;)if(t.length>0)yield t.shift();else{if(n)throw new E("Concurrent next() calls are not supported",4e4,400);const e=yield new g(new Promise(e=>{n=e}));yield e}}finally{r()}})}var ke="2.17.1",Se={ENDPOINT:"main",ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["main.a.fallback.ably-realtime.com","main.b.fallback.ably-realtime.com","main.c.fallback.ably-realtime.com","main.d.fallback.ably-realtime.com","main.e.fallback.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:ke,protocolVersion:5,agent:"ably-js/"+ke,getPort:function(e,t){return t||e.tls?e.tlsPort:e.port},getHttpScheme:function(e){return e.tls?"https://":"http://"},getPrimaryDomainFromEndpoint:Ne,getEndpointFallbackHosts:Ee,getFallbackHosts:Oe,getHosts:function(e){return[e.primaryDomain].concat(Oe(e))},checkHost:Re,objectifyOptions:function(e,t,n,r,o){if(void 0===e){const e="".concat(n,t?" must be initialized with either a client options object, an Ably API key, or an Ably Token":" must be initialized with a client options object");throw S.logAction(r,S.LOG_ERROR,"".concat(n,"()"),e),new Error(e)}let a;if("string"===typeof e)if(-1==e.indexOf(":")){if(!t){const e="".concat(n," cannot be initialized with just an Ably Token; you must provide a client options object with a `plugins` property. (Set this Ably Token as the object\u2019s `token` property.)");throw S.logAction(r,S.LOG_ERROR,"".concat(n,"()"),e),new Error(e)}a={token:e}}else{if(!t){const e="".concat(n," cannot be initialized with just an Ably API key; you must provide a client options object with a `plugins` property. (Set this Ably API key as the object\u2019s `key` property.)");throw S.logAction(r,S.LOG_ERROR,"".concat(n,"()"),e),new Error(e)}a={key:e}}else a=e;return o&&(a=p(f({},a),{plugins:f(f({},o),a.plugins)})),a},normaliseOptions:function(e,t,n){const r=null!=n?n:S.defaultLogger;e.environment&&r.deprecated("The `environment` client option","Use the `endpoint` client option instead."),e.restHost&&r.deprecated("The `restHost` client option","Use the `endpoint` client option instead."),e.realtimeHost&&r.deprecated("The `realtimeHost` client option","Use the `endpoint` client option instead."),function(e){if(e.endpoint&&(e.environment||e.restHost||e.realtimeHost))throw new E("The `endpoint` option cannot be used in conjunction with the `environment`, `restHost`, or `realtimeHost` options.",40106,400);if(e.environment&&(e.restHost||e.realtimeHost))throw new E("The `environment` option cannot be used in conjunction with the `restHost`, or `realtimeHost` options.",40106,400)}(e),"function"===typeof e.recover&&!0===e.closeOnUnload&&(S.logAction(r,S.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),e.recover=void 0),"closeOnUnload"in e||(e.closeOnUnload=!e.recover),"queueMessages"in e||(e.queueMessages=!0);const o=e.endpoint||Se.ENDPOINT;e.fallbackHosts||e.restHost||e.realtimeHost||e.port||e.tlsPort||(e.fallbackHosts=Ee(e.environment||o));const a=e.environment&&"".concat(e.environment,".realtime.ably.net"),s=e.restHost||e.realtimeHost||a||Ne(o);(e.fallbackHosts||[]).concat(s).forEach(Re),e.port=e.port||Se.PORT,e.tlsPort=e.tlsPort||Se.TLS_PORT,"tls"in e||(e.tls=!0);const i=function(e){const t={};for(const n in Se.TIMEOUTS)t[n]=e[n]||Se.TIMEOUTS[n];return t}(e);e.useBinaryProtocol=!!t&&("useBinaryProtocol"in e?y.Config.supportsBinary&&e.useBinaryProtocol:y.Config.preferBinary);const l={};e.clientId&&(l["X-Ably-ClientId"]=y.BufferUtils.base64Encode(y.BufferUtils.utf8Encode(e.clientId))),"idempotentRestPublishing"in e||(e.idempotentRestPublishing=!0);let c=null,u=e.connectivityCheckUrl;if(e.connectivityCheckUrl){let[t,n]=e.connectivityCheckUrl.split("?");c=n?Y(n):{},-1===t.indexOf("://")&&(t="https://"+t),u=t}let d=e.wsConnectivityCheckUrl;return d&&-1===d.indexOf("://")&&(d="wss://"+d),p(f({},e),{primaryDomain:s,maxMessageSize:e.maxMessageSize||Se.maxMessageSize,timeouts:i,connectivityCheckParams:c,connectivityCheckUrl:u,wsConnectivityCheckUrl:d,headers:l})},defaultGetHeaders:function(e){let{format:t,protocolVersion:n=Me.protocolVersion}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{accept:_e[null!=t?t:e.useBinaryProtocol?"msgpack":"json"],"X-Ably-Version":n.toString(),"Ably-Agent":Te(e)}},defaultPostHeaders:function(e){let{format:t,protocolVersion:n=Me.protocolVersion}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=_e[null!=t?t:e.useBinaryProtocol?"msgpack":"json"];return{accept:r,"content-type":r,"X-Ably-Version":n.toString(),"Ably-Agent":Te(e)}}};function Ce(e){return e.includes(".")||e.includes("::")||"localhost"===e}function Ne(e){if(Ce(e))return e;if(e.startsWith("nonprod:")){const t=e.replace("nonprod:","");return"".concat(t,".realtime.ably-nonprod.net")}return"".concat(e,".realtime.ably.net")}function Ee(e){return Ce(e)?[]:e.startsWith("nonprod:")?je(e.replace("nonprod:",""),"ably-realtime-nonprod.com"):je(e,"ably-realtime.com")}function je(e,t){return["a","b","c","d","e"].map(n=>"".concat(e,".").concat(n,".fallback.").concat(t))}function Oe(e){const t=e.fallbackHosts,n="undefined"!==typeof e.httpMaxRetryCount?e.httpMaxRetryCount:Se.httpMaxRetryCount;return t?oe(t,n):[]}function Re(e){if("string"!==typeof e)throw new E("host must be a string; was a "+typeof e,4e4,400);if(!e.length)throw new E("host must not be zero-length",4e4,400)}function Te(e){let t=Se.agent;if(e.agents)for(var n in e.agents)t+=" "+n+"/"+e.agents[n];return t}function Ae(e,t,n){const r=n||{};if(r.cipher){e||be("Crypto");const n=e.getCipher(r.cipher,t);r.cipher=n.cipherParams,r.channelCipher=n.cipher}else"cipher"in r&&(r.cipher=void 0,r.channelCipher=null);return r}var _e={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},Me={format:"json",protocolVersion:Se.protocolVersion},Pe=Se,Ie=class e{constructor(e,t){this.logger=e,this.members=t||[]}call(e,t){for(const r of this.members)if(r)try{r(e,t)}catch(n){S.logAction(this.logger,S.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+n+"; stack = "+n.stack)}}push(){this.members.push(...arguments)}createPromise(){return new Promise((e,t)=>{this.push((n,r)=>{n?t(n):e(r)})})}resolveAll(e){this.call(null,e)}rejectAll(e){this.call(e)}static create(t,n){const r=new e(t,n);return Object.assign((e,t)=>r.call(e,t),{push:e=>r.push(e),createPromise:()=>r.createPromise(),resolveAll:e=>r.resolveAll(e),rejectAll:e=>r.rejectAll(e)})}},Le=(e=>(e.Get="get",e.Delete="delete",e.Post="post",e.Put="put",e.Patch="patch",e))(Le||{}),Fe=Le,ze=(e=>(e[e.Success=200]="Success",e[e.NoContent=204]="NoContent",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.RequestTimeout=408]="RequestTimeout",e[e.InternalServerError=500]="InternalServerError",e))(ze||{}),De=ze,Be=Math.pow(2,17);function Ue(e){return X(e)?(e.code||(403===e.statusCode?e.code=40300:(e.code=40170,e.statusCode=401)),e):new E(Z(e),e.code||40170,e.statusCode||401)}function He(e){if(!e)return"";"string"==typeof e&&(e=JSON.parse(e));const t=Object.create(null),n=W(e,!0);if(!n)return"";n.sort();for(let r=0;r<n.length;r++)t[n[r]]=e[n[r]].sort();return JSON.stringify(t)}function We(e,t){if(e.authCallback)S.logAction(t,S.LOG_MINOR,"Auth()","using token auth with authCallback");else if(e.authUrl)S.logAction(t,S.LOG_MINOR,"Auth()","using token auth with authUrl");else if(e.key)S.logAction(t,S.LOG_MINOR,"Auth()","using token auth with client-side signing");else{if(!e.tokenDetails){const e="authOptions must include valid authentication parameters";throw S.logAction(t,S.LOG_ERROR,"Auth()",e),new Error(e)}S.logAction(t,S.LOG_MINOR,"Auth()","using token auth with supplied token only")}}function qe(e){return e.useTokenAuth||!function(e){return"useTokenAuth"in e&&!e.useTokenAuth}(e)&&(e.authCallback||e.authUrl||e.token||e.tokenDetails)}var Ve=0,Ge=class{constructor(e,t){if(this.authOptions={},this.client=e,this.tokenParams=t.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,qe(t))(function(e){return!e.key&&!e.authCallback&&!e.authUrl})(t)&&S.logAction(this.logger,S.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(t.defaultTokenParams,t),We(this.authOptions,this.logger);else{if(!t.key){const e="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw S.logAction(this.logger,S.LOG_ERROR,"Auth()",e),new E(e,40160,401)}S.logAction(this.logger,S.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(t)}}get logger(){return this.client.logger}async authorize(e,t){if(t&&t.key&&this.authOptions.key!==t.key)throw new E("Unable to update auth options with incompatible key",40102,401);try{let n=await this._forceNewToken(null!=e?e:null,null!=t?t:null);return this.client.connection?new Promise((e,t)=>{this.client.connection.connectionManager.onAuthUpdated(n,(n,r)=>n?t(n):e(r))}):n}catch(n){throw this.client.connection&&n.statusCode===De.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(n),n}}async _forceNewToken(e,t){this.tokenDetails=null,this._saveTokenOptions(e,t),We(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(e,t){const n=t||this.authOptions,r=e||R(this.tokenParams);let o,a=this.client;if(n.authCallback)S.logAction(this.logger,S.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),o=n.authCallback;else if(n.authUrl)S.logAction(this.logger,S.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),o=(e,t)=>{const r=O({accept:"application/json, text/plain"},n.authHeaders),o=n.authMethod&&"post"===n.authMethod.toLowerCase();let a;const s=n.authUrl.indexOf("?");s>-1&&(a=Y(n.authUrl.slice(s)),n.authUrl=n.authUrl.slice(0,s),o||(n.authParams=O(a,n.authParams)));const i=O({},n.authParams||{},e),l=e=>{var n,r;let o=null!=(n=e.body)?n:null,a=null;if(e.error)S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+Z(e.error));else{const t=null!=(r=e.headers["content-type"])?r:null;a=Array.isArray(t)?t.join(", "):t,S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+a+"; body: "+ee(o))}if(e.error)return void t(e.error,null);if(e.unpacked)return void t(null,o);if(y.BufferUtils.isBuffer(o)&&(o=o.toString()),!a)return void t(new E("authUrl response is missing a content-type header",40170,401),null);const s=a.indexOf("application/json")>-1,i=a.indexOf("text/plain")>-1||a.indexOf("application/jwt")>-1;if(s||i){if(s){if(o.length>Be)return void t(new E("authUrl response exceeded max permitted length",40170,401),null);try{o=JSON.parse(o)}catch(l){return void t(new E("Unexpected error processing authURL response; err = "+l.message,40170,401),null)}}t(null,o,a)}else t(new E("authUrl responded with unacceptable content-type "+a+", should be either text/plain, application/jwt or application/json",40170,401),null)};if(S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+n.authUrl+"; Params: "+JSON.stringify(i)+"; method: "+(o?"POST":"GET")),o){const e=r||{};e["content-type"]="application/x-www-form-urlencoded";const t=J(i).slice(1);ae(this.client.http.doUri(Fe.Post,n.authUrl,e,t,a),(e,t)=>l(e||t))}else ae(this.client.http.doUri(Fe.Get,n.authUrl,r||{},null,i),(e,t)=>l(e||t))};else{if(!n.key){const e="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw S.logAction(this.logger,S.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new E(e,40171,403)}S.logAction(this.logger,S.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),o=(e,t)=>{ae(this.createTokenRequest(e,n),(e,n)=>t(e,null!=n?n:null))}}"capability"in r&&(r.capability=He(r.capability));const s=(e,t)=>{const r="/keys/"+e.keyName+"/requestToken",o=Pe.defaultPostHeaders(this.client.options,{format:"json"});n.requestHeaders&&O(o,n.requestHeaders),S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+r+"; Token params: "+JSON.stringify(e)),ae(this.client.http.do(Fe.Post,function(e){return a.baseUri(e)+r},o,JSON.stringify(e),null),(e,n)=>e?t(e):t(n.error,n.body,n.unpacked))};return new Promise((e,t)=>{let a=!1,i=this.client.options.timeouts.realtimeRequestTimeout,l=setTimeout(()=>{a=!0;const e="Token request callback timed out after "+i/1e3+" seconds";S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()",e),t(new E(e,40170,401))},i);o(r,(r,o,i)=>{if(a)return;if(clearTimeout(l),r)return S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+Z(r)),void t(Ue(r));if("string"===typeof o)return void(0===o.length?t(new E("Token string is empty",40170,401)):o.length>Be?t(new E("Token string exceeded max permitted length (was "+o.length+" bytes)",40170,401)):"undefined"===o||"null"===o?t(new E("Token string was literal null/undefined",40170,401)):"{"!==o[0]||i&&i.indexOf("application/jwt")>-1?e({token:o}):t(new E("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)));if("object"!==typeof o||null===o){const e="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof o;return S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()",e),void t(new E(e,40170,401))}const c=JSON.stringify(o).length;if(c>Be&&!n.suppressMaxLengthCheck)t(new E("Token request/details object exceeded max permitted stringified size (was "+c+" bytes)",40170,401));else if("issued"in o)e(o);else{if(!("keyName"in o)){const e="Expected token request callback to call back with a token string, token request object, or token details object";return S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()",e),void t(new E(e,40170,401))}s(o,(n,r,o)=>{if(n)return S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+Z(n)),void t(Ue(n));o||(r=JSON.parse(r)),S.logAction(this.logger,S.LOG_MINOR,"Auth.getToken()","token received"),e(r)})}})})}async createTokenRequest(e,t){t=t||this.authOptions,e=e||R(this.tokenParams);const n=t.key;if(!n)throw new E("No key specified",40101,403);const r=n.split(":"),o=r[0],a=r[1];if(!a)throw new E("Invalid key specified",40101,403);if(""===e.clientId)throw new E("clientId can\u2019t be an empty string",40012,400);"capability"in e&&(e.capability=He(e.capability));const s=O({keyName:o},e),i=e.clientId||"",l=e.ttl||"",c=e.capability||"";s.timestamp||(s.timestamp=await this._getTimestamp(t&&t.queryTime));const u=s.nonce||(s.nonce=("000000"+Math.floor(1e16*Math.random())).slice(-16)),d=s.timestamp,h=s.keyName+"\n"+l+"\n"+c+"\n"+i+"\n"+d+"\n"+u+"\n";return s.mac=s.mac||((e,t)=>{const n=y.BufferUtils,r=n.utf8Encode(e),o=n.utf8Encode(t),a=n.hmacSha256(r,o);return n.base64Encode(a)})(h,a),S.logAction(this.logger,S.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),s}async getAuthParams(){if("basic"==this.method)return{key:this.key};{let e=await this._ensureValidAuthCredentials(!1);if(!e)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:e.token}}}async getAuthHeaders(){if("basic"==this.method)return{authorization:"Basic "+this.basicKey};{const e=await this._ensureValidAuthCredentials(!1);if(!e)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+ge(e.token)}}}_saveBasicOptions(e){this.method="basic",this.key=e.key,this.basicKey=ge(e.key),this.authOptions=e||{},"clientId"in e&&this._userSetClientId(e.clientId)}_saveTokenOptions(e,t){this.method="token",e&&(this.tokenParams=e),t&&(t.token&&(t.tokenDetails="string"===typeof t.token?{token:t.token}:t.token),t.tokenDetails&&(this.tokenDetails=t.tokenDetails),"clientId"in t&&this._userSetClientId(t.clientId),this.authOptions=t)}async _ensureValidAuthCredentials(e){const t=this.tokenDetails;if(t){if(this._tokenClientIdMismatch(t.clientId))throw new E("Mismatch between clientId in token ("+t.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.client.isTimeOffsetSet()||!t.expires||t.expires>=this.client.getTimestampUsingOffset())return S.logAction(this.logger,S.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+t.expires),t;S.logAction(this.logger,S.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const n=(this.waitingForTokenRequest||(this.waitingForTokenRequest=Ie.create(this.logger))).createPromise();if(null!==this.currentTokenRequestId&&!e)return n;const r=this.currentTokenRequestId=Ve++;let o,a=null;try{o=await this.requestToken(this.tokenParams,this.authOptions)}catch(i){a=i}if(this.currentTokenRequestId>r)return S.logAction(this.logger,S.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),n;this.currentTokenRequestId=null;const s=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,a?(null==s||s.rejectAll(a),n):(null==s||s.resolveAll(this.tokenDetails=o),n)}_userSetClientId(e){if("string"!==typeof e&&null!==e)throw new E("clientId must be either a string or null",40012,400);if("*"===e)throw new E('Can\u2019t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const t=this._uncheckedSetClientId(e);if(t)throw t}}_uncheckedSetClientId(e){if(this._tokenClientIdMismatch(e)){const t="Unexpected clientId mismatch: client has "+this.clientId+", requested "+e,n=new E(t,40102,401);return S.logAction(this.logger,S.LOG_ERROR,"Auth._uncheckedSetClientId()",t),n}return this.clientId=this.tokenParams.clientId=e,null}_tokenClientIdMismatch(e){return!(!this.clientId||"*"===this.clientId||!e||"*"===e||this.clientId===e)}static isTokenErr(e){return e.code&&e.code>=40140&&e.code<40150}revokeTokens(e,t){return this.client.rest.revokeTokens(e,t)}async _getTimestamp(e){return this.client.getTimestamp(e||!!this.authOptions.queryTime)}};function Ke(e){const t=[];if(e)for(const n in e)t.push(n+"="+e[n]);return t.join("&")}function $e(e,t){return e+(t?"?":"")+Ke(t)}var Je=class{constructor(e){this.client=e,this.platformHttp=new y.Http(e),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var e,t;return null!=(t=null==(e=this.client)?void 0:e.logger)?t:S.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(e){const t=e.connection,n=t&&t.connectionManager.host;return n?[n].concat(Pe.getFallbackHosts(e.options)):Pe.getHosts(e.options)}async do(e,t,n,r,o){try{const a=this.client;if(!a)return{error:new E("http.do called without client",5e4,500)};const s="function"===typeof t?t:function(e){return a.baseUri(e)+t},i=a._currentFallback;if(i){if(i.validUntil>Date.now()){const l=await this.doUri(e,s(i.host),n,r,o);return l.error&&this.platformHttp.shouldFallback(l.error)?(a._currentFallback=null,this.do(e,t,n,r,o)):l}a._currentFallback=null}const l=this._getHosts(a);if(1===l.length)return this.doUri(e,s(l[0]),n,r,o);let c=null;const u=async(t,i)=>{const l=t.shift();c=null!=c?c:new Date;const d=await this.doUri(e,s(l),n,r,o);return d.error&&this.platformHttp.shouldFallback(d.error)&&t.length?Date.now()-c.getTime()>a.options.timeouts.httpMaxRetryDuration?{error:new E("Timeout for trying fallback hosts retries. Total elapsed time exceeded the ".concat(a.options.timeouts.httpMaxRetryDuration,"ms limit"),50003,500)}:u(t,!0):(i&&(a._currentFallback={host:l,validUntil:Date.now()+a.options.timeouts.fallbackRetryTimeout}),d)};return u(l)}catch(a){return{error:new E("Unexpected error in Http.do: ".concat(Z(a)),500,5e4)}}}async doUri(e,t,n,r,o){try{!function(e,t,n,r,o){o.shouldLog(S.LOG_MICRO)&&S.logActionNoStrip(o,S.LOG_MICRO,"Http."+e+"()","Sending; "+$e(t,r)+"; Body"+(y.BufferUtils.isBuffer(n)?" (Base64): "+y.BufferUtils.base64Encode(n):": "+n))}(e,t,r,o,this.logger);const a=await this.platformHttp.doUri(e,t,n,r,o);return this.logger.shouldLog(S.LOG_MICRO)&&function(e,t,n,r,o){e.error?S.logActionNoStrip(o,S.LOG_MICRO,"Http."+t+"()","Received Error; "+$e(n,r)+"; Error: "+Z(e.error)):S.logActionNoStrip(o,S.LOG_MICRO,"Http."+t+"()","Received; "+$e(n,r)+"; Headers: "+Ke(e.headers)+"; StatusCode: "+e.statusCode+"; Body"+(y.BufferUtils.isBuffer(e.body)?" (Base64): "+y.BufferUtils.base64Encode(e.body):": "+e.body))}(a,e,t,o,this.logger),a}catch(a){return{error:new E("Unexpected error in Http.doUri: ".concat(Z(a)),500,5e4)}}}};function Qe(e,t,n){let r,o,a;for(let s=0;s<e.length;s++)if(r=e[s],n&&(r=r[n]),Array.isArray(r)){for(;-1!==(o=r.indexOf(t));)r.splice(o,1);n&&0===r.length&&delete e[s][n]}else if(A(r))for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&Array.isArray(r[a])&&Qe([r],t,a)}var Ye=class{constructor(e){this.logger=e,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){const e=t[0];if("function"!==typeof e)throw new Error("EventListener.on(): Invalid arguments: "+y.Config.inspect(t));this.any.push(e)}if(2===t.length){const[e,n]=t;if("function"!==typeof n)throw new Error("EventListener.on(): Invalid arguments: "+y.Config.inspect(t));if(M(e))this.any.push(n);else if(Array.isArray(e))e.forEach(e=>{this.on(e,n)});else{if("string"!==typeof e)throw new Error("EventListener.on(): Invalid arguments: "+y.Config.inspect(t));(this.events[e]||(this.events[e]=[])).push(n)}}}off(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0==t.length||M(t[0])&&M(t[1]))return this.any=[],this.events=Object.create(null),this.anyOnce=[],void(this.eventsOnce=Object.create(null));const[r,o]=t;let a=null,s=null;if(1!==t.length&&o){if("function"!==typeof o)throw new Error("EventEmitter.off(): invalid arguments:"+y.Config.inspect(t));[s,a]=[r,o]}else"function"===typeof r?a=r:s=r;if(a&&M(s))Qe([this.any,this.events,this.anyOnce,this.eventsOnce],a);else if(Array.isArray(s))s.forEach(e=>{this.off(e,a)});else{if("string"!==typeof s)throw new Error("EventEmitter.off(): invalid arguments:"+y.Config.inspect(t));a?Qe([this.events,this.eventsOnce],a,s):(delete this.events[s],delete this.eventsOnce[s])}}listeners(e){if(e){const t=this.events[e]||[];return this.eventsOnce[e]&&Array.prototype.push.apply(t,this.eventsOnce[e]),t.length?t:null}return this.any.length?this.any:null}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o={event:e},a=[];this.anyOnce.length&&(Array.prototype.push.apply(a,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(a,this.any);const s=this.eventsOnce[e];s&&(Array.prototype.push.apply(a,s),delete this.eventsOnce[e]);const i=this.events[e];i&&Array.prototype.push.apply(a,i),a.forEach(e=>{!function(e,t,n,r){try{n.apply(t,r)}catch(o){S.logAction(e,S.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+o+"; stack = "+(o&&o.stack))}}(this.logger,o,e,n)})}once(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.length;if(0===r||1===r&&"function"!==typeof t[0]){const e=t[0];return new Promise(t=>{this.once(e,t)})}const[o,a]=t;if(1===t.length&&"function"===typeof o)this.anyOnce.push(o);else if(M(o)){if("function"!==typeof a)throw new Error("EventEmitter.once(): Invalid arguments:"+y.Config.inspect(t));this.anyOnce.push(a)}else if(Array.isArray(o)){const e=this,n=function(){const r=Array.prototype.slice.call(arguments);if(o.forEach(function(t){e.off(t,n)}),"function"!==typeof a)throw new Error("EventEmitter.once(): Invalid arguments:"+y.Config.inspect(t));a.apply(this,r)};o.forEach(function(t){e.on(t,n)})}else{if("string"!==typeof o)throw new Error("EventEmitter.once(): Invalid arguments:"+y.Config.inspect(t));const e=this.eventsOnce[o]||(this.eventsOnce[o]=[]);if(a){if("function"!==typeof a)throw new Error("EventEmitter.once(): Invalid arguments:"+y.Config.inspect(t));e.push(a)}}}async whenState(e,t){if("string"!==typeof e||"string"!==typeof t)throw new Error("whenState requires a valid state String argument");return e===t?null:this.once(e)}},Xe={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18,OBJECT:19,OBJECT_SYNC:20,ANNOTATION:21},Ze=[];Object.keys(Xe).forEach(function(e){Ze[Xe[e]]=e});var et={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,HAS_OBJECTS:128,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19,ANNOTATION_PUBLISH:1<<21,ANNOTATION_SUBSCRIBE:1<<22,OBJECT_SUBSCRIBE:1<<24,OBJECT_PUBLISH:1<<25},tt=Object.keys(et);et.MODE_ALL=et.PRESENCE|et.PUBLISH|et.SUBSCRIBE|et.PRESENCE_SUBSCRIBE|et.ANNOTATION_PUBLISH|et.ANNOTATION_SUBSCRIBE|et.OBJECT_SUBSCRIBE|et.OBJECT_PUBLISH;var nt=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE","ANNOTATION_PUBLISH","ANNOTATION_SUBSCRIBE","OBJECT_SUBSCRIBE","OBJECT_PUBLISH"];function rt(e,t,n){if(n&&n.cipher){e||be("Crypto");const r=e.getCipher(n.cipher,t);return{cipher:r.cipherParams,channelCipher:r.cipher}}return null!=n?n:{}}async function ot(e,t,n){let r=n.channelCipher,o=e,a=t?t+"/":"";y.BufferUtils.isBuffer(o)||(o=y.BufferUtils.utf8Encode(String(o)),a+="utf-8/");const s=await r.encrypt(o);return a=a+"cipher+"+r.algorithm,{data:s,encoding:a}}async function at(e,t){const{data:n,encoding:r}=st(e.data,e.encoding);return e.data=n,e.encoding=r,null!=t&&t.cipher?async function(e,t){const{data:n,encoding:r}=await ot(e.data,e.encoding,t);return e.data=n,e.encoding=r,e}(e,t):e}function st(e,t){if("string"==typeof e||y.BufferUtils.isBuffer(e)||null===e||void 0===e)return{data:e,encoding:t};if(A(e)||Array.isArray(e))return{data:JSON.stringify(e),encoding:t?t+"/json":"json"};throw new E("Data type is unsupported",40013,400)}async function it(e,t){const{data:n,encoding:r,error:o}=await lt(e.data,e.encoding,t);if(e.data=n,e.encoding=r,o)throw o}async function lt(e,t,n){const r=function(e){return e&&e.channelOptions?e:{channelOptions:e,plugins:{},baseEncodedPreviousPayload:void 0}}(n);let o,a=e,s=e,i=t;if(t){const e=t.split("/");let n,c=e.length,u="";try{for(;(n=c)>0;){const t=e[--c].match(/([-\w]+)(\+([\w-]+))?/);if(!t)break;switch(u=t[1],u){case"base64":s=y.BufferUtils.base64Decode(String(s)),n==e.length&&(a=s);continue;case"utf-8":s=y.BufferUtils.utf8Decode(s);continue;case"json":s=JSON.parse(s);continue;case"cipher":if(null!=r.channelOptions&&r.channelOptions.cipher&&r.channelOptions.channelCipher){const e=t[3],n=r.channelOptions.channelCipher;if(e!=n.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");s=await n.decrypt(s);continue}throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!r.plugins||!r.plugins.vcdiff)throw new E("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if("undefined"===typeof Uint8Array)throw new E("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let e=r.baseEncodedPreviousPayload;"string"===typeof e&&(e=y.BufferUtils.utf8Encode(e));const t=y.BufferUtils.toBuffer(e);s=y.BufferUtils.toBuffer(s),s=y.BufferUtils.arrayBufferViewToBuffer(r.plugins.vcdiff.decode(s,t)),a=s}catch(l){throw new E("Vcdiff delta decode failed with "+l,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(l){const e=l;o=new E("Error processing the ".concat(u," encoding, decoder returned \u2018").concat(e.message,"\u2019"),e.code||40013,400)}finally{i=n<=0?null:e.slice(0,n).join("/")}}return o?{error:o,data:s,encoding:i}:(r.baseEncodedPreviousPayload=a,{data:s,encoding:i})}function ct(){const e=arguments.length>0?"json":"msgpack",{data:t,encoding:n}=ut(this.data,this.encoding,e);return Object.assign({},this,{encoding:n,data:t})}function ut(e,t,n){return e&&y.BufferUtils.isBuffer(e)?"msgpack"===n?{data:y.BufferUtils.toBuffer(e),encoding:t}:{data:y.BufferUtils.base64Encode(e),encoding:t?t+"/base64":"base64"}:{data:e,encoding:t}}var dt={encryptData:ot,encodeData:st,encodeDataForWire:ut,decodeData:lt};function ht(e){const{id:t,connectionId:n,timestamp:r}=e;let o;switch(e.action){case Xe.MESSAGE:o=e.messages;break;case Xe.PRESENCE:case Xe.SYNC:o=e.presence;break;case Xe.ANNOTATION:o=e.annotations;break;case Xe.OBJECT:case Xe.OBJECT_SYNC:o=e.state;break;default:throw new E("Unexpected action "+e.action,4e4,400)}for(let a=0;a<o.length;a++){const e=o[a];e.connectionId||(e.connectionId=n),e.timestamp||(e.timestamp=r),t&&!e.id&&(e.id=t+":"+a)}}function ft(e,t){let n="["+t;for(const r in e)"data"===r?"string"==typeof e.data?n+="; data="+e.data:y.BufferUtils.isBuffer(e.data)?n+="; data (buffer)="+y.BufferUtils.base64Encode(e.data):"undefined"!==typeof e.data&&(n+="; data (json)="+JSON.stringify(e.data)):!r||"extras"!==r&&"operation"!==r?"version"===r?n+="; version="+JSON.stringify(e[r]):"annotations"===r?n+="; annotations="+JSON.stringify(e[r]):void 0!==e[r]&&(n+="; "+r+"="+e[r]):n+="; "+r+"="+JSON.stringify(e[r]);return n+="]",n}var pt=class{},mt=class{constructor(e){var t,n,r,o,a,s,i,l,c,u;this.Platform=y,this.ErrorInfo=E,this.Logger=S,this.Defaults=Pe,this.Utils=C,this.EventEmitter=Ye,this.MessageEncoding=dt,this._additionalHTTPRequestImplementations=null!=(t=e.plugins)?t:null,this.logger=new S,this.logger.setLog(e.logLevel,e.logHandler),S.logAction(this.logger,S.LOG_MICRO,"BaseClient()","initialized with clientOptions "+y.Config.inspect(e)),this._MsgPack=null!=(r=null==(n=e.plugins)?void 0:n.MsgPack)?r:null;const d=this.options=Pe.normaliseOptions(e,this._MsgPack,this.logger);if(d.key){const e=d.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!e){const e="invalid key parameter";throw S.logAction(this.logger,S.LOG_ERROR,"BaseClient()",e),new E(e,40400,404)}d.keyName=e[1],d.keySecret=e[2]}if("clientId"in d){if("string"!==typeof d.clientId&&null!==d.clientId)throw new E("clientId must be either a string or null",40012,400);if("*"===d.clientId)throw new E('Can\u2019t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}S.logAction(this.logger,S.LOG_MINOR,"BaseClient()","started; version = "+Pe.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new Je(this),this.auth=new Ge(this,d),this._rest=(null==(o=e.plugins)?void 0:o.Rest)?new e.plugins.Rest(this):null,this._Crypto=null!=(s=null==(a=e.plugins)?void 0:a.Crypto)?s:null,this.__FilteredSubscriptions=null!=(l=null==(i=e.plugins)?void 0:i.MessageInteractions)?l:null,this._Annotations=null!=(u=null==(c=e.plugins)?void 0:c.Annotations)?u:null}get rest(){return this._rest||be("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||be("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}device(){var e;return(null==(e=this.options.plugins)?void 0:e.Push)&&this.push.LocalDevice||be("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(e){return Pe.getHttpScheme(this.options)+e+":"+Pe.getPort(this.options,!1)}async stats(e){return this.rest.stats(e)}async time(e){return this.rest.time(e)}async request(e,t,n,r,o,a){return this.rest.request(e,t,n,r,o,a)}batchPublish(e){return this.rest.batchPublish(e)}batchPresence(e){return this.rest.batchPresence(e)}setLog(e){this.logger.setLog(e.level,e.handler)}async getTimestamp(e){return!this.isTimeOffsetSet()&&e?this.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.serverTimeOffset||0)}isTimeOffsetSet(){return null!==this.serverTimeOffset}};mt.Platform=y;var gt=mt,vt=class e{toJSON(){var e,t,n;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:null==(e=this.push)?void 0:e.recipient,state:null==(t=this.push)?void 0:t.state,error:null==(n=this.push)?void 0:n.error}}}toString(){var e,t,n,r;let o="[DeviceDetails";return this.id&&(o+="; id="+this.id),this.platform&&(o+="; platform="+this.platform),this.formFactor&&(o+="; formFactor="+this.formFactor),this.clientId&&(o+="; clientId="+this.clientId),this.metadata&&(o+="; metadata="+this.metadata),this.deviceIdentityToken&&(o+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(null==(e=this.push)?void 0:e.recipient)&&(o+="; push.recipient="+JSON.stringify(this.push.recipient)),(null==(t=this.push)?void 0:t.state)&&(o+="; push.state="+this.push.state),(null==(n=this.push)?void 0:n.error)&&(o+="; push.error="+JSON.stringify(this.push.error)),(null==(r=this.push)?void 0:r.metadata)&&(o+="; push.metadata="+this.push.metadata),o+="]",o}static toRequestBody(e,t,n){return ie(e,t,n)}static fromResponseBody(t,n,r){return r&&(t=se(t,n,r)),Array.isArray(t)?e.fromValuesArray(t):e.fromValues(t)}static fromValues(t){return t.error=t.error&&E.fromValues(t.error),Object.assign(new e,t)}static fromLocalDevice(t){return Object.assign(new e,t)}static fromValuesArray(t){const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r}};async function yt(e,t,n,r){return e.http.supportsAuthHeaders?r(O(await e.auth.getAuthHeaders(),t),n):r(t,O(await e.auth.getAuthParams(),n))}var bt=class e{static async get(t,n,r,o,a,s){return e.do(Fe.Get,t,n,null,r,o,a,null!=s&&s)}static async delete(t,n,r,o,a,s){return e.do(Fe.Delete,t,n,null,r,o,a,s)}static async post(t,n,r,o,a,s,i){return e.do(Fe.Post,t,n,r,o,a,s,i)}static async patch(t,n,r,o,a,s,i){return e.do(Fe.Patch,t,n,r,o,a,s,i)}static async put(t,n,r,o,a,s,i){return e.do(Fe.Put,t,n,r,o,a,s,i)}static async do(e,t,n,r,o,a,s,i){s&&((a=a||{}).envelope=s);const l=t.logger;let c=await yt(t,o,a,async function o(a,s){var i;if(l.shouldLog(S.LOG_MICRO)){let o=r;if((null==(i=a["content-type"])?void 0:i.indexOf("msgpack"))>0)try{t._MsgPack||be("MsgPack"),o=t._MsgPack.decode(r)}catch(u){S.logAction(l,S.LOG_MICRO,"Resource."+e+"()","Sending MsgPack Decoding Error: "+Z(u))}S.logAction(l,S.LOG_MICRO,"Resource."+e+"()","Sending; "+$e(n,s)+"; Body: "+o)}const c=await t.http.do(e,n,a,r,s);return c.error&&Ge.isTokenErr(c.error)?(await t.auth.authorize(null,null),yt(t,a,s,o)):{err:c.error,body:c.body,headers:c.headers,unpacked:c.unpacked,statusCode:c.statusCode}});if(s&&(c=function(e,t,n){if(e.err&&!e.body)return{err:e.err};if(e.statusCode===De.NoContent)return p(f({},e),{body:[],unpacked:!0});let r=e.body;if(!e.unpacked)try{r=se(r,t,n)}catch(i){return X(i)?{err:i}:{err:new j(Z(i),null)}}if(!r)return{err:new j("unenvelope(): Response body is missing",null)};const{statusCode:o,response:a,headers:s}=r;if(void 0===o)return p(f({},e),{body:r,unpacked:!0});if(o<200||o>=300){let t=a&&a.error||e.err;return t||(t=new Error("Error in unenveloping "+r),t.statusCode=o),{err:t,body:a,headers:s,unpacked:!0,statusCode:o}}return{err:e.err,body:a,headers:s,unpacked:!0,statusCode:o}}(c,t._MsgPack,s)),l.shouldLog(S.LOG_MICRO)&&function(e,t,n,r,o){e.err?S.logAction(o,S.LOG_MICRO,"Resource."+t+"()","Received Error; "+$e(n,r)+"; Error: "+Z(e.err)):S.logAction(o,S.LOG_MICRO,"Resource."+t+"()","Received; "+$e(n,r)+"; Headers: "+Ke(e.headers)+"; StatusCode: "+e.statusCode+"; Body: "+(y.BufferUtils.isBuffer(e.body)?" (Base64): "+y.BufferUtils.base64Encode(e.body):": "+y.Config.inspect(e.body)))}(c,e,n,a,l),i){if(c.err)throw c.err;{const e=f({},c);return delete e.err,e}}return c}};function xt(e){const t=e.match(/^\.\/(\w+)\?(.*)$/);return t&&t[2]&&Y(t[2])}var wt=class{constructor(e,t,n){this.resource=e,this.items=t,this._relParams=n}async first(){if(this.hasFirst())return this.get(this._relParams.first);throw new E("No link to the first page of results",40400,404)}async current(){if(this.hasCurrent())return this.get(this._relParams.current);throw new E("No link to the current page of results",40400,404)}async next(){return this.hasNext()?this.get(this._relParams.next):null}hasFirst(){return null!=this._relParams&&"first"in this._relParams}hasCurrent(){return null!=this._relParams&&"current"in this._relParams}hasNext(){return null!=this._relParams&&"next"in this._relParams}isLast(){return!this.hasNext()}async get(e){const t=this.resource,n=await bt.get(t.client,t.path,t.headers,e,t.envelope,!1);return t.handlePage(n)}},kt=class extends wt{constructor(e,t,n,r,o,a){super(e,t,o),this.statusCode=r,this.success=r<300&&r>=200,this.headers=n,this.errorCode=a&&a.code,this.errorMessage=a&&a.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},St=class{constructor(e,t,n,r,o,a){this.client=e,this.path=t,this.headers=n,this.envelope=null!=r?r:null,this.bodyHandler=o,this.useHttpPaginatedResponse=a||!1}get logger(){return this.client.logger}async get(e){const t=await bt.get(this.client,this.path,this.headers,e,this.envelope,!1);return this.handlePage(t)}async delete(e){const t=await bt.delete(this.client,this.path,this.headers,e,this.envelope,!1);return this.handlePage(t)}async post(e,t){const n=await bt.post(this.client,this.path,t,this.headers,e,this.envelope,!1);return this.handlePage(n)}async put(e,t){const n=await bt.put(this.client,this.path,t,this.headers,e,this.envelope,!1);return this.handlePage(n)}async patch(e,t){const n=await bt.patch(this.client,this.path,t,this.headers,e,this.envelope,!1);return this.handlePage(n)}async handlePage(e){if(e.err&&(t=e.err,n=e.body,!this.useHttpPaginatedResponse||!n&&"number"!==typeof t.code))throw S.logAction(this.logger,S.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+Z(e.err)),e.err;var t,n;let r,o,a;try{r=e.statusCode==De.NoContent?[]:await this.bodyHandler(e.body,e.headers||{},e.unpacked)}catch(s){throw e.err||s}return e.headers&&(o=e.headers.Link||e.headers.link)&&(a=function(e){"string"==typeof e&&(e=e.split(","));const t={};for(let n=0;n<e.length;n++){const r=e[n].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(r){const e=xt(r[1]);e&&(t[r[2]]=e)}}return t}(o)),this.useHttpPaginatedResponse?new kt(this,r,e.headers||{},e.statusCode,a,e.err):new wt(this,r,a)}},Ct=class e{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let e="[PushChannelSubscription";return this.channel&&(e+="; channel="+this.channel),this.deviceId&&(e+="; deviceId="+this.deviceId),this.clientId&&(e+="; clientId="+this.clientId),e+="]",e}static fromResponseBody(t,n,r){return r&&(t=se(t,n,r)),Array.isArray(t)?e.fromValuesArray(t):e.fromValues(t)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r}};Ct.toRequestBody=ie;var Nt=Ct,Et=class{constructor(e){this.client=e,this.deviceRegistrations=new jt(e),this.channelSubscriptions=new Ot(e)}async publish(e,t){const n=this.client,r=n.options.useBinaryProtocol?"msgpack":"json",o=Pe.defaultPostHeaders(n.options),a={},s=O({recipient:e},t);O(o,n.options.headers),n.options.pushFullWait&&O(a,{fullWait:"true"});const i=ie(s,n._MsgPack,r);await bt.post(n,"/push/publish",i,o,a,null,!0)}},jt=class{constructor(e){this.client=e}async save(e){const t=this.client,n=vt.fromValues(e),r=t.options.useBinaryProtocol?"msgpack":"json",o=Pe.defaultPostHeaders(t.options),a={};O(o,t.options.headers),t.options.pushFullWait&&O(a,{fullWait:"true"});const s=ie(n,t._MsgPack,r),i=await bt.put(t,"/push/deviceRegistrations/"+encodeURIComponent(e.id),s,o,a,null,!0);return vt.fromResponseBody(i.body,t._MsgPack,i.unpacked?void 0:r)}async get(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=Pe.defaultGetHeaders(t.options),o=e.id||e;if("string"!==typeof o||!o.length)throw new E("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);O(r,t.options.headers);const a=await bt.get(t,"/push/deviceRegistrations/"+encodeURIComponent(o),r,{},null,!0);return vt.fromResponseBody(a.body,t._MsgPack,a.unpacked?void 0:n)}async list(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:n,o=Pe.defaultGetHeaders(t.options);return O(o,t.options.headers),new St(t,"/push/deviceRegistrations",o,r,async function(e,r,o){return vt.fromResponseBody(e,t._MsgPack,o?void 0:n)}).get(e)}async remove(e){const t=this.client,n=Pe.defaultGetHeaders(t.options),r={},o=e.id||e;if("string"!==typeof o||!o.length)throw new E("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);O(n,t.options.headers),t.options.pushFullWait&&O(r,{fullWait:"true"}),await bt.delete(t,"/push/deviceRegistrations/"+encodeURIComponent(o),n,r,null,!0)}async removeWhere(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=Pe.defaultGetHeaders(t.options,{format:n});O(r,t.options.headers),t.options.pushFullWait&&O(e,{fullWait:"true"}),await bt.delete(t,"/push/deviceRegistrations",r,e,null,!0)}},Ot=class e{constructor(t){this.remove=e.prototype.removeWhere,this.client=t}async save(e){const t=this.client,n=Nt.fromValues(e),r=t.options.useBinaryProtocol?"msgpack":"json",o=Pe.defaultPostHeaders(t.options),a={};O(o,t.options.headers),t.options.pushFullWait&&O(a,{fullWait:"true"});const s=ie(n,t._MsgPack,r),i=await bt.post(t,"/push/channelSubscriptions",s,o,a,null,!0);return Nt.fromResponseBody(i.body,t._MsgPack,i.unpacked?void 0:r)}async list(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:n,o=Pe.defaultGetHeaders(t.options);return O(o,t.options.headers),new St(t,"/push/channelSubscriptions",o,r,async function(e,r,o){return Nt.fromResponseBody(e,t._MsgPack,o?void 0:n)}).get(e)}async removeWhere(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=Pe.defaultGetHeaders(t.options,{format:n});O(r,t.options.headers),t.options.pushFullWait&&O(e,{fullWait:"true"}),await bt.delete(t,"/push/channelSubscriptions",r,e,null,!0)}async listChannels(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:n,o=Pe.defaultGetHeaders(t.options);return O(o,t.options.headers),t.options.pushFullWait&&O(e,{fullWait:"true"}),new St(t,"/push/channels",o,r,async function(e,r,o){const a=!o&&n?se(e,t._MsgPack,n):e;for(let t=0;t<a.length;t++)a[t]=String(a[t]);return a}).get(e)}},Rt=class{constructor(e){var t;this.client=e,this.admin=new Et(e),y.Config.push&&(null==(t=e.options.plugins)?void 0:t.Push)&&(this.stateMachine=new e.options.plugins.Push.ActivationStateMachine(e),this.LocalDevice=e.options.plugins.Push.localDeviceFactory(vt))}async activate(e,t){await new Promise((n,r)=>{var o;(null==(o=this.client.options.plugins)?void 0:o.Push)?this.stateMachine?this.stateMachine.activatedCallback?r(new E("Activation already in progress",4e4,400)):(this.stateMachine.activatedCallback=e=>{e?r(e):n()},this.stateMachine.updateFailedCallback=t,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,e))):r(new E("This platform is not supported as a target of push notifications",4e4,400)):r(ye("Push"))})}async deactivate(e){await new Promise((t,n)=>{var r;(null==(r=this.client.options.plugins)?void 0:r.Push)?this.stateMachine?this.stateMachine.deactivatedCallback?n(new E("Deactivation already in progress",4e4,400)):(this.stateMachine.deactivatedCallback=e=>{e?n(e):t()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,e))):n(new E("This platform is not supported as a target of push notifications",4e4,400)):n(ye("Push"))})}},Tt=["absent","present","enter","leave","update"];async function At(e,t,n,r){const o=rt(t,e,null!=r?r:null);return Pt.fromValues(n).decode(o,e)}async function _t(e,t){return Promise.all(e.map(function(e){return async function(e,t){return Pt.fromValues(e).decode(t.channelOptions,t.logger)}(e,t)}))}var Mt=class e extends pt{isSynthesized(){return!this.id||!this.connectionId||this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const e=this.id.split(":");return{connectionId:e[0],msgSerial:parseInt(e[1],10),index:parseInt(e[2],10)}}async encode(e){return at(Object.assign(new Pt,this,{action:Tt.indexOf(this.action||"present")}),e)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}static fromData(t){return t instanceof e?t:e.fromValues({data:t})}toString(){return ft(this,"PresenceMessage")}},Pt=class e extends pt{toJSON(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ct.call(this,...t)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}async decode(e,t){const n=Object.assign(new Mt,p(f({},this),{action:Tt[this.action]}));try{await it(n,e)}catch(r){S.logAction(t,S.LOG_ERROR,"WirePresenceMessage.decode()",Z(r))}return n}toString(){return ft(this,"WirePresenceMessage")}},It=Mt,Lt=class{constructor(e){this.channel=e}get logger(){return this.channel.logger}async get(e){S.logAction(this.logger,S.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const t=this.channel.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=this.channel.client.http.supportsLinkHeaders?void 0:n,o=Pe.defaultGetHeaders(t.options);return O(o,t.options.headers),new St(t,this.channel.client.rest.presenceMixin.basePath(this),o,r,async(e,r,o)=>_t(o?e:se(e,t._MsgPack,n),this.channel)).get(e)}async history(e){return S.logAction(this.logger,S.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,e)}},Ft=["message.create","message.update","message.delete","meta","message.summary","message.append"];function zt(e){let t=0;return e.name&&(t+=e.name.length),e.clientId&&(t+=e.clientId.length),e.extras&&(t+=JSON.stringify(e.extras).length),e.data&&(t+=te(e.data)),t}async function Dt(e,t,n,r){const o=rt(t,e,null!=r?r:null);return Gt.fromValues(n).decode(o,e)}async function Bt(e,t){return Gt.fromValues(e).decode(t.channelOptions,t.logger)}async function Ut(e,t){return Promise.all(e.map(function(e){return Bt(e,t)}))}async function Ht(e,t){return Promise.all(e.map(e=>e.encode(t)))}var Wt=ie;function qt(e){let t,n=0;for(let r=0;r<e.length;r++)t=e[r],n+=t.size||(t.size=zt(t));return n}var Vt=class e extends pt{expandFields(){if(this.version||(this.version={}),!this.version.serial&&this.serial&&(this.version.serial=this.serial),!this.version.timestamp&&this.timestamp&&(this.version.timestamp=this.timestamp),this.annotations?this.annotations.summary||(this.annotations.summary={}):this.annotations={summary:{}},this.annotations&&this.annotations.summary)for(const[e,t]of Object.entries(this.annotations.summary))if(e.endsWith(":distinct.v1")||e.endsWith(":unique.v1")||e.endsWith(":multiple.v1"))for(const[,n]of Object.entries(t))n.clipped||(n.clipped=!1);else e.endsWith(":flag.v1")&&(t.clipped||(t.clipped=!1))}async encode(e){return at(Object.assign(new Gt,this,{action:Ft.indexOf(this.action||"message.create")}),e)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}toString(){return ft(this,"Message")}},Gt=class e extends pt{toJSON(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ct.call(this,...t)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}async decodeWithErr(e,t){const n=Object.assign(new Vt,p(f({},this),{action:(r=this.action,Ft[r||0]||"unknown")}));var r;let o;try{await it(n,e)}catch(a){S.logAction(t,S.LOG_ERROR,"WireMessage.decode()",Z(a)),o=a}return n.expandFields(),{decoded:n,err:o}}async decode(e,t){const{decoded:n}=await this.decodeWithErr(e,t);return n}toString(){return ft(this,"WireMessage")}},Kt=Vt,$t=class{constructor(e,t,n){var r,o;this._annotations=null,S.logAction(e.logger,S.LOG_MINOR,"RestChannel()","started; name = "+t),this.name=t,this.client=e,this.presence=new Lt(this),this.channelOptions=Ae(null!=(r=e._Crypto)?r:null,this.logger,n),(null==(o=e.options.plugins)?void 0:o.Push)&&(this._push=new e.options.plugins.Push.PushChannel(this)),e._Annotations&&(this._annotations=new e._Annotations.RestAnnotations(this))}get annotations(){return this._annotations||be("Annotations"),this._annotations}get push(){return this._push||be("Push"),this._push}get logger(){return this.client.logger}setOptions(e){var t;this.channelOptions=Ae(null!=(t=this.client._Crypto)?t:null,this.logger,e)}async history(e){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,e)}async publish(){const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];let n,r;if("string"===typeof e||null===e)n=[Kt.fromValues({name:e,data:t})],r=arguments.length<=2?void 0:arguments[2];else if(A(e))n=[Kt.fromValues(e)],r=arguments.length<=1?void 0:arguments[1];else{if(!Array.isArray(e))throw new E("The single-argument form of publish() expects a message object or an array of message objects",40013,400);n=Kt.fromValuesArray(e),r=arguments.length<=1?void 0:arguments[1]}r||(r={});const o=this.client,a=o.options,s=a.useBinaryProtocol?"msgpack":"json",i=o.options.idempotentRestPublishing,l=Pe.defaultPostHeaders(o.options);if(O(l,a.headers),i&&function(e){return e.every(function(e){return!e.id})}(n)){const e=await re(9);n.forEach(function(t,n){t.id=e+":"+n.toString()})}const c=await Ht(n,this.channelOptions),u=qt(c),d=a.maxMessageSize;if(u>d)throw new E("Maximum size of messages that can be published at once exceeded (was ".concat(u," bytes; limit is ").concat(d," bytes)"),40009,400);return this._publish(Wt(c,o._MsgPack,s),l,r)}async _publish(e,t,n){const r=this.client,o=r.options.useBinaryProtocol?"msgpack":"json",{body:a,unpacked:s}=await bt.post(r,r.rest.channelMixin.basePath(this)+"/messages",e,t,n,null,!0),i=(s?a:se(a,r._MsgPack,o))||{};return delete i.channel,delete i.messageId,i}async status(){return this.client.rest.channelMixin.status(this)}async getMessage(e){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.getMessage()","channel = "+this.name),this.client.rest.channelMixin.getMessage(this,e)}async updateMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.updateMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.update",e,t,n)}async deleteMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.deleteMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.delete",e,t,n)}async appendMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.appendMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.append",e,t,n)}async getMessageVersions(e,t){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.getMessageVersions()","channel = "+this.name),this.client.rest.channelMixin.getMessageVersions(this,e,t)}},Jt=class e{constructor(e){this.entries=e&&e.entries||void 0,this.schema=e&&e.schema||void 0,this.appId=e&&e.appId||void 0,this.inProgress=e&&e.inProgress||void 0,this.unit=e&&e.unit||void 0,this.intervalId=e&&e.intervalId||void 0}static fromValues(t){return new e(t)}},Qt=class{static basePath(e){return"/channels/"+encodeURIComponent(e.name)}static history(e,t){const n=e.client,r=n.options.useBinaryProtocol?"msgpack":"json",o=e.client.http.supportsLinkHeaders?void 0:r,a=Pe.defaultGetHeaders(n.options);return O(a,n.options.headers),new St(n,this.basePath(e)+"/messages",a,o,async function(t,o,a){return Ut(a?t:se(t,n._MsgPack,r),e)}).get(t)}static async status(e){const t=e.client.options.useBinaryProtocol?"msgpack":"json",n=Pe.defaultPostHeaders(e.client.options);return(await bt.get(e.client,this.basePath(e),n,{},t,!0)).body}static async getMessage(e,t){const n="string"===typeof t?t:t.serial;if(!n)throw new E('This message lacks a serial. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const r=e.client,o=r.options.useBinaryProtocol?"msgpack":"json",a=Pe.defaultGetHeaders(r.options);O(a,r.options.headers);const{body:s,unpacked:i}=await bt.get(r,this.basePath(e)+"/messages/"+encodeURIComponent(n),a,{},null,!0);return Bt(i?s:se(s,r._MsgPack,o),e)}static async updateDeleteMessage(e,t,n,r,o){if(!n.serial)throw new E('This message lacks a serial and cannot be updated. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const a=e.client,s=a.options.useBinaryProtocol?"msgpack":"json",i=Pe.defaultPostHeaders(a.options);O(i,a.options.headers);const l=Kt.fromValues(n);l.action=t,l.version=r;const c=await l.encode(e.channelOptions),u=Wt(c,a._MsgPack,s);let d=bt.patch;const{body:h,unpacked:f}=await d(a,this.basePath(e)+"/messages/"+encodeURIComponent(n.serial),u,i,o||{},null,!0);return(f?h:se(h,a._MsgPack,s))||{versionSerial:null}}static getMessageVersions(e,t,n){const r="string"===typeof t?t:t.serial;if(!r)throw new E('This message lacks a serial. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const o=e.client,a=o.options.useBinaryProtocol?"msgpack":"json",s=e.client.http.supportsLinkHeaders?void 0:a,i=Pe.defaultGetHeaders(o.options);return O(i,o.options.headers),new St(o,this.basePath(e)+"/messages/"+encodeURIComponent(r)+"/versions",i,s,async(t,n,r)=>Ut(r?t:se(t,o._MsgPack,a),e)).get(n||{})}},Yt=class{static basePath(e){return Qt.basePath(e.channel)+"/presence"}static async history(e,t){const n=e.channel.client,r=n.options.useBinaryProtocol?"msgpack":"json",o=e.channel.client.http.supportsLinkHeaders?void 0:r,a=Pe.defaultGetHeaders(n.options);return O(a,n.options.headers),new St(n,this.basePath(e)+"/history",a,o,async(t,o,a)=>_t(a?t:se(t,n._MsgPack,r),e.channel)).get(t)}},Xt=class{constructor(e){this.channelMixin=Qt,this.presenceMixin=Yt,this.Resource=bt,this.PaginatedResource=St,this.DeviceDetails=vt,this.PushChannelSubscription=Nt,this.client=e,this.channels=new Zt(this.client),this.push=new Rt(this.client)}async stats(e){const t=Pe.defaultGetHeaders(this.client.options),n=this.client.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:n;return O(t,this.client.options.headers),new St(this.client,"/stats",t,r,async(e,t,r)=>{const o=r?e:se(e,this.client._MsgPack,n);for(let n=0;n<o.length;n++)o[n]=Jt.fromValues(o[n]);return o}).get(e)}async time(e){const t=Pe.defaultGetHeaders(this.client.options,{format:"json"});this.client.options.headers&&O(t,this.client.options.headers);let{error:n,body:r,unpacked:o}=await this.client.http.do(Fe.Get,e=>this.client.baseUri(e)+"/time",t,null,e);if(n)throw n;o||(r=JSON.parse(r));const a=r[0];if(!a)throw new E("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=a-Date.now(),a}async request(e,t,n,r,o,a){var s;const[i,l,c]=(()=>this.client.options.useBinaryProtocol?(this.client._MsgPack||be("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"])(),u=this.client.http.supportsLinkHeaders?void 0:c;r=r||{};const d=e.toLowerCase(),h="get"==d?Pe.defaultGetHeaders(this.client.options,{format:c,protocolVersion:n}):Pe.defaultPostHeaders(this.client.options,{format:c,protocolVersion:n});"string"!==typeof o&&(o=null!=(s=i(o))?s:null),O(h,this.client.options.headers),a&&O(h,a);const f=new St(this.client,t,h,u,async function(e,t,n){return T(n?e:l(e))},!0);if(!y.Http.methods.includes(d))throw new E("Unsupported method "+d,40500,405);return y.Http.methodsWithBody.includes(d)?f[d](r,o):f[d](r)}async batchPublish(e){let t,n;Array.isArray(e)?(t=e,n=!1):(t=[e],n=!0);const r=this.client.options.useBinaryProtocol?"msgpack":"json",o=Pe.defaultPostHeaders(this.client.options);this.client.options.headers&&O(o,this.client.options.headers);const a=ie(t,this.client._MsgPack,r),s=await bt.post(this.client,"/messages",a,o,{},null,!0),i=s.unpacked?s.body:se(s.body,this.client._MsgPack,r);return n?i[0]:i}async batchPresence(e){const t=this.client.options.useBinaryProtocol?"msgpack":"json",n=Pe.defaultGetHeaders(this.client.options);this.client.options.headers&&O(n,this.client.options.headers);const r=e.join(","),o=await bt.get(this.client,"/presence",n,{channels:r},null,!0);return o.unpacked?o.body:se(o.body,this.client._MsgPack,t)}async revokeTokens(e,t){if(qe(this.client.options))throw new E("Cannot revoke tokens when using token auth",40162,401);const n=this.client.options.keyName;let r=null!=t?t:{};const o=f({targets:e.map(e=>"".concat(e.type,":").concat(e.value))},r),a=this.client.options.useBinaryProtocol?"msgpack":"json",s=Pe.defaultPostHeaders(this.client.options);this.client.options.headers&&O(s,this.client.options.headers);const i=ie(o,this.client._MsgPack,a),l=await bt.post(this.client,"/keys/".concat(n,"/revokeTokens"),i,s,{},null,!0);return l.unpacked?l.body:se(l.body,this.client._MsgPack,a)}},Zt=class{constructor(e){this.client=e,this.all=Object.create(null)}get(e,t){e=String(e);let n=this.all[e];return n?t&&n.setOptions(t):this.all[e]=n=new $t(this.client,e,t),n}release(e){delete this.all[String(e)]}},en=class extends gt{constructor(e){super(Pe.objectifyOptions(e,!1,"BaseRest",S.defaultLogger,{Rest:Xt}))}},tn={Rest:Xt},nn=class extends Kt{static async fromEncoded(e,t){return Dt(S.defaultLogger,y.Crypto,e,t)}static async fromEncodedArray(e,t){return async function(e,t,n,r){return Promise.all(n.map(function(n){return Dt(e,t,n,r)}))}(S.defaultLogger,y.Crypto,e,t)}static fromValues(e){return Kt.fromValues(e)}},rn=class extends It{static async fromEncoded(e,t){return At(S.defaultLogger,y.Crypto,e,t)}static async fromEncodedArray(e,t){return async function(e,t,n,r){return Promise.all(n.map(function(n){return At(e,t,n,r)}))}(S.defaultLogger,y.Crypto,e,t)}static fromValues(e){return It.fromValues(e)}},on=["annotation.create","annotation.delete"];async function an(e,t,n){return cn.fromValues(t).decode(n||{},e)}async function sn(e,t){return Promise.all(e.map(function(e){return async function(e,t){return cn.fromValues(e).decode(t.channelOptions,t.logger)}(e,t)}))}var ln=class e extends pt{async encode(){return at(Object.assign(new cn,this,{action:on.indexOf(this.action||"annotation.create")}),{})}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}toString(){return ft(this,"Annotation")}},cn=class e extends pt{toJSON(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ct.call(this,...t)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}async decode(e,t){const n=Object.assign(new ln,p(f({},this),{action:on[this.action]}));try{await it(n,e)}catch(r){S.logAction(t,S.LOG_ERROR,"WireAnnotation.decode()",Z(r))}return n}toString(){return ft(this,"WireAnnotation")}},un=ln,dn=class extends un{static async fromEncoded(e,t){return an(S.defaultLogger,e,t)}static async fromEncodedArray(e,t){return async function(e,t,n){return Promise.all(t.map(function(t){return an(e,t,n)}))}(S.defaultLogger,e,t)}static fromValues(e){return un.fromValues(e)}};function hn(e){let t;switch(typeof e){case"string":t=e;break;case"object":t=e.serial}if(!t||"string"!==typeof t)throw new E("First argument of annotations.publish() must be either a Message (or at least an object with a string `serial` property) or a message serial (string)",40003,400);return t}function fn(e,t){const n=hn(e);if(!t||"object"!==typeof t)throw new E("Second argument of annotations.publish() must be an object (the intended annotation to publish)",40003,400);const r=un.fromValues(t);return r.messageSerial=n,r.action||(r.action="annotation.create"),r}function pn(e,t){return e.client.rest.channelMixin.basePath(e)+"/messages/"+encodeURIComponent(t)+"/annotations"}var mn=class{constructor(e){this.channel=e}async publish(e,t){const n=fn(e,t),r=await n.encode(),o=this.channel.client,a=o.options.useBinaryProtocol?"msgpack":"json",s=Pe.defaultPostHeaders(o.options);O(s,o.options.headers);const i=ie([r],o._MsgPack,a);await bt.post(o,pn(this.channel,n.messageSerial),i,s,{},null,!0)}async delete(e,t){return t.action="annotation.delete",this.publish(e,t)}async get(e,t){const n=this.channel.client,r=hn(e),o=n.options.useBinaryProtocol?"msgpack":"json",a=n.http.supportsLinkHeaders?void 0:o,s=Pe.defaultGetHeaders(n.options);return O(s,n.options.headers),new St(n,pn(this.channel,r),s,a,async(e,t,r)=>sn(r?e:se(e,n._MsgPack,o),this.channel)).get(t)}},gn=ie;function vn(e){const t=[];if(e)for(let n=0;n<e.length;n++)t.push(e[n].toString());return"[ "+t.join(", ")+" ]"}function yn(e,t,n,r){let o,a,s,i,l;return e.error&&(o=E.fromValues(e.error)),e.messages&&(a=Gt.fromValuesArray(e.messages)),t&&e.presence&&(s=t.WirePresenceMessage.fromValuesArray(e.presence)),n&&e.annotations&&(i=n.WireAnnotation.fromValuesArray(e.annotations)),r&&e.state&&(l=r.WireObjectMessage.fromValuesArray(e.state,C,dt)),Object.assign(new kn,p(f({},e),{presence:s,messages:a,annotations:i,state:l,error:o}))}function bn(e){return t=>{var n;return yn(t,{PresenceMessage:It,WirePresenceMessage:Pt},{Annotation:un,WireAnnotation:cn,RealtimeAnnotations:On,RestAnnotations:mn},null!=(n=null==e?void 0:e.LiveObjectsPlugin)?n:null)}}function xn(e){return Object.assign(new kn,e)}function wn(e,t,n,r){let o="[ProtocolMessage";void 0!==e.action&&(o+="; action="+Ze[e.action]||0);const a=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let s;for(let i=0;i<a.length;i++)s=a[i],void 0!==e[s]&&(o+="; "+s+"="+e[s]);if(e.messages&&(o+="; messages="+vn(Gt.fromValuesArray(e.messages))),e.presence&&t&&(o+="; presence="+vn(t.WirePresenceMessage.fromValuesArray(e.presence))),e.annotations&&n&&(o+="; annotations="+vn(n.WireAnnotation.fromValuesArray(e.annotations))),e.state&&r&&(o+="; state="+vn(r.WireObjectMessage.fromValuesArray(e.state,C,dt))),e.error&&(o+="; error="+E.fromValues(e.error).toString()),e.auth&&e.auth.accessToken&&(o+="; token="+e.auth.accessToken),e.flags&&(o+="; flags="+tt.filter(e.hasFlag).join(",")),e.params){let t="";V(e.params,function(n){t.length>0&&(t+="; "),t+=n+"="+e.params[n]}),t.length>0&&(o+="; params=["+t+"]")}return o+="]",o}var kn=class{constructor(){this.hasFlag=e=>(this.flags&et[e])>0}setFlag(e){return this.flags=this.flags|et[e]}getMode(){return(this.flags||0)&et.MODE_ALL}encodeModesToFlags(e){e.forEach(e=>this.setFlag(e))}decodeModesFromFlags(){const e=[];return nt.forEach(t=>{this.hasFlag(t)&&e.push(t)}),e.length>0?e:void 0}},Sn=kn,Cn=class{constructor(e,t,n,r,o){this.previous=e,this.current=t,"attached"===t&&(this.resumed=n,this.hasBacklog=r),o&&(this.reason=o)}},Nn=function(){};function En(e){const t=e||{},{agent:n}=t;return((e,t)=>{var n={};for(var r in e)u.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&c)for(var r of c(e))t.indexOf(r)<0&&d.call(e,r)&&(n[r]=e[r]);return n})(t,["agent"])}var jn=class e extends Ye{constructor(e,t,n){var r,o,a;super(e.logger),this._annotations=null,this._mode=0,this.retryCount=0,this.history=async function(e){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const t=this.client.rest.channelMixin;if(e&&e.untilAttach){if("attached"!==this.state)throw new E("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new E("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete e.untilAttach,e.from_serial=this.properties.attachSerial}return t.history(this,e)},this.whenState=e=>Ye.prototype.whenState.call(this,e,this.state),S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel()","started; name = "+t),this.name=t,this.channelOptions=Ae(null!=(r=e._Crypto)?r:null,this.logger,n),this.client=e,this._presence=e._RealtimePresence?new e._RealtimePresence.RealtimePresence(this):null,e._Annotations&&(this._annotations=new e._Annotations.RealtimeAnnotations(this)),this.connectionManager=e.connection.connectionManager,this.state="initialized",this.subscriptions=new Ye(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(n),this.errorReason=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:e.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new Ye(this.logger),(null==(o=e.options.plugins)?void 0:o.Push)&&(this._push=new e.options.plugins.Push.PushChannel(this)),(null==(a=e.options.plugins)?void 0:a.LiveObjects)&&(this._object=new e.options.plugins.LiveObjects.RealtimeObject(this))}get presence(){return this._presence||be("RealtimePresence"),this._presence}get annotations(){return this._annotations||be("Annotations"),this._annotations}get push(){return this._push||be("Push"),this._push}get object(){return this._object||be("LiveObjects"),this._object}invalidStateError(){return new E("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(e){return"function"===typeof(e=Array.prototype.slice.call(e))[0]&&e.unshift(null),e}async setOptions(e){var t;const n=this.channelOptions,r=function(e){if(e&&"params"in e&&!A(e.params))return new E("options.params must be an object",4e4,400);if(e&&"modes"in e){if(!Array.isArray(e.modes))return new E("options.modes must be an array",4e4,400);for(let t=0;t<e.modes.length;t++){const n=e.modes[t];if(!n||"string"!==typeof n||!nt.includes(String.prototype.toUpperCase.call(n)))return new E("Invalid channel mode: "+n,4e4,400)}}}(e);if(r)throw r;if(this.channelOptions=Ae(null!=(t=this.client._Crypto)?t:null,this.logger,e),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(e,n))return this.attachImpl(),new Promise((e,t)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(n){switch(this.event){case"update":case"attached":e();break;default:t(n.reason)}})})}_shouldReattachToSetOptions(e,t){if("attached"!==this.state&&"attaching"!==this.state)return!1;if(null==e?void 0:e.params){const n=En(e.params),r=En(t.params);if(Object.keys(n).length!==Object.keys(r).length)return!0;if(!pe(r,n))return!0}return!(!(null==e?void 0:e.modes)||t.modes&&ve(e.modes,t.modes))}async publish(){const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];let n,r;if("string"===typeof e||null===e||void 0===e)n=[Kt.fromValues({name:e,data:t})],r=arguments.length<=2?void 0:arguments[2];else if(A(e))n=[Kt.fromValues(e)],r=arguments.length<=1?void 0:arguments[1];else{if(!Array.isArray(e))throw new E("The single-argument form of publish() expects a message object or an array of message objects",40013,400);n=Kt.fromValuesArray(e),r=arguments.length<=1?void 0:arguments[1]}const o=this.client.options.maxMessageSize,a=await Ht(n,this.channelOptions),s=qt(a);if(s>o)throw new E("Maximum size of messages that can be published at once exceeded (was ".concat(s," bytes; limit is ").concat(o," bytes)"),40009,400);this.throwIfUnpublishableState(),S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+this.state+", message count = "+a.length);const i=xn({action:Xe.MESSAGE,channel:this.name,messages:a,params:r?Q(r):void 0});return await this.sendMessage(i)||{serials:[]}}throwIfUnpublishableState(){if(!this.connectionManager.activeState())throw this.connectionManager.getError();if("failed"===this.state||"suspended"===this.state)throw this.invalidStateError()}onEvent(e){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const t=this.subscriptions;for(let n=0;n<e.length;n++){const r=e[n];t.emit(r.name,r)}}async attach(){return"attached"===this.state?null:new Promise((e,t)=>{this._attach(!1,null,(n,r)=>n?t(n):e(r))})}_attach(e,t,n){n||(n=e=>{e&&S.logAction(this.logger,S.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+e.toString())});const r=this.connectionManager;r.activeState()?(("attaching"!==this.state||e)&&this.requestState("attaching",t),this.once(function(e){switch(this.event){case"attached":null==n||n(null,e);break;case"detached":case"suspended":case"failed":null==n||n(e.reason||r.getError()||new E("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":null==n||n(new E("Attach request superseded by a subsequent detach request",9e4,409))}})):n(r.getError())}attachImpl(){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const e=xn({action:Xe.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this.channelOptions.modes&&e.encodeModesToFlags(ce(this.channelOptions.modes)),this._attachResume&&e.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(e.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(e).catch(Nn)}async detach(){const e=this.connectionManager;switch(this.state){case"suspended":return void this.notifyState("detached");case"detached":return;case"failed":throw new E("Unable to detach; channel state = failed",90001,400);default:if("connected"!==e.state.state)return void this.notifyState("detached");this.requestState("detaching");case"detaching":return new Promise((t,n)=>{this.once(function(r){switch(this.event){case"detached":t();break;case"attached":case"suspended":case"failed":n(r.reason||e.getError()||new E("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":n(new E("Detach request superseded by a subsequent attach request",9e4,409))}})})}}detachImpl(){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const e=xn({action:Xe.DETACH,channel:this.name});this.sendMessage(e).catch(Nn)}async subscribe(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const[o,a]=e.processListenerArgs(n);if("failed"===this.state)throw E.fromValues(this.invalidStateError());return o&&"object"===typeof o&&!Array.isArray(o)?this.client._FilteredSubscriptions.subscribeFilter(this,o,a):this.subscriptions.on(o,a),!1!==this.channelOptions.attachOnSubscribe?this.attach():null}unsubscribe(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const[a,s]=e.processListenerArgs(r);"object"===typeof a&&!s||(null==(t=this.filteredSubscriptions)?void 0:t.has(s))?this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,a,s).forEach(e=>this.subscriptions.off(e)):this.subscriptions.off(a,s)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new j("Unable to sync to channel; not attached",4e4)}const e=this.connectionManager;if(!e.activeState())throw e.getError();const t=xn({action:Xe.SYNC,channel:this.name});this.syncChannelSerial&&(t.channelSerial=this.syncChannelSerial),e.send(t)}async sendMessage(e){return new Promise((t,n)=>{this.connectionManager.send(e,this.client.options.queueMessages,(e,r)=>{e?n(e):t(r)})})}async sendPresence(e){const t=xn({action:Xe.PRESENCE,channel:this.name,presence:e});await this.sendMessage(t)}async sendState(e){const t=xn({action:Xe.OBJECT,channel:this.name,state:e});await this.sendMessage(t)}async processMessage(e){e.action!==Xe.ATTACHED&&e.action!==Xe.MESSAGE&&e.action!==Xe.PRESENCE&&e.action!==Xe.OBJECT&&e.action!==Xe.ANNOTATION||this.setChannelSerial(e.channelSerial);let t,n=!1;switch(e.action){case Xe.ATTACHED:{this.properties.attachSerial=e.channelSerial,this._mode=e.getMode(),this.params=e.params||{};const t=e.decodeModesFromFlags();this.modes=t&&le(t)||void 0;const n=e.hasFlag("RESUMED"),r=e.hasFlag("HAS_PRESENCE"),o=e.hasFlag("HAS_BACKLOG"),a=e.hasFlag("HAS_OBJECTS");if("attached"===this.state){n||(this._presence&&this._presence.onAttached(r),this._object&&this._object.onAttached(a));const t=new Cn(this.state,this.state,n,o,e.error);this._allChannelChanges.emit("update",t),n&&!this.channelOptions.updateOnAttached||this.emit("update",t)}else"detaching"===this.state?this.checkPendingState():this.notifyState("attached",e.error,n,r,o,a);break}case Xe.DETACHED:{const t=e.error?E.fromValues(e.error):new E("Channel detached",90001,404);"detaching"===this.state?this.notifyState("detached",t):"attaching"===this.state?this.notifyState("suspended",t):"attached"!==this.state&&"suspended"!==this.state||this.requestState("attaching",t);break}case Xe.SYNC:if(n=!0,t=this.syncChannelSerial=e.channelSerial,!e.presence)break;case Xe.PRESENCE:{if(!e.presence)break;ht(e);const r=this.channelOptions;if(this._presence){const o=await Promise.all(e.presence.map(e=>e.decode(r,this.logger)));this._presence.setPresence(o,n,t)}break}case Xe.OBJECT:case Xe.OBJECT_SYNC:{if(!this._object||!e.state)return;ht(e);const t=this.client.connection.connectionManager.getActiveTransportFormat(),n=e.state.map(e=>e.decode(this.client,t));e.action===Xe.OBJECT?this._object.handleObjectMessages(n):this._object.handleObjectSyncMessages(n,e.channelSerial);break}case Xe.MESSAGE:{if("attached"!==this.state)return void S.logAction(this.logger,S.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+e.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');ht(e);const t=e.messages,n=t[0],r=t[t.length-1];if(n.extras&&n.extras.delta&&n.extras.delta.from!==this._lastPayload.messageId){const t='Delta message decode failure - previous message not available for message "'+e.id+'" on this channel "'+this.name+'".';S.logAction(this.logger,S.LOG_ERROR,"RealtimeChannel.processMessage()",t),this._startDecodeFailureRecovery(new E(t,40018,400));break}let o=[];for(let e=0;e<t.length;e++){const{decoded:n,err:r}=await t[e].decodeWithErr(this._decodingContext,this.logger);if(o[e]=n,r)switch(r.code){case 40018:return void this._startDecodeFailureRecovery(r);case 40019:case 40021:return void this.notifyState("failed",r)}}this._lastPayload.messageId=r.id,this._lastPayload.protocolMessageChannelSerial=e.channelSerial,this.onEvent(o);break}case Xe.ANNOTATION:{ht(e);const t=this.channelOptions;if(this._annotations){const n=await Promise.all((e.annotations||[]).map(e=>e.decode(t,this.logger)));this._annotations._processIncoming(n)}break}case Xe.ERROR:{const t=e.error;t&&80016==t.code?this.checkPendingState():this.notifyState("failed",E.fromValues(t));break}default:S.logAction(this.logger,S.LOG_MAJOR,"RealtimeChannel.processMessage()","Protocol error: unrecognised message action ("+e.action+")")}}_startDecodeFailureRecovery(e){this._lastPayload.decodeFailureRecoveryInProgress||(S.logAction(this.logger,S.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,e,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(e,t,n,r,o,a){if(S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+e),this.clearStateTimer(),["detached","suspended","failed"].includes(e)&&(this.properties.channelSerial=null),e===this.state)return;this._presence&&this._presence.actOnChannelState(e,r,t),this._object&&this._object.actOnChannelState(e,a),"suspended"===e&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),t&&(this.errorReason=t);const s=new Cn(this.state,e,n,o,t),i='Channel state for channel "'+this.name+'"',l=e+(t?"; reason: "+t:"");"failed"===e?S.logAction(this.logger,S.LOG_ERROR,i,l):S.logAction(this.logger,S.LOG_MAJOR,i,l),"attaching"!==e&&"suspended"!==e&&(this.retryCount=0),"attached"===e&&this.onAttached(),"attached"===e?this._attachResume=!0:"detaching"!==e&&"failed"!==e||(this._attachResume=!1),this.state=e,this._allChannelChanges.emit(e,s),this.emit(e,s)}requestState(e,t){S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+e),this.notifyState(e,t),this.checkPendingState()}checkPendingState(){if(this.connectionManager.state.sendEvents)switch(S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync()}else S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state)}timeoutPendingState(){switch(this.state){case"attaching":{const e=new E("Channel attach timed out",90007,408);this.notifyState("suspended",e);break}case"detaching":{const e=new E("Channel detach timed out",90007,408);this.notifyState("attached",e);break}default:this.checkPendingState()}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const e=this.stateTimer;e&&(clearTimeout(e),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const e=he(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{"suspended"===this.state&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},e)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const e=this.state;return"initialized"===e||"detached"===e||"failed"===e?null:new E("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+e,90001,400)}setChannelSerial(e){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+e+"; previous = "+this.properties.channelSerial),e&&(this.properties.channelSerial=e)}async status(){return this.client.rest.channelMixin.status(this)}async getMessage(e){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.getMessage()","channel = "+this.name),this.client.rest.channelMixin.getMessage(this,e)}async updateMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.updateMessage()","channel = "+this.name),this.sendUpdate(e,"message.update",t,n)}async deleteMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.deleteMessage()","channel = "+this.name),this.sendUpdate(e,"message.delete",t,n)}async appendMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.appendMessage()","channel = "+this.name),this.sendUpdate(e,"message.append",t,n)}async sendUpdate(e,t,n,r){var o,a;if(!e.serial)throw new E('This message lacks a serial and cannot be updated. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);this.throwIfUnpublishableState();const s=Kt.fromValues(p(f({},e),{action:t,version:n})),i=await s.encode(this.channelOptions),l=xn({action:Xe.MESSAGE,channel:this.name,messages:[i],params:r?Q(r):void 0}),c=await this.sendMessage(l);return{versionSerial:null!=(a=null==(o=null==c?void 0:c.serials)?void 0:o[0])?a:null}}async getMessageVersions(e,t){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.getMessageVersions()","channel = "+this.name),this.client.rest.channelMixin.getMessageVersions(this,e,t)}async ensureAttached(){switch(this.state){case"attached":case"suspended":break;case"initialized":case"detached":case"detaching":case"attaching":await this.attach();break;default:throw E.fromValues(this.invalidStateError())}}},On=class{constructor(e){this.channel=e,this.logger=e.logger,this.subscriptions=new Ye(this.logger)}async publish(e,t){const n=this.channel.name,r=fn(e,t),o=await r.encode();this.channel.throwIfUnpublishableState(),S.logAction(this.logger,S.LOG_MICRO,"RealtimeAnnotations.publish()","channelName = "+n+", sending annotation with messageSerial = "+r.messageSerial+", type = "+r.type);const a=xn({action:Xe.ANNOTATION,channel:n,annotations:[o]});await this.channel.sendMessage(a)}async delete(e,t){t.action="annotation.delete",await this.publish(e,t)}async subscribe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=jn.processListenerArgs(t),o=r[0],a=r[1],s=this.channel;if("failed"===s.state)throw E.fromValues(s.invalidStateError());if(this.subscriptions.on(o,a),!1!==this.channel.channelOptions.attachOnSubscribe&&await s.attach(),0===("attached"===this.channel.state&&this.channel._mode&et.ANNOTATION_SUBSCRIBE))throw new E("You are trying to add an annotation listener, but you haven't requested the annotation_subscribe channel mode in ChannelOptions, so this won't do anything (we only deliver annotations to clients who have explicitly requested them)",93001,400)}unsubscribe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=jn.processListenerArgs(t),o=r[0],a=r[1];this.subscriptions.off(o,a)}_processIncoming(e){for(const t of e)this.subscriptions.emit(t.type||"",t)}async get(e,t){return mn.prototype.get.call(this,e,t)}},Rn=class e extends en{constructor(t){var n,r;if(!e._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(Pe.objectifyOptions(t,!0,"Rest",S.defaultLogger,p(f({},tn),{Crypto:null!=(n=e.Crypto)?n:void 0,MsgPack:null!=(r=e._MsgPack)?r:void 0,Annotations:{Annotation:un,WireAnnotation:cn,RealtimeAnnotations:On,RestAnnotations:mn}})))}static get Crypto(){if(null===this._Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(e){this._Crypto=e}};Rn._Crypto=null,Rn.Message=nn,Rn.PresenceMessage=rn,Rn.Annotation=dn,Rn._MsgPack=null,Rn._Http=Je;var Tn,An,_n=Rn,Mn=class extends Ye{constructor(e){super(e),this.messages=[]}count(){return this.messages.length}push(e){this.messages.push(e)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(e){this.messages.push.apply(this.messages,e)}prepend(e){this.messages.unshift.apply(this.messages,e)}completeMessages(e,t,n){S.logAction(this.logger,S.LOG_MICRO,"MessageQueue.completeMessages()","all"==e?"(all)":"serial = "+e.serial+"; count = "+e.count),t=t||null;const r=this.messages;if(0===r.length)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");let o=[];if("all"===e)o=r.splice(0);else{const t=r[0];if(t){const n=t.message.msgSerial,a=e.serial+e.count;a>n&&(o=r.splice(0,a-n))}}for(let a=0;a<o.length;a++){const e=o[a],r=null==n?void 0:n[a];e.callback(t,r)}0==r.length&&this.emit("idle")}completeAllMessages(e){this.completeMessages("all",e)}resetSendAttempted(){for(let e of this.messages)e.sendAttempted=!1}clear(){S.logAction(this.logger,S.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},Pn=class{constructor(e,t){this.message=e,this.callback=t,this.merged=!1;const n=e.action;this.sendAttempted=!1,this.ackRequired="number"===typeof n&&[Xe.MESSAGE,Xe.PRESENCE,Xe.ANNOTATION,Xe.OBJECT].includes(n)}},In=class extends Ye{constructor(e){super(e.logger),this.transport=e,this.messageQueue=new Mn(this.logger),e.on("ack",(e,t,n)=>{this.onAck(e,t,n)}),e.on("nack",(e,t,n)=>{this.onNack(e,t,n)})}onAck(e,t,n){S.logAction(this.logger,S.LOG_MICRO,"Protocol.onAck()","serial = "+e+"; count = "+t),this.messageQueue.completeMessages({serial:e,count:t},null,n)}onNack(e,t,n){S.logAction(this.logger,S.LOG_ERROR,"Protocol.onNack()","serial = "+e+"; count = "+t+"; err = "+Z(n)),n||(n=new E("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages({serial:e,count:t},n)}onceIdle(e){const t=this.messageQueue;0!==t.count()?t.once("idle",e):e()}send(e){e.ackRequired&&this.messageQueue.push(e),this.logger.shouldLog(S.LOG_MICRO)&&S.logActionNoStrip(this.logger,S.LOG_MICRO,"Protocol.send()","sending msg; "+wn(e.message,this.transport.connectionManager.realtime._RealtimePresence,this.transport.connectionManager.realtime._Annotations,this.transport.connectionManager.realtime._liveObjectsPlugin)),e.sendAttempted=!0,this.transport.send(e.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const e=this.transport;this.onceIdle(function(){e.disconnect()})}},Ln=class{constructor(e,t,n,r){this.previous=e,this.current=t,n&&(this.retryIn=n),r&&(this.reason=r)}},Fn={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},zn={disconnected:()=>E.fromValues({statusCode:400,code:Fn.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>E.fromValues({statusCode:400,code:Fn.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>E.fromValues({statusCode:400,code:Fn.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>E.fromValues({statusCode:400,code:Fn.CLOSING,message:"Connection closing"}),closed:()=>E.fromValues({statusCode:400,code:Fn.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>E.fromValues({statusCode:500,code:Fn.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>E.fromValues({statusCode:500,code:Fn.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})},Dn=xn({action:Xe.CLOSE}),Bn=xn({action:Xe.DISCONNECT}),Un=class extends Ye{constructor(e,t,n,r){super(e.logger),r&&(n.format=void 0,n.heartbeats=!0),this.connectionManager=e,this.auth=t,this.params=n,this.timeouts=n.options.timeouts,this.format=n.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",zn.closed())}disconnect(e){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",e||zn.disconnected())}fail(e){this.isConnected&&this.requestDisconnect(),this.finish("failed",e||zn.failed())}finish(e,t){var n;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout(null!=(n=this.idleTimer)?n:void 0),this.idleTimer=null,this.emit(e,t),this.dispose())}onProtocolMessage(e){switch(this.logger.shouldLog(S.LOG_MICRO)&&S.logActionNoStrip(this.logger,S.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+wn(e,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._liveObjectsPlugin)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),e.action){case Xe.HEARTBEAT:S.logActionNoStrip(this.logger,S.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",e.id);break;case Xe.CONNECTED:this.onConnect(e),this.emit("connected",e.error,e.connectionId,e.connectionDetails,e);break;case Xe.CLOSED:this.onClose(e);break;case Xe.DISCONNECTED:this.onDisconnect(e);break;case Xe.ACK:this.emit("ack",e.msgSerial,e.count,e.res);break;case Xe.NACK:this.emit("nack",e.msgSerial,e.count,e.error);break;case Xe.SYNC:this.connectionManager.onChannelMessage(e,this);break;case Xe.ACTIVATE:break;case Xe.AUTH:ae(this.auth.authorize(),e=>{e&&S.logAction(this.logger,S.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+Z(e))});break;case Xe.ERROR:if(S.logAction(this.logger,S.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+y.Config.inspect(e.error)+(e.channel?", channel: "+e.channel:"")),void 0===e.channel){this.onFatalError(e);break}this.connectionManager.onChannelMessage(e,this);break;default:this.connectionManager.onChannelMessage(e,this)}}onConnect(e){if(this.isConnected=!0,!e.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const t=e.connectionDetails.maxIdleInterval;t&&(this.maxIdleInterval=t+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(e){const t=e&&e.error;S.logAction(this.logger,S.LOG_MINOR,"Transport.onDisconnect()","err = "+Z(t)),this.finish("disconnected",t)}onFatalError(e){const t=e&&e.error;S.logAction(this.logger,S.LOG_MINOR,"Transport.onFatalError()","err = "+Z(t)),this.finish("failed",t)}onClose(e){const t=e&&e.error;S.logAction(this.logger,S.LOG_MINOR,"Transport.onClose()","err = "+Z(t)),this.finish("closed",t)}requestClose(){S.logAction(this.logger,S.LOG_MINOR,"Transport.requestClose()",""),this.send(Dn)}requestDisconnect(){S.logAction(this.logger,S.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(Bn)}ping(e){const t={action:Xe.HEARTBEAT};e&&(t.id=e),this.send(xn(t))}dispose(){S.logAction(this.logger,S.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(e){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},e))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const e=Date.now()-this.lastActivity,t=this.maxIdleInterval-e;if(t<=0){const t="No activity seen from realtime in "+e+"ms; assuming connection has dropped";S.logAction(this.logger,S.LOG_ERROR,"Transport.onIdleTimerExpire()",t),this.disconnect(new E(t,80003,408))}else this.setIdleTimer(t+100)}static tryConnect(e,t,n,r,o){const a=new e(t,n,r);let s;const i=function(e){clearTimeout(s),o({event:this.event,error:e})},l=t.options.timeouts.realtimeRequestTimeout;return s=setTimeout(()=>{a.off(["preconnect","disconnected","failed"]),a.dispose(),i.call({event:"disconnected"},new E("Timeout waiting for transport to indicate itself viable",5e4,500))},l),a.on(["failed","disconnected"],i),a.on("preconnect",function(){S.logAction(t.logger,S.LOG_MINOR,"Transport.tryConnect()","viable transport "+a),clearTimeout(s),a.off(["failed","disconnected"],i),o(null,a)}),a.connect(),a}static isAvailable(){throw new E("isAvailable not implemented for transport",5e4,500)}};(An=Tn||(Tn={})).WebSocket="web_socket",An.Comet="comet",An.XhrPolling="xhr_polling";var Hn="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:self,Wn=()=>{var e;return"undefined"!==typeof y.WebStorage&&(null==(e=y.WebStorage)?void 0:e.localSupported)},qn=()=>{var e;return"undefined"!==typeof y.WebStorage&&(null==(e=y.WebStorage)?void 0:e.sessionSupported)},Vn=function(){},Gn="ably-transport-preference";function Kn(e){try{return JSON.parse(e)}catch(t){return null}}var $n=class{constructor(e,t,n,r){this.options=e,this.host=t,this.mode=n,this.connectionKey=r,this.format=e.useBinaryProtocol?"msgpack":"json"}getConnectParams(e){const t=e?R(e):{},n=this.options;switch(this.mode){case"resume":t.resume=this.connectionKey;break;case"recover":{const e=Kn(n.recover);e&&(t.recover=e.connectionKey);break}}return void 0!==n.clientId&&(t.clientId=n.clientId),!1===n.echoMessages&&(t.echo="false"),void 0!==this.format&&(t.format=this.format),void 0!==this.stream&&(t.stream=this.stream),void 0!==this.heartbeats&&(t.heartbeats=this.heartbeats),t.v=Pe.protocolVersion,t.agent=Te(this.options),void 0!==n.transportParams&&O(t,n.transportParams),t}toString(){let e="[mode="+this.mode;return this.host&&(e+=",host="+this.host),this.connectionKey&&(e+=",connectionKey="+this.connectionKey),this.format&&(e+=",format="+this.format),e+="]",e}},Jn=class e extends Ye{constructor(e,t){super(e.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=e,this.initTransports(),this.options=t;const n=t.timeouts,r=n.webSocketConnectTimeout+n.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:r,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:n.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:n.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:n.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new Mn(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=n.connectionStateTtl,this.maxIdleInterval=null,this.transports=z(t.transports||Pe.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(Tn.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(Tn.XhrPolling)?this.baseTransport=Tn.XhrPolling:this.transports.includes(Tn.Comet)&&(this.baseTransport=Tn.Comet),this.domains=Pe.getHosts(t),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,S.logAction(this.logger,S.LOG_MINOR,"Realtime.ConnectionManager()","started"),S.logAction(this.logger,S.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(t.transports||Pe.defaultTransports)+"]"),S.logAction(this.logger,S.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),S.logAction(this.logger,S.LOG_MICRO,"Realtime.ConnectionManager()","http domains = ["+this.domains+"]"),!this.transports.length){const e="no requested transports available";throw S.logAction(this.logger,S.LOG_ERROR,"realtime.ConnectionManager()",e),new Error(e)}const o=y.Config.addEventListener;o&&(qn()&&"function"===typeof t.recover&&o("beforeunload",this.persistConnection.bind(this)),!0===t.closeOnUnload&&o("beforeunload",()=>{S.logAction(this.logger,S.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),o("online",()=>{var e;this.state==this.states.disconnected||this.state==this.states.suspended?(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager caught browser \u2018online\u2019 event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&(null==(e=this.pendingTransport)||e.off(),this.disconnectAllTransports(),this.startConnect())}),o("offline",()=>{this.state==this.states.connected&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager caught browser \u2018offline\u2019 event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(e){const t={supportedTransports:{}};return this.initTransports(e,t),t.supportedTransports}static initTransports(e,t){const n=f(f({},y.Transports.bundledImplementations),e);[Tn.WebSocket,...y.Transports.order].forEach(e=>{const r=n[e];r&&r.isAvailable()&&(t.supportedTransports[e]=r)})}initTransports(){e.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(e,t){return new $n(this.options,e,t,this.connectionKey)}getTransportParams(e){(e=>{if(this.connectionKey)return void e("resume");if("string"===typeof this.options.recover)return void e("recover");const t=this.options.recover,n=this.getSessionRecoverData(),r=this.sessionRecoveryName();if(n&&"function"===typeof t)return S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+r+")"),void t(n,t=>{t?(this.options.recover=n.recoveryKey,e("recover")):e("clean")});e("clean")})(t=>{const n=this.createTransportParams(null,t);if("recover"===t){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const e=Kn(this.options.recover);e&&(this.msgSerial=e.msgSerial)}else S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+n.toString());e(n)})}tryATransport(e,t,n){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+t),this.proposedTransport=Un.tryConnect(this.supportedTransports[t],this,this.realtime.auth,e,(r,o)=>{const a=this.state;return a==this.states.closing||a==this.states.closed||a==this.states.failed?(o&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+a.state+" while we were attempting the transport; closing "+o),o.close()),void n(!0)):r?(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+t+" "+r.event+", err: "+r.error.toString()),void(!Ge.isTokenErr(r.error)||this.errorReason&&Ge.isTokenErr(this.errorReason)?"failed"===r.event?(this.notifyState({state:"failed",error:r.error}),n(!0)):"disconnected"===r.event&&(!(s=r.error).statusCode||!s.code||s.statusCode>=500||Object.values(Fn).includes(s.code)?n(!1):(this.notifyState({state:this.states.connecting.failState,error:r.error}),n(!0))):(this.errorReason=r.error,ae(this.realtime.auth._forceNewToken(null,null),r=>{r?this.actOnErrorFromAuthorize(r):this.tryATransport(e,t,n)})))):(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+t+"; setting pending"),this.setTransportPending(o,e),void n(null,o));var s})}setTransportPending(e,t){const n=t.mode;S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+e+"; mode = "+n),this.pendingTransport=e,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),e.once("connected",(t,r,o)=>{this.activateTransport(t,e,r,o),"recover"===n&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const r=this;e.on(["disconnected","closed","failed"],function(t){r.deactivateTransport(e,this.event,t)}),this.emit("transport.pending",e)}activateTransport(e,t,n,r){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+t),e&&S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+e),n&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+n),r&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(r)),this.persistTransportPreference(t);const o=this.state,a=this.states.connected.state;if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+o.state),o.state==this.states.closing.state||o.state==this.states.closed.state||o.state==this.states.failed.state)return S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),t.disconnect(),!1;if(delete this.pendingTransport,!t.isConnected)return S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+t+" since it appears to no longer be connected"),!1;const s=this.activeProtocol;this.activeProtocol=new In(t),this.host=t.params.host;const i=r.connectionKey;if(i&&this.connectionKey!=i&&this.setConnection(n,r,!!e),this.onConnectionDetailsUpdate(r,t),y.Config.nextTick(()=>{t.on("connected",(e,n,r)=>{this.onConnectionDetailsUpdate(r,t),this.emit("update",new Ln(a,a,null,e))})}),o.state===this.states.connected.state?e&&(this.errorReason=this.realtime.connection.errorReason=e,this.emit("update",new Ln(a,a,null,e))):(this.notifyState({state:"connected",error:e}),this.errorReason=this.realtime.connection.errorReason=e||null),this.emit("transport.active",t),s)if(s.messageQueue.count()>0&&S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+s.transport.shortName+", new one is "+t.shortName+") finishing with "+s.messageQueue.count()+" messages still pending"),s.transport===t){const e="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+t.shortName+"; stack = "+(new Error).stack;S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.activateTransport()",e)}else s.finish();return!0}deactivateTransport(e,t,n){const r=this.activeProtocol,o=r&&r.getTransport()===e,a=e===this.pendingTransport,s=this.noTransportsScheduledForActivation();if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+e),S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+t+(o?"; was active":a?"; was pending":"")+(s?"":"; another transport is scheduled for activation")),n&&n.message&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+n.message),o&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(r.getPendingMessages()),r.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",e),o&&s||o&&"failed"===t||"closed"===t||null===r&&a){if("disconnected"===t&&n&&n.statusCode>500&&this.domains.length>1)return this.unpersistTransportPreference(),this.forceFallbackHost=!0,void this.notifyState({state:t,error:n,retryImmediately:!0});const e="failed"===t&&Ge.isTokenErr(n)?"disconnected":t;return void this.notifyState({state:e,error:n})}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(e,t,n){const r=this.connectionId;(r&&r!==e||!r&&n)&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==e&&S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=e,this.realtime.connection.key=this.connectionKey=t.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.queuedMessages.resetSendAttempted(),this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const e=Date.now()-this.lastActivity;e>this.connectionStateTtl+this.maxIdleInterval&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+e+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(qn()){const e=this.createRecoveryKey();e&&this.setSessionRecoverData({recoveryKey:e,disconnectedAt:Date.now(),location:Hn.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getActiveTransportFormat(){var e;return null==(e=this.activeProtocol)?void 0:e.getTransport().format}getError(){if(this.errorReason){const e=j.fromValues(this.errorReason);return e.cause=this.errorReason,e}return this.getStateError()}getStateError(){var e,t;return null==(t=(e=zn)[this.state.state])?void 0:t.call(e)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(e){const t="Connection state",n=e.current+(e.reason?"; reason: "+e.reason:"");"failed"===e.current?S.logAction(this.logger,S.LOG_ERROR,t,n):S.logAction(this.logger,S.LOG_MAJOR,t,n),S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+e.current+"; reason = "+(e.reason&&e.reason.message));const r=this.state=this.states[e.current];e.reason&&(this.errorReason=e.reason,this.realtime.connection.errorReason=e.reason),(r.terminal||"suspended"===r.state)&&this.clearConnection(),this.emit("connectionstate",e)}startTransitionTimer(e){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+e.state),this.transitionTimer&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager "+e.state+" timer expired","requesting new state: "+e.failState),this.notifyState({state:e.failState}))},e.retryDelay)}cancelTransitionTimer(){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(e){"disconnected"!==e&&"suspended"!==e&&"connecting"!==e&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(e){this.retryTimer=setTimeout(()=>{S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},e)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then(()=>{S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{S.logAction(this.logger,S.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&ae(this.realtime.http.checkConnectivity(),(e,t)=>{e||!t?(S.logAction(this.logger,S.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new E("Unable to connect (network unreachable)",80003,404)})):S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(e){this.webSocketGiveUpTimer=setTimeout(()=>{var t,n;this.wsCheckResult||(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,null==(t=this.proposedTransport)||t.dispose(),null==(n=this.pendingTransport)||n.dispose(),this.connectBase(e,++this.connectCounter)):S.logAction(this.logger,S.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(e){var t,n;const r=e.state,o="disconnected"===r&&(this.state===this.states.connected||e.retryImmediately||this.state===this.states.connecting&&e.error&&Ge.isTokenErr(e.error)&&!(this.errorReason&&Ge.isTokenErr(this.errorReason)));if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+r+(o?"; will retry connection immediately":"")),r==this.state.state)return;if(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(e.state),"suspended"!==r&&"connected"!==r||(this.disconnectedRetryCount=0),this.state.terminal)return;const a=this.states[e.state];let s=a.retryDelay;"disconnected"===a.state&&(this.disconnectedRetryCount++,s=he(a.retryDelay,this.disconnectedRetryCount));const i=new Ln(this.state.state,a.state,s,e.error||(null==(n=(t=zn)[a.state])?void 0:n.call(t)));if(o){const e=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},t=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;t&&t<1e3?(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+t+"ms ago, waiting another "+(1e3-t)+"ms before trying again"),setTimeout(e,1e3-t)):y.Config.nextTick(e)}else"disconnected"!==r&&"suspended"!==r||this.startRetryTimer(s);("disconnected"===r&&!o||"suspended"===r||a.terminal)&&y.Config.nextTick(()=>{this.disconnectAllTransports()}),"connected"!=r||this.activeProtocol||S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(i),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(r,i.reason),this.failQueuedMessages(i.reason))}requestState(e){var t,n;const r=e.state;if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+r+"; current state: "+this.state.state),r==this.state.state)return;if(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(r),"connecting"==r&&"connected"==this.state.state)return;if("closing"==r&&"closed"==this.state.state)return;const o=this.states[r],a=new Ln(this.state.state,o.state,null,e.error||(null==(n=(t=zn)[o.state])?void 0:n.call(t)));this.enactStateChange(a),"connecting"==r&&y.Config.nextTick(()=>{this.startConnect()}),"closing"==r&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting)return void S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);const e=this.realtime.auth,t=++this.connectCounter,n=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(e=>{if("recover"===e.mode&&e.options.recover){const t=Kn(e.options.recover);t&&this.realtime.channels.recoverChannels(t.channelSerials)}t===this.connectCounter&&this.connectImpl(e,t)})};if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),"basic"===e.method)n();else{const r=e=>{t===this.connectCounter&&(e?this.actOnErrorFromAuthorize(e):n())};this.errorReason&&Ge.isTokenErr(this.errorReason)?ae(e._forceNewToken(null,null),r):ae(e._ensureValidAuthCredentials(!1),r)}}connectImpl(e,t){const n=this.state.state;if(n!==this.states.connecting.state)return void S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+n);const r=this.getTransportPreference();r&&r===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(e,++this.connectCounter))}).catch(Vn),r&&r===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(e,t):this.connectWs(e,t)}connectWs(e,t){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(e),this.tryTransportWithFallbacks("web_socket",e,!0,t,()=>!1!==this.wsCheckResult&&!this.abandonedWebSocket)}connectBase(e,t){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,e,!1,t,()=>!0):this.notifyState({state:"disconnected",error:new E("No transports left to try",8e4,404)})}tryTransportWithFallbacks(e,t,n,r,o){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",e);const a=e=>{this.notifyState({state:this.states.connecting.failState,error:e})},s=this.domains.slice(),i=(e,t)=>{r===this.connectCounter&&(o()?t||e||c():t&&t.dispose())},l=s.shift();if(!l)return void a(new E("Unable to connect (no available host)",80003,404));t.host=l;const c=()=>{s.length?this.realtime.http.checkConnectivity?ae(this.realtime.http.checkConnectivity(),(n,l)=>{r===this.connectCounter&&o()&&(n?a(n):l?(t.host=$(s),this.tryATransport(t,e,i)):a(new E("Unable to connect (network unreachable)",80003,404)))}):a(new j("Internal error: Http.checkConnectivity not set",null,500)):a(new E("Unable to connect (and no more fallback hosts to try)",80003,404))};if(this.forceFallbackHost&&s.length)return this.forceFallbackHost=!1,void c();this.tryATransport(t,e,i)}closeImpl(){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(e,t){var n;switch(this.state.state){case"connected":{S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const r=null==(n=this.activeProtocol)?void 0:n.getTransport();r&&r.onAuthUpdated&&r.onAuthUpdated(e);const o=xn({action:Xe.AUTH,auth:{accessToken:e.token}});this.send(o);const a=()=>{this.off(s),t(null,e)},s=e=>{"failed"===e.current&&(this.off(a),this.off(s),t(e.reason||this.getStateError()))};this.once("connectiondetails",a),this.on("connectionstate",s);break}case"connecting":S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const n=r=>{switch(r.current){case"connected":this.off(n),t(null,e);break;case"failed":case"closed":case"suspended":this.off(n),t(r.reason||this.getStateError())}};this.on("connectionstate",n),"connecting"===this.state.state?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(e,t,n){n=n||Vn;const r=this.state;if(r.sendEvents)return S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.send()","sending event"),void this.sendImpl(new Pn(e,n));if(!t||!r.queueEvents){const e="rejecting event, queueEvent was "+t+", state was "+r.state;return S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.send()",e),void n(this.errorReason||new E(e,9e4,400))}this.logger.shouldLog(S.LOG_MICRO)&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+wn(e,this.realtime._RealtimePresence,this.realtime._Annotations,this.realtime._liveObjectsPlugin)),this.queue(e,n)}sendImpl(e){const t=e.message;e.ackRequired&&!e.sendAttempted&&(t.msgSerial=this.msgSerial++);try{this.activeProtocol.send(e)}catch(n){S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+n.stack)}}queue(e,t){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.queue()","queueing event"),this.queuedMessages.push(new Pn(e,t))}sendQueuedMessages(){let e;for(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");e=this.queuedMessages.shift();)this.sendImpl(e)}queuePendingMessages(e){e&&e.length&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+e.length+" pending messages"),this.queuedMessages.prepend(e))}failQueuedMessages(e){const t=this.queuedMessages.count();t>0&&(S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+t+" queued messages, err = "+Z(e)),this.queuedMessages.completeAllMessages(e))}onChannelMessage(e,t){this.pendingChannelMessagesState.queue.push({message:e,transport:t}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const e=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(e.message).catch(e=>{S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",e)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(e){await this.realtime.channels.processChannelMessage(e)}async ping(){var e;if("connected"!==this.state.state)throw new E("Unable to ping service; not connected",4e4,400);const t=null==(e=this.activeProtocol)?void 0:e.getTransport();if(!t)throw this.getStateError();S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.ping()","transport = "+t);const n=Date.now(),r=ne();return xe(new Promise(e=>{const o=a=>{a===r&&(t.off("heartbeat",o),e(Date.now()-n))};t.on("heartbeat",o),t.ping(r)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(e){this.activeProtocol.getTransport().fail(e)}getTransportPreference(){var e,t;return this.transportPreference||Wn()&&(null==(t=null==(e=y.WebStorage)?void 0:e.get)?void 0:t.call(e,Gn))}persistTransportPreference(e){var t,n;this.transportPreference=e.shortName,Wn()&&(null==(n=null==(t=y.WebStorage)?void 0:t.set)||n.call(t,Gn,e.shortName))}unpersistTransportPreference(){var e,t;this.transportPreference=null,Wn()&&(null==(t=null==(e=y.WebStorage)?void 0:e.remove)||t.call(e,Gn))}actOnErrorFromAuthorize(e){if(40171===e.code)this.notifyState({state:"failed",error:e});else if(40102===e.code)this.notifyState({state:"failed",error:e});else if(e.statusCode===De.Forbidden){const t="Client configured authentication provider returned 403; failing the connection";S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",t),this.notifyState({state:"failed",error:new E(t,80019,403,e)})}else{const t="Client configured authentication provider request failed";S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",t),this.notifyState({state:this.state.failState,error:new E(t,80019,401,e)})}}onConnectionDetailsUpdate(e,t){if(!e)return;this.connectionDetails=e,e.maxMessageSize&&(this.options.maxMessageSize=e.maxMessageSize);const n=e.clientId;if(n){const e=this.realtime.auth._uncheckedSetClientId(n);if(e)return S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",e.message),void t.fail(e)}const r=e.connectionStateTtl;r&&(this.connectionStateTtl=r),this.maxIdleInterval=e.maxIdleInterval,this.emit("connectiondetails",e)}checkWsConnectivity(){const e=this.options.wsConnectivityCheckUrl||Pe.wsConnectivityCheckUrl,t=new y.Config.WebSocket(e);return new Promise((e,n)=>{let r=!1;t.onopen=()=>{r||(r=!0,e(),t.close())},t.onclose=t.onerror=()=>{r||(r=!0,n())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var e,t;return qn()&&(null==(t=null==(e=y.WebStorage)?void 0:e.getSession)?void 0:t.call(e,this.sessionRecoveryName()))}setSessionRecoverData(e){var t,n;return qn()&&(null==(n=null==(t=y.WebStorage)?void 0:t.setSession)?void 0:n.call(t,this.sessionRecoveryName(),e))}clearSessionRecoverData(){var e,t;return qn()&&(null==(t=null==(e=y.WebStorage)?void 0:e.removeSession)?void 0:t.call(e,this.sessionRecoveryName()))}},Qn=class extends Ye{constructor(e,t){super(e.logger),this.whenState=e=>Ye.prototype.whenState.call(this,e,this.state),this.ably=e,this.connectionManager=new Jn(e,t),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",e=>{const t=this.state=e.current;y.Config.nextTick(()=>{this.emit(t,e)})}),this.connectionManager.on("update",e=>{y.Config.nextTick(()=>{this.emit("update",e)})})}connect(){S.logAction(this.logger,S.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return S.logAction(this.logger,S.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){S.logAction(this.logger,S.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},Yn=class e extends gt{constructor(t){var n,r,o,a;if(super(Pe.objectifyOptions(t,!1,"BaseRealtime",S.defaultLogger)),S.logAction(this.logger,S.LOG_MINOR,"Realtime()",""),"string"===typeof EdgeRuntime)throw new E('Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === \'string\')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.',4e4,400);this._additionalTransportImplementations=e.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=null!=(r=null==(n=this.options.plugins)?void 0:n.RealtimePresence)?r:null,this._liveObjectsPlugin=null!=(a=null==(o=this.options.plugins)?void 0:o.LiveObjects)?a:null,this.connection=new Qn(this,this.options),this._channels=new Zn(this),!1!==this.options.autoConnect&&this.connect()}static transportImplementationsFromPlugins(e){const t={};return(null==e?void 0:e.WebSocketTransport)&&(t[Tn.WebSocket]=e.WebSocketTransport),(null==e?void 0:e.XHRPolling)&&(t[Tn.XhrPolling]=e.XHRPolling),t}get channels(){return this._channels}get clientId(){return this.auth.clientId}connect(){S.logAction(this.logger,S.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){S.logAction(this.logger,S.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};Yn.EventEmitter=Ye;var Xn=Yn,Zn=class extends Ye{constructor(e){super(e.logger),this.realtime=e,this.all=Object.create(null),e.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let e={};for(const t of W(this.all,!0)){const n=this.all[t];n.properties.channelSerial&&(e[t]=n.properties.channelSerial)}return e}recoverChannels(e){for(const t of W(e,!0))this.get(t).properties.channelSerial=e[t]}async processChannelMessage(e){const t=e.channel;if(void 0===t)return void S.logAction(this.logger,S.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+e.action);const n=this.all[t];n?await n.processMessage(e):S.logAction(this.logger,S.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+t)}onTransportActive(){for(const e in this.all){const t=this.all[e];"attaching"===t.state||"detaching"===t.state?t.checkPendingState():"suspended"===t.state?t._attach(!1,null):"attached"===t.state&&t.requestState("attaching")}}propogateConnectionInterruption(e,t){const n=["attaching","attached","detaching","suspended"],r={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"}[e];for(const o in this.all){const e=this.all[o];n.includes(e.state)&&e.notifyState(r,t)}}get(e,t){e=String(e);let n=this.all[e];if(n){if(t){if(n._shouldReattachToSetOptions(t,n.channelOptions))throw new E("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);n.setOptions(t)}}else n=this.all[e]=new jn(this.realtime,e,t);return n}getDerived(e,t,n){if(t.filter){const n=ge(t.filter),r=me(e);e="[filter=".concat(n).concat(r.qualifierParam,"]").concat(r.channelName)}return this.get(e,n)}release(e){e=String(e);const t=this.all[e];if(!t)return;const n=t.getReleaseErr();if(n)throw n;delete this.all[e]}},er=Xn;function tr(e,t){if(e.isSynthesized()||t.isSynthesized())return e.timestamp>=t.timestamp;const n=e.parseId(),r=t.parseId();return n.msgSerial===r.msgSerial?n.index>r.index:n.msgSerial>r.msgSerial}var nr=class extends Ye{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tr;super(e.logger),this.presence=e,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=t,this.newerThan=n}get(e){return this.map[e]}getClient(e){const t=this.map,n=[];for(const r in t){const o=t[r];o.clientId==e&&"absent"!=o.action&&n.push(o)}return n}list(e){const t=this.map,n=e&&e.clientId,r=e&&e.connectionId,o=[];for(const a in t){const e=t[a];"absent"!==e.action&&(n&&n!=e.clientId||r&&r!=e.connectionId||o.push(e))}return o}put(e){"enter"!==e.action&&"update"!==e.action||((e=It.fromValues(e)).action="present");const t=this.map,n=this.memberKey(e);this.residualMembers&&delete this.residualMembers[n];const r=t[n];return!(r&&!this.newerThan(e,r))&&(t[n]=e,!0)}values(){const e=this.map,t=[];for(const n in e){const r=e[n];"absent"!=r.action&&t.push(r)}return t}remove(e){const t=this.map,n=this.memberKey(e),r=t[n];return!(r&&!this.newerThan(e,r))&&(this.syncInProgress?((e=It.fromValues(e)).action="absent",t[n]=e):delete t[n],!!r)}startSync(){const e=this.map,t=this.syncInProgress;S.logAction(this.logger,S.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),this.syncInProgress||(this.residualMembers=R(e),this.setInProgress(!0))}endSync(){const e=this.map,t=this.syncInProgress;if(S.logAction(this.logger,S.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t){for(const t in e)"absent"===e[t].action&&delete e[t];this.presence._synthesizeLeaves(q(this.residualMembers));for(const t in this.residualMembers)delete e[t];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}async waitSync(){const e=this.syncInProgress;S.logAction(this.logger,S.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+e),e&&await this.once("sync")}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(e){S.logAction(this.logger,S.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+e),this.syncInProgress=e,this.presence.syncComplete=!e}};function rr(e){const t=e.channel.client,n=t.auth.clientId;return(!n||"*"===n)&&"connected"===t.connection.state}var or=class extends Ye{constructor(e){super(e.logger),this.channel=e,this.syncComplete=!1,this.members=new nr(this,e=>e.clientId+":"+e.connectionId),this._myMembers=new nr(this,e=>e.clientId),this.subscriptions=new Ye(this.logger),this.pendingPresence=[]}async enter(e){if(rr(this))throw new E("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"enter")}async update(e){if(rr(this))throw new E("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"update")}async enterClient(e,t){return this._enterOrUpdateClient(void 0,e,t,"enter")}async updateClient(e,t){return this._enterOrUpdateClient(void 0,e,t,"update")}async _enterOrUpdateClient(e,t,n,r){const o=this.channel;if(!o.connectionManager.activeState())throw o.connectionManager.getError();S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence."+r+"Client()","channel = "+o.name+", id = "+e+", client = "+(t||"(implicit) "+this.channel.client.auth.clientId));const a=It.fromData(n);a.action=r,e&&(a.id=e),t&&(a.clientId=t);const s=await a.encode(o.channelOptions);switch(o.state){case"attached":return o.sendPresence([s]);case"initialized":case"detached":o.attach();case"attaching":return new Promise((e,t)=>{this.pendingPresence.push({presence:s,callback:n=>n?t(n):e()})});default:{const e=new j("Unable to "+r+" presence channel while in "+o.state+" state",90001);throw e.code=90001,e}}}async leave(e){if(rr(this))throw new E("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,e)}async leaveClient(e,t){const n=this.channel;if(!n.connectionManager.activeState())throw n.connectionManager.getError();S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+e);const r=It.fromData(t);r.action="leave",e&&(r.clientId=e);const o=await r.encode(n.channelOptions);switch(n.state){case"attached":return n.sendPresence([o]);case"attaching":return new Promise((e,t)=>{this.pendingPresence.push({presence:o,callback:n=>n?t(n):e()})});case"initialized":case"failed":throw new j("Unable to leave presence channel (incompatible state)",90001);default:throw n.invalidStateError()}}async get(e){const t=!e||!("waitForSync"in e)||e.waitForSync;function n(t){return e?t.list(e):t.values()}if("suspended"===this.channel.state){if(t)throw E.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"});return n(this.members)}await this.channel.ensureAttached();const r=this.members;return t&&await r.waitSync(),n(this.members)}async history(e){S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const t=this.channel.client.rest.presenceMixin;if(e&&e.untilAttach){if("attached"!==this.channel.state)throw new E("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);delete e.untilAttach,e.from_serial=this.channel.properties.attachSerial}return t.history(this,e)}setPresence(e,t,n){let r,o;S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+e.length+" participants; syncChannelSerial = "+n);const a=this.members,s=this._myMembers,i=[],l=this.channel.connectionManager.connectionId;t&&(this.members.startSync(),n&&(o=n.match(/^[\w-]+:(.*)$/))&&(r=o[1]));for(let c of e)switch(c.action){case"leave":a.remove(c)&&i.push(c),c.connectionId!==l||c.isSynthesized()||s.remove(c);break;case"enter":case"present":case"update":a.put(c)&&i.push(c),c.connectionId===l&&s.put(c)}t&&!r&&(a.endSync(),this.channel.syncChannelSerial=null);for(let c=0;c<i.length;c++){const e=i[c];this.subscriptions.emit(e.action,e)}}onAttached(e){S.logAction(this.logger,S.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+e),e?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const t=this.pendingPresence,n=t.length;if(n){this.pendingPresence=[];const e=[],r=Ie.create(this.logger);S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.onAttached","sending "+n+" queued presence messages");for(let o=0;o<n;o++){const n=t[o];e.push(n.presence),r.push(n.callback)}this.channel.sendPresence(e).then(()=>r()).catch(e=>r(e))}}actOnChannelState(e,t,n){switch(e){case"attached":this.onAttached(t);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(n)}}failPendingPresence(e){if(this.pendingPresence.length){S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+Z(e));for(let n=0;n<this.pendingPresence.length;n++)try{this.pendingPresence[n].callback(e)}catch(t){}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const e=this._myMembers,t=this.channel.connectionManager.connectionId;for(const n in e.map){const r=e.map[n];S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+r.clientId+'" into the presence set');const o=r.connectionId===t?r.id:void 0;this._enterOrUpdateClient(o,r.clientId,r.data,"enter").catch(e=>{const t=new E("Presence auto re-enter failed",91004,400,e);S.logAction(this.logger,S.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()","Presence auto re-enter failed; reason = "+Z(e));const n=new Cn(this.channel.state,this.channel.state,!0,!1,t);this.channel.emit("update",n)})}}_synthesizeLeaves(e){const t=this.subscriptions;e.forEach(function(e){const n=It.fromValues({action:"leave",connectionId:e.connectionId,clientId:e.clientId,data:e.data,encoding:e.encoding,timestamp:Date.now()});t.emit("leave",n)})}async subscribe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=jn.processListenerArgs(t),o=r[0],a=r[1],s=this.channel;if("failed"===s.state)throw E.fromValues(s.invalidStateError());this.subscriptions.on(o,a),!1!==s.channelOptions.attachOnSubscribe&&await s.attach()}unsubscribe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=jn.processListenerArgs(t),o=r[0],a=r[1];this.subscriptions.off(o,a)}},ar=Tn.WebSocket,sr=class extends Un{constructor(e,t,n){super(e,t,n),this.shortName=ar,n.heartbeats=y.Config.useProtocolHeartbeats,this.wsHost=n.host}static isAvailable(){return!!y.Config.WebSocket}createWebSocket(e,t){return this.uri=e+J(t),new y.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.connect()","starting"),Un.prototype.connect.call(this);const e=this,t=this.params,n=t.options,r=(n.tls?"wss://":"ws://")+this.wsHost+":"+Pe.getPort(n)+"/";S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.connect()","uri: "+r),ae(this.auth.getAuthParams(),function(n,o){if(e.isDisposed)return;let a="";for(const e in o)a+=" "+e+": "+o[e]+";";if(S.logAction(e.logger,S.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+a+" err: "+n),n)return void e.disconnect(n);const s=t.getConnectParams(o);try{const t=e.wsConnection=e.createWebSocket(r,s);t.binaryType=y.Config.binaryType,t.onopen=function(){e.onWsOpen()},t.onclose=function(t){e.onWsClose(t)},t.onmessage=function(t){e.onWsData(t.data)},t.onerror=function(t){e.onWsError(t)},t.on&&t.on("ping",function(){e.onActivity()})}catch(i){S.logAction(e.logger,S.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(i.stack||i.message)),e.disconnect(i)}})}send(e){const t=this.wsConnection;if(t)try{t.send(gn(e,this.connectionManager.realtime._MsgPack,this.params.format))}catch(n){const e="Exception from ws connection when trying to send: "+Z(n);S.logAction(this.logger,S.LOG_ERROR,"WebSocketTransport.send()",e),this.finish("disconnected",new E(e,5e4,500))}else S.logAction(this.logger,S.LOG_ERROR,"WebSocketTransport.send()","No socket connection")}onWsData(e){S.logAction(this.logger,S.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+e.length+"; type = "+typeof e);try{this.onProtocolMessage((t=e,n=this.connectionManager.realtime._MsgPack,r=this.connectionManager.realtime._RealtimePresence,o=this.connectionManager.realtime._Annotations,a=this.connectionManager.realtime._liveObjectsPlugin,s=this.format,yn(se(t,n,s),r,o,a)))}catch(i){S.logAction(this.logger,S.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+i.stack)}var t,n,r,o,a,s}onWsOpen(){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(e){let t,n;if("object"==typeof e?(n=e.code,t=e.wasClean||1e3===n):(n=e,t=1e3==n),delete this.wsConnection,t){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const e=new E("Websocket closed",80003,400);this.finish("disconnected",e)}else{const e="Unclean disconnection of WebSocket ; code = "+n,t=new E(e,80003,400);S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onWsClose()",e),this.finish("disconnected",t)}this.emit("disposed")}onWsError(e){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+e.message),y.Config.nextTick(()=>{this.disconnect(Error(e.message))})}dispose(){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const e=this.wsConnection;e&&(e.onmessage=function(){},delete this.wsConnection,y.Config.nextTick(()=>{if(S.logAction(this.logger,S.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!e)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");e.close()}))}},ir=class{static subscribeFilter(e,t,n){const r=e=>{var r,o,a,s,i,l;const c={name:e.name,refTimeserial:null==(o=null==(r=e.extras)?void 0:r.ref)?void 0:o.timeserial,refType:null==(s=null==(a=e.extras)?void 0:a.ref)?void 0:s.type,isRef:!!(null==(l=null==(i=e.extras)?void 0:i.ref)?void 0:l.timeserial),clientId:e.clientId};Object.entries(t).find(e=>{let[t,n]=e;return void 0!==n&&c[t]!==n})||n(e)};this.addFilteredSubscription(e,t,n,r),e.subscriptions.on(r)}static addFilteredSubscription(e,t,n,r){var o;if(e.filteredSubscriptions||(e.filteredSubscriptions=new Map),e.filteredSubscriptions.has(n)){const a=e.filteredSubscriptions.get(n);a.set(t,(null==(o=null==a?void 0:a.get(t))?void 0:o.concat(r))||[r])}else e.filteredSubscriptions.set(n,new Map([[t,[r]]]))}static getAndDeleteFilteredSubscriptions(e,t,n){if(!e.filteredSubscriptions)return[];if(!n&&t)return Array.from(e.filteredSubscriptions.entries()).map(n=>{let[r,o]=n;var a;let s=o.get(t);return o.delete(t),0===o.size&&(null==(a=e.filteredSubscriptions)||a.delete(r)),s}).reduce((e,t)=>t?e.concat(...t):e,[]);if(!n||!e.filteredSubscriptions.has(n))return[];const r=e.filteredSubscriptions.get(n);if(!t){const t=Array.from(r.values()).reduce((e,t)=>e.concat(...t),[]);return e.filteredSubscriptions.delete(n),t}let o=r.get(t);return r.delete(t),o||[]}},lr=class e extends er{constructor(t){var n;const r=e._MsgPack;if(!r)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(Pe.objectifyOptions(t,!0,"Realtime",S.defaultLogger,p(f({},tn),{Crypto:null!=(n=e.Crypto)?n:void 0,MsgPack:r,RealtimePresence:{RealtimePresence:or,PresenceMessage:It,WirePresenceMessage:Pt},Annotations:{Annotation:un,WireAnnotation:cn,RealtimeAnnotations:On,RestAnnotations:mn},WebSocketTransport:sr,MessageInteractions:ir})))}static get Crypto(){if(null===this._Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(e){this._Crypto=e}};lr.Utils=C,lr.ConnectionManager=Jn,lr.ProtocolMessage=Sn,lr._Crypto=null,lr.Message=nn,lr.PresenceMessage=rn,lr.Annotation=dn,lr._MsgPack=null,lr._Http=Je,lr._PresenceMap=nr,lr._MessageEncoding=dt;var cr=lr,ur=Uint8Array,dr=Uint32Array,hr=Math.pow,fr=new dr(8),pr=[],mr=new dr(64);function gr(e){return(e-(0|e))*hr(2,32)|0}for(var vr,yr,br=2,xr=0;xr<64;){for(vr=!0,yr=2;yr<=br/2;yr++)br%yr===0&&(vr=!1);vr&&(xr<8&&(fr[xr]=gr(hr(br,.5))),pr[xr]=gr(hr(br,1/3)),xr++),br++}var wr=!!new ur(new dr([1]).buffer)[0];function kr(e){return wr?e>>>24|(e>>>16&255)<<8|(65280&e)<<8|e<<24:e}function Sr(e,t){return e>>>t|e<<32-t}function Cr(e){var t,n=fr.slice(),r=e.length,o=8*r,a=512-(o+64)%512-1+o+65,s=new ur(a/8),i=new dr(s.buffer);s.set(e,0),s[r]=128,i[i.length-1]=kr(o);for(var l=0;l<a/32;l+=16){var c=n.slice();for(t=0;t<64;t++){var u;if(t<16)u=kr(i[l+t]);else{var d=mr[t-15],h=mr[t-2];u=mr[t-7]+mr[t-16]+(Sr(d,7)^Sr(d,18)^d>>>3)+(Sr(h,17)^Sr(h,19)^h>>>10)}mr[t]=u|=0;for(var f=(Sr(c[4],6)^Sr(c[4],11)^Sr(c[4],25))+(c[4]&c[5]^~c[4]&c[6])+c[7]+u+pr[t],p=(Sr(c[0],2)^Sr(c[0],13)^Sr(c[0],22))+(c[0]&c[1]^c[2]&(c[0]^c[1])),m=7;m>0;m--)c[m]=c[m-1];c[0]=f+p|0,c[4]=c[4]+f|0}for(t=0;t<8;t++)n[t]=n[t]+c[t]|0}return new ur(new dr(n.map(function(e){return kr(e)})).buffer)}var Nr,Er=new class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(e){let t="";const n=this.base64CharSet,r=e.byteLength,o=r%3,a=r-o;let s,i,l,c,u;for(let d=0;d<a;d+=3)u=e[d]<<16|e[d+1]<<8|e[d+2],s=(16515072&u)>>18,i=(258048&u)>>12,l=(4032&u)>>6,c=63&u,t+=n[s]+n[i]+n[l]+n[c];return 1==o?(u=e[a],s=(252&u)>>2,i=(3&u)<<4,t+=n[s]+n[i]+"=="):2==o&&(u=e[a]<<8|e[a+1],s=(64512&u)>>10,i=(1008&u)>>4,l=(15&u)<<2,t+=n[s]+n[i]+n[l]+"="),t}base64ToArrayBuffer(e){const t=null==atob?void 0:atob(e),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++){const e=t.charCodeAt(o);r[o]=e}return this.toArrayBuffer(r)}isBuffer(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}toBuffer(e){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(this.toArrayBuffer(e));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(e){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(e){return this.uint8ViewToBase64(this.toBuffer(e))}base64UrlEncode(e){return this.base64Encode(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}base64Decode(e){if(ArrayBuffer&&y.Config.atob)return this.base64ToArrayBuffer(e);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(e){return this.toBuffer(e).reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}hexDecode(e){if(e.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++)t[n]=parseInt(e.slice(2*n,2*(n+1)),16);return this.toArrayBuffer(t)}utf8Encode(e){if(y.Config.TextEncoder){const t=(new y.Config.TextEncoder).encode(e);return this.toArrayBuffer(t)}throw new Error("Expected TextEncoder to be configured")}utf8Decode(e){if(!this.isBuffer(e))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return(new TextDecoder).decode(e);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(e,t){if(!e||!t)return!1;const n=this.toArrayBuffer(e),r=this.toArrayBuffer(t);if(n.byteLength!=r.byteLength)return!1;const o=new Uint8Array(n),a=new Uint8Array(r);for(var s=0;s<o.length;s++)if(o[s]!=a[s])return!1;return!0}byteLength(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}arrayBufferViewToBuffer(e){return this.toArrayBuffer(e)}concat(e){const t=e.reduce((e,t)=>e+t.byteLength,0),n=new Uint8Array(t);let r=0;for(const o of e){const e=this.toBuffer(o);n.set(e,r),r+=e.byteLength}return n.buffer}sha256(e){const t=Cr(this.toBuffer(e));return this.toArrayBuffer(t)}hmacSha256(e,t){const n=function(e,t){if(e.length>64&&(e=Cr(e)),e.length<64){const t=new Uint8Array(64);t.set(e,0),e=t}for(var n=new Uint8Array(64),r=new Uint8Array(64),o=0;o<64;o++)n[o]=54^e[o],r[o]=92^e[o];var a=new Uint8Array(t.length+64);a.set(n,0),a.set(t,64);var s=new Uint8Array(96);return s.set(r,0),s.set(Cr(a),64),Cr(s)}(this.toBuffer(t),this.toBuffer(e));return this.toArrayBuffer(n)}},jr=(e=>(e[e.REQ_SEND=0]="REQ_SEND",e[e.REQ_RECV=1]="REQ_RECV",e[e.REQ_RECV_POLL=2]="REQ_RECV_POLL",e[e.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",e))(jr||{}),Or=jr;function Rr(){return new E("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var Tr=((Nr=class{constructor(e){var t;this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this.client=null!=e?e:null;const n=(null==e?void 0:e.options.connectivityCheckUrl)||Pe.connectivityCheckUrl,r=null!=(t=null==e?void 0:e.options.connectivityCheckParams)?t:null,o=!(null==e?void 0:e.options.connectivityCheckUrl),a=f(f({},Tr.bundledRequestImplementations),null==e?void 0:e._additionalHTTPRequestImplementations),s=a.XHRRequest,i=a.FetchRequest,l=!(!s&&!i);if(!l)throw Rr();y.Config.xhrSupported&&s?(this.supportsAuthHeaders=!0,this.Request=async function(t,n,r,o,a){return new Promise(i=>{var l;const c=s.createRequest(n,r,o,a,Or.REQ_SEND,null!=(l=e&&e.options.timeouts)?l:null,this.logger,t);c.once("complete",(e,t,n,r,o)=>i({error:e,body:t,headers:n,unpacked:r,statusCode:o})),c.exec()})},(null==e?void 0:e.options.disableConnectivityCheck)?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var e;S.logAction(this.logger,S.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+n);const t=await this.doUri(Fe.Get,n,null,null,r);let a=!1;var s;return a=o?!t.error&&"yes"==(null==(e=t.body)?void 0:e.replace(/\n/,"")):!t.error&&(s=t.statusCode)>=200&&s<400,S.logAction(this.logger,S.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+a),a}):y.Config.fetchSupported&&i?(this.supportsAuthHeaders=!0,this.Request=async(t,n,r,o,a)=>i(t,null!=e?e:null,n,r,o,a),(null==e?void 0:e.options.disableConnectivityCheck)?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var e;S.logAction(this.logger,S.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+n);const t=await this.doUri(Fe.Get,n,null,null,null),r=!t.error&&"yes"==(null==(e=t.body)?void 0:e.replace(/\n/,""));return S.logAction(this.logger,S.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+r),r}):this.Request=async()=>({error:l?new j("no supported HTTP transports available",null,400):Rr()})}get logger(){var e,t;return null!=(t=null==(e=this.client)?void 0:e.logger)?t:S.defaultLogger}async doUri(e,t,n,r,o){return this.Request?this.Request(e,t,n,o,r):{error:new j("Request invoked before assigned to",null,500)}}shouldFallback(e){const t=e.statusCode;return 408===t&&!e.code||400===t&&!e.code||t>=500&&t<=504}}).methods=[Fe.Get,Fe.Delete,Fe.Post,Fe.Put,Fe.Patch],Nr.methodsWithoutBody=[Fe.Get,Fe.Delete],Nr.methodsWithBody=[Fe.Post,Fe.Put,Fe.Patch],Nr),Ar=Tr,_r="ablyjs-storage-test",Mr="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:self,Pr=new class{constructor(){try{Mr.sessionStorage.setItem(_r,_r),Mr.sessionStorage.removeItem(_r),this.sessionSupported=!0}catch(e){this.sessionSupported=!1}try{Mr.localStorage.setItem(_r,_r),Mr.localStorage.removeItem(_r),this.localSupported=!0}catch(e){this.localSupported=!1}}get(e){return this._get(e,!1)}getSession(e){return this._get(e,!0)}remove(e){return this._remove(e,!1)}removeSession(e){return this._remove(e,!0)}set(e,t,n){return this._set(e,t,n,!1)}setSession(e,t,n){return this._set(e,t,n,!0)}_set(e,t,n,r){const o={value:t};return n&&(o.expires=Date.now()+n),this.storageInterface(r).setItem(e,JSON.stringify(o))}_get(e,t){if(t&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!t&&!this.localSupported)throw new Error("Local Storage not supported");const n=this.storageInterface(t).getItem(e);if(!n)return null;const r=JSON.parse(n);return r.expires&&r.expires<Date.now()?(this.storageInterface(t).removeItem(e),null):r.value}_remove(e,t){return this.storageInterface(t).removeItem(e)}storageInterface(e){return e?Mr.sessionStorage:Mr.localStorage}},Ir=fe(),Lr="string"===typeof EdgeRuntime;"undefined"!==typeof Window||"undefined"!==typeof WorkerGlobalScope||Lr||console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");var Fr={agent:"browser",logTimestamps:!0,userAgent:Ir.navigator&&Ir.navigator.userAgent.toString(),currentUrl:Ir.location&&Ir.location.href,binaryType:"arraybuffer",WebSocket:Ir.WebSocket,fetchSupported:!!Ir.fetch,xhrSupported:Ir.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:function(){const e=Ir.location;return!Ir.WebSocket||!e||!e.origin||e.origin.indexOf("http")>-1}(),useProtocolHeartbeats:!0,supportsBinary:!!Ir.TextDecoder,preferBinary:!1,ArrayBuffer:Ir.ArrayBuffer,atob:Ir.atob,nextTick:"function"===typeof Ir.queueMicrotask?e=>Ir.queueMicrotask(e):e=>Promise.resolve().then(e),addEventListener:Ir.addEventListener,inspect:JSON.stringify,stringByteSize:function(e){return Ir.TextDecoder&&(new Ir.TextEncoder).encode(e).length||e.length},TextEncoder:Ir.TextEncoder,TextDecoder:Ir.TextDecoder,getRandomArrayBuffer:async function(e){const t=new Uint8Array(e);return Ir.crypto.getRandomValues(t),t.buffer},isWebworker:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,push:{platform:"browser",formFactor:"desktop",storage:Pr}};function zr(e){return function(e){const t=[80015,80017,80030];return!!e.code&&!Ge.isTokenErr(e)&&(!!t.includes(e.code)||e.code>=4e4&&e.code<5e4)}(e)?[xn({action:Xe.ERROR,error:e})]:[xn({action:Xe.DISCONNECTED,error:e})]}var Dr=class extends Un{constructor(e,t,n){super(e,t,n,!0),this.onAuthUpdated=e=>{this.authParams={access_token:e.token}},this.stream=!("stream"in n)||n.stream,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.connect()","starting"),Un.prototype.connect.call(this);const e=this.params,t=e.options,n=e.host||t.primaryDomain,r=Pe.getPort(t),o=t.tls?"https://":"http://";this.baseUri=o+n+":"+r+"/comet/";const a=this.baseUri+"connect";S.logAction(this.logger,S.LOG_MINOR,"CometTransport.connect()","uri: "+a),ae(this.auth.getAuthParams(),(e,t)=>{if(e)return void this.disconnect(e);if(this.isDisposed)return;this.authParams=t;const n=this.params.getConnectParams(t);"stream"in n&&(this.stream=n.stream),S.logAction(this.logger,S.LOG_MINOR,"CometTransport.connect()","connectParams:"+J(n));let r=!1;const o=this.recvRequest=this.createRequest(a,null,n,null,this.stream?Or.REQ_RECV_STREAM:Or.REQ_RECV);o.on("data",e=>{this.recvRequest&&(r||(r=!0,this.emit("preconnect")),this.onData(e))}),o.on("complete",e=>{this.recvRequest||(e=e||new E("Request cancelled",80003,400)),this.recvRequest=null,r||e||(r=!0,this.emit("preconnect")),this.onActivity(),e?e.code?this.onData(zr(e)):this.disconnect(e):y.Config.nextTick(()=>{this.recv()})}),o.exec()})}requestClose(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(e){const t=e?this.closeUri:this.disconnectUri;if(t){const n=this.createRequest(t,null,this.authParams,null,Or.REQ_SEND);n.on("complete",t=>{t&&(S.logAction(this.logger,S.LOG_ERROR,"CometTransport.request"+(e?"Close()":"Disconnect()"),"request returned err = "+Z(t)),this.finish("disconnected",t))}),n.exec()}}dispose(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(S.logAction(this.logger,S.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",zn.disconnected()),y.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(e){var t;if(this.isDisposed)return;const n=null==(t=e.connectionDetails)?void 0:t.connectionKey;Un.prototype.onConnect.call(this,e);const r=this.baseUri+n;S.logAction(this.logger,S.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+r),this.sendUri=r+"/send",this.recvUri=r+"/recv",this.closeUri=r+"/close",this.disconnectUri=r+"/disconnect"}send(e){if(this.sendRequest)return this.pendingItems=this.pendingItems||[],void this.pendingItems.push(e);const t=this.pendingItems||[];t.push(e),this.pendingItems=null,this.sendItems(t)}sendAnyPending(){const e=this.pendingItems;e&&(this.pendingItems=null,this.sendItems(e))}sendItems(e){const t=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(e),Or.REQ_SEND);t.on("complete",(e,t)=>{e&&S.logAction(this.logger,S.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+Z(e)),this.sendRequest=null,e?e.code?this.onData(zr(e)):this.disconnect(e):(t&&this.onData(t),this.pendingItems&&y.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()}))}),t.exec()}recv(){if(this.recvRequest)return;if(!this.isConnected)return;const e=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?Or.REQ_RECV_STREAM:Or.REQ_RECV_POLL);e.on("data",e=>{this.onData(e)}),e.on("complete",e=>{this.recvRequest=null,this.onActivity(),e?e.code?this.onData(zr(e)):this.disconnect(e):y.Config.nextTick(()=>{this.recv()})}),e.exec()}onData(e){try{const t=this.decodeResponse(e);if(t&&t.length)for(let e=0;e<t.length;e++)this.onProtocolMessage(yn(t[e],this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._liveObjectsPlugin))}catch(t){S.logAction(this.logger,S.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+t.stack)}}encodeRequest(e){return JSON.stringify(e)}decodeResponse(e){return"string"==typeof e?JSON.parse(e):e}};function Br(e,t){if(function(e,t){return le(W(t)).includes("x-ably-errorcode")}(0,t))return e.error&&E.fromValues(e.error)}var Ur=function(){},Hr=0,Wr={},qr=class e extends Ye{constructor(e,t,n,r,o,a,s,i){super(s),(n=n||{}).rnd=ne(),this.uri=e+J(n),this.headers=t||{},this.body=r,this.method=i?i.toUpperCase():M(r)?"GET":"POST",this.requestMode=o,this.timeouts=a,this.timedOut=!1,this.requestComplete=!1,this.id=String(++Hr),Wr[this.id]=this}static createRequest(t,n,r,o,a,s,i,l){const c=s||Pe.TIMEOUTS;return new e(t,n,R(r),o,a,c,i,l)}complete(e,t,n,r,o){this.requestComplete||(this.requestComplete=!0,!e&&t&&this.emit("data",t),this.emit("complete",e,t,n,r,o),this.dispose())}abort(){this.dispose()}exec(){let e=this.headers;const t=this.requestMode==Or.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,n=this.timer=setTimeout(()=>{this.timedOut=!0,o.abort()},t),r=this.method,o=this.xhr=new XMLHttpRequest,a=e.accept;let s=this.body,i="text";a?0===a.indexOf("application/x-msgpack")&&(i="arraybuffer"):e.accept="application/json",s&&(e["content-type"]||(e["content-type"]="application/json")).indexOf("application/json")>-1&&"string"!=typeof s&&(s=JSON.stringify(s)),o.open(r,this.uri,!0),o.responseType=i,"authorization"in e&&(o.withCredentials=!0);for(const y in e)o.setRequestHeader(y,e[y]);const l=(e,t,n,r)=>{var o;let a=t+" (event type: "+e.type+")";(null==(o=null==this?void 0:this.xhr)?void 0:o.statusText)&&(a+=", current statusText is "+this.xhr.statusText),S.logAction(this.logger,S.LOG_ERROR,"Request.on"+e.type+"()",a),this.complete(new j(a,n,r))};let c,u,d;o.onerror=e=>{l(e,"XHR error occurred",null,400)},o.onabort=e=>{this.timedOut?l(e,"Request aborted due to request timeout expiring",null,408):l(e,"Request cancelled",null,400)},o.ontimeout=e=>{l(e,"Request timed out",null,408)};let h=0,f=!1;const p=()=>{clearTimeout(n),d=u<400,204!=u?c=this.requestMode==Or.REQ_RECV_STREAM&&d&&function(e){return e.getResponseHeader&&(e.getResponseHeader("transfer-encoding")||!e.getResponseHeader("content-length"))}(o):this.complete(null,null,null,null,u)},m=()=>{let t;try{const n=function(e,t){return e.getResponseHeader&&e.getResponseHeader(t)}(o,"content-type");if(n?n.indexOf("application/json")>=0:"text"==o.responseType){const e="arraybuffer"===o.responseType?y.BufferUtils.utf8Decode(o.response):String(o.responseText);t=e.length?JSON.parse(e):e,f=!0}else t=o.response;void 0!==t.response?(u=t.statusCode,d=u<400,e=t.headers,t=t.response):e=function(e){const t=e.getAllResponseHeaders().trim().split("\r\n"),n={};for(let r=0;r<t.length;r++){const e=t[r].split(":").map(e=>e.trim());n[e[0].toLowerCase()]=e[1]}return n}(o)}catch(r){return void this.complete(new j("Malformed response body from server: "+r.message,null,400))}if(d||Array.isArray(t))return void this.complete(null,t,e,f,u);let n=Br(t,e);n||(n=new j("Error response received from server: "+u+" body was: "+y.Config.inspect(t),null,u)),this.complete(n,t,e,f,u)};function g(){const e=o.responseText,t=e.length-1;let n,r;for(;h<t&&(n=e.indexOf("\n",h))>-1;)r=e.slice(h,n),h=n+1,v(r)}const v=e=>{try{e=JSON.parse(e)}catch(t){return void this.complete(new j("Malformed response body from server: "+t.message,null,400))}this.emit("data",e)},b=()=>{g(),this.streamComplete=!0,y.Config.nextTick(()=>{this.complete()})};o.onreadystatechange=()=>{const e=o.readyState;e<3||0!==o.status&&(void 0===u&&(u=o.status,p()),3==e&&c?g():4==e&&(c?b():m()))},o.send(s)}dispose(){const e=this.xhr;if(e){e.onreadystatechange=e.onerror=e.onabort=e.ontimeout=Ur,this.xhr=null;const t=this.timer;t&&(clearTimeout(t),this.timer=null),this.requestComplete||e.abort()}delete Wr[this.id]}},Vr=Tn.XhrPolling,Gr={order:["xhr_polling"],bundledImplementations:{web_socket:sr,xhr_polling:class extends Dr{constructor(e,t,n){super(e,t,n),this.shortName=Vr,n.stream=!1,this.shortName=Vr}static isAvailable(){return!(!y.Config.xhrSupported||!y.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(e,t,n,r,o){return qr.createRequest(e,t,n,r,o,this.timeouts,this.logger)}}}},Kr={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[Tn.XhrPolling,Tn.WebSocket]};function $r(e,t,n){const r=(new TextEncoder).encode(n);for(let o=0;o<r.length;o++)e.setUint8(t+o,r[o])}function Jr(e,t,n){return(new TextDecoder).decode(e.buffer.slice(t,t+n))}function Qr(e){return(new TextEncoder).encode(e).length}var Yr=4294967296,Xr=1/Yr,Zr=class{constructor(e,t){this.map=e=>{const t={};for(let n=0;n<e;n++)t[this.parse()]=this.parse();return t},this.bin=e=>{const t=new ArrayBuffer(e);return new Uint8Array(t).set(new Uint8Array(this.view.buffer,this.offset,e),0),this.offset+=e,t},this.buf=this.bin,this.str=e=>{const t=Jr(this.view,this.offset,e);return this.offset+=e,t},this.array=e=>{const t=new Array(e);for(let n=0;n<e;n++)t[n]=this.parse();return t},this.ext=e=>(this.offset+=e,{type:this.view.getInt8(this.offset),data:this.buf(e)}),this.parse=()=>{const e=this.view.getUint8(this.offset);let t,n;if(0===(128&e))return this.offset++,e;if(128===(240&e))return n=15&e,this.offset++,this.map(n);if(144===(240&e))return n=15&e,this.offset++,this.array(n);if(160===(224&e))return n=31&e,this.offset++,this.str(n);if(224===(224&e))return t=this.view.getInt8(this.offset),this.offset++,t;switch(e){case 192:return this.offset++,null;case 193:return void this.offset++;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return n=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(n);case 197:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(n);case 198:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(n);case 199:return n=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(n);case 200:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(n);case 201:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(n);case 202:return t=this.view.getFloat32(this.offset+1),this.offset+=5,t;case 203:return t=this.view.getFloat64(this.offset+1),this.offset+=9,t;case 204:return t=this.view.getUint8(this.offset+1),this.offset+=2,t;case 205:return t=this.view.getUint16(this.offset+1),this.offset+=3,t;case 206:return t=this.view.getUint32(this.offset+1),this.offset+=5,t;case 207:return t=function(e,t){return t=t||0,e.getUint32(t)*Yr+e.getUint32(t+4)}(this.view,this.offset+1),this.offset+=9,t;case 208:return t=this.view.getInt8(this.offset+1),this.offset+=2,t;case 209:return t=this.view.getInt16(this.offset+1),this.offset+=3,t;case 210:return t=this.view.getInt32(this.offset+1),this.offset+=5,t;case 211:return t=function(e,t){return t=t||0,e.getInt32(t)*Yr+e.getUint32(t+4)}(this.view,this.offset+1),this.offset+=9,t;case 212:return n=1,this.offset++,this.ext(n);case 213:return n=2,this.offset++,this.ext(n);case 214:return n=4,this.offset++,this.ext(n);case 215:return n=8,this.offset++,this.ext(n);case 216:return n=16,this.offset++,this.ext(n);case 217:return n=this.view.getUint8(this.offset+1),this.offset+=2,this.str(n);case 218:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.str(n);case 219:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.str(n);case 220:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.array(n);case 221:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.array(n);case 222:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.map(n);case 223:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.map(n)}throw new Error("Unknown type 0x"+e.toString(16))},this.offset=t||0,this.view=e}};function eo(e,t){return Object.keys(e).filter(function(n){const r=e[n];return(!t||void 0!==r&&null!==r)&&("function"!==typeof r||!!r.toJSON)})}function to(e,t,n,r){const o=typeof e;if("string"===typeof e){const r=Qr(e);if(r<32)return t.setUint8(n,160|r),$r(t,n+1,e),1+r;if(r<256)return t.setUint8(n,217),t.setUint8(n+1,r),$r(t,n+2,e),2+r;if(r<65536)return t.setUint8(n,218),t.setUint16(n+1,r),$r(t,n+3,e),3+r;if(r<4294967296)return t.setUint8(n,219),t.setUint32(n+1,r),$r(t,n+5,e),5+r}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e.byteLength;if(r<256)return t.setUint8(n,196),t.setUint8(n+1,r),new Uint8Array(t.buffer).set(new Uint8Array(e),n+2),2+r;if(r<65536)return t.setUint8(n,197),t.setUint16(n+1,r),new Uint8Array(t.buffer).set(new Uint8Array(e),n+3),3+r;if(r<4294967296)return t.setUint8(n,198),t.setUint32(n+1,r),new Uint8Array(t.buffer).set(new Uint8Array(e),n+5),5+r}if("number"===typeof e){if(Math.floor(e)!==e)return t.setUint8(n,203),t.setFloat64(n+1,e),9;if(e>=0){if(e<128)return t.setUint8(n,e),1;if(e<256)return t.setUint8(n,204),t.setUint8(n+1,e),2;if(e<65536)return t.setUint8(n,205),t.setUint16(n+1,e),3;if(e<4294967296)return t.setUint8(n,206),t.setUint32(n+1,e),5;if(e<0x10000000000000000)return t.setUint8(n,207),function(e,t,n){n<0x10000000000000000?(e.setUint32(t,Math.floor(n*Xr)),e.setInt32(t+4,-1&n)):(e.setUint32(t,4294967295),e.setUint32(t+4,4294967295))}(t,n+1,e),9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(n,e),1;if(e>=-128)return t.setUint8(n,208),t.setInt8(n+1,e),2;if(e>=-32768)return t.setUint8(n,209),t.setInt16(n+1,e),3;if(e>=-2147483648)return t.setUint8(n,210),t.setInt32(n+1,e),5;if(e>=-0x8000000000000000)return t.setUint8(n,211),function(e,t,n){n<0x8000000000000000?(e.setInt32(t,Math.floor(n*Xr)),e.setInt32(t+4,-1&n)):(e.setUint32(t,2147483647),e.setUint32(t+4,2147483647))}(t,n+1,e),9;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if("undefined"===o)return r?0:(t.setUint8(n,212),t.setUint8(n+1,0),t.setUint8(n+2,0),3);if(null===e)return r?0:(t.setUint8(n,192),1);if("boolean"===o)return t.setUint8(n,e?195:194),1;if("function"===typeof e.toJSON)return to(e.toJSON(),t,n,r);if("object"===o){let o,a,s=0;const i=Array.isArray(e);if(i?o=e.length:(a=eo(e,r),o=a.length),o<16?(t.setUint8(n,o|(i?144:128)),s=1):o<65536?(t.setUint8(n,i?220:222),t.setUint16(n+1,o),s=3):o<4294967296&&(t.setUint8(n,i?221:223),t.setUint32(n+1,o),s=5),i)for(let l=0;l<o;l++)s+=to(e[l],t,n+s,r);else if(a)for(let l=0;l<o;l++){const o=a[l];s+=to(o,t,n+s),s+=to(e[o],t,n+s,r)}return s}if("function"===o)return 0;throw new Error("Unknown type "+o)}function no(e,t){const n=typeof e;if("string"===n){const t=Qr(e);if(t<32)return 1+t;if(t<256)return 2+t;if(t<65536)return 3+t;if(t<4294967296)return 5+t}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){const t=e.byteLength;if(t<256)return 2+t;if(t<65536)return 3+t;if(t<4294967296)return 5+t}if("number"===typeof e){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===n)return 1;if(null===e)return t?0:1;if(void 0===e)return t?0:3;if("function"===typeof e.toJSON)return no(e.toJSON(),t);if("object"===n){let n,r=0;if(Array.isArray(e)){n=e.length;for(let o=0;o<n;o++)r+=no(e[o],t)}else{const o=eo(e,t);n=o.length;for(let a=0;a<n;a++){const n=o[a];r+=no(n)+no(e[n],t)}}if(n<16)return 1+r;if(n<65536)return 3+r;if(n<4294967296)return 5+r;throw new Error("Array or object too long 0x"+n.toString(16))}if("function"===n)return 0;throw new Error("Unknown type "+n)}var ro,oo={encode:function(e,t){const n=no(e,t);if(0===n)return;const r=new ArrayBuffer(n);return to(e,new DataView(r),0,t),r},decode:function(e){const t=new DataView(e),n=new Zr(t),r=n.parse();if(n.offset!==e.byteLength)throw new Error(e.byteLength-n.offset+" trailing bytes");return r},inspect:function(e){if(void 0===e)return"undefined";let t,n;if(e instanceof ArrayBuffer?(n="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(n="DataView",t=e),!t)return JSON.stringify(e);const r=[];for(let o=0;o<e.byteLength;o++){if(o>20){r.push("...");break}let e=t.getUint8(o).toString(16);1===e.length&&(e="0"+e),r.push(e)}return"<"+n+" "+r.join(" ")+">"},utf8Write:$r,utf8Read:Jr,utf8ByteCount:Qr},ao={XHRRequest:qr,FetchRequest:async function(e,t,n,r,o,a){const s=new Headers(r||{}),i=e?e.toUpperCase():M(a)?"GET":"POST",l=new AbortController;let c;const u=new Promise(e=>{c=setTimeout(()=>{l.abort(),e({error:new j("Request timed out",null,408)})},t?t.options.timeouts.httpRequestTimeout:Pe.TIMEOUTS.httpRequestTimeout)}),d={method:i,headers:s,body:a,signal:l.signal};y.Config.isWebworker||(d.credentials=s.has("authorization")?"include":"same-origin");const h=(async()=>{try{const e=new URLSearchParams(o||{});e.set("rnd",ne());const t=n+"?"+e,r=await fe().fetch(t,d);if(clearTimeout(c),204==r.status)return{error:null,statusCode:r.status};const a=r.headers.get("Content-Type");let s;s=a&&a.indexOf("application/x-msgpack")>-1?await r.arrayBuffer():a&&a.indexOf("application/json")>-1?await r.json():await r.text();const i=!!a&&-1===a.indexOf("application/x-msgpack"),l=function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(r.headers);if(r.ok)return{error:null,body:s,headers:l,unpacked:i,statusCode:r.status};{const e=function(e,t){if(function(e,t){return!!t.get("x-ably-errorcode")}(0,t))return e.error&&E.fromValues(e.error)}(s,r.headers)||new j("Error response received from server: "+r.status+" body was: "+y.Config.inspect(s),null,r.status);return{error:e,body:s,headers:l,unpacked:i,statusCode:r.status}}}catch(e){return clearTimeout(c),{error:e}}})();return Promise.race([u,h])}},so=function(e,t){class n{constructor(e,t,n,r){this.algorithm=e,this.keyLength=t,this.mode=n,this.key=r}}class r{static getDefaultParams(e){var r;if(!e.key)throw new Error("Crypto.getDefaultParams: a key is required");r="string"===typeof e.key?t.toArrayBuffer(t.base64Decode(e.key.replace("_","/").replace("-","+"))):e.key instanceof ArrayBuffer?e.key:t.toArrayBuffer(e.key);var o=e.algorithm||"aes",a=8*r.byteLength,s=e.mode||"cbc",i=new n(o,a,s,r);if(e.keyLength&&e.keyLength!==i.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+e.keyLength+" was specified, but the key actually has length "+i.keyLength);return function(e){if("aes"===e.algorithm&&"cbc"===e.mode){if(128===e.keyLength||256===e.keyLength)return;throw new Error("Unsupported key length "+e.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}(i),i}static async generateRandomKey(t){try{return e.getRandomArrayBuffer((t||256)/8)}catch(n){throw new E("Failed to generate random key: "+n.message,400,5e4,n)}}static getCipher(e,t){var r,a=function(e){return e instanceof n}(e)?e:this.getDefaultParams(e);return{cipherParams:a,cipher:new o(a,null!=(r=e.iv)?r:null,t)}}}r.CipherParams=n;class o{constructor(e,n,r){if(this.logger=r,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browser\u2019s SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browser\u2019s SubtleCrypto class is not available.");this.algorithm=e.algorithm+"-"+String(e.keyLength)+"-"+e.mode,this.webCryptoAlgorithm=e.algorithm+"-"+e.mode,this.key=t.toArrayBuffer(e.key),this.iv=n?t.toArrayBuffer(n):null}concat(e,n){const r=new ArrayBuffer(e.byteLength+n.byteLength),o=new DataView(r),a=new DataView(t.toArrayBuffer(e));for(let t=0;t<a.byteLength;t++)o.setInt8(t,a.getInt8(t));const s=new DataView(t.toArrayBuffer(n));for(let t=0;t<s.byteLength;t++)o.setInt8(a.byteLength+t,s.getInt8(t));return r}async encrypt(e){S.logAction(this.logger,S.LOG_MICRO,"CBCCipher.encrypt()","");const t=await this.getIv(),n=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),r=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:t},n,e);return this.concat(t,r)}async decrypt(e){S.logAction(this.logger,S.LOG_MICRO,"CBCCipher.decrypt()","");const n=t.toArrayBuffer(e),r=n.slice(0,16),o=n.slice(16),a=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:r},a,o)}async getIv(){if(this.iv){var n=this.iv;return this.iv=null,n}const r=await e.getRandomArrayBuffer(16);return t.toArrayBuffer(r)}}return r}(Fr,Er);y.Crypto=so,y.BufferUtils=Er,y.Http=Ar,y.Config=Fr,y.Transports=Gr,y.WebStorage=Pr;for(const n of[_n,cr])n.Crypto=so,n._MsgPack=oo;Ar.bundledRequestImplementations=ao,S.initLogHandlers(),y.Defaults=(ro=Kr,Object.assign(Se,ro)),y.Config.agent&&(y.Defaults.agent+=" "+y.Config.agent);var io={ErrorInfo:E,Rest:_n,Realtime:cr,msgpack:oo,makeProtocolMessageFromDeserialized:bn};return"object"==typeof r.exports&&(r.exports=((e,t,n,r)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let o of Object.getOwnPropertyNames(t))Object.prototype.hasOwnProperty.call(e,o)||o===n||Object.defineProperty(e,o,{get:()=>t[o],enumerable:!(r=Object.getOwnPropertyDescriptor(t,o))||r.enumerable});return e})(r.exports,t)),r.exports},e.exports=r()},4(e,t,n){"use strict";var r=n(853),o=n(43),a=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(s(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),E=Symbol.for("react.lazy");Symbol.for("react.scope");var j=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var O=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var R=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function _(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case C:return"SuspenseList";case j:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case x:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:_(e.type)||"Memo";case E:t=e._payload,e=e._init;try{return _(e(t))}catch(n){}}return null}var M=Array.isArray,P=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},F=[],z=-1;function D(e){return{current:e}}function B(e){0>z||(e.current=F[z],F[z]=null,z--)}function U(e,t){z++,F[z]=e.current,e.current=t}var H,W,q=D(null),V=D(null),G=D(null),K=D(null);function $(e,t){switch(U(G,t),U(V,e),U(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yd(t=vd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(q),U(q,e)}function J(){B(q),B(V),B(G)}function Q(e){null!==e.memoizedState&&U(K,e);var t=q.current,n=yd(t,e.type);t!==n&&(U(V,e),U(q,n))}function Y(e){V.current===e&&(B(q),B(V)),K.current===e&&(B(K),uh._currentValue=L)}function X(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||"",W=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+H+e+W}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(o){var r=o}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){r=a}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(i){if(i&&r&&"string"===typeof i.stack)return[i.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],i=a[1];if(s&&i){var l=s.split("\n"),c=i.split("\n");for(o=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(r===l.length||o===c.length)for(r=l.length-1,o=c.length-1;1<=r&&0<=o&&l[r]!==c[o];)o--;for(;1<=r&&0<=o;r--,o--)if(l[r]!==c[o]){if(1!==r||1!==o)do{if(r--,0>--o||l[r]!==c[o]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=o);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?X(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,oe=r.unstable_scheduleCallback,ae=r.unstable_cancelCallback,se=r.unstable_shouldYield,ie=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ve=null,ye=null;function be(e){if("function"===typeof me&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/ke|0)|0},we=Math.log,ke=Math.LN2;var Se=256,Ce=262144,Ne=4194304;function Ee(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function je(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var o=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var i=134217727&r;return 0!==i?0!==(r=i&~a)?o=Ee(r):0!==(s&=i)?o=Ee(s):n||0!==(n=i&~e)&&(o=Ee(n)):0!==(i=r&~a)?o=Ee(i):0!==s?o=Ee(s):n||0!==(n=r&~e)&&(o=Ee(n)),0===o?0:0!==t&&t!==o&&0===(t&a)&&((a=o&-o)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:o}function Oe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Re(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=Ne;return 0===(62914560&(Ne<<=1))&&(Ne=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Me(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-xe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Pe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xe(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Ie(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Le(n))&(e.suspendedLanes|t))?0:n}function Le(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function ze(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:Eh(e.type)}function De(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}var Be=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Be,He="__reactProps$"+Be,We="__reactContainer$"+Be,qe="__reactEvents$"+Be,Ve="__reactListeners$"+Be,Ge="__reactHandles$"+Be,Ke="__reactResources$"+Be,$e="__reactMarker$"+Be;function Je(e){delete e[Ue],delete e[He],delete e[qe],delete e[Ve],delete e[Ge]}function Qe(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[We]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ld(e);null!==e;){if(n=e[Ue])return n;e=Ld(e)}return t}n=(e=n).parentNode}return null}function Ye(e){if(e=e[Ue]||e[We]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ze(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[$e]=!0}var tt=new Set,nt={};function rt(e,t){ot(e,t),ot(e+"Capture",t)}function ot(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},it={};function lt(e,t,n){if(o=t,re.call(it,o)||!re.call(st,o)&&(at.test(o)?it[o]=!0:(st[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var o=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,o,a,s,i){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?xt(e,s,dt(t)):null!=n?xt(e,s,dt(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=a&&(e.defaultChecked=!!a),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.name=""+dt(i):e.removeAttribute("name")}function bt(e,t,n,r,o,a,s,i){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,i||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:o)&&"symbol"!==typeof r&&!!r,e.checked=i?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s),ft(e)}function xt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(M(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function Ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function jt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&Et(e,o,r)}else for(var a in t)t.hasOwnProperty(a)&&Et(e,a,t[a])}function Ot(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function _t(){}var Mt=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Lt=null;function Ft(e){var t=Ye(e);if(t&&(e=t.stateNode)){var n=e[He]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[He]||null;if(!o)throw Error(s(90));yt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var zt=!1;function Dt(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==It||null!==Lt)&&(Zc(),It&&(t=It,e=Lt,Lt=It=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[He]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ht=!1;if(Ut)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(Yh){Ht=!1}var qt=null,Vt=null,Gt=null;function Kt(){if(Gt)return Gt;var e,t,n=Vt,r=n.length,o="value"in qt?qt.value:qt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===o[a-t];t++);return Gt=o.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function Qt(){return!1}function Yt(e){function t(t,n,r,o,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Jt:Qt,this.isPropagationStopped=Qt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var Xt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Yt(tn),rn=f({},tn,{view:0,detail:0}),on=Yt(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Xt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Xt=0,en=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),sn=Yt(an),ln=Yt(f({},an,{dataTransfer:0})),cn=Yt(f({},rn,{relatedTarget:0})),un=Yt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Yt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Yt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return gn}var yn=Yt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Yt(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=Yt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),wn=Yt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=Yt(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Yt(f({},tn,{newState:0,oldState:0})),Cn=[9,13,27,32],Nn=Ut&&"CompositionEvent"in window,En=null;Ut&&"documentMode"in document&&(En=document.documentMode);var jn=Ut&&"TextEvent"in window&&!En,On=Ut&&(!Nn||En&&8<En&&11>=En),Rn=String.fromCharCode(32),Tn=!1;function An(e,t){switch(e){case"keyup":return-1!==Cn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Mn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Ln(e,t,n,r){It?Lt?Lt.push(r):Lt=[r]:It=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fn=null,zn=null;function Dn(e){Ju(e,0)}function Bn(e){if(pt(Xe(e)))return e}function Un(e,t){if("change"===e)return t}var Hn=!1;if(Ut){var Wn;if(Ut){var qn="oninput"in document;if(!qn){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),qn="function"===typeof Vn.oninput}Wn=qn}else Wn=!1;Hn=Wn&&(!document.documentMode||9<document.documentMode)}function Gn(){Fn&&(Fn.detachEvent("onpropertychange",Kn),zn=Fn=null)}function Kn(e){if("value"===e.propertyName&&Bn(zn)){var t=[];Ln(t,zn,e,Pt(e)),Dt(Dn,t)}}function $n(e,t,n){"focusin"===e?(Gn(),zn=n,(Fn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Gn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(zn)}function Qn(e,t){if("click"===e)return Bn(t)}function Yn(e,t){if("input"===e||"change"===e)return Bn(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!re.call(t,o)||!Xn(e[o],t[o]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ar=Ut&&"documentMode"in document&&11>=document.documentMode,sr=null,ir=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==sr||sr!==mt(r)||("selectionStart"in(r=sr)&&or(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=rd(ir,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sr)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}Ut&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=mr("animationend"),vr=mr("animationiteration"),yr=mr("animationstart"),br=mr("transitionrun"),xr=mr("transitionstart"),wr=mr("transitioncancel"),kr=mr("transitionend"),Sr=new Map,Cr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Sr.set(e,t),rt(t,[e])}Cr.push("scrollEnd");var Er="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},jr=[],Or=0,Rr=0;function Tr(){for(var e=Or,t=Rr=Or=0;t<e;){var n=jr[t];jr[t++]=null;var r=jr[t];jr[t++]=null;var o=jr[t];jr[t++]=null;var a=jr[t];if(jr[t++]=null,null!==r&&null!==o){var s=r.pending;null===s?o.next=o:(o.next=s.next,s.next=o),r.pending=o}0!==a&&Pr(n,o,a)}}function Ar(e,t,n,r){jr[Or++]=e,jr[Or++]=t,jr[Or++]=n,jr[Or++]=r,Rr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function _r(e,t,n,r){return Ar(e,t,n,r),Ir(e)}function Mr(e,t){return Ar(e,null,null,t),Ir(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(o=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,o&&null!==t&&(o=31-xe(n),null===(r=(e=a.hiddenUpdates)[o])?e[o]=[t]:r.push(t),t.lane=536870912|n),a):null}function Ir(e){if(50<qc)throw qc=0,Vc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Fr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(e,t,n,r){return new Fr(e,t,n,r)}function Dr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=zr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hr(e,t,n,r,o,a){var i=0;if(r=e,"function"===typeof e)Dr(e)&&(i=1);else if("string"===typeof e)i=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case j:return(e=zr(31,n,t,o)).elementType=j,e.lanes=a,e;case v:return Wr(n.children,o,a,t);case y:i=8,o|=24;break;case b:return(e=zr(12,n,t,2|o)).elementType=b,e.lanes=a,e;case S:return(e=zr(13,n,t,o)).elementType=S,e.lanes=a,e;case C:return(e=zr(19,n,t,o)).elementType=C,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:i=10;break e;case x:i=9;break e;case k:i=11;break e;case N:i=14;break e;case E:i=16,r=null;break e}i=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=zr(i,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Wr(e,t,n,r){return(e=zr(7,e,r,t)).lanes=n,e}function qr(e,t,n){return(e=zr(6,e,null,t)).lanes=n,e}function Vr(e){var t=zr(18,null,null,0);return t.stateNode=e,t}function Gr(e,t,n){return(t=zr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kr=new WeakMap;function $r(e,t){if("object"===typeof e&&null!==e){var n=Kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Kr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Jr=[],Qr=0,Yr=null,Xr=0,Zr=[],eo=0,to=null,no=1,ro="";function oo(e,t){Jr[Qr++]=Xr,Jr[Qr++]=Yr,Yr=e,Xr=t}function ao(e,t,n){Zr[eo++]=no,Zr[eo++]=ro,Zr[eo++]=to,to=e;var r=no;e=ro;var o=32-xe(r)-1;r&=~(1<<o),n+=1;var a=32-xe(t)+o;if(30<a){var s=o-o%5;a=(r&(1<<s)-1).toString(32),r>>=s,o-=s,no=1<<32-xe(t)+o|n<<o|r,ro=a+e}else no=1<<a|n<<o|r,ro=e}function so(e){null!==e.return&&(oo(e,1),ao(e,1,0))}function io(e){for(;e===Yr;)Yr=Jr[--Qr],Jr[Qr]=null,Xr=Jr[--Qr],Jr[Qr]=null;for(;e===to;)to=Zr[--eo],Zr[eo]=null,ro=Zr[--eo],Zr[eo]=null,no=Zr[--eo],Zr[eo]=null}function lo(e,t){Zr[eo++]=no,Zr[eo++]=ro,Zr[eo++]=to,no=t.id,ro=t.overflow,to=e}var co=null,uo=null,ho=!1,fo=null,po=!1,mo=Error(s(519));function go(e){throw ko($r(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),mo}function vo(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ue]=e,t[He]=r,n){case"dialog":Qu("cancel",t),Qu("close",t);break;case"iframe":case"object":case"embed":Qu("load",t);break;case"video":case"audio":for(n=0;n<Ku.length;n++)Qu(Ku[n],t);break;case"source":Qu("error",t);break;case"img":case"image":case"link":Qu("error",t),Qu("load",t);break;case"details":Qu("toggle",t);break;case"input":Qu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Qu("invalid",t);break;case"textarea":Qu("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&(Qu("beforetoggle",t),Qu("toggle",t)),null!=r.onScroll&&Qu("scroll",t),null!=r.onScrollEnd&&Qu("scrollend",t),null!=r.onClick&&(t.onclick=_t),t=!0):t=!1,t||go(e,!0)}function yo(e){for(co=e.return;co;)switch(co.tag){case 5:case 31:case 13:return void(po=!1);case 27:case 3:return void(po=!0);default:co=co.return}}function bo(e){if(e!==co)return!1;if(!ho)return yo(e),ho=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bd(e.type,e.memoizedProps)),t=!t),t&&uo&&go(e),yo(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));uo=Id(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));uo=Id(e)}else 27===n?(n=uo,Ed(e.type)?(e=Pd,Pd=null,uo=e):uo=n):uo=co?Md(e.stateNode.nextSibling):null;return!0}function xo(){uo=co=null,ho=!1}function wo(){var e=fo;return null!==e&&(null===Tc?Tc=e:Tc.push.apply(Tc,e),fo=null),e}function ko(e){null===fo?fo=[e]:fo.push(e)}var So=D(null),Co=null,No=null;function Eo(e,t,n){U(So,t._currentValue),t._currentValue=n}function jo(e){e._currentValue=So.current,B(So)}function Oo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var a=o.dependencies;if(null!==a){var i=o.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=o;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Oo(a.return,n,e),r||(i=null);break e}a=l.next}}else if(18===o.tag){if(null===(i=o.return))throw Error(s(341));i.lanes|=n,null!==(a=i.alternate)&&(a.lanes|=n),Oo(i,n,e),i=null}else i=o.child;if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===e){i=null;break}if(null!==(o=i.sibling)){o.return=i.return,i=o;break}i=i.return}o=i}}function To(e,t,n,r){e=null;for(var o=t,a=!1;null!==o;){if(!a)if(0!==(524288&o.flags))a=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var i=o.alternate;if(null===i)throw Error(s(387));if(null!==(i=i.memoizedProps)){var l=o.type;Xn(o.pendingProps.value,i.value)||(null!==e?e.push(l):e=[l])}}else if(o===K.current){if(null===(i=o.alternate))throw Error(s(387));i.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}o=o.return}null!==e&&Ro(t,e,n,r),t.flags|=262144}function Ao(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _o(e){Co=e,No=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Mo(e){return Io(Co,e)}function Po(e,t){return null===Co&&_o(e),Io(e,t)}function Io(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===No){if(null===e)throw Error(s(308));No=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else No=No.next=t;return n}var Lo="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Fo=r.unstable_scheduleCallback,zo=r.unstable_NormalPriority,Do={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bo(){return{controller:new Lo,data:new Map,refCount:0}}function Uo(e){e.refCount--,0===e.refCount&&Fo(zo,function(){e.controller.abort()})}var Ho=null,Wo=0,qo=0,Vo=null;function Go(){if(0===--Wo&&null!==Ho){null!==Vo&&(Vo.status="fulfilled");var e=Ho;Ho=null,qo=0,Vo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ko=P.S;P.S=function(e,t){Mc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ho){var n=Ho=[];Wo=0,qo=Hu(),Vo={status:"pending",value:void 0,then:function(e){n.push(e)}}}Wo++,t.then(Go,Go)}(0,t),null!==Ko&&Ko(e,t)};var $o=D(null);function Jo(){var e=$o.current;return null!==e?e:pc.pooledCache}function Qo(e,t){U($o,null===t?$o.current:t.pool)}function Yo(){var e=Jo();return null===e?null:{parent:Do._currentValue,pool:e}}var Xo=Error(s(460)),Zo=Error(s(474)),ea=Error(s(542)),ta={then:function(){}};function na(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ra(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(_t,_t),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ia(e=t.reason),e;default:if("string"===typeof t.status)t.then(_t,_t);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ia(e=t.reason),e}throw aa=t,Xo}}function oa(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw aa=t,Xo;throw t}}var aa=null;function sa(){if(null===aa)throw Error(s(459));var e=aa;return aa=null,e}function ia(e){if(e===Xo||e===ea)throw Error(s(483))}var la=null,ca=0;function ua(e){var t=ca;return ca+=1,null===la&&(la=[]),ra(la,e,t)}function da(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ha(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===v?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===E&&oa(a)===t.type)?(da(t=o(t,n.props),n),t.return=e,t):(da(t=Hr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Wr(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return da(n=Hr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Gr(t,e.mode,n)).return=e,t;case E:return h(e,t=oa(t),n)}if(M(t)||T(t))return(t=Wr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ua(t),n);if(t.$$typeof===w)return h(e,Po(e,t),n);ha(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===o?c(e,t,n,r):null;case g:return n.key===o?u(e,t,n,r):null;case E:return f(e,t,n=oa(n),r)}if(M(n)||T(n))return null!==o?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ua(n),r);if(n.$$typeof===w)return f(e,t,Po(e,n),r);ha(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case E:return p(e,t,n,r=oa(r),o)}if(M(r)||T(r))return d(t,e=e.get(n)||null,r,o,null);if("function"===typeof r.then)return p(e,t,n,ua(r),o);if(r.$$typeof===w)return p(e,t,n,Po(t,r),o);ha(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===v&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===v){if(7===c.tag){n(l,c.sibling),(d=o(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===E&&oa(b)===c.type){n(l,c.sibling),da(d=o(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===v?((d=Wr(u.props.children,l.mode,d,u.key)).return=l,l=d):(da(d=Hr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return i(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=o(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Gr(u,l.mode,d)).return=l,l=d}return i(l);case E:return y(l,c,u=oa(u),d)}if(M(u))return function(o,s,i,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<i.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(o,d,i[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(o,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===i.length)return n(o,d),ho&&oo(o,m),c;if(null===d){for(;m<i.length;m++)null!==(d=h(o,i[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return ho&&oo(o,m),c}for(d=r(d);m<i.length;m++)null!==(g=p(d,o,m,i[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(o,e)}),ho&&oo(o,m),c}(l,c,u,d);if(T(u)){if("function"!==typeof(b=T(u)))throw Error(s(150));return function(o,i,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,m=i,g=i=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(o,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(o,m),i=a(b,i,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(o,m),ho&&oo(o,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(o,y.value,c))&&(i=a(y,i,g),null===d?u=y:d.sibling=y,d=y);return ho&&oo(o,g),u}for(m=r(m);!y.done;g++,y=l.next())null!==(y=p(m,o,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),i=a(y,i,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(o,e)}),ho&&oo(o,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,ua(u),d);if(u.$$typeof===w)return y(l,c,Po(l,u),d);ha(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=o(c,u)).return=l,l=d):(n(l,c),(d=qr(u,l.mode,d)).return=l,l=d),i(l)):n(l,c)}return function(e,t,n,r){try{ca=0;var o=y(e,t,n,r);return la=null,o}catch(s){if(s===Xo||s===ea)throw s;var a=zr(29,s,null,e.mode);return a.lanes=r,a.return=e,a}}}var pa=fa(!0),ma=fa(!1),ga=!1;function va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fc)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Ir(e),Pr(e,null,n),t}return Ar(e,r,t,n),Ir(e)}function wa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pe(e,n)}}function ka(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?o=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Sa=!1;function Ca(){if(Sa){if(null!==Vo)throw Vo}}function Na(e,t,n,r){Sa=!1;var o=e.updateQueue;ga=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,i=o.shared.pending;if(null!==i){o.shared.pending=null;var l=i,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((i=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===i?u.firstBaseUpdate=c:i.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=o.baseState;for(s=0,u=c=l=null,i=a;;){var h=-536870913&i.lane,p=h!==i.lane;if(p?(gc&h)===h:(r&h)===h){0!==h&&h===qo&&(Sa=!0),null!==u&&(u=u.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var m=e,g=i;h=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(v,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(v,d,h):m)||void 0===h)break e;d=f({},d,h);break e;case 2:ga=!0}}null!==(h=i.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=o.callbacks)?o.callbacks=[h]:p.push(h))}else p={lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(i=i.next)){if(null===(i=o.shared.pending))break;i=(p=i).next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null===a&&(o.shared.lanes=0),Cc|=s,e.lanes=s,e.memoizedState=d}}function Ea(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function ja(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ea(n[e],t)}var Oa=D(null),Ra=D(0);function Ta(e,t){U(Ra,e=kc),U(Oa,t),kc=e|t.baseLanes}function Aa(){U(Ra,kc),U(Oa,Oa.current)}function _a(){kc=Ra.current,B(Oa),B(Ra)}var Ma=D(null),Pa=null;function Ia(e){var t=e.alternate;U(Ba,1&Ba.current),U(Ma,e),null===Pa&&(null===t||null!==Oa.current||null!==t.memoizedState)&&(Pa=e)}function La(e){U(Ba,Ba.current),U(Ma,e),null===Pa&&(Pa=e)}function Fa(e){22===e.tag?(U(Ba,Ba.current),U(Ma,e),null===Pa&&(Pa=e)):za()}function za(){U(Ba,Ba.current),U(Ma,Ma.current)}function Da(e){B(Ma),Pa===e&&(Pa=null),B(Ba)}var Ba=D(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ad(n)||_d(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ha=0,Wa=null,qa=null,Va=null,Ga=!1,Ka=!1,$a=!1,Ja=0,Qa=0,Ya=null,Xa=0;function Za(){throw Error(s(321))}function es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function ts(e,t,n,r,o,a){return Ha=a,Wa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?gi:vi,$a=!1,a=n(r,o),$a=!1,Ka&&(a=rs(t,n,r,o)),ns(e),a}function ns(e){P.H=mi;var t=null!==qa&&null!==qa.next;if(Ha=0,Va=qa=Wa=null,Ga=!1,Qa=0,Ya=null,t)throw Error(s(300));null===e||Mi||null!==(e=e.dependencies)&&Ao(e)&&(Mi=!0)}function rs(e,t,n,r){Wa=e;var o=0;do{if(Ka&&(Ya=null),Qa=0,Ka=!1,25<=o)throw Error(s(301));if(o+=1,Va=qa=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}P.H=yi,a=t(n,r)}while(Ka);return a}function os(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?us(t):t,e=e.useState()[0],(null!==qa?qa.memoizedState:null)!==e&&(Wa.flags|=1024),t}function as(){var e=0!==Ja;return Ja=0,e}function ss(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function is(e){if(Ga){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ga=!1}Ha=0,Va=qa=Wa=null,Ka=!1,Qa=Ja=0,Ya=null}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Va?Wa.memoizedState=Va=e:Va=Va.next=e,Va}function cs(){if(null===qa){var e=Wa.alternate;e=null!==e?e.memoizedState:null}else e=qa.next;var t=null===Va?Wa.memoizedState:Va.next;if(null!==t)Va=t,qa=e;else{if(null===e){if(null===Wa.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(qa=e).memoizedState,baseState:qa.baseState,baseQueue:qa.baseQueue,queue:qa.queue,next:null},null===Va?Wa.memoizedState=Va=e:Va=Va.next=e}return Va}function us(e){var t=Qa;return Qa+=1,null===Ya&&(Ya=[]),e=ra(Ya,e,t),t=Wa,null===(null===Va?t.memoizedState:Va.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?gi:vi),e}function ds(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return us(e);if(e.$$typeof===w)return Mo(e)}throw Error(s(438,String(e)))}function hs(e){var t=null,n=Wa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Wa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=O;return t.index++,n}function fs(e,t){return"function"===typeof t?t(e):t}function ps(e){return ms(cs(),qa,e)}function ms(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var o=e.baseQueue,a=r.pending;if(null!==a){if(null!==o){var i=o.next;o.next=a.next,a.next=i}t.baseQueue=o=a,r.pending=null}if(a=e.baseState,null===o)e.memoizedState=a;else{var l=i=null,c=null,u=t=o.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gc&h)===h:(Ha&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===qo&&(d=!0);else{if((Ha&f)===f){u=u.next,f===qo&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,i=a):c=c.next=h,Wa.lanes|=f,Cc|=f}h=u.action,$a&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,i=a):c=c.next=f,Wa.lanes|=h,Cc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?i=a:c.next=l,!Xn(a,e.memoizedState)&&(Mi=!0,d&&null!==(n=Vo)))throw n;e.memoizedState=a,e.baseState=i,e.baseQueue=c,r.lastRenderedState=a}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function gs(e){var t=cs(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var i=o=o.next;do{a=e(a,i.action),i=i.next}while(i!==o);Xn(a,t.memoizedState)||(Mi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function vs(e,t,n){var r=Wa,o=cs(),a=ho;if(a){if(void 0===n)throw Error(s(407));n=n()}else n=t();var i=!Xn((qa||o).memoizedState,n);if(i&&(o.memoizedState=n,Mi=!0),o=o.queue,Hs(xs.bind(null,r,o,e),[e]),o.getSnapshot!==t||i||null!==Va&&1&Va.memoizedState.tag){if(r.flags|=2048,Fs(9,{destroy:void 0},bs.bind(null,r,o,n,t),null),null===pc)throw Error(s(349));a||0!==(127&Ha)||ys(r,t,n)}return n}function ys(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Wa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bs(e,t,n,r){t.value=n,t.getSnapshot=r,ws(t)&&ks(e)}function xs(e,t,n){return n(function(){ws(t)&&ks(e)})}function ws(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(r){return!0}}function ks(e){var t=Mr(e,2);null!==t&&$c(t,e,2)}function Ss(e){var t=ls();if("function"===typeof e){var n=e;if(e=n(),$a){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t}function Cs(e,t,n,r){return e.baseState=n,ms(e,qa,"function"===typeof r?r:fs)}function Ns(e,t,n,r,o){if(hi(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==P.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,Es(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Es(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var a=P.T,s={};P.T=s;try{var i=n(o,r),l=P.S;null!==l&&l(s,i),js(e,t,i)}catch(c){Rs(e,t,c)}finally{null!==a&&null!==s.types&&(a.types=s.types),P.T=a}}else try{js(e,t,a=n(o,r))}catch(u){Rs(e,t,u)}}function js(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Os(e,t,n)},function(n){return Rs(e,t,n)}):Os(e,t,n)}function Os(e,t,n){t.status="fulfilled",t.value=n,Ts(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Es(e,n)))}function Rs(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ts(t),t=t.next}while(t!==r)}e.action=null}function Ts(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function As(e,t){return t}function _s(e,t){if(ho){var n=pc.formState;if(null!==n){e:{var r=Wa;if(ho){if(uo){t:{for(var o=uo,a=po;8!==o.nodeType;){if(!a){o=null;break t}if(null===(o=Md(o.nextSibling))){o=null;break t}}o="F!"===(a=o.data)||"F"===a?o:null}if(o){uo=Md(o.nextSibling),r="F!"===o.data;break e}}go(r)}r=!1}r&&(t=n[0])}}return(n=ls()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:t},n.queue=r,n=ci.bind(null,Wa,r),r.dispatch=n,r=Ss(!1),a=di.bind(null,Wa,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=ls()).queue=o,n=Ns.bind(null,Wa,o,a,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ms(e){return Ps(cs(),qa,e)}function Ps(e,t,n){if(t=ms(e,t,As)[0],e=ps(fs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=us(t)}catch(s){if(s===Xo)throw ea;throw s}else r=t;var o=(t=cs()).queue,a=o.dispatch;return n!==t.memoizedState&&(Wa.flags|=2048,Fs(9,{destroy:void 0},Is.bind(null,o,n),null)),[r,a,e]}function Is(e,t){e.action=t}function Ls(e){var t=cs(),n=qa;if(null!==n)return Ps(t,n,e);cs(),t=t.memoizedState;var r=(n=cs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Fs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Wa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zs(){return cs().memoizedState}function Ds(e,t,n,r){var o=ls();Wa.flags|=e,o.memoizedState=Fs(1|t,{destroy:void 0},n,void 0===r?null:r)}function Bs(e,t,n,r){var o=cs();r=void 0===r?null:r;var a=o.memoizedState.inst;null!==qa&&null!==r&&es(r,qa.memoizedState.deps)?o.memoizedState=Fs(t,a,n,r):(Wa.flags|=e,o.memoizedState=Fs(1|t,a,n,r))}function Us(e,t){Ds(8390656,8,e,t)}function Hs(e,t){Bs(2048,8,e,t)}function Ws(e){var t=cs().memoizedState;return function(e){Wa.flags|=4;var t=Wa.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(s(440));return t.impl.apply(void 0,arguments)}}function qs(e,t){return Bs(4,2,e,t)}function Vs(e,t){return Bs(4,4,e,t)}function Gs(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ks(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4,4,Gs.bind(null,t,e),n)}function $s(){}function Js(e,t){var n=cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&es(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qs(e,t){var n=cs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&es(t,r[1]))return r[0];if(r=e(),$a){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Ys(e,t,n){return void 0===n||0!==(1073741824&Ha)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Kc(),Wa.lanes|=e,Cc|=e,n)}function Xs(e,t,n,r){return Xn(n,t)?n:null!==Oa.current?(e=Ys(e,n,r),Xn(e,t)||(Mi=!0),e):0===(42&Ha)||0!==(1073741824&Ha)&&0===(261930&gc)?(Mi=!0,e.memoizedState=n):(e=Kc(),Wa.lanes|=e,Cc|=e,t)}function Zs(e,t,n,r,o){var a=I.p;I.p=0!==a&&8>a?a:8;var s=P.T,i={};P.T=i,di(e,!1,t,n);try{var l=o(),c=P.S;if(null!==c&&c(i,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)ui(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Gc());else ui(e,t,r,Gc())}catch(u){ui(e,t,{then:function(){},status:"rejected",reason:u},Gc())}finally{I.p=a,null!==s&&null!==i.types&&(s.types=i.types),P.T=s}}function ei(){}function ti(e,t,n,r){if(5!==e.tag)throw Error(s(476));var o=ni(e).queue;Zs(e,o,t,L,null===n?ei:function(){return ri(e),n(r)})}function ni(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ri(e){var t=ni(e);null===t.next&&(t=e.alternate.memoizedState),ui(e,t.next.queue,{},Gc())}function oi(){return Mo(uh)}function ai(){return cs().memoizedState}function si(){return cs().memoizedState}function ii(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=xa(t,e=ba(n),n);return null!==r&&($c(r,t,n),wa(r,t,n)),t={cache:Bo()},void(e.payload=t)}t=t.return}}function li(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hi(e)?fi(t,n):null!==(n=_r(e,t,n,r))&&($c(n,e,r),pi(n,t,r))}function ci(e,t,n){ui(e,t,n,Gc())}function ui(e,t,n,r){var o={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hi(e))fi(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,i=a(s,n);if(o.hasEagerState=!0,o.eagerState=i,Xn(i,s))return Ar(e,t,o,0),null===pc&&Tr(),!1}catch(l){}if(null!==(n=_r(e,t,o,r)))return $c(n,e,r),pi(n,t,r),!0}return!1}function di(e,t,n,r){if(r={lane:2,revertLane:Hu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},hi(e)){if(t)throw Error(s(479))}else null!==(t=_r(e,n,r,2))&&$c(t,e,2)}function hi(e){var t=e.alternate;return e===Wa||null!==t&&t===Wa}function fi(e,t){Ka=Ga=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pi(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pe(e,n)}}var mi={readContext:Mo,use:ds,useCallback:Za,useContext:Za,useEffect:Za,useImperativeHandle:Za,useLayoutEffect:Za,useInsertionEffect:Za,useMemo:Za,useReducer:Za,useRef:Za,useState:Za,useDebugValue:Za,useDeferredValue:Za,useTransition:Za,useSyncExternalStore:Za,useId:Za,useHostTransitionStatus:Za,useFormState:Za,useActionState:Za,useOptimistic:Za,useMemoCache:Za,useCacheRefresh:Za};mi.useEffectEvent=Za;var gi={readContext:Mo,use:ds,useCallback:function(e,t){return ls().memoizedState=[e,void 0===t?null:t],e},useContext:Mo,useEffect:Us,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ds(4194308,4,Gs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ds(4194308,4,e,t)},useInsertionEffect:function(e,t){Ds(4,2,e,t)},useMemo:function(e,t){var n=ls();t=void 0===t?null:t;var r=e();if($a){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ls();if(void 0!==n){var o=n(t);if($a){be(!0);try{n(t)}finally{be(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=li.bind(null,Wa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ls().memoizedState=e},useState:function(e){var t=(e=Ss(e)).queue,n=ci.bind(null,Wa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:$s,useDeferredValue:function(e,t){return Ys(ls(),e,t)},useTransition:function(){var e=Ss(!1);return e=Zs.bind(null,Wa,e.queue,!0,!1),ls().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Wa,o=ls();if(ho){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===pc)throw Error(s(349));0!==(127&gc)||ys(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Us(xs.bind(null,r,a,e),[e]),r.flags|=2048,Fs(9,{destroy:void 0},bs.bind(null,r,a,n,t),null),n},useId:function(){var e=ls(),t=pc.identifierPrefix;if(ho){var n=ro;t="_"+t+"R_"+(n=(no&~(1<<32-xe(no)-1)).toString(32)+n),0<(n=Ja++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Xa++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:oi,useFormState:_s,useActionState:_s,useOptimistic:function(e){var t=ls();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=di.bind(null,Wa,!0,n),n.dispatch=t,[e,t]},useMemoCache:hs,useCacheRefresh:function(){return ls().memoizedState=ii.bind(null,Wa)},useEffectEvent:function(e){var t=ls(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(s(440));return n.impl.apply(void 0,arguments)}}},vi={readContext:Mo,use:ds,useCallback:Js,useContext:Mo,useEffect:Hs,useImperativeHandle:Ks,useInsertionEffect:qs,useLayoutEffect:Vs,useMemo:Qs,useReducer:ps,useRef:zs,useState:function(){return ps(fs)},useDebugValue:$s,useDeferredValue:function(e,t){return Xs(cs(),qa.memoizedState,e,t)},useTransition:function(){var e=ps(fs)[0],t=cs().memoizedState;return["boolean"===typeof e?e:us(e),t]},useSyncExternalStore:vs,useId:ai,useHostTransitionStatus:oi,useFormState:Ms,useActionState:Ms,useOptimistic:function(e,t){return Cs(cs(),0,e,t)},useMemoCache:hs,useCacheRefresh:si};vi.useEffectEvent=Ws;var yi={readContext:Mo,use:ds,useCallback:Js,useContext:Mo,useEffect:Hs,useImperativeHandle:Ks,useInsertionEffect:qs,useLayoutEffect:Vs,useMemo:Qs,useReducer:gs,useRef:zs,useState:function(){return gs(fs)},useDebugValue:$s,useDeferredValue:function(e,t){var n=cs();return null===qa?Ys(n,e,t):Xs(n,qa.memoizedState,e,t)},useTransition:function(){var e=gs(fs)[0],t=cs().memoizedState;return["boolean"===typeof e?e:us(e),t]},useSyncExternalStore:vs,useId:ai,useHostTransitionStatus:oi,useFormState:Ls,useActionState:Ls,useOptimistic:function(e,t){var n=cs();return null!==qa?Cs(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:hs,useCacheRefresh:si};function bi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}yi.useEffectEvent=Ws;var xi={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),o=ba(r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=xa(e,o,r))&&($c(t,e,r),wa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),o=ba(r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=xa(e,o,r))&&($c(t,e,r),wa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=ba(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=xa(e,r,n))&&($c(t,e,n),wa(t,e,n))}};function wi(e,t,n,r,o,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(o,a))}function ki(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xi.enqueueReplaceState(t,t.state,null)}function Si(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=f({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}function Ci(e){Er(e)}function Ni(e){console.error(e)}function Ei(e){Er(e)}function ji(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Oi(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ri(e,t,n){return(n=ba(n)).tag=3,n.payload={element:null},n.callback=function(){ji(e,t)},n}function Ti(e){return(e=ba(e)).tag=3,e}function Ai(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"===typeof o){var a=r.value;e.payload=function(){return o(a)},e.callback=function(){Oi(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Oi(t,n,r),"function"!==typeof o&&(null===Lc?Lc=new Set([this]):Lc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var _i=Error(s(461)),Mi=!1;function Pi(e,t,n,r){t.child=null===e?ma(t,null,n,r):pa(t,e.child,n,r)}function Ii(e,t,n,r,o){n=n.render;var a=t.ref;if("ref"in r){var s={};for(var i in r)"ref"!==i&&(s[i]=r[i])}else s=r;return _o(t),r=ts(e,t,n,s,a,o),i=as(),null===e||Mi?(ho&&i&&so(t),t.flags|=1,Pi(e,t,r,o),t.child):(ss(e,t,o),ol(e,t,o))}function Li(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Dr(a)||void 0!==a.defaultProps||null!==n.compare?((e=Hr(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Fi(e,t,a,r,o))}if(a=e.child,!al(e,o)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(s,r)&&e.ref===t.ref)return ol(e,t,o)}return t.flags|=1,(e=Br(a,r)).ref=t.ref,e.return=t,t.child=e}function Fi(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(Zn(a,r)&&e.ref===t.ref){if(Mi=!1,t.pendingProps=r=a,!al(e,o))return t.lanes=e.lanes,ol(e,t,o);0!==(131072&e.flags)&&(Mi=!0)}}return qi(e,t,n,r,o)}function zi(e,t,n,r){var o=r.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(a=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,o=0;null!==r;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~a}else r=0,t.child=null;return Bi(e,t,a,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Bi(e,t,null!==a?a.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Qo(0,null!==a?a.cachePool:null),null!==a?Ta(t,a):Aa(),Fa(t)}else null!==a?(Qo(0,a.cachePool),Ta(t,a),za(),t.memoizedState=null):(null!==e&&Qo(0,null),Aa(),za());return Pi(e,t,o,n),t.child}function Di(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bi(e,t,n,r,o){var a=Jo();return a=null===a?null:{parent:Do._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Qo(0,null),Aa(),Fa(t),null!==e&&To(e,t,r,!0),t.childLanes=o,null}function Ui(e,t){return(t=Zi({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Hi(e,t,n){return pa(t,e.child,null,n),(e=Ui(t,t.pendingProps)).flags|=2,Da(t),t.memoizedState=null,e}function Wi(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function qi(e,t,n,r,o){return _o(t),n=ts(e,t,n,r,void 0,o),r=as(),null===e||Mi?(ho&&r&&so(t),t.flags|=1,Pi(e,t,n,o),t.child):(ss(e,t,o),ol(e,t,o))}function Vi(e,t,n,r,o,a){return _o(t),t.updateQueue=null,n=rs(t,r,n,o),ns(e),r=as(),null===e||Mi?(ho&&r&&so(t),t.flags|=1,Pi(e,t,n,a),t.child):(ss(e,t,a),ol(e,t,a))}function Gi(e,t,n,r,o){if(_o(t),null===t.stateNode){var a=Lr,s=n.contextType;"object"===typeof s&&null!==s&&(a=Mo(s)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=xi,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},va(t),s=n.contextType,a.context="object"===typeof s&&null!==s?Mo(s):Lr,a.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(bi(t,n,s,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(s=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&xi.enqueueReplaceState(a,a.state,null),Na(t,r,a,o),Ca(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var i=t.memoizedProps,l=Si(n,i);a.props=l;var c=a.context,u=n.contextType;s=Lr,"object"===typeof u&&null!==u&&(s=Mo(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate,i=t.pendingProps!==i,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(i||c!==s)&&ki(t,a,r,s),ga=!1;var h=t.memoizedState;a.state=h,Na(t,r,a,o),Ca(),c=t.memoizedState,i||h!==c||ga?("function"===typeof d&&(bi(t,n,d,r),c=t.memoizedState),(l=ga||wi(t,n,l,r,h,c,s))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=s,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ya(e,t),u=Si(n,s=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=Lr,"object"===typeof c&&null!==c&&(l=Mo(c)),(c="function"===typeof(i=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ki(t,a,r,l),ga=!1,h=t.memoizedState,a.state=h,Na(t,r,a,o),Ca();var f=t.memoizedState;s!==d||h!==f||ga||null!==e&&null!==e.dependencies&&Ao(e.dependencies)?("function"===typeof i&&(bi(t,n,i,r),f=t.memoizedState),(u=ga||wi(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ao(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Wi(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=pa(t,e.child,null,o),t.child=pa(t,null,n,o)):Pi(e,t,n,o),t.memoizedState=a.state,e=t.child):e=ol(e,t,o),e}function Ki(e,t,n,r){return xo(),t.flags|=256,Pi(e,t,n,r),t.child}var $i={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ji(e){return{baseLanes:e,cachePool:Yo()}}function Qi(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=jc),e}function Yi(e,t,n){var r,o=t.pendingProps,a=!1,i=0!==(128&t.flags);if((r=i)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Ba.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ho){if(a?Ia(t):za(),(e=uo)?null!==(e=null!==(e=Td(e,po))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},(n=Vr(e)).return=t,t.child=n,co=t,uo=null):e=null,null===e)throw go(t);return _d(e)?t.lanes=32:t.lanes=536870912,null}var l=o.children;return o=o.fallback,a?(za(),l=Zi({mode:"hidden",children:l},a=t.mode),o=Wr(o,a,n,null),l.return=t,o.return=t,l.sibling=o,t.child=l,(o=t.child).memoizedState=Ji(n),o.childLanes=Qi(e,r,n),t.memoizedState=$i,Di(null,o)):(Ia(t),Xi(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(i)256&t.flags?(Ia(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(za(),t.child=e.child,t.flags|=128,t=null):(za(),l=o.fallback,a=t.mode,o=Zi({mode:"visible",children:o.children},a),(l=Wr(l,a,n,null)).flags|=2,o.return=t,l.return=t,o.sibling=l,t.child=o,pa(t,e.child,null,n),(o=t.child).memoizedState=Ji(n),o.childLanes=Qi(e,r,n),t.memoizedState=$i,t=Di(null,o));else if(Ia(t),_d(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(o=Error(s(419))).stack="",o.digest=r,ko({value:o,source:null,stack:null}),t=el(e,t,n)}else if(Mi||To(e,t,n,!1),r=0!==(n&e.childLanes),Mi||r){if(null!==(r=pc)&&(0!==(o=Ie(r,n))&&o!==c.retryLane))throw c.retryLane=o,Mr(e,o),$c(r,e,o),_i;Ad(l)||su(),t=el(e,t,n)}else Ad(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,uo=Md(l.nextSibling),co=t,ho=!0,fo=null,po=!1,null!==e&&lo(t,e),(t=Xi(t,o.children)).flags|=4096);return t}return a?(za(),l=o.fallback,a=t.mode,u=(c=e.child).sibling,(o=Br(c,{mode:"hidden",children:o.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Br(u,l):(l=Wr(l,a,n,null)).flags|=2,l.return=t,o.return=t,o.sibling=l,t.child=o,Di(null,o),o=t.child,null===(l=e.child.memoizedState)?l=Ji(n):(null!==(a=l.cachePool)?(c=Do._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=Yo(),l={baseLanes:l.baseLanes|n,cachePool:a}),o.memoizedState=l,o.childLanes=Qi(e,r,n),t.memoizedState=$i,Di(e.child,o)):(Ia(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Xi(e,t){return(t=Zi({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zi(e,t){return(e=zr(22,e,null,t)).lanes=0,e}function el(e,t,n){return pa(t,e.child,null,n),(e=Xi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Oo(e.return,t,n)}function nl(e,t,n,r,o,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,treeForkCount:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o,s.treeForkCount=a)}function rl(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;r=r.children;var s=Ba.current,i=0!==(2&s);if(i?(s=1&s|2,t.flags|=128):s&=1,U(Ba,s),Pi(e,t,r,n),r=ho?Xr:0,!i&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),nl(t,!1,o,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Ua(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}nl(t,!0,n,null,a,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ol(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Cc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(To(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function al(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ao(e))}function sl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Mi=!0;else{if(!al(e,n)&&0===(128&t.flags))return Mi=!1,function(e,t,n){switch(t.tag){case 3:$(t,t.stateNode.containerInfo),Eo(0,Do,e.memoizedState.cache),xo();break;case 27:case 5:Q(t);break;case 4:$(t,t.stateNode.containerInfo);break;case 10:Eo(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,La(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ia(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Yi(e,t,n):(Ia(t),null!==(e=ol(e,t,n))?e.sibling:null);Ia(t);break;case 19:var o=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(To(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return rl(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),U(Ba,Ba.current),r)break;return null;case 22:return t.lanes=0,zi(e,t,n,t.pendingProps);case 24:Eo(0,Do,e.memoizedState.cache)}return ol(e,t,n)}(e,t,n);Mi=0!==(131072&e.flags)}else Mi=!1,ho&&0!==(1048576&t.flags)&&ao(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=oa(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var o=e.$$typeof;if(o===k){t.tag=11,t=Ii(null,t,e,r,n);break e}if(o===N){t.tag=14,t=Li(null,t,e,r,n);break e}}throw t=_(e)||e,Error(s(306,t,""))}Dr(e)?(r=Si(e,r),t.tag=1,t=Gi(null,t,e,r,n)):(t.tag=0,t=qi(null,t,e,r,n))}return t;case 0:return qi(e,t,t.type,t.pendingProps,n);case 1:return Gi(e,t,r=t.type,o=Si(r,t.pendingProps),n);case 3:e:{if($(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var a=t.memoizedState;o=a.element,ya(e,t),Na(t,r,null,n);var i=t.memoizedState;if(r=i.cache,Eo(0,Do,r),r!==a.cache&&Ro(t,[Do],n,!0),Ca(),r=i.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ki(e,t,r,n);break e}if(r!==o){ko(o=$r(Error(s(424)),t)),t=Ki(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(uo=Md(e.firstChild),co=t,ho=!0,fo=null,po=!0,n=ma(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(xo(),r===o){t=ol(e,t,n);break e}Pi(e,t,r,n)}t=t.child}return t;case 26:return Wi(e,t),null===e?(n=Vd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ho||(n=t.type,e=t.pendingProps,(r=gd(G.current).createElement(n))[Ue]=t,r[He]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Vd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&ho&&(r=t.stateNode=Fd(t.type,t.pendingProps,G.current),co=t,po=!0,o=uo,Ed(t.type)?(Pd=o,uo=Md(r.firstChild)):uo=o),Pi(e,t,t.pendingProps.children,n),Wi(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ho&&((o=r=uo)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[$e])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===a)return e}if(null===(e=Md(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,po))?(t.stateNode=r,co=t,uo=Md(r.firstChild),po=!1,o=!0):o=!1),o||go(t)),Q(t),o=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,r=a.children,bd(o,a)?r=null:null!==i&&bd(o,i)&&(t.flags|=32),null!==t.memoizedState&&(o=ts(e,t,os,null,null,n),uh._currentValue=o),Wi(e,t),Pi(e,t,r,n),t.child;case 6:return null===e&&ho&&((e=n=uo)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Md(e.nextSibling)))return null}return e}(n,t.pendingProps,po))?(t.stateNode=n,co=t,uo=null,e=!0):e=!1),e||go(t)),null;case 13:return Yi(e,t,n);case 4:return $(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pa(t,null,r,n):Pi(e,t,r,n),t.child;case 11:return Ii(e,t,t.type,t.pendingProps,n);case 7:return Pi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Pi(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Eo(0,t.type,r.value),Pi(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,_o(t),r=r(o=Mo(o)),t.flags|=1,Pi(e,t,r,n),t.child;case 14:return Li(e,t,t.type,t.pendingProps,n);case 15:return Fi(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,o=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ho){if("hidden"===r.mode)return e=Ui(t,r),t.lanes=536870912,Di(null,e);if(La(t),(e=uo)?null!==(e=null!==(e=Td(e,po))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},(n=Vr(e)).return=t,t.child=n,co=t,uo=null):e=null,null===e)throw go(t);return t.lanes=536870912,null}return Ui(t,r)}var a=e.memoizedState;if(null!==a){var i=a.dehydrated;if(La(t),o)if(256&t.flags)t.flags&=-257,t=Hi(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(Mi||To(e,t,n,!1),o=0!==(n&e.childLanes),Mi||o){if(null!==(r=pc)&&0!==(i=Ie(r,n))&&i!==a.retryLane)throw a.retryLane=i,Mr(e,i),$c(r,e,i),_i;su(),t=Hi(e,t,n)}else e=a.treeContext,uo=Md(i.nextSibling),co=t,ho=!0,fo=null,po=!1,null!==e&&lo(t,e),(t=Ui(t,r)).flags|=4096;return t}return(e=Br(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return zi(e,t,n,t.pendingProps);case 24:return _o(t),r=Mo(Do),null===e?(null===(o=Jo())&&(o=pc,a=Bo(),o.pooledCache=a,a.refCount++,null!==a&&(o.pooledCacheLanes|=n),o=a),t.memoizedState={parent:r,cache:o},va(t),Eo(0,Do,o)):(0!==(e.lanes&n)&&(ya(e,t),Na(t,null,null,n),Ca()),o=e.memoizedState,a=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),Eo(0,Do,r)):(r=a.cache,Eo(0,Do,r),r!==o.cache&&Ro(t,[Do],n,!0))),Pi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function il(e){e.flags|=4}function ll(e,t,n,r,o){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&o)===o)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw aa=ta,Zo;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!oh(t)){if(!ru())throw aa=ta,Zo;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Te():536870912,e.lanes|=t,Oc|=t)}function dl(e,t){if(!ho)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=65011712&o.subtreeFlags,r|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fl(e,t,n){var r=t.pendingProps;switch(io(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),jo(Do),J(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(bo(t)?il(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,wo())),hl(t),null;case 26:var o=t.type,a=t.memoizedState;return null===e?(il(t),null!==a?(hl(t),cl(t,a)):(hl(t),ll(t,o,0,0,n))):a?a!==e.memoizedState?(il(t),hl(t),cl(t,a)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&il(t),hl(t),ll(t,o,0,0,n)),null;case 27:if(Y(t),n=G.current,o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&il(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return hl(t),null}e=q.current,bo(t)?vo(t):(e=Fd(o,r,n),t.stateNode=e,il(t))}return hl(t),null;case 5:if(Y(t),o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&il(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return hl(t),null}if(a=q.current,bo(t))vo(t);else{var i=gd(G.current);switch(a){case 1:a=i.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:a=i.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":a=i.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":a=i.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":(a=i.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a="string"===typeof r.is?i.createElement(o,{is:r.is}):i.createElement(o)}}a[Ue]=t,a[He]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)a.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=a;e:switch(hd(a,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&il(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&il(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=G.current,bo(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=co))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||go(t,!0)}else(e=gd(e).createTextNode(r))[Ue]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=bo(t),null!==n){if(null===e){if(!r)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[Ue]=t}else xo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=wo(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Da(t),t):(Da(t),null);if(0!==(128&t.flags))throw Error(s(558))}return hl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=bo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[Ue]=t}else xo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),o=!1}else o=wo(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(Da(t),t):(Da(t),null)}return Da(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool),a=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==o&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return J(),null===e&&Zu(t.stateNode.containerInfo),hl(t),null;case 10:return jo(t.type),hl(t),null;case 19:if(B(Ba),null===(r=t.memoizedState))return hl(t),null;if(o=0!==(128&t.flags),null===(a=r.rendering))if(o)dl(r,!1);else{if(0!==Sc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=Ua(e))){for(t.flags|=128,dl(r,!1),e=a.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return U(Ba,1&Ba.current|2),ho&&oo(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Pc&&(t.flags|=128,o=!0,dl(r,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=Ua(a))){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!ho)return hl(t),null}else 2*le()-r.renderingStartTime>Pc&&536870912!==n&&(t.flags|=128,o=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Ba.current,U(Ba,o?1&n|2:1&n),ho&&oo(t,r.treeForkCount),e):(hl(t),null);case 22:case 23:return Da(t),_a(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B($o),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),jo(Do),hl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function pl(e,t){switch(io(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return jo(Do),J(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 31:if(null!==t.memoizedState){if(Da(t),null===t.alternate)throw Error(s(340));xo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Da(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));xo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(Ba),null;case 4:return J(),null;case 10:return jo(t.type),null;case 22:case 23:return Da(t),_a(),null!==e&&B($o),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return jo(Do),null;default:return null}}function ml(e,t){switch(io(t),t.tag){case 3:jo(Do),J();break;case 26:case 27:case 5:Y(t);break;case 4:J();break;case 31:null!==t.memoizedState&&Da(t);break;case 13:Da(t);break;case 19:B(Ba);break;case 10:jo(t.type);break;case 22:case 23:Da(t),_a(),null!==e&&B($o);break;case 24:jo(Do)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var a=n.create,s=n.inst;r=a(),s.destroy=r}n=n.next}while(n!==o)}}catch(i){Su(t,t.return,i)}}function vl(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var a=o.next;r=a;do{if((r.tag&e)===e){var s=r.inst,i=s.destroy;if(void 0!==i){s.destroy=void 0,o=t;var l=n,c=i;try{c()}catch(u){Su(o,l,u)}}}r=r.next}while(r!==a)}}catch(u){Su(t,t.return,u)}}function yl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ja(t,n)}catch(r){Su(e,e.return,r)}}}function bl(e,t,n){n.props=Si(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Su(e,t,r)}}function xl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(o){Su(e,t,o)}}function wl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(o){Su(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){Su(e,t,a)}else n.current=null}function kl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){Su(e,e.return,o)}}function Sl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,a=null,i=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||ud(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":a=p;break;case"name":o=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":i=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&ud(e,t,f,p,r,h)}}return void yt(e,i,l,c,u,d,a,o);case"select":for(a in p=i=l=f=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(a)||ud(e,t,a,null,r,c)}for(o in r)if(a=r[o],c=n[o],r.hasOwnProperty(o)&&(null!=a||null!=c))switch(o){case"value":f=a;break;case"defaultValue":l=a;break;case"multiple":i=a;default:a!==c&&ud(e,t,o,a,r,c)}return t=l,n=i,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,r,o)}for(i in r)if(o=r[i],a=n[i],r.hasOwnProperty(i)&&(null!=o||null!=a))switch(i){case"value":f=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(s(91));break;default:o!==a&&ud(e,t,i,o,r,a)}return void kt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ud(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ud(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&ud(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:ud(e,t,u,f,r,p)}return;default:if(Ot(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&dd(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||dd(e,t,d,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&ud(e,t,y,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||ud(e,t,h,f,r,p)}(r,e.type,n,t),r[He]=t}catch(o){Su(e,e.return,o)}}function Cl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ed(e.type)||4===e.tag}function Nl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ed(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function El(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=_t));else if(4!==r&&(27===r&&Ed(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(El(e,t,n),e=e.sibling;null!==e;)El(e,t,n),e=e.sibling}function jl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ed(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(jl(e,t,n),e=e.sibling;null!==e;)jl(e,t,n),e=e.sibling}function Ol(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);hd(t,r,n),t[Ue]=e,t[He]=n}catch(a){Su(e,e.return,a)}}var Rl=!1,Tl=!1,Al=!1,_l="function"===typeof WeakSet?WeakSet:Set,Ml=null;function Pl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:$l(e,n),4&r&&gl(5,n);break;case 1:if($l(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){Su(n,n.return,s)}else{var o=Si(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){Su(n,n.return,i)}}64&r&&yl(n),512&r&&xl(n,n.return);break;case 3:if($l(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ja(e,t)}catch(s){Su(n,n.return,s)}}break;case 27:null===t&&4&r&&Ol(n);case 26:case 5:$l(e,n),null===t&&4&r&&kl(n),512&r&&xl(n,n.return);break;case 12:$l(e,n);break;case 31:$l(e,n),4&r&&Bl(e,n);break;case 13:$l(e,n),4&r&&Ul(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=ju.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Rl)){t=null!==t&&null!==t.memoizedState||Tl,o=Rl;var a=Tl;Rl=r,(Tl=t)&&!a?Ql(e,n,0!==(8772&n.subtreeFlags)):$l(e,n),Rl=o,Tl=a}break;case 30:break;default:$l(e,n)}}function Il(e){var t=e.alternate;null!==t&&(e.alternate=null,Il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ll=null,Fl=!1;function zl(e,t,n){for(n=n.child;null!==n;)Dl(e,t,n),n=n.sibling}function Dl(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(a){}switch(n.tag){case 26:Tl||wl(n,t),zl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Tl||wl(n,t);var r=Ll,o=Fl;Ed(n.type)&&(Ll=n.stateNode,Fl=!1),zl(e,t,n),zd(n.stateNode),Ll=r,Fl=o;break;case 5:Tl||wl(n,t);case 6:if(r=Ll,o=Fl,Ll=null,zl(e,t,n),Fl=o,null!==(Ll=r))if(Fl)try{(9===Ll.nodeType?Ll.body:"HTML"===Ll.nodeName?Ll.ownerDocument.body:Ll).removeChild(n.stateNode)}catch(s){Su(n,t,s)}else try{Ll.removeChild(n.stateNode)}catch(s){Su(n,t,s)}break;case 18:null!==Ll&&(Fl?(jd(9===(e=Ll).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),qh(e)):jd(Ll,n.stateNode));break;case 4:r=Ll,o=Fl,Ll=n.stateNode.containerInfo,Fl=!0,zl(e,t,n),Ll=r,Fl=o;break;case 0:case 11:case 14:case 15:vl(2,n,t),Tl||vl(4,n,t),zl(e,t,n);break;case 1:Tl||(wl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bl(n,t,r)),zl(e,t,n);break;case 21:zl(e,t,n);break;case 22:Tl=(r=Tl)||null!==n.memoizedState,zl(e,t,n),Tl=r;break;default:zl(e,t,n)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{qh(e)}catch(n){Su(t,t.return,n)}}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{qh(e)}catch(n){Su(t,t.return,n)}}function Hl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new _l),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new _l),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Ou.bind(null,e,t);t.then(r,r)}})}function Wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],a=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 27:if(Ed(l.type)){Ll=l.stateNode,Fl=!1;break e}break;case 5:Ll=l.stateNode,Fl=!1;break e;case 3:case 4:Ll=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===Ll)throw Error(s(160));Dl(a,i,o),Ll=null,Fl=!1,null!==(a=o.alternate)&&(a.return=null),o.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Vl(t,e),t=t.sibling}var ql=null;function Vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wl(t,e),Gl(e),4&r&&(vl(3,e,e.return),gl(3,e),vl(5,e,e.return));break;case 1:Wl(t,e),Gl(e),512&r&&(Tl||null===n||wl(n,n.return)),64&r&&Rl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=ql;if(Wl(t,e),Gl(e),512&r&&(Tl||null===n||wl(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(a=o.getElementsByTagName("title")[0])||a[$e]||a[Ue]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=o.createElement(r),o.head.insertBefore(a,o.querySelector("head > title"))),hd(a,r,n),a[Ue]=e,et(a),r=a;break e;case"link":var i=nh("link","href",o).get(r+(n.href||""));if(i)for(var l=0;l<i.length;l++)if((a=i[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){i.splice(l,1);break t}hd(a=o.createElement(r),r,n),o.head.appendChild(a);break;case"meta":if(i=nh("meta","content",o).get(r+(n.content||"")))for(l=0;l<i.length;l++)if((a=i[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){i.splice(l,1);break t}hd(a=o.createElement(r),r,n),o.head.appendChild(a);break;default:throw Error(s(468,r))}a[Ue]=e,et(a),r=a}e.stateNode=r}else rh(o,e.type,e.stateNode);else e.stateNode=Yd(o,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?rh(o,e.type,e.stateNode):Yd(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Sl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Wl(t,e),Gl(e),512&r&&(Tl||null===n||wl(n,n.return)),null!==n&&4&r&&Sl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Wl(t,e),Gl(e),512&r&&(Tl||null===n||wl(n,n.return)),32&e.flags){o=e.stateNode;try{Ct(o,"")}catch(m){Su(e,e.return,m)}}4&r&&null!=e.stateNode&&Sl(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(Al=!0);break;case 6:if(Wl(t,e),Gl(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Su(e,e.return,m)}}break;case 3:if(th=null,o=ql,ql=Ud(t.containerInfo),Wl(t,e),ql=o,Gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qh(t.containerInfo)}catch(m){Su(e,e.return,m)}Al&&(Al=!1,Kl(e));break;case 4:r=ql,ql=Ud(e.stateNode.containerInfo),Wl(t,e),Gl(e),ql=r;break;case 12:default:Wl(t,e),Gl(e);break;case 31:case 19:Wl(t,e),Gl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r)));break;case 13:Wl(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(_c=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r)));break;case 22:o=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Rl,d=Tl;if(Rl=u||o,Tl=d||c,Wl(t,e),Tl=d,Rl=u,Gl(e),8192&r)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||c||Rl||Tl||Jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,o)"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){Su(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=o?"":c.memoizedProps}catch(m){Su(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;o?Od(p,!0):Od(c.stateNode,!1)}catch(m){Su(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Hl(e,n))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Cl(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var o=n.stateNode;jl(e,Nl(e),o);break;case 5:var a=n.stateNode;32&n.flags&&(Ct(a,""),n.flags&=-33),jl(e,Nl(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;El(e,Nl(e),i);break;default:throw Error(s(161))}}catch(l){Su(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Kl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Kl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function $l(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Pl(e,t.alternate,t),t=t.sibling}function Jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Jl(t);break;case 1:wl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bl(t,t.return,n),Jl(t);break;case 27:zd(t.stateNode);case 26:case 5:wl(t,t.return),Jl(t);break;case 22:null===t.memoizedState&&Jl(t);break;default:Jl(t)}e=e.sibling}}function Ql(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:Ql(o,a,n),gl(4,a);break;case 1:if(Ql(o,a,n),"function"===typeof(o=(r=a).stateNode).componentDidMount)try{o.componentDidMount()}catch(c){Su(r,r.return,c)}if(null!==(o=(r=a).updateQueue)){var i=r.stateNode;try{var l=o.shared.hiddenCallbacks;if(null!==l)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)Ea(l[o],i)}catch(c){Su(r,r.return,c)}}n&&64&s&&yl(a),xl(a,a.return);break;case 27:Ol(a);case 26:case 5:Ql(o,a,n),n&&null===r&&4&s&&kl(a),xl(a,a.return);break;case 12:Ql(o,a,n);break;case 31:Ql(o,a,n),n&&4&s&&Bl(o,a);break;case 13:Ql(o,a,n),n&&4&s&&Ul(o,a);break;case 22:null===a.memoizedState&&Ql(o,a,n),xl(a,a.return);break;case 30:break;default:Ql(o,a,n)}t=t.sibling}}function Yl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Uo(n))}function Xl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Uo(e))}function Zl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Zl(e,t,n,r),2048&o&&gl(9,t);break;case 1:case 31:case 13:default:Zl(e,t,n,r);break;case 3:Zl(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Uo(e)));break;case 12:if(2048&o){Zl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,i=a.onPostCommit;"function"===typeof i&&i(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Su(t,t.return,l)}}else Zl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,null!==t.memoizedState?2&a._visibility?Zl(e,t,n,r):nc(e,t):2&a._visibility?Zl(e,t,n,r):(a._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&o&&Yl(s,t);break;case 24:Zl(e,t,n,r),2048&o&&Xl(t.alternate,t)}}function tc(e,t,n,r,o){for(o=o&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,s=t,i=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:tc(a,s,i,l,o),gl(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?tc(a,s,i,l,o):nc(a,s):(u._visibility|=2,tc(a,s,i,l,o)),o&&2048&c&&Yl(s.alternate,s);break;case 24:tc(a,s,i,l,o),o&&2048&c&&Xl(s.alternate,s);break;default:tc(a,s,i,l,o)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:nc(n,r),2048&o&&Yl(r.alternate,r);break;case 24:nc(n,r),2048&o&&Xl(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function oc(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)ac(e,t,n),e=e.sibling}function ac(e,t,n){switch(e.tag){case 26:oc(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var o=Gd(r.href),a=t.querySelector(Kd(o));if(a)return null!==(t=a._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=sh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,void et(a);a=t.ownerDocument||t,r=$d(r),(o=Dd.get(o))&&Zd(r,o),et(a=a.createElement("link"));var s=a;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),hd(a,"link",r),n.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=sh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,ql,e.memoizedState,e.memoizedProps);break;case 5:default:oc(e,t,n);break;case 3:case 4:var r=ql;ql=Ud(e.stateNode.containerInfo),oc(e,t,n),ql=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,oc(e,t,n),rc=r):oc(e,t,n))}}function sc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ic(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ml=r,uc(r,e)}sc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:ic(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:ic(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):ic(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ml=r,uc(r,e)}sc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Ml;){var n=Ml;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Uo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Ml=r;else e:for(n=e;null!==Ml;){var o=(r=Ml).sibling,a=r.return;if(Il(r),r===n){Ml=null;break e}if(null!==o){o.return=a,Ml=o;break e}Ml=a}}}var dc={getCacheForType:function(e){var t=Mo(Do),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Mo(Do).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,fc=0,pc=null,mc=null,gc=0,vc=0,yc=null,bc=!1,xc=!1,wc=!1,kc=0,Sc=0,Cc=0,Nc=0,Ec=0,jc=0,Oc=0,Rc=null,Tc=null,Ac=!1,_c=0,Mc=0,Pc=1/0,Ic=null,Lc=null,Fc=0,zc=null,Dc=null,Bc=0,Uc=0,Hc=null,Wc=null,qc=0,Vc=null;function Gc(){return 0!==(2&fc)&&0!==gc?gc&-gc:null!==P.T?Hu():ze()}function Kc(){if(0===jc)if(0===(536870912&gc)||ho){var e=Ce;0===(3932160&(Ce<<=1))&&(Ce=262144),jc=e}else jc=536870912;return null!==(e=Ma.current)&&(e.flags|=32),jc}function $c(e,t,n){(e!==pc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(tu(e,0),Xc(e,gc,jc,!1)),_e(e,n),0!==(2&fc)&&e===pc||(e===pc&&(0===(2&fc)&&(Nc|=n),4===Sc&&Xc(e,gc,jc,!1)),Iu(e))}function Jc(e,t,n){if(0!==(6&fc))throw Error(s(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Oe(e,t),o=r?function(e,t){var n=fc;fc|=2;var r=ou(),o=au();pc!==e||gc!==t?(Ic=null,Pc=le()+500,tu(e,t)):xc=Oe(e,t);e:for(;;)try{if(0!==vc&&null!==mc){t=mc;var a=yc;t:switch(vc){case 1:vc=0,yc=null,hu(e,t,a,1);break;case 2:case 9:if(na(a)){vc=0,yc=null,du(t);break}t=function(){2!==vc&&9!==vc||pc!==e||(vc=7),Iu(e)},a.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:na(a)?(vc=0,yc=null,du(t)):(vc=0,yc=null,hu(e,t,a,7));break;case 5:var i=null;switch(mc.tag){case 26:i=mc.memoizedState;case 5:case 27:var l=mc;if(i?oh(i):l.stateNode.complete){vc=0,yc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,fu(u)):mc=null}break t}}vc=0,yc=null,hu(e,t,a,5);break;case 6:vc=0,yc=null,hu(e,t,a,6);break;case 8:eu(),Sc=6;break e;default:throw Error(s(462))}}cu();break}catch(d){nu(e,d)}return No=Co=null,P.H=r,P.A=o,fc=n,null!==mc?0:(pc=null,gc=0,Tr(),Sc)}(e,t):iu(e,t,!0),a=r;;){if(0===o){xc&&!r&&Xc(e,t,0,!1);break}if(n=e.current.alternate,!a||Yc(n)){if(2===o){if(a=t,e.errorRecoveryDisabledLanes&a)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var l=e;o=Rc;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,i).flags|=256),2!==(i=iu(l,i,!1))){if(wc&&!c){l.errorRecoveryDisabledLanes|=a,Nc|=a,o=4;break e}a=Tc,Tc=o,null!==a&&(null===Tc?Tc=a:Tc.push.apply(Tc,a))}o=i}if(a=!1,2!==o)continue}}if(1===o){tu(e,0),Xc(e,t,0,!0);break}e:{switch(r=e,a=o){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Xc(r,t,jc,!bc);break e;case 2:Tc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(o=_c+300-le())){if(Xc(r,t,jc,!bc),0!==je(r,0,!0))break e;Bc=t,r.timeoutHandle=wd(Qc.bind(null,r,n,Tc,Ic,Ac,t,jc,Nc,Oc,bc,a,"Throttled",-0,0),o)}else Qc(r,n,Tc,Ic,Ac,t,jc,Nc,Oc,bc,a,null,-0,0)}break}o=iu(e,t,!1),a=!1}Iu(e)}function Qc(e,t,n,r,o,a,s,i,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ac(t,a,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_t});var p=(62914560&a)===a?_c-le():(4194048&a)===a?Mc-le():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ah&&(ah=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var o=n[r],a=o.transferSize,s=o.initiatorType,i=o.duration;if(a&&i&&fd(s)){for(s=0,i=o.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>i)break;var u=l.transferSize,d=l.initiatorType;u&&fd(d)&&(s+=u*((l=l.responseEnd)<i?1:(i-c)/(l-c)))}if(--r,t+=8*(a+s)/(o.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var o=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ah?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}(d,p)))return Bc=a,e.cancelPendingCommit=p(mu.bind(null,e,t,a,n,r,o,s,i,l,u,d,null,h,f)),void Xc(e,a,s,!c)}mu(e,t,a,n,r,o,s,i,l)}function Yc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!Xn(a(),o))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xc(e,t,n,r){t&=~Ec,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var a=31-xe(o),s=1<<a;r[a]=-1,o&=~s}0!==n&&Me(e,n,t)}function Zc(){return 0!==(6&fc)||(Lu(0,!1),!1)}function eu(){if(null!==mc){if(0===vc)var e=mc.return;else No=Co=null,is(e=mc),la=null,ca=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,kd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc=0,eu(),pc=e,mc=n=Br(e.current,null),gc=t,vc=0,yc=null,bc=!1,xc=Oe(e,t),wc=!1,Oc=jc=Ec=Nc=Cc=Sc=0,Tc=Rc=null,Ac=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-xe(r),a=1<<o;t|=e[o],r&=~a}return kc=t,Tr(),n}function nu(e,t){Wa=null,P.H=mi,t===Xo||t===ea?(t=sa(),vc=3):t===Zo?(t=sa(),vc=4):vc=t===_i?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,yc=t,null===mc&&(Sc=1,ji(e,$r(t,e.current)))}function ru(){var e=Ma.current;return null===e||((4194048&gc)===gc?null===Pa:((62914560&gc)===gc||0!==(536870912&gc))&&e===Pa)}function ou(){var e=P.H;return P.H=mi,null===e?mi:e}function au(){var e=P.A;return P.A=dc,e}function su(){Sc=4,bc||(4194048&gc)!==gc&&null!==Ma.current||(xc=!0),0===(134217727&Cc)&&0===(134217727&Nc)||null===pc||Xc(pc,gc,jc,!1)}function iu(e,t,n){var r=fc;fc|=2;var o=ou(),a=au();pc===e&&gc===t||(Ic=null,tu(e,t)),t=!1;var s=Sc;e:for(;;)try{if(0!==vc&&null!==mc){var i=mc,l=yc;switch(vc){case 8:eu(),s=6;break e;case 3:case 2:case 9:case 6:null===Ma.current&&(t=!0);var c=vc;if(vc=0,yc=null,hu(e,i,l,c),n&&xc){s=0;break e}break;default:c=vc,vc=0,yc=null,hu(e,i,l,c)}}lu(),s=Sc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,No=Co=null,fc=r,P.H=o,P.A=a,null===mc&&(pc=null,gc=0,Tr()),s}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!se();)uu(mc)}function uu(e){var t=sl(e.alternate,e,kc);e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Vi(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Vi(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:is(t);default:ml(n,t),t=sl(n,t=mc=Ur(t,kc),kc)}e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function hu(e,t,n,r){No=Co=null,is(t),la=null,ca=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&To(t,n,o,!0),null!==(n=Ma.current)){switch(n.tag){case 31:case 13:return null===Pa?su():null===n.alternate&&0===Sc&&(Sc=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===ta?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Cu(e,r,o)),!1;case 22:return n.flags|=65536,r===ta?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Cu(e,r,o)),!1}throw Error(s(435,n.tag))}return Cu(e,r,o),su(),!1}if(ho)return null!==(t=Ma.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==mo&&ko($r(e=Error(s(422),{cause:r}),n))):(r!==mo&&ko($r(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=$r(r,n),ka(e,o=Ri(e.stateNode,r,o)),4!==Sc&&(Sc=2)),!1;var a=Error(s(520),{cause:r});if(a=$r(a,n),null===Rc?Rc=[a]:Rc.push(a),4!==Sc&&(Sc=2),null===t)return!0;r=$r(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,ka(n,e=Ri(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Lc||!Lc.has(a))))return n.flags|=65536,o&=-o,n.lanes|=o,Ai(o=Ti(o),e,n,r),ka(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,gc))return Sc=1,ji(e,$r(n,e.current)),void(mc=null)}catch(a){if(null!==o)throw mc=o,a;return Sc=1,ji(e,$r(n,e.current)),void(mc=null)}32768&t.flags?(ho||1===r?e=!0:xc||0!==(536870912&gc)?e=!1:(bc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ma.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,bc);e=t.return;var n=fl(t.alternate,t,kc);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===Sc&&(Sc=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);Sc=6,mc=null}function mu(e,t,n,r,o,a,i,l,c){e.cancelPendingCommit=null;do{xu()}while(0!==Fc);if(0!==(6&fc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,o,a){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var i=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-xe(n),d=1<<u;i[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Me(e,r,0),0!==a&&0===o&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,n,a|=Rr,i,l,c),e===pc&&(mc=pc=null,gc=0),Dc=t,zc=e,Bc=n,Uc=a,Hc=o,Wc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,oe(he,function(){return wu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=P.T,P.T=null,o=I.p,I.p=2,i=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,pd=bh,or(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(l=i+o),h!==a||0!==r&&3!==h.nodeType||(c=i+r),3===h.nodeType&&(i+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===o&&(l=i),f===a&&++d===r&&(c=i),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},bh=!1,Ml=t;null!==Ml;)if(e=(t=Ml).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ml=e;else for(;null!==Ml;){switch(a=(t=Ml).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(o=e[n]).ref.impl=o.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,o=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var m=Si(n.type,o);e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){Su(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Rd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Ml=e;break}Ml=t.return}}(e,t)}finally{fc=i,I.p=o,P.T=r}}Fc=1,gu(),vu(),yu()}}function gu(){if(1===Fc){Fc=0;var e=zc,t=Dc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null;var r=I.p;I.p=2;var o=fc;fc|=4;try{Vl(t,e);var a=md,s=rr(e.containerInfo),i=a.focusedElem,l=a.selectionRange;if(s!==i&&i&&i.ownerDocument&&nr(i.ownerDocument.documentElement,i)){if(null!==l&&or(i)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in i)i.selectionStart=c,i.selectionEnd=Math.min(u,i.value.length);else{var d=i.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=i.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(s=g,g=m,m=s);var v=tr(i,m),y=tr(i,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=i;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<d.length;i++){var x=d[i];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}bh=!!pd,md=pd=null}finally{fc=o,I.p=r,P.T=n}}e.current=t,Fc=2}}function vu(){if(2===Fc){Fc=0;var e=zc,t=Dc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=P.T,P.T=null;var r=I.p;I.p=2;var o=fc;fc|=4;try{Pl(e,t.alternate,t)}finally{fc=o,I.p=r,P.T=n}}Fc=3}}function yu(){if(4===Fc||3===Fc){Fc=0,ie();var e=zc,t=Dc,n=Bc,r=Wc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,Dc=zc=null,bu(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(Lc=null),Fe(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=P.T,o=I.p,I.p=2,P.T=null;try{for(var a=e.onRecoverableError,s=0;s<r.length;s++){var i=r[s];a(i.value,{componentStack:i.stack})}}finally{P.T=t,I.p=o}}0!==(3&Bc)&&xu(),Iu(e),o=e.pendingLanes,0!==(261930&n)&&0!==(42&o)?e===Vc?qc++:(qc=0,Vc=e):qc=0,Lu(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Uo(t)))}function xu(){return gu(),vu(),yu(),wu()}function wu(){if(5!==Fc)return!1;var e=zc,t=Uc;Uc=0;var n=Fe(Bc),r=P.T,o=I.p;try{I.p=32>n?32:n,P.T=null,n=Hc,Hc=null;var a=zc,i=Bc;if(Fc=0,Dc=zc=null,Bc=0,0!==(6&fc))throw Error(s(331));var l=fc;if(fc|=4,lc(a.current),ec(a,a.current,i,n),fc=l,Lu(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,a)}catch(c){}return!0}finally{I.p=o,P.T=r,bu(e,t)}}function ku(e,t,n){t=$r(n,t),null!==(e=xa(e,t=Ri(e.stateNode,t,2),2))&&(_e(e,2),Iu(e))}function Su(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Lc||!Lc.has(r))){e=$r(n,e),null!==(r=xa(t,n=Ti(2),2))&&(Ai(n,r,t,e),_e(r,2),Iu(r));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(wc=!0,o.add(n),e=Nu.bind(null,e,t,n),t.then(e,e))}function Nu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(gc&n)===n&&(4===Sc||3===Sc&&(62914560&gc)===gc&&300>le()-_c?0===(2&fc)&&tu(e,0):Ec|=n,Oc===gc&&(Oc=0)),Iu(e)}function Eu(e,t){0===t&&(t=Te()),null!==(e=Mr(e,t))&&(_e(e,t),Iu(e))}function ju(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Eu(e,n)}function Ou(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),Eu(e,n)}var Ru=null,Tu=null,Au=!1,_u=!1,Mu=!1,Pu=0;function Iu(e){e!==Tu&&null===e.next&&(null===Tu?Ru=Tu=e:Tu=Tu.next=e),_u=!0,Au||(Au=!0,Cd(function(){0!==(6&fc)?oe(ue,Fu):zu()}))}function Lu(e,t){if(!Mu&&_u){Mu=!0;do{for(var n=!1,r=Ru;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var a=0;else{var s=r.suspendedLanes,i=r.pingedLanes;a=(1<<31-xe(42|e)+1)-1,a=201326741&(a&=o&~(s&~i))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Uu(r,a))}else a=gc,0===(3&(a=je(r,r===pc?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Oe(r,a)||(n=!0,Uu(r,a));r=r.next}}while(n);Mu=!1}}function Fu(){zu()}function zu(){_u=Au=!1;var e=0;0!==Pu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==xd&&(xd=e,!0);return xd=null,!1}()&&(e=Pu);for(var t=le(),n=null,r=Ru;null!==r;){var o=r.next,a=Du(r,t);0===a?(r.next=null,null===n?Ru=o:n.next=o,null===o&&(Tu=n)):(n=r,(0!==e||0!==(3&a))&&(_u=!0)),r=o}0!==Fc&&5!==Fc||Lu(e,!1),0!==Pu&&(Pu=0)}function Du(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-xe(a),i=1<<s,l=o[s];-1===l?0!==(i&n)&&0===(i&r)||(o[s]=Re(i,t)):l<=t&&(e.expiredLanes|=i),a&=~i}if(n=gc,n=je(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ae(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Oe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ae(r),Fe(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=Bu.bind(null,e),n=oe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ae(r),e.callbackPriority=2,e.callbackNode=null,2}function Bu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=je(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,r,t),Du(e,le()),null!=e.callbackNode&&e.callbackNode===n?Bu.bind(null,e):null)}function Uu(e,t){if(xu())return null;Jc(e,t,!0)}function Hu(){if(0===Pu){var e=qo;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Pu=e}return Pu}function Wu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function qu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Vu=0;Vu<Cr.length;Vu++){var Gu=Cr[Vu];Nr(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}Nr(gr,"onAnimationEnd"),Nr(vr,"onAnimationIteration"),Nr(yr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(br,"onTransitionRun"),Nr(xr,"onTransitionStart"),Nr(wr,"onTransitionCancel"),Nr(kr,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$u=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Ju(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var i=r[s],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==a&&o.isPropagationStopped())break e;a=i,o.currentTarget=c;try{a(o)}catch(u){Er(u)}o.currentTarget=null,a=l}else for(s=0;s<r.length;s++){if(l=(i=r[s]).instance,c=i.currentTarget,i=i.listener,l!==a&&o.isPropagationStopped())break e;a=i,o.currentTarget=c;try{a(o)}catch(u){Er(u)}o.currentTarget=null,a=l}}}}function Qu(e,t){var n=t[qe];void 0===n&&(n=t[qe]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Yu(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[Xu]){e[Xu]=!0,tt.forEach(function(t){"selectionchange"!==t&&($u.has(t)||Yu(t,!1,e),Yu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xu]||(t[Xu]=!0,Yu("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Eh(t)){case 2:var o=xh;break;case 8:o=wh;break;default:o=kh}n=o.bind(null,t,n,e),o=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function td(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var i=r.stateNode.containerInfo;if(i===o)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===o)return;s=s.return}for(;null!==i;){if(null===(s=Qe(i)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=a=s;continue e}i=i.parentNode}}r=r.return}Dt(function(){var r=a,o=Pt(n),s=[];e:{var i=Sr.get(e);if(void 0!==i){var c=nn,u=e;switch(e){case"keypress":if(0===$t(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xn;break;case gr:case vr:case yr:c=un;break;case kr:c=wn;break;case"scroll":case"scrollend":c=on;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=Sn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==i?i+"Capture":null:i;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Bt(m,f))&&d.push(nd(m,g,p)),h)break;m=m.return}0<d.length&&(i=new c(i,u,null,n,o),s.push({event:i,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||n===Mt||!(u=n.relatedTarget||n.fromElement)||!Qe(u)&&!u[We])&&(c||i)&&(i=o.window===o?o:(i=o.ownerDocument)?i.defaultView||i.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Qe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=sn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?i:Xe(c),p=null==u?i:Xe(u),(i=new d(g,m+"leave",c,n,o)).target=h,i.relatedTarget=p,g=null,Qe(o)===r&&((d=new d(f,m+"enter",u,n,o)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=od,m=u,p=0,g=f=c;g;g=d(g))p++;g=0;for(var v=m;v;v=d(v))g++;for(;0<p-g;)f=d(f),p--;for(;0<g-p;)m=d(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){d=f;break e}f=d(f),m=d(m)}d=null}else d=null;null!==c&&ad(s,i,c,d,!1),null!==u&&null!==h&&ad(s,h,u,d,!0)}if("select"===(c=(i=r?Xe(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===c&&"file"===i.type)var y=Un;else if(In(i))if(Hn)y=Yn;else{y=Jn;var b=$n}else!(c=i.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type?r&&Ot(r.elementType)&&(y=Un):y=Qn;switch(y&&(y=y(e,r))?Ln(s,y,n,o):(b&&b(e,i,r),"focusout"===e&&r&&"number"===i.type&&null!=r.memoizedProps.value&&xt(i,"number",i.value)),b=r?Xe(r):window,e){case"focusin":(In(b)||"true"===b.contentEditable)&&(sr=b,ir=r,lr=null);break;case"focusout":lr=ir=sr=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(s,n,o);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":ur(s,n,o)}var x;if(Nn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Mn?An(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(On&&"ko"!==n.locale&&(Mn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Mn&&(x=Kt()):(Vt="value"in(qt=o)?qt.value:qt.textContent,Mn=!0)),0<(b=rd(r,w)).length&&(w=new hn(w,e,null,n,o),s.push({event:w,listeners:b}),x?w.data=x:null!==(x=_n(n))&&(w.data=x))),(x=jn?function(e,t){switch(e){case"compositionend":return _n(t);case"keypress":return 32!==t.which?null:(Tn=!0,Rn);case"textInput":return(e=t.data)===Rn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(Mn)return"compositionend"===e||!Nn&&An(e,t)?(e=Kt(),Gt=Vt=qt=null,Mn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=rd(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,o),s.push({event:b,listeners:w}),b.data=x)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var a=Wu((o[He]||null).action),s=r.submitter;s&&null!==(t=(t=s[He]||null)?Wu(t.formAction):s.getAttribute("formAction"))&&(a=t,s=null);var i=new nn("action","action",null,r,o);e.push({event:i,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Pu){var e=s?qu(o,s):new FormData(o);ti(n,{pending:!0,data:e,method:o.method,action:a},null,e)}}else"function"===typeof a&&(i.preventDefault(),e=s?qu(o,s):new FormData(o),ti(n,{pending:!0,data:e,method:o.method,action:a},a,e))},currentTarget:o}]})}}(s,e,r,n,o)}Ju(s,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===a||(null!=(o=Bt(e,n))&&r.unshift(nd(e,o,a)),null!=(o=Bt(e,t))&&r.push(nd(e,o,a))),3===e.tag)return r;e=e.return}return[]}function od(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ad(e,t,n,r,o){for(var a=t._reactName,s=[];null!==n&&n!==r;){var i=n,l=i.alternate,c=i.stateNode;if(i=i.tag,null!==l&&l===r)break;5!==i&&26!==i&&27!==i||null===c||(l=c,o?null!=(c=Bt(n,a))&&s.unshift(nd(n,c,l)):o||null!=(c=Bt(n,a))&&s.push(nd(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var sd=/\r\n?/g,id=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(sd,"\n").replace(id,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,r,o,a){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Ct(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Ct(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":jt(e,r,a);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&ud(e,t,"name",o.name,o,null),ud(e,t,"formEncType",o.formEncType,o,null),ud(e,t,"formMethod",o.formMethod,o,null),ud(e,t,"formTarget",o.formTarget,o,null)):(ud(e,t,"encType",o.encType,o,null),ud(e,t,"method",o.method,o,null),ud(e,t,"target",o.target,o,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=_t);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Qu("beforetoggle",e),Qu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Rt.get(n)||n,r)}}function dd(e,t,n,r,o,a){switch(n){case"style":jt(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Ct(e,r):("number"===typeof r||"bigint"===typeof r)&&Ct(e,""+r);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=_t);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"===typeof(a=null!=(a=e[He]||null)?a[n]:null)&&e.removeEventListener(t,a,o),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qu("error",e),Qu("load",e);var r,o=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var i=n[r];if(null!=i)switch(r){case"src":o=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ud(e,t,r,i,n,null)}}return a&&ud(e,t,"srcSet",n.srcSet,n,null),void(o&&ud(e,t,"src",n.src,n,null));case"input":Qu("invalid",e);var l=r=i=a=null,c=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":a=d;break;case"type":i=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:ud(e,t,o,d,n,null)}}return void bt(e,r,l,c,u,i,a,!1);case"select":for(a in Qu("invalid",e),o=i=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":i=l;break;case"multiple":o=l;default:ud(e,t,a,l,n,null)}return t=r,n=i,e.multiple=!!o,void(null!=t?wt(e,!!o,t,!1):null!=n&&wt(e,!!o,n,!0));case"textarea":for(i in Qu("invalid",e),r=a=o=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":o=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:ud(e,t,i,l,n,null)}return void St(e,o,a,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))if("selected"===c)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else ud(e,t,c,o,n,null);return;case"dialog":Qu("beforetoggle",e),Qu("toggle",e),Qu("cancel",e),Qu("close",e);break;case"iframe":case"object":Qu("load",e);break;case"video":case"audio":for(o=0;o<Ku.length;o++)Qu(Ku[o],e);break;case"image":Qu("error",e),Qu("load",e);break;case"details":Qu("toggle",e);break;case"embed":case"source":case"link":Qu("error",e),Qu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ud(e,t,u,o,n,null)}return;default:if(Ot(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&dd(e,t,d,o,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(o=n[l])&&ud(e,t,l,o,n,null))}function fd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,md=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function vd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xd=null;var wd="function"===typeof setTimeout?setTimeout:void 0,kd="function"===typeof clearTimeout?clearTimeout:void 0,Sd="function"===typeof Promise?Promise:void 0,Cd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Sd?function(e){return Sd.resolve(null).then(e).catch(Nd)}:wd;function Nd(e){setTimeout(function(){throw e})}function Ed(e){return"head"===e}function jd(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)||"/&"===n){if(0===r)return e.removeChild(o),void qh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)zd(e.ownerDocument.documentElement);else if("head"===n){zd(n=e.ownerDocument.head);for(var a=n.firstChild;a;){var s=a.nextSibling,i=a.nodeName;a[$e]||"SCRIPT"===i||"STYLE"===i||"LINK"===i&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}else"body"===n&&zd(e.ownerDocument.body);n=o}while(n);qh(t)}function Od(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Rd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Rd(n),Je(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Td(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Md(e.nextSibling)))return null}return e}function Ad(e){return"$?"===e.data||"$~"===e.data}function _d(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Md(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Pd=null;function Id(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Md(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function zd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Je(e)}var Dd=new Map,Bd=new Set;function Ud(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Hd=I.d;I.d={f:function(){var e=Hd.f(),t=Zc();return e||t},r:function(e){var t=Ye(e);null!==t&&5===t.tag&&"form"===t.type?ri(t):Hd.r(e)},D:function(e){Hd.D(e),qd("dns-prefetch",e,null)},C:function(e,t){Hd.C(e,t),qd("preconnect",e,t)},L:function(e,t,n){Hd.L(e,t,n);var r=Wd;if(r&&e&&t){var o='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(o+='[imagesizes="'+vt(n.imageSizes)+'"]')):o+='[href="'+vt(e)+'"]';var a=o;switch(t){case"style":a=Gd(e);break;case"script":a=Jd(e)}Dd.has(a)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Dd.set(a,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(Kd(a))||"script"===t&&r.querySelector(Qd(a))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Hd.m(e,t);var n=Wd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',a=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Jd(e)}if(!Dd.has(a)&&(e=f({rel:"modulepreload",href:e},t),Dd.set(a,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qd(a)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Hd.X(e,t);var n=Wd;if(n&&e){var r=Ze(n).hoistableScripts,o=Jd(e),a=r.get(o);a||((a=n.querySelector(Qd(o)))||(e=f({src:e,async:!0},t),(t=Dd.get(o))&&eh(e,t),et(a=n.createElement("script")),hd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(o,a))}},S:function(e,t,n){Hd.S(e,t,n);var r=Wd;if(r&&e){var o=Ze(r).hoistableStyles,a=Gd(e);t=t||"default";var s=o.get(a);if(!s){var i={loading:0,preload:null};if(s=r.querySelector(Kd(a)))i.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Dd.get(a))&&Zd(e,n);var l=s=r.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){i.loading|=1}),l.addEventListener("error",function(){i.loading|=2}),i.loading|=4,Xd(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:i},o.set(a,s)}}},M:function(e,t){Hd.M(e,t);var n=Wd;if(n&&e){var r=Ze(n).hoistableScripts,o=Jd(e),a=r.get(o);a||((a=n.querySelector(Qd(o)))||(e=f({src:e,async:!0,type:"module"},t),(t=Dd.get(o))&&eh(e,t),et(a=n.createElement("script")),hd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(o,a))}}};var Wd="undefined"===typeof document?null:document;function qd(e,t,n){var r=Wd;if(r&&"string"===typeof t&&t){var o=vt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof n&&(o+='[crossorigin="'+n+'"]'),Bd.has(o)||(Bd.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Vd(e,t,n,r){var o,a,i,l,c=(c=G.current)?Ud(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Gd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Gd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Kd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Dd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Dd.set(e,n),u||(o=c,a=e,i=n,l=d.state,o.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=o.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),hd(a,"link",i),et(a),o.head.appendChild(a))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Jd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Gd(e){return'href="'+vt(e)+'"'}function Kd(e){return'link[rel="stylesheet"]['+e+"]"}function $d(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Jd(e){return'[src="'+vt(e)+'"]'}function Qd(e){return"script[async]"+e}function Yd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var o=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",o),Xd(r,n.precedence,e),t.instance=r;case"stylesheet":o=Gd(n.href);var a=e.querySelector(Kd(o));if(a)return t.state.loading|=4,t.instance=a,et(a),a;r=$d(n),(o=Dd.get(o))&&Zd(r,o),et(a=(e.ownerDocument||e).createElement("link"));var i=a;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),hd(a,"link",r),t.state.loading|=4,Xd(a,n.precedence,e),t.instance=a;case"script":return a=Jd(n.src),(o=e.querySelector(Qd(a)))?(t.instance=o,et(o),o):(r=n,(o=Dd.get(a))&&eh(r=f({},n),o),et(o=(e=e.ownerDocument||e).createElement("script")),hd(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Xd(r,n.precedence,e));return t.instance}function Xd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,a=o,s=0;s<r.length;s++){var i=r[s];if(i.dataset.precedence===t)a=i;else if(a!==o)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Zd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,o=th=new Map;o.set(n,r)}else(r=(o=th).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var a=n[o];if(!(a[$e]||a[Ue]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var s=a.getAttribute(t)||"";s=e+s;var i=r.get(s);i?i.push(a):r.set(s,[a])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function oh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ah=0;function sh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ih=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ih=new Map,t.forEach(ch,e),ih=null,sh.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=ih.get(e);if(n)var r=n.get(null);else{n=new Map,ih.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<o.length;a++){var s=o[a];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(o=t.instance).getAttribute("data-precedence"),(a=n.get(s)||r)===r&&n.set(null,o),n.set(s,o),this.count++,r=sh.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),a?a.parentNode.insertBefore(o,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var uh={$$typeof:w,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function dh(e,t,n,r,o,a,s,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,r,o,a,s,i,l,c,u,d){return e=new dh(e,t,n,s,l,c,u,d,i),t=1,!0===a&&(t|=24),a=zr(3,null,null,t),e.current=a,a.stateNode=e,(t=Bo()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},va(a),e}function fh(e){return e?e=Lr:Lr}function ph(e,t,n,r,o,a){o=fh(o),null===r.context?r.context=o:r.pendingContext=o,(r=ba(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=xa(e,r,t))&&($c(n,0,t),wa(n,e,t))}function mh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){mh(e,t),(e=e.alternate)&&mh(e,t)}function vh(e){if(13===e.tag||31===e.tag){var t=Mr(e,67108864);null!==t&&$c(t,0,67108864),gh(e,67108864)}}function yh(e){if(13===e.tag||31===e.tag){var t=Gc(),n=Mr(e,t=Le(t));null!==n&&$c(n,0,t),gh(e,t)}}var bh=!0;function xh(e,t,n,r){var o=P.T;P.T=null;var a=I.p;try{I.p=2,kh(e,t,n,r)}finally{I.p=a,P.T=o}}function wh(e,t,n,r){var o=P.T;P.T=null;var a=I.p;try{I.p=8,kh(e,t,n,r)}finally{I.p=a,P.T=o}}function kh(e,t,n,r){if(bh){var o=Sh(r);if(null===o)td(e,t,r,Ch,n),Ih(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Oh=Lh(Oh,e,t,n,r,o),!0;case"dragenter":return Rh=Lh(Rh,e,t,n,r,o),!0;case"mouseover":return Th=Lh(Th,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Ah.set(a,Lh(Ah.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,_h.set(a,Lh(_h.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Ih(e,r),4&t&&-1<Ph.indexOf(e)){for(;null!==o;){var a=Ye(o);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var s=Ee(a.pendingLanes);if(0!==s){var i=a;for(i.pendingLanes|=2,i.entangledLanes|=2;s;){var l=1<<31-xe(s);i.entanglements[1]|=l,s&=~l}Iu(a),0===(6&fc)&&(Pc=le()+500,Lu(0,!1))}}break;case 31:case 13:null!==(i=Mr(a,2))&&$c(i,0,2),Zc(),gh(a,2)}if(null===(a=Sh(r))&&td(e,t,r,Ch,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else td(e,t,r,null,n)}}function Sh(e){return Nh(e=Pt(e))}var Ch=null;function Nh(e){if(Ch=null,null!==(e=Qe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ch=e,null}function Eh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var jh=!1,Oh=null,Rh=null,Th=null,Ah=new Map,_h=new Map,Mh=[],Ph="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ih(e,t){switch(e){case"focusin":case"focusout":Oh=null;break;case"dragenter":case"dragleave":Rh=null;break;case"mouseover":case"mouseout":Th=null;break;case"pointerover":case"pointerout":Ah.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_h.delete(t.pointerId)}}function Lh(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=Ye(t))&&vh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Fh(e){var t=Qe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void De(e.priority,function(){yh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void De(e.priority,function(){yh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sh(e.nativeEvent);if(null!==n)return null!==(t=Ye(n))&&vh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Mt=r,n.target.dispatchEvent(r),Mt=null,t.shift()}return!0}function Dh(e,t,n){zh(e)&&n.delete(t)}function Bh(){jh=!1,null!==Oh&&zh(Oh)&&(Oh=null),null!==Rh&&zh(Rh)&&(Rh=null),null!==Th&&zh(Th)&&(Th=null),Ah.forEach(Dh),_h.forEach(Dh)}function Uh(e,t){e.blockedOn===t&&(e.blockedOn=null,jh||(jh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bh)))}var Hh=null;function Wh(e){Hh!==e&&(Hh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hh===e&&(Hh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!==typeof r){if(null===Nh(r||n))continue;break}var a=Ye(n);null!==a&&(e.splice(t,3),t-=3,ti(a,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function qh(e){function t(t){return Uh(t,e)}null!==Oh&&Uh(Oh,e),null!==Rh&&Uh(Rh,e),null!==Th&&Uh(Th,e),Ah.forEach(t),_h.forEach(t);for(var n=0;n<Mh.length;n++){var r=Mh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Mh.length&&null===(n=Mh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Mh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],a=n[r+1],s=o[He]||null;if("function"===typeof a)s||Wh(n);else if(s){var i=null;if(a&&a.hasAttribute("formAction")){if(o=a,s=a[He]||null)i=s.formAction;else if(null!==Nh(o))continue}else i=s.action;"function"===typeof i?n[r+1]=i:(n.splice(r,3),r-=3),Wh(n)}}}function Vh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return o=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==o&&(o(),o=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==o&&(o(),o=null)}}}function Gh(e){this._internalRoot=e}function Kh(e){this._internalRoot=e}Kh.prototype.render=Gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));ph(t.current,Gc(),e,t,null,null)},Kh.prototype.unmount=Gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),Zc(),t[We]=null}},Kh.prototype.unstable_scheduleHydration=function(e){if(e){var t=ze();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mh.length&&0!==t&&t<Mh[n].priority;n++);Mh.splice(n,0,e),0===n&&Fh(e)}};var $h=o.version;if("19.2.4"!==$h)throw Error(s(527,$h,"19.2.4"));I.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return d(o),e;if(a===r)return d(o),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=o,r=a;else{for(var i=!1,c=o.child;c;){if(c===n){i=!0,n=o,r=a;break}if(c===r){i=!0,r=o,n=a;break}c=c.sibling}if(!i){for(c=a.child;c;){if(c===n){i=!0,n=a,r=o;break}if(c===r){i=!0,r=a,n=o;break}c=c.sibling}if(!i)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Jh={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.4"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{ve=Qh.inject(Jh),ye=Qh}catch(Xh){}}t.createRoot=function(e,t){if(!i(e))throw Error(s(299));var n=!1,r="",o=Ci,a=Ni,l=Ei;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,o,a,l,Vh),e[We]=t.current,Zu(e),new Gh(t)},t.hydrateRoot=function(e,t,n){if(!i(e))throw Error(s(299));var r=!1,o="",a=Ci,l=Ni,c=Ei,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,o,u,a,l,c,Vh)).context=fh(null),n=t.current,(o=ba(r=Le(r=Gc()))).callback=null,xa(n,o,r),n=r,t.current.lanes=n,_e(t,n),Iu(t),e[We]=t.current,Zu(e),new Kh(t)},t.version="19.2.4"},672(e,t,n){"use strict";var r=n(43);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(o(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},i=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:a}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.4"},391(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},799(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=o,t.jsxs=o},288(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=x.prototype=new b;w.constructor=x,g(w,y.prototype),w.isPureReactComponent=!0;var k=Array.isArray;function S(){}var C={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function E(e,t,r){var o=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==o?o:null,props:r}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var O=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,o,a,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(i){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return T((u=e._init)(e._payload),t,o,a,s)}}if(u)return s=s(e),u=""===a?"."+R(e,0):a,k(s)?(o="",null!=u&&(o=u.replace(O,"$&/")+"/"),T(s,t,o,"",function(e){return e})):null!=s&&(j(s)&&(l=s,c=o+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+u,s=E(l.type,c,l.props)),t.push(s)),1;u=0;var d,f=""===a?".":a+":";if(k(e))for(var m=0;m<e.length;m++)u+=T(a=e[m],t,o,i=f+R(a,m),s);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(a=e.next()).done;)u+=T(a=a.value,t,o,i=f+R(a,m++),s);else if("object"===i){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,a,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],o=0;return T(e,r,"","",function(e){return t.call(n,e,o++)}),r}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},P={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=P,t.Component=y,t.Fragment=o,t.Profiler=s,t.PureComponent=x,t.StrictMode=a,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key;if(null!=t)for(a in void 0!==t.key&&(o=""+t.key),t)!N.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var s=Array(a),i=0;i<a;i++)s[i]=arguments[i+2];r.children=s}return E(e.type,o,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:i,_context:e},e},t.createElement=function(e,t,n){var r,o={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)N.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var i=Array(s),l=0;l<s;l++)i[l]=arguments[l+2];o.children=i}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return E(e,a,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=C.T,n={};C.T=n;try{var r=e(),o=C.S;null!==o&&o(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(S,M)}catch(a){M(a)}finally{null!==t&&null!==n.types&&(t.types=n.types),C.T=t}},t.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},t.use=function(e){return C.H.use(e)},t.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},t.useCallback=function(e,t){return C.H.useCallback(e,t)},t.useContext=function(e){return C.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return C.H.useEffect(e,t)},t.useEffectEvent=function(e){return C.H.useEffectEvent(e)},t.useId=function(){return C.H.useId()},t.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.H.useMemo(e,t)},t.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},t.useRef=function(e){return C.H.useRef(e)},t.useState=function(e){return C.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return C.H.useTransition()},t.version="19.2.4"},43(e,t,n){"use strict";e.exports=n(288)},579(e,t,n){"use strict";e.exports=n(799)},896(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var i=2*(r+1)-1,l=e[i],c=i+1,u=e[c];if(0>a(l,n))c<o&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[i]=n,r=i);else{if(!(c<o&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,C||(C=!0,S());else{var t=r(u);null!==t&&_(k,t.startTime-e)}}var S,C=!1,N=-1,E=5,j=-1;function O(){return!!v||!(t.unstable_now()-j<E)}function R(){if(v=!1,C){var e=t.unstable_now();j=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(N),N=-1),p=!0;var a=f;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&O());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var i=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof i){h.callback=i,w(e),n=!0;break t}h===r(c)&&o(c),w(e)}else o(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&_(k,l.startTime-e),n=!1}}break e}finally{h=null,f=a,p=!1}n=void 0}}finally{n?S():C=!1}}}if("function"===typeof x)S=function(){x(R)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,A=T.port2;T.port1.onmessage=R,S=function(){A.postMessage(null)}}else S=function(){y(R,0)};function _(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:i=a+i,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(b(N),N=-1):g=!0,_(k,a-s))):(e.sortIndex=i,n(c,e),m||p||(m=!0,C||(C=!0,S()))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853(e,t,n){"use strict";e.exports=n(896)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&r;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(a,s),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{"use strict";var e=n(43),t=n.t(e,2),r=n(391);function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=["sri"],d=["page"],h=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],p=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],m=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var g="popstate";function v(){return C(function(e,t){let{pathname:n,search:r,hash:o}=e.location;return w("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:k(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function y(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function x(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function S(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function C(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:o=document.defaultView,v5Compat:a=!1}=r,s=o.history,i="POP",l=null,u=d();function d(){return(s.state||{idx:null}).idx}function h(){i="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:i,location:p.location,delta:t})}function f(e){return N(e)}null==u&&(u=0,s.replaceState(c(c({},s.state),{},{idx:u}),""));let p={get action(){return i},get location(){return e(o,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(g,h),l=e,()=>{o.removeEventListener(g,h),l=null}},createHref:e=>t(o,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){i="PUSH";let r=w(p.location,e,t);n&&n(r,e),u=d()+1;let c=x(r,u),h=p.createHref(r);try{s.pushState(c,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;o.location.assign(h)}a&&l&&l({action:i,location:p.location,delta:1})},replace:function(e,t){i="REPLACE";let r=w(p.location,e,t);n&&n(r,e),u=d();let o=x(r,u),c=p.createHref(r);s.replaceState(o,"",c),a&&l&&l({action:i,location:p.location,delta:0})},go:e=>s.go(e)};return p}function N(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),y(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:k(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function E(e,t){return j(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function j(e,t,n,r){let o=H(("string"===typeof t?S(t):t).pathname||"/",n);if(null==o)return null;let a=O(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let s=null;for(let i=0;null==s&&i<a.length;++i){let e=U(o);s=z(a[i],e,r)}return s}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,i=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&s)return;y(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=J([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(y(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),O(e.children,t,u,c,s)),(null!=e.path||e.index)&&t.push({path:c,score:F(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of R(e.path))a(e,t,!0,r);else a(e,t)}),t}function R(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return o?[a,""]:[a];let s=R(r.join("/")),i=[];return i.push(...s.map(e=>""===e?a:[a,e].join("/"))),o&&i.push(...s),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var T=/^:[\w-]+$/,A=3,_=2,M=1,P=10,I=-2,L=e=>"*"===e;function F(e,t){let n=e.split("/"),r=n.length;return n.some(L)&&(r+=I),t&&(r+=_),n.filter(e=>!L(e)).reduce((e,t)=>e+(T.test(t)?A:""===t?M:P),r)}function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,o={},a="/",s=[];for(let i=0;i<r.length;++i){let e=r[i],l=i===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),s.push({params:o,pathname:J([a,u.pathname]),pathnameBase:Q(J([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=J([a,u.pathnameBase]))}return s}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=B(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],s=a.replace(/(.)\/+$/,"$1"),i=o.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=i[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=i[n];return e[r]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:a,pathnameBase:s,pattern:e}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var W=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function q(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function V(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function G(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function K(e){let t=G(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function $(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=S(e):(r=c({},e),y(!r.pathname||!r.pathname.includes("?"),V("?","pathname","search",r)),y(!r.pathname||!r.pathname.includes("#"),V("#","pathname","hash",r)),y(!r.search||!r.search.includes("#"),V("#","search","hash",r)));let a,s=""===e||""===r.pathname,i=s?"/":r.pathname;if(null==i)a=n;else{let e=t.length-1;if(!o&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:o="",hash:a=""}="string"===typeof e?S(e):e;return r?(r=r.replace(/\/\/+/g,"/"),t=r.startsWith("/")?q(r.substring(1),"/"):q(r,n)):t=n,{pathname:t,search:Y(o),hash:X(a)}}(r,a),u=i&&"/"!==i&&i.endsWith("/"),d=(s||"."===i)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var J=e=>e.join("/").replace(/\/\/+/g,"/"),Q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var Z=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function ee(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function te(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ne="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function re(e,t){let n=e;if("string"!==typeof n||!W.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,o=!1;if(ne)try{let e=new URL(window.location.href),r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),a=H(r.pathname,t);r.origin===e.origin&&null!=a?n=a+r.search+r.hash:o=!0}catch(a){b(!1,'<Link to="'.concat(n,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:r,isExternal:o,to:n}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oe=["POST","PUT","PATCH","DELETE"],ae=(new Set(oe),["GET",...oe]);new Set(ae),Symbol("ResetLoaderData");var se=e.createContext(null);se.displayName="DataRouter";var ie=e.createContext(null);ie.displayName="DataRouterState";var le=e.createContext(!1);function ce(){return e.useContext(le)}var ue=e.createContext({isTransitioning:!1});ue.displayName="ViewTransition";var de=e.createContext(new Map);de.displayName="Fetchers";var he=e.createContext(null);he.displayName="Await";var fe=e.createContext(null);fe.displayName="Navigation";var pe=e.createContext(null);pe.displayName="Location";var me=e.createContext({outlet:null,matches:[],isDataRoute:!1});me.displayName="Route";var ge=e.createContext(null);ge.displayName="RouteError";var ve="REACT_ROUTER_ERROR";function ye(){return null!=e.useContext(pe)}function be(){return y(ye(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(pe).location}var xe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function we(t){e.useContext(fe).static||e.useLayoutEffect(t)}function ke(){let{isDataRoute:t}=e.useContext(me);return t?function(){let{router:t}=Me("useNavigate"),n=Ie("useNavigate"),r=e.useRef(!1);we(()=>{r.current=!0});let o=e.useCallback(async function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(r.current,xe),r.current&&("number"===typeof e?await t.navigate(e):await t.navigate(e,c({fromRouteId:n},o)))},[t,n]);return o}():function(){y(ye(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(se),{basename:n,navigator:r}=e.useContext(fe),{matches:o}=e.useContext(me),{pathname:a}=be(),s=JSON.stringify(K(o)),i=e.useRef(!1);we(()=>{i.current=!0});let l=e.useCallback(function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(i.current,xe),!i.current)return;if("number"===typeof e)return void r.go(e);let l=$(e,JSON.parse(s),a,"path"===o.relative);null==t&&"/"!==n&&(l.pathname="/"===l.pathname?n:J([n,l.pathname])),(o.replace?r.replace:r.push)(l,o.state,o)},[n,r,s,a,t]);return l}()}e.createContext(null);function Se(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(me),{pathname:o}=be(),a=JSON.stringify(K(r));return e.useMemo(()=>$(t,JSON.parse(a),o,"path"===n),[t,a,o,n])}function Ce(t,n,r,o,a){y(ye(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=e.useContext(fe),{matches:i}=e.useContext(me),l=i[i.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";ze(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=be();if(n){var g;let e="string"===typeof n?S(n):n;y("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let v=p.pathname||"/",x=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=E(t,{pathname:x});b(f||null!=w,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),b(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let k=Ae(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:J([h,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:J([h,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),i,r,o,a);return n&&k?e.createElement(pe.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},k):k}function Ne(){let t=Le(),n=ee(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o},s={padding:"2px 4px",backgroundColor:o},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:s},"ErrorBoundary")," or"," ",e.createElement("code",{style:s},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,i)}var Ee=e.createElement(Ne,null),je=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let t=this.state.error;if(this.context&&"object"===typeof t&&t&&"digest"in t&&"string"===typeof t.digest){const e=function(e){if(e.startsWith("".concat(ve,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new Z(t.status,t.statusText,t.data)}catch(t){}}(t.digest);e&&(t=e)}let n=void 0!==t?e.createElement(me.Provider,{value:this.props.routeContext},e.createElement(ge.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?e.createElement(Re,{error:t},n):n}};je.contextType=le;var Oe=new WeakMap;function Re(t){let{children:n,error:r}=t,{basename:o}=e.useContext(fe);if("object"===typeof r&&r&&"digest"in r&&"string"===typeof r.digest){let t=function(e){if(e.startsWith("".concat(ve,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(r.digest);if(t){let n=Oe.get(r);if(n)throw n;let a=re(t.location,o);if(ne&&!Oe.get(r)){if(!a.isExternal&&!t.reloadDocument){const e=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:t.replace}));throw Oe.set(r,e),e}window.location.href=a.absoluteURL||a.to}return e.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(a.absoluteURL||a.to)})}}return n}function Te(t){let{routeContext:n,match:r,children:o}=t,a=e.useContext(se);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(me.Provider,{value:n},o)}function Ae(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let a=t,s=null===r||void 0===r?void 0:r.errors;if(null!=s){let e=a.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));y(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let i=!1,l=-1;if(r)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,o=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||o){i=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}let c=r&&o?(e,t)=>{var n,a;o(e,{location:r.location,params:null!==(n=null===(a=r.matches)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.params)&&void 0!==n?n:{},unstable_pattern:te(r.matches),errorInfo:t})}:void 0;return a.reduceRight((t,o,u)=>{let d,h=!1,f=null,p=null;r&&(d=s&&o.route.id?s[o.route.id]:void 0,f=o.route.errorElement||Ee,i&&(l<0&&0===u?(ze("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===u&&(h=!0,p=o.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,u+1)),g=()=>{let n;return n=d?f:h?p:o.route.Component?e.createElement(o.route.Component,null):o.route.element?o.route.element:t,e.createElement(Te,{match:o,routeContext:{outlet:t,matches:m,isDataRoute:null!=r},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===u)?e.createElement(je,{location:r.location,revalidation:r.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}function _e(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Me(t){let n=e.useContext(se);return y(n,_e(t)),n}function Pe(t){let n=e.useContext(ie);return y(n,_e(t)),n}function Ie(t){let n=function(t){let n=e.useContext(me);return y(n,_e(t)),n}(t),r=n.matches[n.matches.length-1];return y(r.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),r.route.id}function Le(){var t;let n=e.useContext(ge),r=Pe("useRouteError"),o=Ie("useRouteError");return void 0!==n?n:null===(t=r.errors)||void 0===t?void 0:t[o]}var Fe={};function ze(e,t,n){t||Fe[e]||(Fe[e]=!0,b(!1,n))}var De={};function Be(e,t){e||De[t]||(De[t]=!0,console.warn(t))}t.useOptimistic;e.memo(function(e){let{routes:t,future:n,state:r,onError:o}=e;return Ce(t,void 0,r,o,n)});function Ue(e){y(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function He(t){let{basename:n="/",children:r=null,location:o,navigationType:a="POP",navigator:s,static:i=!1,unstable_useTransitions:l}=t;y(!ye(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=e.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:l,future:{}}),[c,s,i,l]);"string"===typeof o&&(o=S(o));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=o,g=e.useMemo(()=>{let e=H(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:p,key:m},navigationType:a}},[c,d,h,f,p,m,a]);return b(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:e.createElement(fe.Provider,{value:u},e.createElement(pe.Provider,{children:r,value:g}))}function We(e){let{children:t,location:n}=e;return Ce(qe(t),n)}e.Component;function qe(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,(t,o)=>{if(!e.isValidElement(t))return;let a=[...n,o];if(t.type===e.Fragment)return void r.push.apply(r,qe(t.props.children,a));y(t.type===Ue,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),y(!t.props.index||!t.props.children,"An index route cannot have child routes.");let s={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(s.children=qe(t.props.children,a)),r.push(s)}),r}var Ve="get",Ge="application/x-www-form-urlencoded";function Ke(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}function $e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var Je=null;var Qe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ye(e){return null==e||Qe.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ge,'"')),null)}function Xe(e,t){let n,r,o,a,s;if(Ke(i=e)&&"form"===i.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?H(s,t):null,n=e.getAttribute("method")||Ve,o=Ye(e.getAttribute("enctype"))||Ge,a=new FormData(e)}else if(function(e){return Ke(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ke(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||s.getAttribute("action");if(r=i?H(i,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Ve,o=Ye(e.getAttribute("formenctype"))||Ye(s.getAttribute("enctype"))||Ge,a=new FormData(s,e),!function(){if(null===Je)try{new FormData(document.createElement("form"),0),Je=!1}catch(e){Je=!0}return Je}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";a.append("".concat(e,"x"),"0"),a.append("".concat(e,"y"),"0")}else t&&a.append(t,r)}}else{if(Ke(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ve,r=null,o=Ge,s=e}var i;return a&&"text/plain"===o&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ze(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function et(e,t,n,r){let o="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return n?o.pathname.endsWith("/")?o.pathname="".concat(o.pathname,"_.").concat(r):o.pathname="".concat(o.pathname,".").concat(r):"/"===o.pathname?o.pathname="_root.".concat(r):t&&"/"===H(o.pathname,t)?o.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(r):o.pathname="".concat(o.pathname.replace(/\/$/,""),".").concat(r),o}async function tt(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nt(e){return null!=e&&"string"===typeof e.page}function rt(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function ot(e,t,n,r,o,a){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,i=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>s(e,t)||i(e,t)):"data"===a?t.filter((t,a)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,a)||i(t,a))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function at(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1),[...new Set(r)];var r}function st(e,t){let n=new Set,r=new Set(t);return e.reduce((e,o)=>{if(t&&!nt(o)&&"script"===o.as&&o.href&&r.has(o.href))return e;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(o));return n.has(a)||(n.add(a),e.push({key:a,link:o})),e},[])}function it(e,t){return"lazy"===e.mode&&!0===t}function lt(){let t=e.useContext(se);return Ze(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ct(){let t=e.useContext(ie);return Ze(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ut=e.createContext(void 0);function dt(){let t=e.useContext(ut);return Ze(t,"You must render this element inside a <HydratedRouter> element"),t}function ht(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ft(e,t,n){if(n&&!vt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}ut.displayName="FrameworkContext";function pt(t){let{page:n}=t,r=o(t,d),{router:a}=lt(),s=e.useMemo(()=>E(a.routes,n,a.basename),[a.routes,n,a.basename]);return s?e.createElement(gt,c({page:n,matches:s},r)):null}function mt(t){let{manifest:n,routeModules:r}=dt(),[o,a]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return st((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await tt(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(rt).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(t,n,r).then(t=>{e||a(t)}),()=>{e=!0}},[t,n,r]),o}function gt(t){let{page:n,matches:r}=t,a=o(t,h),s=be(),{future:i,manifest:l,routeModules:u}=dt(),{basename:d}=lt(),{loaderData:f,matches:p}=ct(),m=e.useMemo(()=>ot(n,r,p,l,s,"data"),[n,r,p,l,s]),g=e.useMemo(()=>ot(n,r,p,l,s,"assets"),[n,r,p,l,s]),v=e.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{var r;let o=l.routes[n.route.id];o&&o.hasLoader&&(!m.some(e=>e.route.id===n.route.id)&&n.route.id in f&&null!==(r=u[n.route.id])&&void 0!==r&&r.shouldRevalidate||o.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let o=et(n,d,i.unstable_trailingSlashAwareDataRequests,"data");return t&&e.size>0&&o.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[o.pathname+o.search]},[d,i.unstable_trailingSlashAwareDataRequests,f,s,l,m,r,n,u]),y=e.useMemo(()=>at(g,l),[g,l]),b=mt(g);return e.createElement(e.Fragment,null,v.map(t=>e.createElement("link",c({key:t,rel:"prefetch",as:"fetch",href:t},a))),y.map(t=>e.createElement("link",c({key:t,rel:"modulepreload",href:t},a))),b.map(t=>{var n;let{key:r,link:o}=t;return e.createElement("link",c(c({key:r,nonce:a.nonce},o),{},{crossOrigin:null!==(n=o.crossOrigin)&&void 0!==n?n:a.crossOrigin}))}))}var vt=!1;function yt(t){let{manifest:n,serverHandoffString:r,isSpaMode:a,renderMeta:s,routeDiscovery:i,ssr:l}=dt(),{router:d,static:h,staticContext:f}=lt(),{matches:p}=ct(),m=ce(),g=it(i,l);s&&(s.didRenderScripts=!0);let v=ft(p,null,a);e.useEffect(()=>{0},[]);let y=e.useMemo(()=>{var a;if(m)return null;let s=f?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",i=h?"".concat(null!==n.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(v.map((e,t)=>{let r="route".concat(t),o=n.routes[e.route.id];Ze(o,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:a,clientLoaderModule:s,clientMiddlewareModule:i,hydrateFallbackModule:l,module:c}=o,u=[...a?[{module:a,varName:"".concat(r,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(r,"_clientLoader")}]:[],...i?[{module:i,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=o(e,u),a=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(s.pop();s.length>0;)i.push("/".concat(s.join("/"))),s.pop();i.forEach(e=>{let n=E(t.routes,e,t.basename);n&&n.forEach(e=>a.add(e.route.id))});let l=[...a].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:l,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",c(c({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:void 0})),e.createElement("script",c(c({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:"module",async:!0})))},[]),b=vt||m?[]:(n.entry.imports.concat(at(v,n,{includeHydrateFallback:!0})),[...new Set(x)]);var x;let w="object"===typeof n.sri?n.sri:{};return Be(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),vt||m?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",c(c({},t),{},{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}})):null,g?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:w[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:w[n.entry.module],suppressHydrationWarning:!0}),b.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:w[n],suppressHydrationWarning:!0})),y)}function bt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}e.Component;function xt(t){let{error:n,isOutsideRemixApp:r}=t;console.error(n);let o,a=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ee(n))return e.createElement(wt,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),a);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(wt,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},o.stack),a)}function wt(t){var n;let{title:r,renderScripts:o,isOutsideRemixApp:a,children:s}=t,{routeModules:i}=dt();return null!==i.root&&void 0!==n&&n.Layout&&!a?s:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,o?e.createElement(yt,null):null)))}var kt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{kt&&(window.__reactRouterVersion="7.13.0")}catch(Ey){}function St(t){let{basename:n,children:r,unstable_useTransitions:o,window:a}=t,s=e.useRef();null==s.current&&(s.current=v({window:a,v5Compat:!0}));let i=s.current,[l,c]=e.useState({action:i.action,location:i.location}),u=e.useCallback(t=>{!1===o?c(t):e.startTransition(()=>c(t))},[o]);return e.useLayoutEffect(()=>i.listen(u),[i,u]),e.createElement(He,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:i,unstable_useTransitions:o})}var Ct=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nt=e.forwardRef(function(t,n){let{onClick:r,discover:a="render",prefetch:s="none",relative:i,reloadDocument:l,replace:u,state:d,target:h,to:p,preventScrollReset:m,viewTransition:g,unstable_defaultShouldRevalidate:v}=t,b=o(t,f),{basename:x,unstable_useTransitions:w}=e.useContext(fe),S="string"===typeof p&&Ct.test(p),C=re(p,x);p=C.to;let N=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(ye(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:o}=e.useContext(fe),{hash:a,pathname:s,search:i}=Se(t,{relative:n}),l=s;return"/"!==r&&(l="/"===s?r:J([r,s])),o.createHref({pathname:l,search:i,hash:a})}(p,{relative:i}),[E,j,O]=function(t,n){let r=e.useContext(ut),[o,a]=e.useState(!1),[s,i]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&i(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(o){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[o]);let p=()=>{a(!0)},m=()=>{a(!1),i(!1)};return r?"intent"!==t?[s,f,{}]:[s,f,{onFocus:ht(l,p),onBlur:ht(c,m),onMouseEnter:ht(u,p),onMouseLeave:ht(d,m),onTouchStart:ht(h,p)}]:[!1,f,{}]}(s,b),R=function(t){let{target:n,replace:r,state:o,preventScrollReset:a,relative:s,viewTransition:i,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=ke(),d=be(),h=Se(t,{relative:s});return e.useCallback(f=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(f,n)){f.preventDefault();let n=void 0!==r?r:k(d)===k(h),p=()=>u(t,{replace:n,state:o,preventScrollReset:a,relative:s,viewTransition:i,unstable_defaultShouldRevalidate:l});c?e.startTransition(()=>p()):p()}},[d,u,h,r,o,n,t,a,s,i,l,c])}(p,{replace:u,state:d,target:h,preventScrollReset:m,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:w});let T=e.createElement("a",c(c(c({},b),O),{},{href:C.absoluteURL||N,onClick:C.isExternal||l?r:function(e){r&&r(e),e.defaultPrevented||R(e)},ref:bt(n,j),target:h,"data-discover":S||"render"!==a?void 0:"true"}));return E&&!S?e.createElement(e.Fragment,null,T,e.createElement(pt,{page:N})):T});Nt.displayName="Link";var Et=e.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:s="",end:i=!1,style:l,to:u,viewTransition:d,children:h}=t,f=o(t,p),m=Se(u,{relative:f.relative}),g=be(),v=e.useContext(ie),{navigator:b,basename:x}=e.useContext(fe),w=null!=v&&function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(ue);y(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Rt("useViewTransitionState"),a=Se(t,{relative:n});if(!r.isTransitioning)return!1;let s=H(r.currentLocation.pathname,o)||r.currentLocation.pathname,i=H(r.nextLocation.pathname,o)||r.nextLocation.pathname;return null!=D(a.pathname,i)||null!=D(a.pathname,s)}(m)&&!0===d,k=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,S=g.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(S=S.toLowerCase(),C=C?C.toLowerCase():null,k=k.toLowerCase()),C&&x&&(C=H(C,x)||C);const N="/"!==k&&k.endsWith("/")?k.length-1:k.length;let E,j=S===k||!i&&S.startsWith(k)&&"/"===S.charAt(N),O=null!=C&&(C===k||!i&&C.startsWith(k)&&"/"===C.charAt(k.length)),R={isActive:j,isPending:O,isTransitioning:w},T=j?r:void 0;E="function"===typeof s?s(R):[s,j?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof l?l(R):l;return e.createElement(Nt,c(c({},f),{},{"aria-current":T,className:E,ref:n,style:A,to:u,viewTransition:d}),"function"===typeof h?h(R):h)});Et.displayName="NavLink";var jt=e.forwardRef((t,n)=>{let{discover:r="render",fetcherKey:a,navigate:s,reloadDocument:i,replace:l,state:u,method:d=Ve,action:h,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:b}=t,x=o(t,m),{unstable_useTransitions:w}=e.useContext(fe),S=Mt(),C=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(fe),o=e.useContext(me);y(o,"useFormAction must be used inside a RouteContext");let[a]=o.matches.slice(-1),s=c({},Se(t||".",{relative:n})),i=be();if(null==t){s.search=i.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}t&&"."!==t||!a.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(s.pathname="/"===s.pathname?r:J([r,s.pathname]));return k(s)}(h,{relative:p}),N="get"===d.toLowerCase()?"get":"post",E="string"===typeof h&&Ct.test(h);return e.createElement("form",c(c({ref:n,method:N,action:C,onSubmit:i?f:t=>{if(f&&f(t),t.defaultPrevented)return;t.preventDefault();let n=t.nativeEvent.submitter,r=(null===n||void 0===n?void 0:n.getAttribute("formmethod"))||d,o=()=>S(n||t.currentTarget,{fetcherKey:a,method:r,navigate:s,replace:l,state:u,relative:p,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:b});w&&!1!==s?e.startTransition(()=>o()):o()}},x),{},{"data-discover":E||"render"!==r?void 0:"true"}))});function Ot(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Rt(t){let n=e.useContext(se);return y(n,Ot(t)),n}function Tt(t){b("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=e.useRef($e(t)),r=e.useRef(!1),o=be(),a=e.useMemo(()=>function(e,t){let n=$e(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(o.search,r.current?null:n.current),[o.search]),s=ke(),i=e.useCallback((e,t)=>{const n=$e("function"===typeof e?e(new URLSearchParams(a)):e);r.current=!0,s("?"+n,t)},[s,a]);return[a,i]}jt.displayName="Form";var At=0,_t=()=>"__".concat(String(++At),"__");function Mt(){let{router:t}=Rt("useSubmit"),{basename:n}=e.useContext(fe),r=Ie("useRouteId"),o=t.fetch,a=t.navigate;return e.useCallback(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:i,encType:l,formData:c,body:u}=Xe(e,n);if(!1===t.navigate){let e=t.fetcherKey||_t();await o(e,r,t.action||s,{unstable_defaultShouldRevalidate:t.unstable_defaultShouldRevalidate,preventScrollReset:t.preventScrollReset,formData:c,body:u,formMethod:t.method||i,formEncType:t.encType||l,flushSync:t.flushSync})}else await a(t.action||s,{unstable_defaultShouldRevalidate:t.unstable_defaultShouldRevalidate,preventScrollReset:t.preventScrollReset,formData:c,body:u,formMethod:t.method||i,formEncType:t.encType||l,replace:t.replace,state:t.state,fromRouteId:r,flushSync:t.flushSync,viewTransition:t.viewTransition})},[o,a,n,r])}var Pt=n(259),It=n.n(Pt);const Lt="Ably",Ft=e=>{if(!e||!e.includes("-"))return{valid:!1,channelId:null};const[t,...n]=e.split("-"),r=n.join("-");return"1"!==t?{valid:!1,channelId:null}:{valid:!0,channelId:r}};class zt{constructor(){this.client=null,this.channel=null,this.channelId=null,this.onMessageCallback=null,this.onStatusCallback=null,this.isConnected=!1,this.connectionState="disconnected"}async connect(e,t,n){const{valid:r,channelId:o}=Ft(e);if(!r||!o)throw new Error("Invalid channel key format");this.channelId=o,this.onMessageCallback=t,this.onStatusCallback=n;const a="yiabww.8C7e-g:Z8kQloqZVQBRW5TeFvF1fRNwsy_bCE63Sfg9EkjB41Q";try{this.updateStatus("connecting"),this.client=new(It().Realtime)({key:a,recover:(e,t)=>{t(!0)}}),await new Promise((e,t)=>{const n=setTimeout(()=>{t(new Error("Connection timeout"))},15e3);this.client.connection.on("connected",()=>{clearTimeout(n),e()}),this.client.connection.on("failed",e=>{var r;clearTimeout(n),t(new Error((null===(r=e.reason)||void 0===r?void 0:r.message)||"Connection failed"))})}),this.channel=this.client.channels.get("rally-".concat(o)),await this.channel.subscribe("update",e=>{var t;console.log("[WebSocket] Received update:",e.data),null===(t=this.onMessageCallback)||void 0===t||t.call(this,e.data)}),this.client.connection.on("disconnected",()=>{this.updateStatus("disconnected")}),this.client.connection.on("connected",()=>{this.updateStatus("connected")}),this.client.connection.on("suspended",()=>{this.updateStatus("suspended")}),this.client.connection.on("failed",()=>{this.updateStatus("failed")}),this.updateStatus("connected"),console.log("[WebSocket] Connected to channel: rally-".concat(o))}catch(s){throw this.updateStatus("error",s.message),s}}updateStatus(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.connectionState=e,this.isConnected="connected"===e,null===(t=this.onStatusCallback)||void 0===t||t.call(this,e,Lt,n)}async publish(e){if(!this.isConnected||!this.channel)return console.warn("[WebSocket] Not connected, cannot publish"),!1;try{return await this.channel.publish("update",e),console.log("[WebSocket] Published update"),!0}catch(t){return console.error("[WebSocket] Publish error:",t),!1}}disconnect(){this.client&&(this.client.close(),this.client=null,this.channel=null),this.updateStatus("disconnected"),console.log("[WebSocket] Disconnected")}getStatus(){return{isConnected:this.isConnected,connectionState:this.connectionState,provider:Lt,channelId:this.channelId}}}let Dt=null;var Bt=n(579);const Ut=(0,e.createContext)(),Ht=()=>{const t=(0,e.useContext)(Ut);if(!t)throw new Error("useRally must be used within RallyProvider");return t},Wt=(e,t)=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error("Error loading ".concat(e," from localStorage:"),n),t}},qt=t=>{let{children:n}=t;const[r,o]=(0,e.useState)(()=>Wt("rally_event_name","")),[a,s]=(0,e.useState)(()=>Wt("rally_positions",{})),[i,l]=(0,e.useState)(()=>Wt("rally_lap_times",{})),[u,d]=(0,e.useState)(()=>Wt("rally_stage_pilots",{})),[h,f]=(0,e.useState)(()=>Wt("rally_pilots",[])),[p,m]=(0,e.useState)(()=>Wt("rally_categories",[])),[g,v]=(0,e.useState)(()=>Wt("rally_stages",[])),[y,b]=(0,e.useState)(()=>Wt("rally_times",{})),[x,w]=(0,e.useState)(()=>Wt("rally_arrival_times",{})),[k,S]=(0,e.useState)(()=>Wt("rally_start_times",{})),[C,N]=(0,e.useState)(()=>Wt("rally_current_stage",null)),[E,j]=(0,e.useState)(()=>Wt("rally_chroma_key","#000000")),[O,R]=(0,e.useState)(()=>Wt("rally_map_url","")),[T,A]=(0,e.useState)(()=>Wt("rally_logo_url","")),[_,M]=(0,e.useState)(()=>Wt("rally_stream_configs",{})),[P,I]=(0,e.useState)(()=>Wt("rally_global_audio",{volume:100,muted:!1})),[L,F]=(0,e.useState)(1),[z,D]=(0,e.useState)(()=>{const e=Wt("rally_data_version",Date.now());return"number"===typeof e?e:Date.now()}),[B,U]=(0,e.useState)(()=>Wt("rally_ws_enabled",!1)),[H,W]=(0,e.useState)(()=>Wt("rally_ws_channel_key","")),[q,V]=(0,e.useState)("disconnected"),[G,K]=(0,e.useState)(null),$=(0,e.useRef)(null),J=(0,e.useRef)(!1),Q=(0,e.useCallback)(()=>{o(Wt("rally_event_name","")),s(Wt("rally_positions",{})),l(Wt("rally_lap_times",{})),d(Wt("rally_stage_pilots",{})),f(Wt("rally_pilots",[])),m(Wt("rally_categories",[])),v(Wt("rally_stages",[])),b(Wt("rally_times",{})),w(Wt("rally_arrival_times",{})),S(Wt("rally_start_times",{})),N(Wt("rally_current_stage",null)),j(Wt("rally_chroma_key","#000000")),R(Wt("rally_map_url","")),A(Wt("rally_logo_url","")),M(Wt("rally_stream_configs",{})),I(Wt("rally_global_audio",{volume:100,muted:!1}));const e=Wt("rally_data_version",Date.now());D("number"===typeof e?e:Date.now())},[]),Y=(0,e.useCallback)(e=>{e&&(console.log("[RallyContext] Applying WebSocket data"),J.current=!0,void 0!==e.eventName&&o(e.eventName),e.positions&&s(e.positions),e.lapTimes&&l(e.lapTimes),e.stagePilots&&d(e.stagePilots),e.pilots&&f(e.pilots),e.categories&&m(e.categories),e.stages&&v(e.stages),e.times&&b(e.times),e.arrivalTimes&&w(e.arrivalTimes),e.startTimes&&S(e.startTimes),void 0!==e.currentStageId&&N(e.currentStageId),e.chromaKey&&j(e.chromaKey),void 0!==e.mapUrl&&R(e.mapUrl),void 0!==e.logoUrl&&A(e.logoUrl),e.streamConfigs&&M(e.streamConfigs),e.globalAudio&&I(e.globalAudio),setTimeout(()=>{J.current=!1},100))},[]);(0,e.useEffect)(()=>{const e=()=>{Q()};return window.addEventListener("rally-reload-data",e),()=>window.removeEventListener("rally-reload-data",e)},[Q]);const X=(0,e.useCallback)(async()=>{var e;if(!B||null===(e=$.current)||void 0===e||!e.isConnected||J.current)return;const t={eventName:r,positions:a,lapTimes:i,stagePilots:u,pilots:h,categories:p,stages:g,times:y,arrivalTimes:x,startTimes:k,currentStageId:C,chromaKey:E,mapUrl:O,logoUrl:T,streamConfigs:_,globalAudio:P,timestamp:Date.now()};await $.current.publish(t)},[B,r,a,i,u,h,p,g,y,x,k,C,E,O,T,_,P]),Z=(0,e.useCallback)(async e=>{const{valid:t}=Ft(e);if(!t)return K("Invalid channel key format"),!1;try{return V("connecting"),K(null),$.current=(Dt||(Dt=new zt),Dt),await $.current.connect(e,e=>{Y(e)},(e,t,n)=>{V(e),n&&K(n)}),W(e),localStorage.setItem("rally_ws_channel_key",JSON.stringify(e)),U(!0),localStorage.setItem("rally_ws_enabled",JSON.stringify(!0)),!0}catch(n){return V("error"),K(n.message),!1}},[Y]),ee=(0,e.useCallback)(()=>{$.current&&($.current.disconnect(),$.current=null),V("disconnected"),U(!1),localStorage.setItem("rally_ws_enabled",JSON.stringify(!1))},[]),te=(0,e.useCallback)(()=>(()=>{const e=Math.random().toString(36).substring(2,10).toUpperCase();return"".concat("1","-").concat(e)})(),[]),ne=(0,e.useCallback)(()=>{const e=Date.now();D(e),localStorage.setItem("rally_data_version",JSON.stringify(e))},[]);(0,e.useEffect)(()=>{var e;B&&null!==(e=$.current)&&void 0!==e&&e.isConnected&&X()},[z,B,X]),(0,e.useEffect)(()=>{localStorage.setItem("rally_event_name",JSON.stringify(r)),ne()},[r]),(0,e.useEffect)(()=>{localStorage.setItem("rally_positions",JSON.stringify(a)),ne()},[a]),(0,e.useEffect)(()=>{localStorage.setItem("rally_lap_times",JSON.stringify(i)),ne()},[i]),(0,e.useEffect)(()=>{localStorage.setItem("rally_stage_pilots",JSON.stringify(u)),ne()},[u]),(0,e.useEffect)(()=>{localStorage.setItem("rally_pilots",JSON.stringify(h)),ne()},[h]),(0,e.useEffect)(()=>{localStorage.setItem("rally_categories",JSON.stringify(p)),ne()},[p]),(0,e.useEffect)(()=>{localStorage.setItem("rally_stages",JSON.stringify(g)),ne()},[g]),(0,e.useEffect)(()=>{localStorage.setItem("rally_times",JSON.stringify(y)),ne()},[y]),(0,e.useEffect)(()=>{localStorage.setItem("rally_arrival_times",JSON.stringify(x)),ne()},[x]),(0,e.useEffect)(()=>{localStorage.setItem("rally_start_times",JSON.stringify(k)),ne()},[k]),(0,e.useEffect)(()=>{localStorage.setItem("rally_current_stage",JSON.stringify(C)),ne()},[C]),(0,e.useEffect)(()=>{localStorage.setItem("rally_chroma_key",JSON.stringify(E))},[E]),(0,e.useEffect)(()=>{localStorage.setItem("rally_map_url",JSON.stringify(O)),ne()},[O]),(0,e.useEffect)(()=>{localStorage.setItem("rally_logo_url",JSON.stringify(T)),ne()},[T]),(0,e.useEffect)(()=>{localStorage.setItem("rally_stream_configs",JSON.stringify(_)),ne()},[_]),(0,e.useEffect)(()=>{localStorage.setItem("rally_global_audio",JSON.stringify(P)),ne()},[P]);const re=(e,t,n)=>{s(r=>c(c({},r),{},{[e]:c(c({},r[e]||{}),{},{[t]:n})}))},oe=e=>_[e]||{volume:100,muted:!1,solo:!1,saturation:100,contrast:100,brightness:100},ae={eventName:r,positions:a,lapTimes:i,stagePilots:u,pilots:h,categories:p,stages:g,times:y,arrivalTimes:x,startTimes:k,streamConfigs:_,globalAudio:P,currentStageId:C,chromaKey:E,mapUrl:O,logoUrl:T,currentScene:L,dataVersion:z,wsEnabled:B,wsChannelKey:H,wsConnectionStatus:q,wsError:G,setEventName:o,setCurrentScene:F,setChromaKey:j,setMapUrl:R,setLogoUrl:A,setCurrentStageId:N,setGlobalAudio:I,addPilot:e=>{const t=c({id:Date.now().toString(),name:e.name,picture:e.picture||"",streamUrl:e.streamUrl||"",categoryId:e.categoryId||null,startOrder:e.startOrder||999,isActive:!1},e);f(e=>[...e,t])},updatePilot:(e,t)=>{f(n=>n.map(n=>n.id===e?c(c({},n),t):n))},deletePilot:e=>{f(t=>t.filter(t=>t.id!==e)),b(t=>{const n=c({},t);return delete n[e],n}),S(t=>{const n=c({},t);return delete n[e],n})},togglePilotActive:e=>{f(t=>t.map(t=>t.id===e?c(c({},t),{},{isActive:!t.isActive}):t))},addCategory:e=>{const t=c({id:Date.now().toString(),name:e.name,color:e.color||"#FF4500"},e);m(e=>[...e,t])},updateCategory:(e,t)=>{m(n=>n.map(n=>n.id===e?c(c({},n),t):n))},deleteCategory:e=>{m(t=>t.filter(t=>t.id!==e)),f(t=>t.map(t=>t.categoryId===e?c(c({},t),{},{categoryId:null}):t))},addStage:e=>{const t=c({id:Date.now().toString(),name:e.name,type:e.type||"SS",ssNumber:e.ssNumber||"",startTime:e.startTime||"",numberOfLaps:e.numberOfLaps||5},e);v(e=>[...e,t]),"Lap Race"===e.type&&d(e=>c(c({},e),{},{[t.id]:h.map(e=>e.id)}))},updateStage:(e,t)=>{v(n=>n.map(n=>n.id===e?c(c({},n),t):n))},deleteStage:e=>{v(t=>t.filter(t=>t.id!==e)),b(t=>{const n=c({},t);return Object.keys(n).forEach(t=>{n[t]&&delete n[t][e]}),n}),w(t=>{const n=c({},t);return Object.keys(n).forEach(t=>{n[t]&&delete n[t][e]}),n}),S(t=>{const n=c({},t);return Object.keys(n).forEach(t=>{n[t]&&delete n[t][e]}),n}),l(t=>{const n=c({},t);return Object.keys(n).forEach(t=>{n[t]&&delete n[t][e]}),n}),s(t=>{const n=c({},t);return Object.keys(n).forEach(t=>{n[t]&&delete n[t][e]}),n}),d(t=>{const n=c({},t);return delete n[e],n})},setTime:(e,t,n)=>{b(r=>c(c({},r),{},{[e]:c(c({},r[e]||{}),{},{[t]:n})}))},getTime:(e,t)=>{var n;return(null===(n=y[e])||void 0===n?void 0:n[t])||""},setArrivalTime:(e,t,n)=>{w(r=>c(c({},r),{},{[e]:c(c({},r[e]||{}),{},{[t]:n})}))},getArrivalTime:(e,t)=>{var n;return(null===(n=x[e])||void 0===n?void 0:n[t])||""},setStartTime:(e,t,n)=>{S(r=>c(c({},r),{},{[e]:c(c({},r[e]||{}),{},{[t]:n})}))},getStartTime:(e,t)=>{var n;return(null===(n=k[e])||void 0===n?void 0:n[t])||""},setLapTime:(e,t,n,r)=>{l(o=>{const a=o[e]||{},s=[...a[t]||[]];return s[n]=r,c(c({},o),{},{[e]:c(c({},a),{},{[t]:s})})})},getLapTime:(e,t,n)=>{var r,o;return(null===(r=i[e])||void 0===r||null===(o=r[t])||void 0===o?void 0:o[n])||""},getPilotLapTimes:(e,t)=>{var n;return(null===(n=i[e])||void 0===n?void 0:n[t])||[]},setPosition:re,getPosition:(e,t)=>{var n;return(null===(n=a[e])||void 0===n?void 0:n[t])||null},calculatePositions:(e,t)=>{const n=h.map(t=>{var n;const r=(null===(n=i[t.id])||void 0===n?void 0:n[e])||[],o=r.filter(e=>e).length,a=r.reduce((e,t)=>{if(!t)return e;const n=t.split(":");return e+60*(parseInt(n[0])||0)+(n[1]?parseFloat(n[1]):0)},0);return{pilotId:t.id,completedLaps:o,totalTime:a}});n.sort((e,t)=>t.completedLaps!==e.completedLaps?t.completedLaps-e.completedLaps:e.totalTime-t.totalTime),n.forEach((t,n)=>{re(t.pilotId,e,n+1)})},getStagePilots:e=>u[e]||h.map(e=>e.id),setStagePilotsForStage:(e,t)=>{d(n=>c(c({},n),{},{[e]:t}))},togglePilotInStage:(e,t)=>{d(n=>{const r=n[e]||h.map(e=>e.id);return r.includes(t)?c(c({},n),{},{[e]:r.filter(e=>e!==t)}):c(c({},n),{},{[e]:[...r,t]})})},selectAllPilotsInStage:e=>{d(t=>c(c({},t),{},{[e]:h.map(e=>e.id)}))},deselectAllPilotsInStage:e=>{d(t=>c(c({},t),{},{[e]:[]}))},getStreamConfig:oe,setStreamConfig:(e,t)=>{M(n=>c(c({},n),{},{[e]:c(c({},oe(e)),t)}))},setSoloStream:e=>{const t=oe(e);t.solo?M(n=>c(c({},n),{},{[e]:c(c({},t),{},{solo:!1})})):M(t=>{const n=c({},t);return Object.keys(n).forEach(e=>{n[e]&&(n[e]=c(c({},n[e]),{},{solo:!1}))}),n[e]=c(c({},oe(e)),{},{solo:!0}),n})},exportData:()=>{const e={eventName:r,positions:a,lapTimes:i,stagePilots:u,pilots:h,categories:p,stages:g,times:y,arrivalTimes:x,startTimes:k,streamConfigs:_,globalAudio:P,currentStageId:C,chromaKey:E,mapUrl:O,logoUrl:T,dataVersion:z,exportDate:(new Date).toISOString()};return JSON.stringify(e,null,2)},importData:e=>{try{const t=JSON.parse(e);return t.pilots&&f(t.pilots),t.categories&&m(t.categories),t.stages&&v(t.stages),t.times&&b(t.times),t.arrivalTimes&&w(t.arrivalTimes),t.startTimes&&S(t.startTimes),t.streamConfigs&&M(t.streamConfigs),t.globalAudio&&I(t.globalAudio),void 0!==t.currentStageId&&N(t.currentStageId),t.chromaKey&&j(t.chromaKey),void 0!==t.mapUrl&&R(t.mapUrl),void 0!==t.logoUrl&&A(t.logoUrl),void 0!==t.eventName&&o(t.eventName),t.positions&&s(t.positions),t.lapTimes&&l(t.lapTimes),t.stagePilots&&d(t.stagePilots),ne(),!0}catch(t){return console.error("Error importing data:",t),!1}},clearAllData:()=>{o(""),s({}),l({}),d({}),f([]),m([]),v([]),b({}),w({}),S({}),M({}),I({volume:100,muted:!1}),N(null),j("#000000"),R(""),A(""),ne()},reloadData:Q,connectWebSocket:Z,disconnectWebSocket:ee,generateNewChannelKey:te};return(0,Bt.jsx)(Ut.Provider,{value:ae,children:n})};function Vt(e){return"undefined"===typeof e||null===e}var Gt=function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},Kt=function(e,t){var n,r,o,a;if(t)for(n=0,r=(a=Object.keys(t)).length;n<r;n+=1)e[o=a[n]]=t[o];return e},$t={isNothing:Vt,isObject:function(e){return"object"===typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:Vt(e)?[]:[e]},repeat:Gt,isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:Kt};function Jt(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function Qt(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Jt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}Qt.prototype=Object.create(Error.prototype),Qt.prototype.constructor=Qt,Qt.prototype.toString=function(e){return this.name+": "+Jt(this,e)};var Yt=Qt;function Xt(e,t,n,r,o){var a="",s="",i=Math.floor(o/2)-1;return r-t>i&&(t=r-i+(a=" ... ").length),n-r>i&&(n=r+i-(s=" ...").length),{str:a+e.slice(t,n).replace(/\t/g,"\u2192")+s,pos:r-t+a.length}}function Zt(e,t){return $t.repeat(" ",t-e.length)+e}var en=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!==typeof t.indent&&(t.indent=1),"number"!==typeof t.linesBefore&&(t.linesBefore=3),"number"!==typeof t.linesAfter&&(t.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,o=[0],a=[],s=-1;n=r.exec(e.buffer);)a.push(n.index),o.push(n.index+n[0].length),e.position<=n.index&&s<0&&(s=o.length-2);s<0&&(s=o.length-1);var i,l,c="",u=Math.min(e.line+t.linesAfter,a.length).toString().length,d=t.maxLength-(t.indent+u+3);for(i=1;i<=t.linesBefore&&!(s-i<0);i++)l=Xt(e.buffer,o[s-i],a[s-i],e.position-(o[s]-o[s-i]),d),c=$t.repeat(" ",t.indent)+Zt((e.line-i+1).toString(),u)+" | "+l.str+"\n"+c;for(l=Xt(e.buffer,o[s],a[s],e.position,d),c+=$t.repeat(" ",t.indent)+Zt((e.line+1).toString(),u)+" | "+l.str+"\n",c+=$t.repeat("-",t.indent+u+3+l.pos)+"^\n",i=1;i<=t.linesAfter&&!(s+i>=a.length);i++)l=Xt(e.buffer,o[s+i],a[s+i],e.position-(o[s]-o[s+i]),d),c+=$t.repeat(" ",t.indent)+Zt((e.line+i+1).toString(),u)+" | "+l.str+"\n";return c.replace(/\n$/,"")},tn=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],nn=["scalar","sequence","mapping"];var rn=function(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(-1===tn.indexOf(t))throw new Yt('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){t[String(e)]=n})}),t}(t.styleAliases||null),-1===nn.indexOf(this.kind))throw new Yt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function on(e,t){var n=[];return e[t].forEach(function(e){var t=n.length;n.forEach(function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)}),n[t]=e}),n}function an(e){return this.extend(e)}an.prototype.extend=function(e){var t=[],n=[];if(e instanceof rn)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new Yt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach(function(e){if(!(e instanceof rn))throw new Yt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new Yt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new Yt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(e){if(!(e instanceof rn))throw new Yt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(an.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=on(r,"implicit"),r.compiledExplicit=on(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var sn=an,ln=new rn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),cn=new rn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),un=new rn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),dn=new sn({explicit:[ln,cn,un]});var hn=new rn("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var fn=new rn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function pn(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function mn(e){return 48<=e&&e<=55}function gn(e){return 48<=e&&e<=57}var vn=new rn("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,r=0,o=!1;if(!n)return!1;if("-"!==(t=e[r])&&"+"!==t||(t=e[++r]),"0"===t){if(r+1===n)return!0;if("b"===(t=e[++r])){for(r++;r<n;r++)if("_"!==(t=e[r])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!pn(e.charCodeAt(r)))return!1;o=!0}return o&&"_"!==t}if("o"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!mn(e.charCodeAt(r)))return!1;o=!0}return o&&"_"!==t}}if("_"===t)return!1;for(;r<n;r++)if("_"!==(t=e[r])){if(!gn(e.charCodeAt(r)))return!1;o=!0}return!(!o||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1===0&&!$t.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),yn=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var bn=/^[-+]?[0-9]+e/;var xn=new rn("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!yn.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!==0||$t.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if($t.isNegativeZero(e))return"-0.0";return n=e.toString(10),bn.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),wn=dn.extend({implicit:[hn,fn,vn,xn]}),kn=wn,Sn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Cn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var Nn=new rn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==Sn.exec(e)||null!==Cn.exec(e))},construct:function(e){var t,n,r,o,a,s,i,l,c=0,u=null;if(null===(t=Sn.exec(e))&&(t=Cn.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(n,r,o));if(a=+t[4],s=+t[5],i=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),l=new Date(Date.UTC(n,r,o,a,s,i,c)),u&&l.setTime(l.getTime()-u),l},instanceOf:Date,represent:function(e){return e.toISOString()}});var En=new rn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),jn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var On=new rn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,o=e.length,a=jn;for(n=0;n<o;n++)if(!((t=a.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8===0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),o=r.length,a=jn,s=0,i=[];for(t=0;t<o;t++)t%4===0&&t&&(i.push(s>>16&255),i.push(s>>8&255),i.push(255&s)),s=s<<6|a.indexOf(r.charAt(t));return 0===(n=o%4*6)?(i.push(s>>16&255),i.push(s>>8&255),i.push(255&s)):18===n?(i.push(s>>10&255),i.push(s>>2&255)):12===n&&i.push(s>>4&255),new Uint8Array(i)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",o=0,a=e.length,s=jn;for(t=0;t<a;t++)t%3===0&&t&&(r+=s[o>>18&63],r+=s[o>>12&63],r+=s[o>>6&63],r+=s[63&o]),o=(o<<8)+e[t];return 0===(n=a%3)?(r+=s[o>>18&63],r+=s[o>>12&63],r+=s[o>>6&63],r+=s[63&o]):2===n?(r+=s[o>>10&63],r+=s[o>>4&63],r+=s[o<<2&63],r+=s[64]):1===n&&(r+=s[o>>2&63],r+=s[o<<4&63],r+=s[64],r+=s[64]),r}}),Rn=Object.prototype.hasOwnProperty,Tn=Object.prototype.toString;var An=new rn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,o,a,s=[],i=e;for(t=0,n=i.length;t<n;t+=1){if(r=i[t],a=!1,"[object Object]"!==Tn.call(r))return!1;for(o in r)if(Rn.call(r,o)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==s.indexOf(o))return!1;s.push(o)}return!0},construct:function(e){return null!==e?e:[]}}),_n=Object.prototype.toString;var Mn=new rn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,o,a,s=e;for(a=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(r=s[t],"[object Object]"!==_n.call(r))return!1;if(1!==(o=Object.keys(r)).length)return!1;a[t]=[o[0],r[o[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,o,a,s=e;for(a=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],o=Object.keys(r),a[t]=[o[0],r[o[0]]];return a}}),Pn=Object.prototype.hasOwnProperty;var In=new rn("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(Pn.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),Ln=kn.extend({implicit:[Nn,En],explicit:[On,An,Mn,In]}),Fn=Object.prototype.hasOwnProperty,zn=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Dn=/[\x85\u2028\u2029]/,Bn=/[,\[\]\{\}]/,Un=/^(?:!|!!|![a-z\-]+!)$/i,Hn=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Wn(e){return Object.prototype.toString.call(e)}function qn(e){return 10===e||13===e}function Vn(e){return 9===e||32===e}function Gn(e){return 9===e||32===e||10===e||13===e}function Kn(e){return 44===e||91===e||93===e||123===e||125===e}function $n(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function Jn(e){return 120===e?2:117===e?4:85===e?8:0}function Qn(e){return 48<=e&&e<=57?e-48:-1}function Yn(e){return 48===e?"\0":97===e?"\x07":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"\x1b":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"\x85":95===e?"\xa0":76===e?"\u2028":80===e?"\u2029":""}function Xn(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}function Zn(e,t,n){"__proto__"===t?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}for(var er=new Array(256),tr=new Array(256),nr=0;nr<256;nr++)er[nr]=Yn(nr)?1:0,tr[nr]=Yn(nr);function rr(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Ln,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function or(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=en(n),new Yt(t,n)}function ar(e,t){throw or(e,t)}function sr(e,t){e.onWarning&&e.onWarning.call(null,or(e,t))}var ir={YAML:function(e,t,n){var r,o,a;null!==e.version&&ar(e,"duplication of %YAML directive"),1!==n.length&&ar(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&ar(e,"ill-formed argument of the YAML directive"),o=parseInt(r[1],10),a=parseInt(r[2],10),1!==o&&ar(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,1!==a&&2!==a&&sr(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,o;2!==n.length&&ar(e,"TAG directive accepts exactly two arguments"),r=n[0],o=n[1],Un.test(r)||ar(e,"ill-formed tag handle (first argument) of the TAG directive"),Fn.call(e.tagMap,r)&&ar(e,'there is a previously declared suffix for "'+r+'" tag handle'),Hn.test(o)||ar(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch(a){ar(e,"tag prefix is malformed: "+o)}e.tagMap[r]=o}};function lr(e,t,n,r){var o,a,s,i;if(t<n){if(i=e.input.slice(t,n),r)for(o=0,a=i.length;o<a;o+=1)9===(s=i.charCodeAt(o))||32<=s&&s<=1114111||ar(e,"expected valid JSON character");else zn.test(i)&&ar(e,"the stream contains non-printable characters");e.result+=i}}function cr(e,t,n,r){var o,a,s,i;for($t.isObject(n)||ar(e,"cannot merge mappings; the provided source object is unacceptable"),s=0,i=(o=Object.keys(n)).length;s<i;s+=1)a=o[s],Fn.call(t,a)||(Zn(t,a,n[a]),r[a]=!0)}function ur(e,t,n,r,o,a,s,i,l){var c,u;if(Array.isArray(o))for(c=0,u=(o=Array.prototype.slice.call(o)).length;c<u;c+=1)Array.isArray(o[c])&&ar(e,"nested arrays are not supported inside keys"),"object"===typeof o&&"[object Object]"===Wn(o[c])&&(o[c]="[object Object]");if("object"===typeof o&&"[object Object]"===Wn(o)&&(o="[object Object]"),o=String(o),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(a))for(c=0,u=a.length;c<u;c+=1)cr(e,t,a[c],n);else cr(e,t,a,n);else e.json||Fn.call(n,o)||!Fn.call(t,o)||(e.line=s||e.line,e.lineStart=i||e.lineStart,e.position=l||e.position,ar(e,"duplicated mapping key")),Zn(t,o,a),delete n[o];return t}function dr(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):ar(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function hr(e,t,n){for(var r=0,o=e.input.charCodeAt(e.position);0!==o;){for(;Vn(o);)9===o&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),o=e.input.charCodeAt(++e.position);if(t&&35===o)do{o=e.input.charCodeAt(++e.position)}while(10!==o&&13!==o&&0!==o);if(!qn(o))break;for(dr(e),o=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&sr(e,"deficient indentation"),r}function fr(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!Gn(t)))}function pr(e,t){1===t?e.result+=" ":t>1&&(e.result+=$t.repeat("\n",t-1))}function mr(e,t){var n,r,o=e.tag,a=e.anchor,s=[],i=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,ar(e,"tab characters must not be used in indentation")),45===r)&&Gn(e.input.charCodeAt(e.position+1));)if(i=!0,e.position++,hr(e,!0,-1)&&e.lineIndent<=t)s.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,yr(e,t,3,!1,!0),s.push(e.result),hr(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)ar(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!i&&(e.tag=o,e.anchor=a,e.kind="sequence",e.result=s,!0)}function gr(e){var t,n,r,o,a=!1,s=!1;if(33!==(o=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&ar(e,"duplication of a tag property"),60===(o=e.input.charCodeAt(++e.position))?(a=!0,o=e.input.charCodeAt(++e.position)):33===o?(s=!0,n="!!",o=e.input.charCodeAt(++e.position)):n="!",t=e.position,a){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&62!==o);e.position<e.length?(r=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):ar(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!Gn(o);)33===o&&(s?ar(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),Un.test(n)||ar(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),Bn.test(r)&&ar(e,"tag suffix cannot contain flow indicator characters")}r&&!Hn.test(r)&&ar(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(i){ar(e,"tag name is malformed: "+r)}return a?e.tag=r:Fn.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:ar(e,'undeclared tag handle "'+n+'"'),!0}function vr(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&ar(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!Gn(n)&&!Kn(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&ar(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function yr(e,t,n,r,o){var a,s,i,l,c,u,d,h,f,p=1,m=!1,g=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=s=i=4===n||3===n,r&&hr(e,!0,-1)&&(m=!0,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)),1===p)for(;gr(e)||vr(e);)hr(e,!0,-1)?(m=!0,i=a,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)):i=!1;if(i&&(i=m||o),1!==p&&4!==n||(h=1===n||2===n?t:t+1,f=e.position-e.lineStart,1===p?i&&(mr(e,f)||function(e,t,n){var r,o,a,s,i,l,c,u=e.tag,d=e.anchor,h={},f=Object.create(null),p=null,m=null,g=null,v=!1,y=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=h),c=e.input.charCodeAt(e.position);0!==c;){if(v||-1===e.firstTabInLine||(e.position=e.firstTabInLine,ar(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),a=e.line,63!==c&&58!==c||!Gn(r)){if(s=e.line,i=e.lineStart,l=e.position,!yr(e,n,2,!1,!0))break;if(e.line===a){for(c=e.input.charCodeAt(e.position);Vn(c);)c=e.input.charCodeAt(++e.position);if(58===c)Gn(c=e.input.charCodeAt(++e.position))||ar(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(ur(e,h,f,p,m,null,s,i,l),p=m=g=null),y=!0,v=!1,o=!1,p=e.tag,m=e.result;else{if(!y)return e.tag=u,e.anchor=d,!0;ar(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return e.tag=u,e.anchor=d,!0;ar(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(v&&(ur(e,h,f,p,m,null,s,i,l),p=m=g=null),y=!0,v=!0,o=!0):v?(v=!1,o=!0):ar(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=r;if((e.line===a||e.lineIndent>t)&&(v&&(s=e.line,i=e.lineStart,l=e.position),yr(e,t,4,!0,o)&&(v?m=e.result:g=e.result),v||(ur(e,h,f,p,m,g,s,i,l),p=m=g=null),hr(e,!0,-1),c=e.input.charCodeAt(e.position)),(e.line===a||e.lineIndent>t)&&0!==c)ar(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&ur(e,h,f,p,m,null,s,i,l),y&&(e.tag=u,e.anchor=d,e.kind="mapping",e.result=h),y}(e,f,h))||function(e,t){var n,r,o,a,s,i,l,c,u,d,h,f,p=!0,m=e.tag,g=e.anchor,v=Object.create(null);if(91===(f=e.input.charCodeAt(e.position)))s=93,c=!1,a=[];else{if(123!==f)return!1;s=125,c=!0,a={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),f=e.input.charCodeAt(++e.position);0!==f;){if(hr(e,!0,t),(f=e.input.charCodeAt(e.position))===s)return e.position++,e.tag=m,e.anchor=g,e.kind=c?"mapping":"sequence",e.result=a,!0;p?44===f&&ar(e,"expected the node content, but found ','"):ar(e,"missed comma between flow collection entries"),h=null,i=l=!1,63===f&&Gn(e.input.charCodeAt(e.position+1))&&(i=l=!0,e.position++,hr(e,!0,t)),n=e.line,r=e.lineStart,o=e.position,yr(e,t,1,!1,!0),d=e.tag,u=e.result,hr(e,!0,t),f=e.input.charCodeAt(e.position),!l&&e.line!==n||58!==f||(i=!0,f=e.input.charCodeAt(++e.position),hr(e,!0,t),yr(e,t,1,!1,!0),h=e.result),c?ur(e,a,v,d,u,h,n,r,o):i?a.push(ur(e,null,v,d,u,h,n,r,o)):a.push(u),hr(e,!0,t),44===(f=e.input.charCodeAt(e.position))?(p=!0,f=e.input.charCodeAt(++e.position)):p=!1}ar(e,"unexpected end of the stream within a flow collection")}(e,h)?g=!0:(s&&function(e,t){var n,r,o,a,s=1,i=!1,l=!1,c=t,u=0,d=!1;if(124===(a=e.input.charCodeAt(e.position)))r=!1;else{if(62!==a)return!1;r=!0}for(e.kind="scalar",e.result="";0!==a;)if(43===(a=e.input.charCodeAt(++e.position))||45===a)1===s?s=43===a?3:2:ar(e,"repeat of a chomping mode identifier");else{if(!((o=Qn(a))>=0))break;0===o?ar(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?ar(e,"repeat of an indentation width identifier"):(c=t+o-1,l=!0)}if(Vn(a)){do{a=e.input.charCodeAt(++e.position)}while(Vn(a));if(35===a)do{a=e.input.charCodeAt(++e.position)}while(!qn(a)&&0!==a)}for(;0!==a;){for(dr(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!l||e.lineIndent<c)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>c&&(c=e.lineIndent),qn(a))u++;else{if(e.lineIndent<c){3===s?e.result+=$t.repeat("\n",i?1+u:u):1===s&&i&&(e.result+="\n");break}for(r?Vn(a)?(d=!0,e.result+=$t.repeat("\n",i?1+u:u)):d?(d=!1,e.result+=$t.repeat("\n",u+1)):0===u?i&&(e.result+=" "):e.result+=$t.repeat("\n",u):e.result+=$t.repeat("\n",i?1+u:u),i=!0,l=!0,u=0,n=e.position;!qn(a)&&0!==a;)a=e.input.charCodeAt(++e.position);lr(e,n,e.position,!1)}}return!0}(e,h)||function(e,t){var n,r,o;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=o=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(lr(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,o=e.position}else qn(n)?(lr(e,r,o,!0),pr(e,hr(e,!1,t)),r=o=e.position):e.position===e.lineStart&&fr(e)?ar(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);ar(e,"unexpected end of the stream within a single quoted scalar")}(e,h)||function(e,t){var n,r,o,a,s,i;if(34!==(i=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(i=e.input.charCodeAt(e.position));){if(34===i)return lr(e,n,e.position,!0),e.position++,!0;if(92===i){if(lr(e,n,e.position,!0),qn(i=e.input.charCodeAt(++e.position)))hr(e,!1,t);else if(i<256&&er[i])e.result+=tr[i],e.position++;else if((s=Jn(i))>0){for(o=s,a=0;o>0;o--)(s=$n(i=e.input.charCodeAt(++e.position)))>=0?a=(a<<4)+s:ar(e,"expected hexadecimal character");e.result+=Xn(a),e.position++}else ar(e,"unknown escape sequence");n=r=e.position}else qn(i)?(lr(e,n,r,!0),pr(e,hr(e,!1,t)),n=r=e.position):e.position===e.lineStart&&fr(e)?ar(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}ar(e,"unexpected end of the stream within a double quoted scalar")}(e,h)?g=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!Gn(r)&&!Kn(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&ar(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Fn.call(e.anchorMap,n)||ar(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],hr(e,!0,-1),!0}(e)?function(e,t,n){var r,o,a,s,i,l,c,u,d=e.kind,h=e.result;if(Gn(u=e.input.charCodeAt(e.position))||Kn(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(Gn(r=e.input.charCodeAt(e.position+1))||n&&Kn(r)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,s=!1;0!==u;){if(58===u){if(Gn(r=e.input.charCodeAt(e.position+1))||n&&Kn(r))break}else if(35===u){if(Gn(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&fr(e)||n&&Kn(u))break;if(qn(u)){if(i=e.line,l=e.lineStart,c=e.lineIndent,hr(e,!1,-1),e.lineIndent>=t){s=!0,u=e.input.charCodeAt(e.position);continue}e.position=a,e.line=i,e.lineStart=l,e.lineIndent=c;break}}s&&(lr(e,o,a,!1),pr(e,e.line-i),o=a=e.position,s=!1),Vn(u)||(a=e.position+1),u=e.input.charCodeAt(++e.position)}return lr(e,o,a,!1),!!e.result||(e.kind=d,e.result=h,!1)}(e,h,1===n)&&(g=!0,null===e.tag&&(e.tag="?")):(g=!0,null===e.tag&&null===e.anchor||ar(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===p&&(g=i&&mr(e,f))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&ar(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),l=0,c=e.implicitTypes.length;l<c;l+=1)if((d=e.implicitTypes[l]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(Fn.call(e.typeMap[e.kind||"fallback"],e.tag))d=e.typeMap[e.kind||"fallback"][e.tag];else for(d=null,l=0,c=(u=e.typeMap.multi[e.kind||"fallback"]).length;l<c;l+=1)if(e.tag.slice(0,u[l].tag.length)===u[l].tag){d=u[l];break}d||ar(e,"unknown tag !<"+e.tag+">"),null!==e.result&&d.kind!==e.kind&&ar(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result,e.tag)?(e.result=d.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):ar(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||g}function br(e){var t,n,r,o,a=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(o=e.input.charCodeAt(e.position))&&(hr(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==o));){for(s=!0,o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!Gn(o);)o=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&ar(e,"directive name must not be less than one character in length");0!==o;){for(;Vn(o);)o=e.input.charCodeAt(++e.position);if(35===o){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&!qn(o));break}if(qn(o))break;for(t=e.position;0!==o&&!Gn(o);)o=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==o&&dr(e),Fn.call(ir,n)?ir[n](e,n,r):sr(e,'unknown document directive "'+n+'"')}hr(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,hr(e,!0,-1)):s&&ar(e,"directives end mark is expected"),yr(e,e.lineIndent-1,4,!1,!0),hr(e,!0,-1),e.checkLineBreaks&&Dn.test(e.input.slice(a,e.position))&&sr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&fr(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,hr(e,!0,-1)):e.position<e.length-1&&ar(e,"end of the stream or a document separator is expected")}function xr(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new rr(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,ar(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)br(n);return n.documents}var wr=function(e,t,n){null!==t&&"object"===typeof t&&"undefined"===typeof n&&(n=t,t=null);var r=xr(e,n);if("function"!==typeof t)return r;for(var o=0,a=r.length;o<a;o+=1)t(r[o])},kr=function(e,t){var n=xr(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new Yt("expected a single document in the stream, but found more")}},Sr={loadAll:wr,load:kr},Cr=Object.prototype.toString,Nr=Object.prototype.hasOwnProperty,Er=65279,jr={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Or=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Rr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Tr(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new Yt("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+$t.repeat("0",r-t.length)+t}function Ar(e){this.schema=e.schema||Ln,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=$t.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,o,a,s,i,l;if(null===t)return{};for(n={},o=0,a=(r=Object.keys(t)).length;o<a;o+=1)s=r[o],i=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(l=e.compiledTypeMap.fallback[s])&&Nr.call(l.styleAliases,i)&&(i=l.styleAliases[i]),n[s]=i;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"===typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function _r(e,t){for(var n,r=$t.repeat(" ",t),o=0,a=-1,s="",i=e.length;o<i;)-1===(a=e.indexOf("\n",o))?(n=e.slice(o),o=i):(n=e.slice(o,a+1),o=a+1),n.length&&"\n"!==n&&(s+=r),s+=n;return s}function Mr(e,t){return"\n"+$t.repeat(" ",e.indent*t)}function Pr(e){return 32===e||9===e}function Ir(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==Er||65536<=e&&e<=1114111}function Lr(e){return Ir(e)&&e!==Er&&13!==e&&10!==e}function Fr(e,t,n){var r=Lr(e),o=r&&!Pr(e);return(n?r:r&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!o)||Lr(t)&&!Pr(t)&&35===e||58===t&&o}function zr(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function Dr(e){return/^\n* /.test(e)}function Br(e,t,n,r,o,a,s,i){var l,c,u=0,d=null,h=!1,f=!1,p=-1!==r,m=-1,g=Ir(c=zr(e,0))&&c!==Er&&!Pr(c)&&45!==c&&63!==c&&58!==c&&44!==c&&91!==c&&93!==c&&123!==c&&125!==c&&35!==c&&38!==c&&42!==c&&33!==c&&124!==c&&61!==c&&62!==c&&39!==c&&34!==c&&37!==c&&64!==c&&96!==c&&function(e){return!Pr(e)&&58!==e}(zr(e,e.length-1));if(t||s)for(l=0;l<e.length;u>=65536?l+=2:l++){if(!Ir(u=zr(e,l)))return 5;g=g&&Fr(u,d,i),d=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(10===(u=zr(e,l)))h=!0,p&&(f=f||l-m-1>r&&" "!==e[m+1],m=l);else if(!Ir(u))return 5;g=g&&Fr(u,d,i),d=u}f=f||p&&l-m-1>r&&" "!==e[m+1]}return h||f?n>9&&Dr(e)?5:s?2===a?5:2:f?4:3:!g||s||o(e)?2===a?5:2:1}function Ur(e,t,n,r,o){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==Or.indexOf(t)||Rr.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var a=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),i=r||e.flowLevel>-1&&n>=e.flowLevel;switch(Br(t,i,e.indent,s,function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)},e.quotingType,e.forceQuotes&&!r,o)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+Hr(t,e.indent)+Wr(_r(t,a));case 4:return">"+Hr(t,e.indent)+Wr(_r(function(e,t){var n,r,o=/(\n+)([^\n]*)/g,a=function(){var n=e.indexOf("\n");return n=-1!==n?n:e.length,o.lastIndex=n,qr(e.slice(0,n),t)}(),s="\n"===e[0]||" "===e[0];for(;r=o.exec(e);){var i=r[1],l=r[2];n=" "===l[0],a+=i+(s||n||""===l?"":"\n")+qr(l,t),s=n}return a}(t,s),a));case 5:return'"'+function(e){for(var t,n="",r=0,o=0;o<e.length;r>=65536?o+=2:o++)r=zr(e,o),!(t=jr[r])&&Ir(r)?(n+=e[o],r>=65536&&(n+=e[o+1])):n+=t||Tr(r);return n}(t)+'"';default:throw new Yt("impossible error: invalid scalar style")}}()}function Hr(e,t){var n=Dr(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function Wr(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function qr(e,t){if(""===e||" "===e[0])return e;for(var n,r,o=/ [^ ]/g,a=0,s=0,i=0,l="";n=o.exec(e);)(i=n.index)-a>t&&(r=s>a?s:i,l+="\n"+e.slice(a,r),a=r+1),s=i;return l+="\n",e.length-a>t&&s>a?l+=e.slice(a,s)+"\n"+e.slice(s+1):l+=e.slice(a),l.slice(1)}function Vr(e,t,n,r){var o,a,s,i="",l=e.tag;for(o=0,a=n.length;o<a;o+=1)s=n[o],e.replacer&&(s=e.replacer.call(n,String(o),s)),(Kr(e,t+1,s,!0,!0,!1,!0)||"undefined"===typeof s&&Kr(e,t+1,null,!0,!0,!1,!0))&&(r&&""===i||(i+=Mr(e,t)),e.dump&&10===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=l,e.dump=i||"[]"}function Gr(e,t,n){var r,o,a,s,i,l;for(a=0,s=(o=n?e.explicitTypes:e.implicitTypes).length;a<s;a+=1)if(((i=o[a]).instanceOf||i.predicate)&&(!i.instanceOf||"object"===typeof t&&t instanceof i.instanceOf)&&(!i.predicate||i.predicate(t))){if(n?i.multi&&i.representName?e.tag=i.representName(t):e.tag=i.tag:e.tag="?",i.represent){if(l=e.styleMap[i.tag]||i.defaultStyle,"[object Function]"===Cr.call(i.represent))r=i.represent(t,l);else{if(!Nr.call(i.represent,l))throw new Yt("!<"+i.tag+'> tag resolver accepts not "'+l+'" style');r=i.represent[l](t,l)}e.dump=r}return!0}return!1}function Kr(e,t,n,r,o,a,s){e.tag=null,e.dump=n,Gr(e,n,!1)||Gr(e,n,!0);var i,l=Cr.call(e.dump),c=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var u,d,h="[object Object]"===l||"[object Array]"===l;if(h&&(d=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(o=!1),d&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(h&&d&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===l)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var o,a,s,i,l,c,u="",d=e.tag,h=Object.keys(n);if(!0===e.sortKeys)h.sort();else if("function"===typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new Yt("sortKeys must be a boolean or a function");for(o=0,a=h.length;o<a;o+=1)c="",r&&""===u||(c+=Mr(e,t)),i=n[s=h[o]],e.replacer&&(i=e.replacer.call(n,s,i)),Kr(e,t+1,s,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,l&&(c+=Mr(e,t)),Kr(e,t+1,i,!0,l)&&(e.dump&&10===e.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=e.dump));e.tag=d,e.dump=u||"{}"}(e,t,e.dump,o),d&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,o,a,s,i,l="",c=e.tag,u=Object.keys(n);for(r=0,o=u.length;r<o;r+=1)i="",""!==l&&(i+=", "),e.condenseFlow&&(i+='"'),s=n[a=u[r]],e.replacer&&(s=e.replacer.call(n,a,s)),Kr(e,t,a,!1,!1)&&(e.dump.length>1024&&(i+="? "),i+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Kr(e,t,s,!1,!1)&&(l+=i+=e.dump));e.tag=c,e.dump="{"+l+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===l)r&&0!==e.dump.length?(e.noArrayIndent&&!s&&t>0?Vr(e,t-1,e.dump,o):Vr(e,t,e.dump,o),d&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,o,a,s="",i=e.tag;for(r=0,o=n.length;r<o;r+=1)a=n[r],e.replacer&&(a=e.replacer.call(n,String(r),a)),(Kr(e,t,a,!1,!1)||"undefined"===typeof a&&Kr(e,t,null,!1,!1))&&(""!==s&&(s+=","+(e.condenseFlow?"":" ")),s+=e.dump);e.tag=i,e.dump="["+s+"]"}(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==l){if("[object Undefined]"===l)return!1;if(e.skipInvalid)return!1;throw new Yt("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&Ur(e,e.dump,t,a,c)}null!==e.tag&&"?"!==e.tag&&(i=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),i="!"===e.tag[0]?"!"+i:"tag:yaml.org,2002:"===i.slice(0,18)?"!!"+i.slice(18):"!<"+i+">",e.dump=i+" "+e.dump)}return!0}function $r(e,t){var n,r,o=[],a=[];for(Jr(e,o,a),n=0,r=a.length;n<r;n+=1)t.duplicates.push(o[a[n]]);t.usedDuplicates=new Array(r)}function Jr(e,t,n){var r,o,a;if(null!==e&&"object"===typeof e)if(-1!==(o=t.indexOf(e)))-1===n.indexOf(o)&&n.push(o);else if(t.push(e),Array.isArray(e))for(o=0,a=e.length;o<a;o+=1)Jr(e[o],t,n);else for(o=0,a=(r=Object.keys(e)).length;o<a;o+=1)Jr(e[r[o]],t,n)}var Qr=function(e,t){var n=new Ar(t=t||{});n.noRefs||$r(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Kr(n,0,r,!0,!0)?n.dump+"\n":""};function Yr(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Xr={Type:rn,Schema:sn,FAILSAFE_SCHEMA:dn,JSON_SCHEMA:wn,CORE_SCHEMA:kn,DEFAULT_SCHEMA:Ln,load:Sr.load,loadAll:Sr.loadAll,dump:{dump:Qr}.dump,YAMLException:Yt,types:{binary:On,float:xn,map:un,null:hn,pairs:Mn,set:In,timestamp:Nn,bool:fn,int:vn,merge:En,omap:An,seq:cn,str:ln},safeLoad:Yr("safeLoad","load"),safeLoadAll:Yr("safeLoadAll","loadAll"),safeDump:Yr("safeDump","dump")};const Zr=[{code:"en",name:"English",nativeName:"English",flag:"\ud83c\uddfa\ud83c\uddf8",file:"en.yaml"},{code:"pt-BR",name:"Portuguese (Brazil)",nativeName:"Portugu\xeas (Brasil)",flag:"\ud83c\udde7\ud83c\uddf7",file:"pt-BR.yaml"},{code:"es",name:"Spanish",nativeName:"Espa\xf1ol",flag:"\ud83c\uddea\ud83c\uddf8",file:"es.yaml"},{code:"fr",name:"French",nativeName:"Fran\xe7ais",flag:"\ud83c\uddeb\ud83c\uddf7",file:"fr.yaml"},{code:"de",name:"German",nativeName:"Deutsch",flag:"\ud83c\udde9\ud83c\uddea",file:"de.yaml"},{code:"it",name:"Italian",nativeName:"Italiano",flag:"\ud83c\uddee\ud83c\uddf9",file:"it.yaml"}],eo=e=>Zr.find(t=>t.code===e)||Zr[0],to=(0,e.createContext)(),no=()=>{const t=(0,e.useContext)(to);if(!t)throw new Error("useTranslation must be used within TranslationProvider");return t},ro={},oo=t=>{let{children:n}=t;const[r,o]=(0,e.useState)(()=>localStorage.getItem("rally_language")||"en"),[a,s]=(0,e.useState)({}),[i,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)([]),d=(0,e.useCallback)(async e=>{if(ro[e])return ro[e];try{const t=eo(e),n="/Nero-Rally-Show-Overlay",r=await fetch("".concat(n,"/translations/").concat(t.file));if(!r.ok)return console.warn("Translation file not found for ".concat(e,", falling back to English")),"en"!==e?d("en"):{};const o=await r.text(),a=Xr.load(o);return ro[e]=a,a}catch(t){return console.error("Error loading translation for ".concat(e,":"),t),"en"!==e?d("en"):{}}},[]);(0,e.useEffect)(()=>{(async()=>{l(!0);const e=await d("en");let t=e;if("en"!==r){t=ao(e,await d(r))}s(t),u(e=>e.includes(r)?e:[...e,r]),l(!1)})()},[r,d]),(0,e.useEffect)(()=>{localStorage.setItem("rally_language",r)},[r]);const h=(0,e.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e||!t)return n;const r=t.split(".");let o=e;for(const a of r){if(!o||"object"!==typeof o||!(a in o))return n;o=o[a]}return o||n}(a,e,e);return"string"===typeof n&&Object.keys(t).length>0&&Object.entries(t).forEach(e=>{let[t,r]=e;n=n.replace(new RegExp("{".concat(t,"}"),"g"),r)}),n},[a]),f=(0,e.useCallback)(e=>{Zr.some(t=>t.code===e)&&o(e)},[]),p=(0,e.useCallback)(()=>eo(r),[r]),m=(0,e.useCallback)(e=>c.includes(e)||"en"===e,[c]),g={t:h,currentLanguage:r,changeLanguage:f,getCurrentLanguage:p,languages:Zr,isLoading:i,isLanguageAvailable:m};return(0,Bt.jsx)(to.Provider,{value:g,children:n})};function ao(e,t){const n=c({},e);for(const r in t)t[r]&&"object"===typeof t[r]&&!Array.isArray(t[r])?n[r]=ao(e[r]||{},t[r]):void 0!==t[r]&&""!==t[r]&&(n[r]=t[r]);return n}function so(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function io(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=so(t,e);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():so(t[e],null)}}}}function lo(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useCallback(io(...n),n)}const co=["children"],uo=["children"];var ho=Symbol.for("react.lazy"),fo=t[" use ".trim().toString()];function po(e){return null!=e&&"object"===typeof e&&"$$typeof"in e&&e.$$typeof===ho&&"_payload"in e&&("object"===typeof(t=e._payload)&&null!==t&&"then"in t);var t}function mo(t){const n=vo(t),r=e.forwardRef((t,r)=>{let{children:a}=t,s=o(t,co);po(a)&&"function"===typeof fo&&(a=fo(a._payload));const i=e.Children.toArray(a),l=i.find(bo);if(l){const t=l.props.children,o=i.map(n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,o):null}))}return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}var go=mo("Slot");function vo(t){const n=e.forwardRef((t,n)=>{let{children:r}=t,a=o(t,uo);if(po(r)&&"function"===typeof fo&&(r=fo(r._payload)),e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=c({},t);for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){const e=a(...arguments);return o(...arguments),e}:o&&(n[r]=o):"style"===r?n[r]=c(c({},o),a):"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return c(c({},e),n)}(a,r.props);return r.type!==e.Fragment&&(o.ref=n?io(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var yo=Symbol("radix.slottable");function bo(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===yo}function xo(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=xo(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function wo(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=xo(e))&&(r&&(r+=" "),r+=t);return r}const ko=["class","className"],So=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,Co=wo,No=(e,t)=>n=>{var r;if(null==(null===t||void 0===t?void 0:t.variants))return Co(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:a,defaultVariants:s}=t,i=Object.keys(a).map(e=>{const t=null===n||void 0===n?void 0:n[e],r=null===s||void 0===s?void 0:s[e];if(null===t)return null;const o=So(t)||So(r);return a[e][o]}),l=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),u=null===t||void 0===t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r}=t,a=o(t,ko);return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes(c(c({},s),l)[t]):c(c({},s),l)[t]===n})?[...e,n,r]:e},[]);return Co(e,i,u,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)},Eo=function(){return{nextPart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,validators:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,classGroupId:arguments.length>2?arguments[2]:void 0}},jo="-",Oo=[],Ro=e=>{const t=_o(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return Ao(e);const n=e.split(jo),r=""===n[0]&&n.length>1?1:0;return To(n,r,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=r[e],o=n[e];return t?o?((e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n})(o,t):t:o||Oo}return n[e]||Oo}}},To=(e,t,n)=>{if(0===e.length-t)return n.classGroupId;const r=e[t],o=n.nextPart.get(r);if(o){const n=To(e,t+1,o);if(n)return n}const a=n.validators;if(null===a)return;const s=0===t?e.join(jo):e.slice(t).join(jo),i=a.length;for(let l=0;l<i;l++){const e=a[l];if(e.validator(s))return e.classGroupId}},Ao=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?"arbitrary.."+r:void 0})(),_o=e=>{const{theme:t,classGroups:n}=e;return Mo(n,t)},Mo=(e,t)=>{const n=Eo();for(const r in e){const o=e[r];Po(o,n,r,t)}return n},Po=(e,t,n,r)=>{const o=e.length;for(let a=0;a<o;a++){const o=e[a];Io(o,t,n,r)}},Io=(e,t,n,r)=>{"string"!==typeof e?"function"!==typeof e?zo(e,t,n,r):Fo(e,t,n,r):Lo(e,t,n)},Lo=(e,t,n)=>{(""===e?t:Do(t,e)).classGroupId=n},Fo=(e,t,n,r)=>{Bo(e)?Po(e(r),t,n,r):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(n,e)))},zo=(e,t,n,r)=>{const o=Object.entries(e),a=o.length;for(let s=0;s<a;s++){const[e,a]=o[s];Po(a,Do(t,e),n,r)}},Do=(e,t)=>{let n=e;const r=t.split(jo),o=r.length;for(let a=0;a<o;a++){const e=r[a];let t=n.nextPart.get(e);t||(t=Eo(),n.nextPart.set(e,t)),n=t}return n},Bo=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,Uo=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const o=(o,a)=>{n[o]=a,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(e){let t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(o(e,t),t):void 0},set(e,t){e in n?n[e]=t:o(e,t)}}},Ho=[],Wo=(e,t,n,r,o)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:o}),qo=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,o=0,a=0;const s=e.length;for(let u=0;u<s;u++){const s=e[u];if(0===r&&0===o){if(":"===s){t.push(e.slice(a,u)),a=u+1;continue}if("/"===s){n=u;continue}}"["===s?r++:"]"===s?r--:"("===s?o++:")"===s&&o--}const i=0===t.length?e:e.slice(a);let l=i,c=!1;i.endsWith("!")?(l=i.slice(0,-1),c=!0):i.startsWith("!")&&(l=i.slice(1),c=!0);return Wo(t,c,l,n&&n>a?n-a:void 0)};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.slice(e.length)):Wo(Ho,!1,t,void 0,!0)}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},Vo=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let r=[];for(let o=0;o<e.length;o++){const a=e[o],s="["===a[0],i=t.has(a);s||i?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(a)):r.push(a)}return r.length>0&&(r.sort(),n.push(...r)),n}},Go=/\s+/,Ko=e=>{if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Ko(e[r]))&&(n&&(n+=" "),n+=t);return n},$o=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let o,a,s,i;const l=e=>{const t=a(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:a}=t,s=[],i=e.trim().split(Go);let l="";for(let c=i.length-1;c>=0;c-=1){const e=i[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let p=!!f,m=r(p?h.substring(0,f):h);if(!m){if(!p){l=e+(l.length>0?" "+l:l);continue}if(m=r(h),!m){l=e+(l.length>0?" "+l:l);continue}p=!1}const g=0===u.length?"":1===u.length?u[0]:a(u).join(":"),v=d?g+"!":g,y=v+m;if(s.indexOf(y)>-1)continue;s.push(y);const b=o(m,p);for(let n=0;n<b.length;++n){const e=b[n];s.push(v+e)}l=e+(l.length>0?" "+l:l)}return l})(e,o);return s(e,n),n};return i=t=>{const r=n.reduce((e,t)=>t(e),e());return o=(e=>c({cache:Uo(e.cacheSize),parseClassName:qo(e),sortModifiers:Vo(e)},Ro(e)))(r),a=o.cache.get,s=o.cache.set,i=l,l(t)},function(){return i(function(){let e,t,n=0,r="";for(;n<arguments.length;){var o;(e=(o=n++)<0||arguments.length<=o?void 0:arguments[o])&&(t=Ko(e))&&(r&&(r+=" "),r+=t)}return r}(...arguments))}},Jo=[],Qo=e=>{const t=t=>t[e]||Jo;return t.isThemeGetter=!0,t},Yo=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Xo=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Zo=/^\d+\/\d+$/,ea=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ta=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,na=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ra=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oa=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,aa=e=>Zo.test(e),sa=e=>!!e&&!Number.isNaN(Number(e)),ia=e=>!!e&&Number.isInteger(Number(e)),la=e=>e.endsWith("%")&&sa(e.slice(0,-1)),ca=e=>ea.test(e),ua=()=>!0,da=e=>ta.test(e)&&!na.test(e),ha=()=>!1,fa=e=>ra.test(e),pa=e=>oa.test(e),ma=e=>!va(e)&&!Sa(e),ga=e=>Ta(e,Pa,ha),va=e=>Yo.test(e),ya=e=>Ta(e,Ia,da),ba=e=>Ta(e,La,sa),xa=e=>Ta(e,_a,ha),wa=e=>Ta(e,Ma,pa),ka=e=>Ta(e,za,fa),Sa=e=>Xo.test(e),Ca=e=>Aa(e,Ia),Na=e=>Aa(e,Fa),Ea=e=>Aa(e,_a),ja=e=>Aa(e,Pa),Oa=e=>Aa(e,Ma),Ra=e=>Aa(e,za,!0),Ta=(e,t,n)=>{const r=Yo.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},Aa=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Xo.exec(e);return!!r&&(r[1]?t(r[1]):n)},_a=e=>"position"===e||"percentage"===e,Ma=e=>"image"===e||"url"===e,Pa=e=>"length"===e||"size"===e||"bg-size"===e,Ia=e=>"length"===e,La=e=>"number"===e,Fa=e=>"family-name"===e,za=e=>"shadow"===e,Da=(Symbol.toStringTag,()=>{const e=Qo("color"),t=Qo("font"),n=Qo("text"),r=Qo("font-weight"),o=Qo("tracking"),a=Qo("leading"),s=Qo("breakpoint"),i=Qo("container"),l=Qo("spacing"),c=Qo("radius"),u=Qo("shadow"),d=Qo("inset-shadow"),h=Qo("text-shadow"),f=Qo("drop-shadow"),p=Qo("blur"),m=Qo("perspective"),g=Qo("aspect"),v=Qo("ease"),y=Qo("animate"),b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Sa,va],x=()=>[Sa,va,l],w=()=>[aa,"full","auto",...x()],k=()=>[ia,"none","subgrid",Sa,va],S=()=>["auto",{span:["full",ia,Sa,va]},ia,Sa,va],C=()=>[ia,"auto",Sa,va],N=()=>["auto","min","max","fr",Sa,va],E=()=>["auto",...x()],j=()=>[aa,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],O=()=>[e,Sa,va],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Ea,xa,{position:[Sa,va]}],T=()=>["auto","cover","contain",ja,ga,{size:[Sa,va]}],A=()=>[la,Ca,ya],_=()=>["","none","full",c,Sa,va],M=()=>["",sa,Ca,ya],P=()=>[sa,la,Ea,xa],I=()=>["","none",p,Sa,va],L=()=>["none",sa,Sa,va],F=()=>["none",sa,Sa,va],z=()=>[sa,Sa,va],D=()=>[aa,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ca],breakpoint:[ca],color:[ua],container:[ca],"drop-shadow":[ca],ease:["in","out","in-out"],font:[ma],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ca],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ca],shadow:[ca],spacing:["px",sa],text:[ca],"text-shadow":[ca],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",aa,va,Sa,g]}],container:["container"],columns:[{columns:[sa,va,Sa,i]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[ia,"auto",Sa,va]}],basis:[{basis:[aa,"full","auto",i,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[sa,aa,"auto","initial","none",va]}],grow:[{grow:["",sa,Sa,va]}],shrink:[{shrink:["",sa,Sa,va]}],order:[{order:[ia,"first","last","none",Sa,va]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:S()}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:S()}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:E()}],mx:[{mx:E()}],my:[{my:E()}],ms:[{ms:E()}],me:[{me:E()}],mt:[{mt:E()}],mr:[{mr:E()}],mb:[{mb:E()}],ml:[{ml:E()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:j()}],w:[{w:[i,"screen",...j()]}],"min-w":[{"min-w":[i,"screen","none",...j()]}],"max-w":[{"max-w":[i,"screen","none","prose",{screen:[s]},...j()]}],h:[{h:["screen","lh",...j()]}],"min-h":[{"min-h":["screen","lh","none",...j()]}],"max-h":[{"max-h":["screen","lh",...j()]}],"font-size":[{text:["base",n,Ca,ya]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Sa,ba]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",la,va]}],"font-family":[{font:[Na,va,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,Sa,va]}],"line-clamp":[{"line-clamp":[sa,"none",Sa,ba]}],leading:[{leading:[a,...x()]}],"list-image":[{"list-image":["none",Sa,va]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Sa,va]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[sa,"from-font","auto",Sa,ya]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[sa,"auto",Sa,va]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Sa,va]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Sa,va]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:T()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ia,Sa,va],radial:["",Sa,va],conic:[ia,Sa,va]},Oa,wa]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:A()}],"gradient-via-pos":[{via:A()}],"gradient-to-pos":[{to:A()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:_()}],"rounded-s":[{"rounded-s":_()}],"rounded-e":[{"rounded-e":_()}],"rounded-t":[{"rounded-t":_()}],"rounded-r":[{"rounded-r":_()}],"rounded-b":[{"rounded-b":_()}],"rounded-l":[{"rounded-l":_()}],"rounded-ss":[{"rounded-ss":_()}],"rounded-se":[{"rounded-se":_()}],"rounded-ee":[{"rounded-ee":_()}],"rounded-es":[{"rounded-es":_()}],"rounded-tl":[{"rounded-tl":_()}],"rounded-tr":[{"rounded-tr":_()}],"rounded-br":[{"rounded-br":_()}],"rounded-bl":[{"rounded-bl":_()}],"border-w":[{border:M()}],"border-w-x":[{"border-x":M()}],"border-w-y":[{"border-y":M()}],"border-w-s":[{"border-s":M()}],"border-w-e":[{"border-e":M()}],"border-w-t":[{"border-t":M()}],"border-w-r":[{"border-r":M()}],"border-w-b":[{"border-b":M()}],"border-w-l":[{"border-l":M()}],"divide-x":[{"divide-x":M()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":M()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[sa,Sa,va]}],"outline-w":[{outline:["",sa,Ca,ya]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",u,Ra,ka]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",d,Ra,ka]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[sa,ya]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":M()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",h,Ra,ka]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[sa,Sa,va]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[sa]}],"mask-image-linear-from-pos":[{"mask-linear-from":P()}],"mask-image-linear-to-pos":[{"mask-linear-to":P()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":P()}],"mask-image-t-to-pos":[{"mask-t-to":P()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":P()}],"mask-image-r-to-pos":[{"mask-r-to":P()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":P()}],"mask-image-b-to-pos":[{"mask-b-to":P()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":P()}],"mask-image-l-to-pos":[{"mask-l-to":P()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":P()}],"mask-image-x-to-pos":[{"mask-x-to":P()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":P()}],"mask-image-y-to-pos":[{"mask-y-to":P()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[Sa,va]}],"mask-image-radial-from-pos":[{"mask-radial-from":P()}],"mask-image-radial-to-pos":[{"mask-radial-to":P()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[sa]}],"mask-image-conic-from-pos":[{"mask-conic-from":P()}],"mask-image-conic-to-pos":[{"mask-conic-to":P()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:T()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Sa,va]}],filter:[{filter:["","none",Sa,va]}],blur:[{blur:I()}],brightness:[{brightness:[sa,Sa,va]}],contrast:[{contrast:[sa,Sa,va]}],"drop-shadow":[{"drop-shadow":["","none",f,Ra,ka]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",sa,Sa,va]}],"hue-rotate":[{"hue-rotate":[sa,Sa,va]}],invert:[{invert:["",sa,Sa,va]}],saturate:[{saturate:[sa,Sa,va]}],sepia:[{sepia:["",sa,Sa,va]}],"backdrop-filter":[{"backdrop-filter":["","none",Sa,va]}],"backdrop-blur":[{"backdrop-blur":I()}],"backdrop-brightness":[{"backdrop-brightness":[sa,Sa,va]}],"backdrop-contrast":[{"backdrop-contrast":[sa,Sa,va]}],"backdrop-grayscale":[{"backdrop-grayscale":["",sa,Sa,va]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[sa,Sa,va]}],"backdrop-invert":[{"backdrop-invert":["",sa,Sa,va]}],"backdrop-opacity":[{"backdrop-opacity":[sa,Sa,va]}],"backdrop-saturate":[{"backdrop-saturate":[sa,Sa,va]}],"backdrop-sepia":[{"backdrop-sepia":["",sa,Sa,va]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Sa,va]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[sa,"initial",Sa,va]}],ease:[{ease:["linear","initial",v,Sa,va]}],delay:[{delay:[sa,Sa,va]}],animate:[{animate:["none",y,Sa,va]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Sa,va]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:L()}],"rotate-x":[{"rotate-x":L()}],"rotate-y":[{"rotate-y":L()}],"rotate-z":[{"rotate-z":L()}],scale:[{scale:F()}],"scale-x":[{"scale-x":F()}],"scale-y":[{"scale-y":F()}],"scale-z":[{"scale-z":F()}],"scale-3d":["scale-3d"],skew:[{skew:z()}],"skew-x":[{"skew-x":z()}],"skew-y":[{"skew-y":z()}],transform:[{transform:[Sa,va,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:D()}],"translate-x":[{"translate-x":D()}],"translate-y":[{"translate-y":D()}],"translate-z":[{"translate-z":D()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Sa,va]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Sa,va]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[sa,Ca,ya,ba]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),Ba=$o(Da);function Ua(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ba(wo(t))}const Ha=["className","variant","size","asChild"],Wa=No("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),qa=e.forwardRef((e,t)=>{let{className:n,variant:r,size:a,asChild:s=!1}=e,i=o(e,Ha);const l=s?go:"button";return(0,Bt.jsx)(l,c({className:Ua(Wa({variant:r,size:a,className:n})),ref:t},i))});qa.displayName="Button";const Va=["className","type"],Ga=e.forwardRef((e,t)=>{let{className:n,type:r}=e,a=o(e,Va);return(0,Bt.jsx)("input",c({type:r,className:Ua("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t},a))});Ga.displayName="Input";const Ka=["className"],$a=["className"],Ja=["className"],Qa=["className"],Ya=["className"],Xa=["className"],Za=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Ka);return(0,Bt.jsx)("div",c({ref:t,className:Ua("rounded-xl border bg-card text-card-foreground shadow",n)},r))});Za.displayName="Card";const es=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,$a);return(0,Bt.jsx)("div",c({ref:t,className:Ua("flex flex-col space-y-1.5 p-6",n)},r))});es.displayName="CardHeader";const ts=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Ja);return(0,Bt.jsx)("div",c({ref:t,className:Ua("font-semibold leading-none tracking-tight",n)},r))});ts.displayName="CardTitle";const ns=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Qa);return(0,Bt.jsx)("div",c({ref:t,className:Ua("text-sm text-muted-foreground",n)},r))});ns.displayName="CardDescription";const rs=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Ya);return(0,Bt.jsx)("div",c({ref:t,className:Ua("p-6 pt-0",n)},r))});rs.displayName="CardContent";e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Xa);return(0,Bt.jsx)("div",c({ref:t,className:Ua("flex items-center p-6 pt-0",n)},r))}).displayName="CardFooter";"undefined"===typeof window||!window.document||window.document.createElement;function os(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(null===e||void 0===e||e(r),!1===n||!r.defaultPrevented)return null===t||void 0===t?void 0:t(r)}}const as=["children"],ss=["scope","children"];function is(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];const a=()=>{const n=r.map(t=>e.createContext(t));return function(r){const o=(null===r||void 0===r?void 0:r[t])||n;return e.useMemo(()=>({["__scope".concat(t)]:c(c({},r),{},{[t]:o})}),[r,o])}};return a.scopeName=t,[function(n,a){const s=e.createContext(a),i=r.length;r=[...r,a];const l=n=>{var r;const{scope:a,children:l}=n,c=o(n,ss),u=(null===a||void 0===a||null===(r=a[t])||void 0===r?void 0:r[i])||s,d=e.useMemo(()=>c,Object.values(c));return(0,Bt.jsx)(u.Provider,{value:d,children:l})};return l.displayName=n+"Provider",[l,function(r,o){var l;const c=(null===o||void 0===o||null===(l=o[t])||void 0===l?void 0:l[i])||s,u=e.useContext(c);if(u)return u;if(void 0!==a)return a;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},ls(a,...n)]}function ls(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n[0];if(1===n.length)return o;const a=()=>{const t=n.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(n){const r=t.reduce((e,t)=>{let{useScope:r,scopeName:o}=t;const a=r(n)["__scope".concat(o)];return c(c({},e),a)},{});return e.useMemo(()=>({["__scope".concat(o.scopeName)]:r}),[r])}};return a.scopeName=o.scopeName,a}function cs(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function us(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function ds(e,t){return e.get(us(e,t))}function hs(e,t,n){return e.set(us(e,t),n),n}const fs=["children"],ps=["children"];function ms(t){const n=gs(t),r=e.forwardRef((t,r)=>{const{children:a}=t,s=o(t,fs),i=e.Children.toArray(a),l=i.find(bs);if(l){const t=l.props.children,o=i.map(n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,o):null}))}return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}function gs(t){const n=e.forwardRef((t,n)=>{const{children:r}=t,a=o(t,ps);if(e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=c({},t);for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){const e=a(...arguments);return o(...arguments),e}:o&&(n[r]=o):"style"===r?n[r]=c(c({},o),a):"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return c(c({},e),n)}(a,r.props);return r.type!==e.Fragment&&(o.ref=n?io(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var vs=Symbol("radix.slottable");var ys;function bs(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===vs}const xs=["scope","children"];function ws(t){const n=t+"CollectionProvider",[r,a]=is(n),[s,i]=r(n,{collectionRef:{current:null},itemMap:new Map}),l=t=>{const{scope:n,children:r}=t,o=e.useRef(null),a=e.useRef(new Map).current;return(0,Bt.jsx)(s,{scope:n,itemMap:a,collectionRef:o,children:r})};l.displayName=n;const u=t+"CollectionSlot",d=ms(u),h=e.forwardRef((e,t)=>{const{scope:n,children:r}=e,o=lo(t,i(u,n).collectionRef);return(0,Bt.jsx)(d,{ref:o,children:r})});h.displayName=u;const f=t+"CollectionItemSlot",p="data-radix-collection-item",m=ms(f),g=e.forwardRef((t,n)=>{const{scope:r,children:a}=t,s=o(t,xs),l=e.useRef(null),u=lo(n,l),d=i(f,r);return e.useEffect(()=>(d.itemMap.set(l,c({ref:l},s)),()=>{d.itemMap.delete(l)})),(0,Bt.jsx)(m,c(c({},{[p]:""}),{},{ref:u,children:a}))});return g.displayName=f,[{Provider:l,Slot:h,ItemSlot:g},function(n){const r=i(t+"CollectionConsumer",n),o=e.useCallback(()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(p,"]"))),n=Array.from(r.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return n},[r.collectionRef,r.itemMap]);return o},a]}var ks=new WeakMap;ys=new WeakMap,Map;function Ss(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const n=function(e,t){const n=e.length,r=Cs(t),o=r>=0?r:n+r;return o<0||o>=n?-1:o}(e,t);return-1===n?void 0:e[n]}function Cs(e){return e!==e||0===e?0:Math.trunc(e)}var Ns=null!==globalThis&&void 0!==globalThis&&globalThis.document?e.useLayoutEffect:()=>{},Es=t[" useId ".trim().toString()]||(()=>{}),js=0;function Os(t){const[n,r]=e.useState(Es());return Ns(()=>{t||r(e=>null!==e&&void 0!==e?e:String(js++))},[t]),t||(n?"radix-".concat(n):"")}var Rs=n(950);const Ts=["children"],As=["children"];function _s(t){const n=Ms(t),r=e.forwardRef((t,r)=>{const{children:a}=t,s=o(t,Ts),i=e.Children.toArray(a),l=i.find(Is);if(l){const t=l.props.children,o=i.map(n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,o):null}))}return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}function Ms(t){const n=e.forwardRef((t,n)=>{const{children:r}=t,a=o(t,As);if(e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=c({},t);for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){const e=a(...arguments);return o(...arguments),e}:o&&(n[r]=o):"style"===r?n[r]=c(c({},o),a):"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return c(c({},e),n)}(a,r.props);return r.type!==e.Fragment&&(o.ref=n?io(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var Ps=Symbol("radix.slottable");function Is(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===Ps}const Ls=["asChild"];var Fs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,n)=>{const r=_s("Primitive.".concat(n)),a=e.forwardRef((e,t)=>{const{asChild:a}=e,s=o(e,Ls),i=a?r:n;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,Bt.jsx)(i,c(c({},s),{},{ref:t}))});return a.displayName="Primitive.".concat(n),c(c({},t),{},{[n]:a})},{});function zs(t){const n=e.useRef(t);return e.useEffect(()=>{n.current=t}),e.useMemo(()=>function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return null===(e=n.current)||void 0===e?void 0:e.call(n,...r)},[])}var Ds=t[" useInsertionEffect ".trim().toString()]||Ns;function Bs(t){let{prop:n,defaultProp:r,onChange:o=()=>{},caller:a}=t;const[s,i,l]=function(t){let{defaultProp:n,onChange:r}=t;const[o,a]=e.useState(n),s=e.useRef(o),i=e.useRef(r);return Ds(()=>{i.current=r},[r]),e.useEffect(()=>{var e;s.current!==o&&(null===(e=i.current)||void 0===e||e.call(i,o),s.current=o)},[o,s]),[o,a,i]}({defaultProp:r,onChange:o}),c=void 0!==n,u=c?n:s;{const t=e.useRef(void 0!==n);e.useEffect(()=>{const e=t.current;if(e!==c){const t=e?"controlled":"uncontrolled",n=c?"controlled":"uncontrolled";console.warn("".concat(a," is changing from ").concat(t," to ").concat(n,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}t.current=c},[c,a])}const d=e.useCallback(e=>{if(c){const r=function(e){return"function"===typeof e}(e)?e(n):e;var t;if(r!==n)null===(t=l.current)||void 0===t||t.call(l,r)}else i(e)},[c,n,i,l]);return[u,d]}Symbol("RADIX:SYNC_STATE");var Us=e.createContext(void 0);function Hs(t){const n=e.useContext(Us);return t||n||"ltr"}const Ws=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"],qs=["__scopeRovingFocusGroup","focusable","active","tabStopId","children"];var Vs="rovingFocusGroup.onEntryFocus",Gs={bubbles:!1,cancelable:!0},Ks="RovingFocusGroup",[$s,Js,Qs]=ws(Ks),[Ys,Xs]=is(Ks,[Qs]),[Zs,ei]=Ys(Ks),ti=e.forwardRef((e,t)=>(0,Bt.jsx)($s.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,Bt.jsx)($s.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,Bt.jsx)(ni,c(c({},e),{},{ref:t}))})}));ti.displayName=Ks;var ni=e.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:s=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1}=t,p=o(t,Ws),m=e.useRef(null),g=lo(n,m),v=Hs(i),[y,b]=Bs({prop:l,defaultProp:null!==u&&void 0!==u?u:null,onChange:d,caller:Ks}),[x,w]=e.useState(!1),k=zs(h),S=Js(r),C=e.useRef(!1),[N,E]=e.useState(0);return e.useEffect(()=>{const e=m.current;if(e)return e.addEventListener(Vs,k),()=>e.removeEventListener(Vs,k)},[k]),(0,Bt.jsx)(Zs,{scope:r,orientation:a,dir:v,loop:s,currentTabStopId:y,onItemFocus:e.useCallback(e=>b(e),[b]),onItemShiftTab:e.useCallback(()=>w(!0),[]),onFocusableItemAdd:e.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:e.useCallback(()=>E(e=>e-1),[]),children:(0,Bt.jsx)(Fs.div,c(c({tabIndex:x||0===N?-1:0,"data-orientation":a},p),{},{ref:g,style:c({outline:"none"},t.style),onMouseDown:os(t.onMouseDown,()=>{C.current=!0}),onFocus:os(t.onFocus,e=>{const t=!C.current;if(e.target===e.currentTarget&&t&&!x){const t=new CustomEvent(Vs,Gs);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=S().filter(e=>e.focusable);si([e.find(e=>e.active),e.find(e=>e.id===y),...e].filter(Boolean).map(e=>e.ref.current),f)}}C.current=!1}),onBlur:os(t.onBlur,()=>w(!1))}))})}),ri="RovingFocusGroupItem",oi=e.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:s=!1,tabStopId:i,children:l}=t,u=o(t,qs),d=Os(),h=i||d,f=ei(ri,r),p=f.currentTabStopId===h,m=Js(r),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:y}=f;return e.useEffect(()=>{if(a)return g(),()=>v()},[a,g,v]),(0,Bt.jsx)($s.ItemSlot,{scope:r,id:h,focusable:a,active:s,children:(0,Bt.jsx)(Fs.span,c(c({tabIndex:p?0:-1,"data-orientation":f.orientation},u),{},{ref:n,onMouseDown:os(t.onMouseDown,e=>{a?f.onItemFocus(h):e.preventDefault()}),onFocus:os(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:os(t.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:ai[r]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let o=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)o.reverse();else if("prev"===t||"next"===t){"prev"===t&&o.reverse();const a=o.indexOf(e.currentTarget);o=f.loop?(r=a+1,(n=o).map((e,t)=>n[(r+t)%n.length])):o.slice(a+1)}setTimeout(()=>si(o))}var n,r}),children:"function"===typeof l?l({isCurrentTabStop:p,hasTabStop:null!=y}):l}))})});oi.displayName=ri;var ai={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function si(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var ii=ti,li=oi;var ci=t=>{const{present:n,children:r}=t,o=function(t){const[n,r]=e.useState(),o=e.useRef(null),a=e.useRef(t),s=e.useRef("none"),i=t?"mounted":"unmounted",[l,c]=function(t,n){return e.useReducer((e,t)=>{const r=n[e][t];return null!==r&&void 0!==r?r:e},t)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return e.useEffect(()=>{const e=ui(o.current);s.current="mounted"===l?e:"none"},[l]),Ns(()=>{const e=o.current,n=a.current;if(n!==t){const r=s.current,o=ui(e);if(t)c("MOUNT");else if("none"===o||"none"===(null===e||void 0===e?void 0:e.display))c("UNMOUNT");else{c(n&&r!==o?"ANIMATION_OUT":"UNMOUNT")}a.current=t}},[t,c]),Ns(()=>{if(n){var e;let t;const r=null!==(e=n.ownerDocument.defaultView)&&void 0!==e?e:window,i=e=>{const s=ui(o.current).includes(CSS.escape(e.animationName));if(e.target===n&&s&&(c("ANIMATION_END"),!a.current)){const e=n.style.animationFillMode;n.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=e)})}},l=e=>{e.target===n&&(s.current=ui(o.current))};return n.addEventListener("animationstart",l),n.addEventListener("animationcancel",i),n.addEventListener("animationend",i),()=>{r.clearTimeout(t),n.removeEventListener("animationstart",l),n.removeEventListener("animationcancel",i),n.removeEventListener("animationend",i)}}c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:e.useCallback(e=>{o.current=e?getComputedStyle(e):null,r(e)},[])}}(n),a="function"===typeof r?r({present:o.isPresent}):e.Children.only(r),s=lo(o.ref,function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(a));return"function"===typeof r||o.isPresent?e.cloneElement(a,{ref:s}):null};function ui(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}ci.displayName="Presence";const di=["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"],hi=["__scopeTabs","loop"],fi=["__scopeTabs","value","disabled"],pi=["__scopeTabs","value","forceMount","children"];var mi="Tabs",[gi,vi]=is(mi,[Xs]),yi=Xs(),[bi,xi]=gi(mi),wi=e.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:i="horizontal",dir:l,activationMode:u="automatic"}=e,d=o(e,di),h=Hs(l),[f,p]=Bs({prop:r,onChange:a,defaultProp:null!==s&&void 0!==s?s:"",caller:mi});return(0,Bt.jsx)(bi,{scope:n,baseId:Os(),value:f,onValueChange:p,orientation:i,dir:h,activationMode:u,children:(0,Bt.jsx)(Fs.div,c(c({dir:h,"data-orientation":i},d),{},{ref:t}))})});wi.displayName=mi;var ki="TabsList",Si=e.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0}=e,a=o(e,hi),s=xi(ki,n),i=yi(n);return(0,Bt.jsx)(ii,c(c({asChild:!0},i),{},{orientation:s.orientation,dir:s.dir,loop:r,children:(0,Bt.jsx)(Fs.div,c(c({role:"tablist","aria-orientation":s.orientation},a),{},{ref:t}))}))});Si.displayName=ki;var Ci="TabsTrigger",Ni=e.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1}=e,s=o(e,fi),i=xi(Ci,n),l=yi(n),u=Oi(i.baseId,r),d=Ri(i.baseId,r),h=r===i.value;return(0,Bt.jsx)(li,c(c({asChild:!0},l),{},{focusable:!a,active:h,children:(0,Bt.jsx)(Fs.button,c(c({type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u},s),{},{ref:t,onMouseDown:os(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(r)}),onKeyDown:os(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(r)}),onFocus:os(e.onFocus,()=>{const e="manual"!==i.activationMode;h||a||!e||i.onValueChange(r)})}))}))});Ni.displayName=Ci;var Ei="TabsContent",ji=e.forwardRef((t,n)=>{const{__scopeTabs:r,value:a,forceMount:s,children:i}=t,l=o(t,pi),u=xi(Ei,r),d=Oi(u.baseId,a),h=Ri(u.baseId,a),f=a===u.value,p=e.useRef(f);return e.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,Bt.jsx)(ci,{present:s||f,children:e=>{let{present:r}=e;return(0,Bt.jsx)(Fs.div,c(c({"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!r,id:h,tabIndex:0},l),{},{ref:n,style:c(c({},t.style),{},{animationDuration:p.current?"0s":void 0}),children:r&&i}))}})});function Oi(e,t){return"".concat(e,"-trigger-").concat(t)}function Ri(e,t){return"".concat(e,"-content-").concat(t)}ji.displayName=Ei;var Ti=Si,Ai=Ni,_i=ji;const Mi=["className"],Pi=["className"],Ii=["className"],Li=wi,Fi=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Mi);return(0,Bt.jsx)(Ti,c({ref:t,className:Ua("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n)},r))});Fi.displayName=Ti.displayName;const zi=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Pi);return(0,Bt.jsx)(Ai,c({ref:t,className:Ua("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n)},r))});zi.displayName=Ai.displayName;const Di=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Ii);return(0,Bt.jsx)(_i,c({ref:t,className:Ua("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},r))});Di.displayName=_i.displayName;const Bi=["message"];const Ui=Array(12).fill(0),Hi=t=>{let{visible:n,className:r}=t;return e.createElement("div",{className:["sonner-loading-wrapper",r].filter(Boolean).join(" "),"data-visible":n},e.createElement("div",{className:"sonner-spinner"},Ui.map((t,n)=>e.createElement("div",{className:"sonner-loading-bar",key:"spinner-bar-".concat(n)}))))},Wi=e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),qi=e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Vi=e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Gi=e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ki=e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let $i=1;const Ji=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n}=e,r=o(e,Bi),a="number"===typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:$i++,s=this.toasts.find(e=>e.id===a),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(t=>t.id===a?(this.publish(c(c(c({},t),e),{},{id:a,title:n})),c(c(c({},t),e),{},{id:a,dismissible:i,title:n})):t):this.addToast(c(c({title:n},r),{},{dismissible:i,id:a})),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create(c(c({},t),{},{message:e})),this.error=(e,t)=>this.create(c(c({},t),{},{message:e,type:"error"})),this.success=(e,t)=>this.create(c(c({},t),{},{type:"success",message:e})),this.info=(e,t)=>this.create(c(c({},t),{},{type:"info",message:e})),this.warning=(e,t)=>this.create(c(c({},t),{},{type:"warning",message:e})),this.loading=(e,t)=>this.create(c(c({},t),{},{type:"loading",message:e})),this.promise=(t,n)=>{if(!n)return;let r;void 0!==n.loading&&(r=this.create(c(c({},n),{},{promise:t,type:"loading",message:n.loading,description:"function"!==typeof n.description?n.description:void 0})));const o=Promise.resolve(t instanceof Function?t():t);let a,s=void 0!==r;const i=o.then(async t=>{a=["resolve",t];if(e.isValidElement(t))s=!1,this.create({id:r,type:"default",message:t});else if(Qi(t)&&!t.ok){s=!1;const o="function"===typeof n.error?await n.error("HTTP error! status: ".concat(t.status)):n.error,a="function"===typeof n.description?await n.description("HTTP error! status: ".concat(t.status)):n.description,i="object"===typeof o&&!e.isValidElement(o)?o:{message:o};this.create(c({id:r,type:"error",description:a},i))}else if(t instanceof Error){s=!1;const o="function"===typeof n.error?await n.error(t):n.error,a="function"===typeof n.description?await n.description(t):n.description,i="object"===typeof o&&!e.isValidElement(o)?o:{message:o};this.create(c({id:r,type:"error",description:a},i))}else if(void 0!==n.success){s=!1;const o="function"===typeof n.success?await n.success(t):n.success,a="function"===typeof n.description?await n.description(t):n.description,i="object"===typeof o&&!e.isValidElement(o)?o:{message:o};this.create(c({id:r,type:"success",description:a},i))}}).catch(async t=>{if(a=["reject",t],void 0!==n.error){s=!1;const o="function"===typeof n.error?await n.error(t):n.error,a="function"===typeof n.description?await n.description(t):n.description,i="object"===typeof o&&!e.isValidElement(o)?o:{message:o};this.create(c({id:r,type:"error",description:a},i))}}).finally(()=>{s&&(this.dismiss(r),r=void 0),null==n.finally||n.finally.call(n)}),l=()=>new Promise((e,t)=>i.then(()=>"reject"===a[0]?t(a[1]):e(a[1])).catch(t));return"string"!==typeof r&&"number"!==typeof r?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||$i++;return this.create(c({jsx:e(n),id:n},t)),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Qi=e=>e&&"object"===typeof e&&"ok"in e&&"boolean"===typeof e.ok&&"status"in e&&"number"===typeof e.status,Yi=(e,t)=>{const n=(null==t?void 0:t.id)||$i++;return Ji.addToast(c(c({title:e},t),{},{id:n})),n},Xi=Object.assign(Yi,{success:Ji.success,info:Ji.info,warning:Ji.warning,error:Ji.error,custom:Ji.custom,message:Ji.message,promise:Ji.promise,dismiss:Ji.dismiss,loading:Ji.loading},{getHistory:()=>Ji.toasts,getToasts:()=>Ji.getActiveToasts()});function Zi(e){return void 0!==e.label}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const el=3,tl=14;function nl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}const rl=t=>{var n,r,o,a,s,i,l,u,d;const{invert:h,toast:f,unstyled:p,interacting:m,setHeights:g,visibleToasts:v,heights:y,index:b,toasts:x,expanded:w,removeToast:k,defaultRichColors:S,closeButton:C,style:N,cancelButtonStyle:E,actionButtonStyle:j,className:O="",descriptionClassName:R="",duration:T,position:A,gap:_,expandByDefault:M,classNames:P,icons:I,closeButtonAriaLabel:L="Close toast"}=t,[F,z]=e.useState(null),[D,B]=e.useState(null),[U,H]=e.useState(!1),[W,q]=e.useState(!1),[V,G]=e.useState(!1),[K,$]=e.useState(!1),[J,Q]=e.useState(!1),[Y,X]=e.useState(0),[Z,ee]=e.useState(0),te=e.useRef(f.duration||T||4e3),ne=e.useRef(null),re=e.useRef(null),oe=0===b,ae=b+1<=v,se=f.type,ie=!1!==f.dismissible,le=f.className||"",ce=f.descriptionClassName||"",ue=e.useMemo(()=>y.findIndex(e=>e.toastId===f.id)||0,[y,f.id]),de=e.useMemo(()=>{var e;return null!=(e=f.closeButton)?e:C},[f.closeButton,C]),he=e.useMemo(()=>f.duration||T||4e3,[f.duration,T]),fe=e.useRef(0),pe=e.useRef(0),me=e.useRef(0),ge=e.useRef(null),[ve,ye]=A.split("-"),be=e.useMemo(()=>y.reduce((e,t,n)=>n>=ue?e:e+t.height,0),[y,ue]),xe=(()=>{const[t,n]=e.useState(document.hidden);return e.useEffect(()=>{const e=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),t})(),we=f.invert||h,ke="loading"===se;pe.current=e.useMemo(()=>ue*_+be,[ue,be]),e.useEffect(()=>{te.current=he},[he]),e.useEffect(()=>{H(!0)},[]),e.useEffect(()=>{const e=re.current;if(e){const t=e.getBoundingClientRect().height;return ee(t),g(e=>[{toastId:f.id,height:t,position:f.position},...e]),()=>g(e=>e.filter(e=>e.toastId!==f.id))}},[g,f.id]),e.useLayoutEffect(()=>{if(!U)return;const e=re.current,t=e.style.height;e.style.height="auto";const n=e.getBoundingClientRect().height;e.style.height=t,ee(n),g(e=>e.find(e=>e.toastId===f.id)?e.map(e=>e.toastId===f.id?c(c({},e),{},{height:n}):e):[{toastId:f.id,height:n,position:f.position},...e])},[U,f.title,f.description,g,f.id,f.jsx,f.action,f.cancel]);const Se=e.useCallback(()=>{q(!0),X(pe.current),g(e=>e.filter(e=>e.toastId!==f.id)),setTimeout(()=>{k(f)},200)},[f,k,g,pe]);e.useEffect(()=>{if(f.promise&&"loading"===se||f.duration===1/0||"loading"===f.type)return;let e;return w||m||xe?(()=>{if(me.current<fe.current){const e=(new Date).getTime()-fe.current;te.current=te.current-e}me.current=(new Date).getTime()})():te.current!==1/0&&(fe.current=(new Date).getTime(),e=setTimeout(()=>{null==f.onAutoClose||f.onAutoClose.call(f,f),Se()},te.current)),()=>clearTimeout(e)},[w,m,f,se,xe,Se]),e.useEffect(()=>{f.delete&&(Se(),null==f.onDismiss||f.onDismiss.call(f,f))},[Se,f.delete]);const Ce=f.icon||(null==I?void 0:I[se])||(e=>{switch(e){case"success":return Wi;case"info":return Vi;case"warning":return qi;case"error":return Gi;default:return null}})(se);var Ne,Ee;return e.createElement("li",{tabIndex:0,ref:re,className:nl(O,le,null==P?void 0:P.toast,null==f||null==(n=f.classNames)?void 0:n.toast,null==P?void 0:P.default,null==P?void 0:P[se],null==f||null==(r=f.classNames)?void 0:r[se]),"data-sonner-toast":"","data-rich-colors":null!=(Ne=f.richColors)?Ne:S,"data-styled":!Boolean(f.jsx||f.unstyled||p),"data-mounted":U,"data-promise":Boolean(f.promise),"data-swiped":J,"data-removed":W,"data-visible":ae,"data-y-position":ve,"data-x-position":ye,"data-index":b,"data-front":oe,"data-swiping":V,"data-dismissible":ie,"data-type":se,"data-invert":we,"data-swipe-out":K,"data-swipe-direction":D,"data-expanded":Boolean(w||M&&U),"data-testid":f.testId,style:c(c({"--index":b,"--toasts-before":b,"--z-index":x.length-b,"--offset":"".concat(W?Y:pe.current,"px"),"--initial-height":M?"auto":"".concat(Z,"px")},N),f.style),onDragEnd:()=>{G(!1),z(null),ge.current=null},onPointerDown:e=>{2!==e.button&&!ke&&ie&&(ne.current=new Date,X(pe.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(G(!0),ge.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n;if(K||!ie)return;ge.current=null;const r=Number((null==(e=re.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),o=Number((null==(t=re.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),a=(new Date).getTime()-(null==(n=ne.current)?void 0:n.getTime()),s="x"===F?r:o,i=Math.abs(s)/a;if(Math.abs(s)>=45||i>.11)return X(pe.current),null==f.onDismiss||f.onDismiss.call(f,f),B("x"===F?r>0?"right":"left":o>0?"down":"up"),Se(),void $(!0);var l,c;null==(l=re.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=re.current)||c.style.setProperty("--swipe-amount-y","0px"),Q(!1),G(!1),z(null)},onPointerMove:e=>{var n,r,o;if(!ge.current||!ie)return;if((null==(n=window.getSelection())?void 0:n.toString().length)>0)return;const a=e.clientY-ge.current.y,s=e.clientX-ge.current.x;var i;const l=null!=(i=t.swipeDirections)?i:function(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(A);!F&&(Math.abs(s)>1||Math.abs(a)>1)&&z(Math.abs(s)>Math.abs(a)?"x":"y");let c={x:0,y:0};const u=e=>1/(1.5+Math.abs(e)/20);if("y"===F){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&a<0||l.includes("bottom")&&a>0)c.y=a;else{const e=a*u(a);c.y=Math.abs(e)<Math.abs(a)?e:a}}else if("x"===F&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&s<0||l.includes("right")&&s>0)c.x=s;else{const e=s*u(s);c.x=Math.abs(e)<Math.abs(s)?e:s}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&Q(!0),null==(r=re.current)||r.style.setProperty("--swipe-amount-x","".concat(c.x,"px")),null==(o=re.current)||o.style.setProperty("--swipe-amount-y","".concat(c.y,"px"))}},de&&!f.jsx&&"loading"!==se?e.createElement("button",{"aria-label":L,"data-disabled":ke,"data-close-button":!0,onClick:ke||!ie?()=>{}:()=>{Se(),null==f.onDismiss||f.onDismiss.call(f,f)},className:nl(null==P?void 0:P.closeButton,null==f||null==(o=f.classNames)?void 0:o.closeButton)},null!=(Ee=null==I?void 0:I.close)?Ee:Ki):null,(se||f.icon||f.promise)&&null!==f.icon&&(null!==(null==I?void 0:I[se])||f.icon)?e.createElement("div",{"data-icon":"",className:nl(null==P?void 0:P.icon,null==f||null==(a=f.classNames)?void 0:a.icon)},f.promise||"loading"===f.type&&!f.icon?f.icon||function(){var t,n;return(null==I?void 0:I.loading)?e.createElement("div",{className:nl(null==P?void 0:P.loader,null==f||null==(n=f.classNames)?void 0:n.loader,"sonner-loader"),"data-visible":"loading"===se},I.loading):e.createElement(Hi,{className:nl(null==P?void 0:P.loader,null==f||null==(t=f.classNames)?void 0:t.loader),visible:"loading"===se})}():null,"loading"!==f.type?Ce:null):null,e.createElement("div",{"data-content":"",className:nl(null==P?void 0:P.content,null==f||null==(s=f.classNames)?void 0:s.content)},e.createElement("div",{"data-title":"",className:nl(null==P?void 0:P.title,null==f||null==(i=f.classNames)?void 0:i.title)},f.jsx?f.jsx:"function"===typeof f.title?f.title():f.title),f.description?e.createElement("div",{"data-description":"",className:nl(R,ce,null==P?void 0:P.description,null==f||null==(l=f.classNames)?void 0:l.description)},"function"===typeof f.description?f.description():f.description):null),e.isValidElement(f.cancel)?f.cancel:f.cancel&&Zi(f.cancel)?e.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||E,onClick:e=>{Zi(f.cancel)&&ie&&(null==f.cancel.onClick||f.cancel.onClick.call(f.cancel,e),Se())},className:nl(null==P?void 0:P.cancelButton,null==f||null==(u=f.classNames)?void 0:u.cancelButton)},f.cancel.label):null,e.isValidElement(f.action)?f.action:f.action&&Zi(f.action)?e.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||j,onClick:e=>{Zi(f.action)&&(null==f.action.onClick||f.action.onClick.call(f.action,e),e.defaultPrevented||Se())},className:nl(null==P?void 0:P.actionButton,null==f||null==(d=f.classNames)?void 0:d.actionButton)},f.action.label):null)};function ol(){if("undefined"===typeof window)return"ltr";if("undefined"===typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function al(e,t){const n={};return[e,t].forEach((e,t)=>{const r=1===t,o=r?"--mobile-offset":"--offset",a=r?"16px":"24px";function s(e){["top","right","bottom","left"].forEach(t=>{n["".concat(o,"-").concat(t)]="number"===typeof e?"".concat(e,"px"):e})}"number"===typeof e||"string"===typeof e?s(e):"object"===typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?n["".concat(o,"-").concat(t)]=a:n["".concat(o,"-").concat(t)]="number"===typeof e[t]?"".concat(e[t],"px"):e[t]}):s(a)}),n}const sl=e.forwardRef(function(t,n){const{id:r,invert:o,position:a="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:l,className:u,offset:d,mobileOffset:h,theme:f="light",richColors:p,duration:m,style:g,visibleToasts:v=el,toastOptions:y,dir:b=ol(),gap:x=tl,icons:w,containerAriaLabel:k="Notifications"}=t,[S,C]=e.useState([]),N=e.useMemo(()=>r?S.filter(e=>e.toasterId===r):S.filter(e=>!e.toasterId),[S,r]),E=e.useMemo(()=>Array.from(new Set([a].concat(N.filter(e=>e.position).map(e=>e.position)))),[N,a]),[j,O]=e.useState([]),[R,T]=e.useState(!1),[A,_]=e.useState(!1),[M,P]=e.useState("system"!==f?f:"undefined"!==typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=e.useRef(null),L=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=e.useRef(null),z=e.useRef(!1),D=e.useCallback(e=>{C(t=>{var n;return(null==(n=t.find(t=>t.id===e.id))?void 0:n.delete)||Ji.dismiss(e.id),t.filter(t=>{let{id:n}=t;return n!==e.id})})},[]);return e.useEffect(()=>Ji.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{C(t=>t.map(t=>t.id===e.id?c(c({},t),{},{delete:!0}):t))}):setTimeout(()=>{Rs.flushSync(()=>{C(t=>{const n=t.findIndex(t=>t.id===e.id);return-1!==n?[...t.slice(0,n),c(c({},t[n]),e),...t.slice(n+1)]:[e,...t]})})})}),[S]),e.useEffect(()=>{if("system"!==f)return void P(f);if("system"===f&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?P("dark"):P("light")),"undefined"===typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",e=>{let{matches:t}=e;P(t?"dark":"light")})}catch(t){e.addListener(e=>{let{matches:t}=e;try{P(t?"dark":"light")}catch(Ey){console.error(Ey)}})}},[f]),e.useEffect(()=>{S.length<=1&&T(!1)},[S]),e.useEffect(()=>{const e=e=>{var t;var n;s.every(t=>e[t]||e.code===t)&&(T(!0),null==(n=I.current)||n.focus());"Escape"!==e.code||document.activeElement!==I.current&&!(null==(t=I.current)?void 0:t.contains(document.activeElement))||T(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),e.useEffect(()=>{if(I.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,z.current=!1)}},[I.current]),e.createElement("section",{ref:n,"aria-label":"".concat(k," ").concat(L),tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((n,r)=>{var a;const[s,f]=n.split("-");return N.length?e.createElement("ol",{key:n,dir:"auto"===b?ol():b,tabIndex:-1,ref:I,className:u,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":s,"data-x-position":f,style:c(c({"--front-toast-height":"".concat((null==(a=j[0])?void 0:a.height)||0,"px"),"--width":"".concat(356,"px"),"--gap":"".concat(x,"px")},g),al(d,h)),onBlur:e=>{z.current&&!e.currentTarget.contains(e.relatedTarget)&&(z.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||z.current||(z.current=!0,F.current=e.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{A||T(!1)},onDragEnd:()=>T(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||_(!0)},onPointerUp:()=>_(!1)},N.filter(e=>!e.position&&0===r||e.position===n).map((r,a)=>{var s,c;return e.createElement(rl,{key:r.id,icons:w,index:a,toast:r,defaultRichColors:p,duration:null!=(s=null==y?void 0:y.duration)?s:m,className:null==y?void 0:y.className,descriptionClassName:null==y?void 0:y.descriptionClassName,invert:o,visibleToasts:v,closeButton:null!=(c=null==y?void 0:y.closeButton)?c:l,interacting:A,position:n,style:null==y?void 0:y.style,unstyled:null==y?void 0:y.unstyled,classNames:null==y?void 0:y.classNames,cancelButtonStyle:null==y?void 0:y.cancelButtonStyle,actionButtonStyle:null==y?void 0:y.actionButtonStyle,closeButtonAriaLabel:null==y?void 0:y.closeButtonAriaLabel,removeToast:D,toasts:N.filter(e=>e.position==r.position),heights:j.filter(e=>e.position==r.position),setHeights:O,expandByDefault:i,gap:x,expanded:R,swipeDirections:t.swipeDirections})})):null}))}),il=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ll=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var cl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ul=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],dl=(0,e.forwardRef)((t,n)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:l="",children:u,iconNode:d}=t,h=o(t,ul);return(0,e.createElement)("svg",c(c(c({ref:n},cl),{},{width:a,height:a,stroke:r,strokeWidth:i?24*Number(s)/Number(a):s,className:ll("lucide",l)},!u&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...Array.isArray(u)?u:[u]])}),hl=["className"],fl=(t,n)=>{const r=(0,e.forwardRef)((r,a)=>{let{className:s}=r,i=o(r,hl);return(0,e.createElement)(dl,c({ref:a,iconNode:n,className:ll("lucide-".concat((l=il(t),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(t),s)},i));var l});return r.displayName=il(t),r},pl=fl("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),ml=fl("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);const gl=["asChild"];var vl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,n)=>{const r=mo("Primitive.".concat(n)),a=e.forwardRef((e,t)=>{const{asChild:a}=e,s=o(e,gl),i=a?r:n;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,Bt.jsx)(i,c(c({},s),{},{ref:t}))});return a.displayName="Primitive.".concat(n),c(c({},t),{},{[n]:a})},{});var yl=e.forwardRef((e,t)=>(0,Bt.jsx)(vl.label,c(c({},e),{},{ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));yl.displayName="Label";var bl=yl;const xl=["className"],wl=No("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),kl=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,xl);return(0,Bt.jsx)(bl,c({ref:t,className:Ua(wl(),n)},r))});function Sl(e,t){let[n,r]=t;return Math.min(r,Math.max(n,e))}kl.displayName=bl.displayName;const Cl=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"];var Nl,El="dismissableLayer.update",jl="dismissableLayer.pointerDownOutside",Ol="dismissableLayer.focusOutside",Rl=e.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tl=e.forwardRef((t,n)=>{var r;const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:l,onInteractOutside:u,onDismiss:d}=t,h=o(t,Cl),f=e.useContext(Rl),[p,m]=e.useState(null),g=null!==(r=null===p||void 0===p?void 0:p.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,v]=e.useState({}),y=lo(n,e=>m(e)),b=Array.from(f.layers),[x]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(x),k=p?b.indexOf(p):-1,S=f.layersWithOutsidePointerEventsDisabled.size>0,C=k>=w,N=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=zs(t),o=e.useRef(!1),a=e.useRef(()=>{});return e.useEffect(()=>{const e=e=>{if(e.target&&!o.current){let t=function(){Ml(jl,r,o,{discrete:!0})};const o={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",a.current),a.current=t,n.addEventListener("click",a.current,{once:!0})):t()}else n.removeEventListener("click",a.current);o.current=!1},t=window.setTimeout(()=>{n.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",a.current)}},[n,r]),{onPointerDownCapture:()=>o.current=!0}}(e=>{const t=e.target,n=[...f.branches].some(e=>e.contains(t));C&&!n&&(null===i||void 0===i||i(e),null===u||void 0===u||u(e),e.defaultPrevented||null===d||void 0===d||d())},g),E=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=zs(t),o=e.useRef(!1);return e.useEffect(()=>{const e=e=>{if(e.target&&!o.current){Ml(Ol,r,{originalEvent:e},{discrete:!1})}};return n.addEventListener("focusin",e),()=>n.removeEventListener("focusin",e)},[n,r]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}(e=>{const t=e.target;[...f.branches].some(e=>e.contains(t))||(null===l||void 0===l||l(e),null===u||void 0===u||u(e),e.defaultPrevented||null===d||void 0===d||d())},g);return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=zs(t);e.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e,{capture:!0}),()=>n.removeEventListener("keydown",e,{capture:!0})},[r,n])}(e=>{k===f.layers.size-1&&(null===s||void 0===s||s(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))},g),e.useEffect(()=>{if(p)return a&&(0===f.layersWithOutsidePointerEventsDisabled.size&&(Nl=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),_l(),()=>{a&&1===f.layersWithOutsidePointerEventsDisabled.size&&(g.body.style.pointerEvents=Nl)}},[p,g,a,f]),e.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),_l())},[p,f]),e.useEffect(()=>{const e=()=>v({});return document.addEventListener(El,e),()=>document.removeEventListener(El,e)},[]),(0,Bt.jsx)(Fs.div,c(c({},h),{},{ref:y,style:c({pointerEvents:S?C?"auto":"none":void 0},t.style),onFocusCapture:os(t.onFocusCapture,E.onFocusCapture),onBlurCapture:os(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:os(t.onPointerDownCapture,N.onPointerDownCapture)}))});Tl.displayName="DismissableLayer";var Al=e.forwardRef((t,n)=>{const r=e.useContext(Rl),o=e.useRef(null),a=lo(n,o);return e.useEffect(()=>{const e=o.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,Bt.jsx)(Fs.div,c(c({},t),{},{ref:a}))});function _l(){const e=new CustomEvent(El);document.dispatchEvent(e)}function Ml(e,t,n,r){let{discrete:o}=r;const a=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),o?function(e,t){e&&Rs.flushSync(()=>e.dispatchEvent(t))}(a,s):a.dispatchEvent(s)}Al.displayName="DismissableLayerBranch";var Pl=0;function Il(){e.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:Ll()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:Ll()),Pl++,()=>{1===Pl&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Pl--}},[])}function Ll(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}const Fl=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"];var zl="focusScope.autoFocusOnMount",Dl="focusScope.autoFocusOnUnmount",Bl={bubbles:!1,cancelable:!0},Ul=e.forwardRef((t,n)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:i}=t,l=o(t,Fl),[u,d]=e.useState(null),h=zs(s),f=zs(i),p=e.useRef(null),m=lo(n,e=>d(e)),g=e.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;e.useEffect(()=>{if(a){let e=function(e){if(g.paused||!u)return;const t=e.target;u.contains(t)?p.current=t:Vl(p.current,{select:!0})},t=function(e){if(g.paused||!u)return;const t=e.relatedTarget;null!==t&&(u.contains(t)||Vl(p.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Vl(u)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return u&&r.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[a,u,g.paused]),e.useEffect(()=>{if(u){Gl.add(g);const t=document.activeElement;if(!u.contains(t)){const n=new CustomEvent(zl,Bl);u.addEventListener(zl,h),u.dispatchEvent(n),n.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.activeElement;for(const r of e)if(Vl(r,{select:t}),document.activeElement!==n)return}((e=Hl(u),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Vl(u))}return()=>{u.removeEventListener(zl,h),setTimeout(()=>{const e=new CustomEvent(Dl,Bl);u.addEventListener(Dl,f),u.dispatchEvent(e),e.defaultPrevented||Vl(null!==t&&void 0!==t?t:document.body,{select:!0}),u.removeEventListener(Dl,f),Gl.remove(g)},0)}}var e},[u,h,f,g]);const v=e.useCallback(e=>{if(!r&&!a)return;if(g.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[o,a]=function(e){const t=Hl(e),n=Wl(t,e),r=Wl(t.reverse(),e);return[n,r]}(t);o&&a?e.shiftKey||n!==a?e.shiftKey&&n===o&&(e.preventDefault(),r&&Vl(a,{select:!0})):(e.preventDefault(),r&&Vl(o,{select:!0})):n===t&&e.preventDefault()}},[r,a,g.paused]);return(0,Bt.jsx)(Fs.div,c(c({tabIndex:-1},l),{},{ref:m,onKeyDown:v}))});function Hl(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Wl(e,t){for(const n of e)if(!ql(n,{upTo:t}))return n}function ql(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Vl(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Ul.displayName="FocusScope";var Gl=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null===n||void 0===n||n.pause()),e=Kl(e,t),e.unshift(t)},remove(t){var n;e=Kl(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function Kl(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}const $l=["top","right","bottom","left"],Jl=Math.min,Ql=Math.max,Yl=Math.round,Xl=Math.floor,Zl=e=>({x:e,y:e}),ec={left:"right",right:"left",bottom:"top",top:"bottom"},tc={start:"end",end:"start"};function nc(e,t,n){return Ql(e,Jl(t,n))}function rc(e,t){return"function"===typeof e?e(t):e}function oc(e){return e.split("-")[0]}function ac(e){return e.split("-")[1]}function sc(e){return"x"===e?"y":"x"}function ic(e){return"y"===e?"height":"width"}const lc=new Set(["top","bottom"]);function cc(e){return lc.has(oc(e))?"y":"x"}function uc(e){return sc(cc(e))}function dc(e){return e.replace(/start|end/g,e=>tc[e])}const hc=["left","right"],fc=["right","left"],pc=["top","bottom"],mc=["bottom","top"];function gc(e,t,n,r){const o=ac(e);let a=function(e,t,n){switch(e){case"top":case"bottom":return n?t?fc:hc:t?hc:fc;case"left":case"right":return t?pc:mc;default:return[]}}(oc(e),"start"===n,r);return o&&(a=a.map(e=>e+"-"+o),t&&(a=a.concat(a.map(dc)))),a}function vc(e){return e.replace(/left|right|bottom|top/g,e=>ec[e])}function yc(e){return"number"!==typeof e?function(e){return c({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function bc(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}const xc=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],wc=["strategy"],kc=["mainAxis","crossAxis","limiter"],Sc=["apply"];function Cc(e,t,n){let{reference:r,floating:o}=e;const a=cc(t),s=uc(t),i=ic(s),l=oc(t),c="y"===a,u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,h=r[i]/2-o[i]/2;let f;switch(l){case"top":f={x:u,y:r.y-o.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-o.width,y:d};break;default:f={x:r.x,y:r.y}}switch(ac(t)){case"start":f[s]-=h*(n&&c?-1:1);break;case"end":f[s]+=h*(n&&c?-1:1)}return f}async function Nc(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:a,rects:s,elements:i,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=rc(t,e),p=yc(f),m=i[h?"floating"===d?"reference":"floating":d],g=bc(await a.getClippingRect({element:null==(n=await(null==a.isElement?void 0:a.isElement(m)))||n?m:m.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(i.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,y=await(null==a.getOffsetParent?void 0:a.getOffsetParent(i.floating)),b=await(null==a.isElement?void 0:a.isElement(y))&&await(null==a.getScale?void 0:a.getScale(y))||{x:1,y:1},x=bc(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-x.top+p.top)/b.y,bottom:(x.bottom-g.bottom+p.bottom)/b.y,left:(g.left-x.left+p.left)/b.x,right:(x.right-g.right+p.right)/b.x}}function Ec(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jc(e){return $l.some(t=>e[t]>=0)}const Oc=new Set(["left","top"]);function Rc(){return"undefined"!==typeof window}function Tc(e){return Mc(e)?(e.nodeName||"").toLowerCase():"#document"}function Ac(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function _c(e){var t;return null==(t=(Mc(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Mc(e){return!!Rc()&&(e instanceof Node||e instanceof Ac(e).Node)}function Pc(e){return!!Rc()&&(e instanceof Element||e instanceof Ac(e).Element)}function Ic(e){return!!Rc()&&(e instanceof HTMLElement||e instanceof Ac(e).HTMLElement)}function Lc(e){return!(!Rc()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Ac(e).ShadowRoot)}const Fc=new Set(["inline","contents"]);function zc(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=Qc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Fc.has(o)}const Dc=new Set(["table","td","th"]);function Bc(e){return Dc.has(Tc(e))}const Uc=[":popover-open",":modal"];function Hc(e){return Uc.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const Wc=["transform","translate","scale","rotate","perspective"],qc=["transform","translate","scale","rotate","perspective","filter"],Vc=["paint","layout","strict","content"];function Gc(e){const t=Kc(),n=Pc(e)?Qc(e):e;return Wc.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||qc.some(e=>(n.willChange||"").includes(e))||Vc.some(e=>(n.contain||"").includes(e))}function Kc(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const $c=new Set(["html","body","#document"]);function Jc(e){return $c.has(Tc(e))}function Qc(e){return Ac(e).getComputedStyle(e)}function Yc(e){return Pc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xc(e){if("html"===Tc(e))return e;const t=e.assignedSlot||e.parentNode||Lc(e)&&e.host||_c(e);return Lc(t)?t.host:t}function Zc(e){const t=Xc(e);return Jc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ic(t)&&zc(t)?t:Zc(t)}function eu(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=Zc(e),a=o===(null==(r=e.ownerDocument)?void 0:r.body),s=Ac(o);if(a){const e=tu(s);return t.concat(s,s.visualViewport||[],zc(o)?o:[],e&&n?eu(e):[])}return t.concat(o,eu(o,[],n))}function tu(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function nu(e){const t=Qc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Ic(e),a=o?e.offsetWidth:n,s=o?e.offsetHeight:r,i=Yl(n)!==a||Yl(r)!==s;return i&&(n=a,r=s),{width:n,height:r,$:i}}function ru(e){return Pc(e)?e:e.contextElement}function ou(e){const t=ru(e);if(!Ic(t))return Zl(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=nu(t);let s=(a?Yl(n.width):n.width)/r,i=(a?Yl(n.height):n.height)/o;return s&&Number.isFinite(s)||(s=1),i&&Number.isFinite(i)||(i=1),{x:s,y:i}}const au=Zl(0);function su(e){const t=Ac(e);return Kc()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:au}function iu(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),a=ru(e);let s=Zl(1);t&&(r?Pc(r)&&(s=ou(r)):s=ou(e));const i=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Ac(e))&&t}(a,n,r)?su(a):Zl(0);let l=(o.left+i.x)/s.x,c=(o.top+i.y)/s.y,u=o.width/s.x,d=o.height/s.y;if(a){const e=Ac(a),t=r&&Pc(r)?Ac(r):r;let n=e,o=tu(n);for(;o&&r&&t!==n;){const e=ou(o),t=o.getBoundingClientRect(),r=Qc(o),a=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=a,c+=s,n=Ac(o),o=tu(n)}}return bc({width:u,height:d,x:l,y:c})}function lu(e,t){const n=Yc(e).scrollLeft;return t?t.left+n:iu(_c(e)).left+n}function cu(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-lu(e,n),y:n.top+t.scrollTop}}const uu=new Set(["absolute","fixed"]);function du(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=Ac(e),r=_c(e),o=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,i=0,l=0;if(o){a=o.width,s=o.height;const e=Kc();(!e||e&&"fixed"===t)&&(i=o.offsetLeft,l=o.offsetTop)}const c=lu(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),o="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,s=Math.abs(r.clientWidth-t.clientWidth-o);s<=25&&(a-=s)}else c<=25&&(a+=c);return{width:a,height:s,x:i,y:l}}(e,n);else if("document"===t)r=function(e){const t=_c(e),n=Yc(e),r=e.ownerDocument.body,o=Ql(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Ql(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+lu(e);const i=-n.scrollTop;return"rtl"===Qc(r).direction&&(s+=Ql(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:s,y:i}}(_c(e));else if(Pc(t))r=function(e,t){const n=iu(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=Ic(e)?ou(e):Zl(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:o*a.x,y:r*a.y}}(t,n);else{const n=su(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return bc(r)}function hu(e,t){const n=Xc(e);return!(n===t||!Pc(n)||Jc(n))&&("fixed"===Qc(n).position||hu(n,t))}function fu(e,t,n){const r=Ic(t),o=_c(t),a="fixed"===n,s=iu(e,!0,a,t);let i={scrollLeft:0,scrollTop:0};const l=Zl(0);function c(){l.x=lu(o)}if(r||!r&&!a)if(("body"!==Tc(t)||zc(o))&&(i=Yc(t)),r){const e=iu(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else o&&c();a&&!r&&o&&c();const u=!o||r||a?Zl(0):cu(o,i);return{x:s.left+i.scrollLeft-l.x-u.x,y:s.top+i.scrollTop-l.y-u.y,width:s.width,height:s.height}}function pu(e){return"static"===Qc(e).position}function mu(e,t){if(!Ic(e)||"fixed"===Qc(e).position)return null;if(t)return t(e);let n=e.offsetParent;return _c(e)===n&&(n=n.ownerDocument.body),n}function gu(e,t){const n=Ac(e);if(Hc(e))return n;if(!Ic(e)){let t=Xc(e);for(;t&&!Jc(t);){if(Pc(t)&&!pu(t))return t;t=Xc(t)}return n}let r=mu(e,t);for(;r&&Bc(r)&&pu(r);)r=mu(r,t);return r&&Jc(r)&&pu(r)&&!Gc(r)?n:r||function(e){let t=Xc(e);for(;Ic(t)&&!Jc(t);){if(Gc(t))return t;if(Hc(t))return null;t=Xc(t)}return null}(e)||n}const vu={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a="fixed"===o,s=_c(r),i=!!t&&Hc(t.floating);if(r===s||i&&a)return n;let l={scrollLeft:0,scrollTop:0},c=Zl(1);const u=Zl(0),d=Ic(r);if((d||!d&&!a)&&(("body"!==Tc(r)||zc(s))&&(l=Yc(r)),Ic(r))){const e=iu(r);c=ou(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!s||d||a?Zl(0):cu(s,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:_c,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[..."clippingAncestors"===n?Hc(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=eu(e,[],!1).filter(e=>Pc(e)&&"body"!==Tc(e)),o=null;const a="fixed"===Qc(e).position;let s=a?Xc(e):e;for(;Pc(s)&&!Jc(s);){const t=Qc(s),n=Gc(s);n||"fixed"!==t.position||(o=null),(a?!n&&!o:!n&&"static"===t.position&&o&&uu.has(o.position)||zc(s)&&!n&&hu(e,s))?r=r.filter(e=>e!==s):o=t,s=Xc(s)}return t.set(e,r),r}(t,this._c):[].concat(n),r],s=a[0],i=a.reduce((e,n)=>{const r=du(t,n,o);return e.top=Ql(r.top,e.top),e.right=Jl(r.right,e.right),e.bottom=Jl(r.bottom,e.bottom),e.left=Ql(r.left,e.left),e},du(t,s,o));return{width:i.right-i.left,height:i.bottom-i.top,x:i.left,y:i.top}},getOffsetParent:gu,getElementRects:async function(e){const t=this.getOffsetParent||gu,n=this.getDimensions,r=await n(e.floating);return{reference:fu(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=nu(e);return{width:t,height:n}},getScale:ou,isElement:Pc,isRTL:function(e){return"rtl"===Qc(e).direction}};function yu(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function bu(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:i="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,u=ru(e),d=o||a?[...u?eu(u):[],...eu(t)]:[];d.forEach(e=>{o&&e.addEventListener("scroll",n,{passive:!0}),a&&e.addEventListener("resize",n)});const h=u&&i?function(e,t){let n,r=null;const o=_c(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(i,l){void 0===i&&(i=!1),void 0===l&&(l=1),a();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(i||t(),!f||!p)return;const m={rootMargin:-Xl(h)+"px "+-Xl(o.clientWidth-(d+f))+"px "+-Xl(o.clientHeight-(h+p))+"px "+-Xl(d)+"px",threshold:Ql(0,Jl(1,l))||1};let g=!0;function v(t){const r=t[0].intersectionRatio;if(r!==l){if(!g)return s();r?s(!1,r):n=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==r||yu(u,e.getBoundingClientRect())||s(),g=!1}try{r=new IntersectionObserver(v,c(c({},m),{},{root:o.ownerDocument}))}catch(y){r=new IntersectionObserver(v,m)}r.observe(e)}(!0),a}(u,n):null;let f,p=-1,m=null;s&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),u&&!l&&m.observe(u),m.observe(t));let g=l?iu(e):null;return l&&function t(){const r=iu(e);g&&!yu(g,r)&&n();g=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{o&&e.removeEventListener("scroll",n),a&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=m)||e.disconnect(),m=null,l&&cancelAnimationFrame(f)}}const xu=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:s,middlewareData:i}=t,l=await async function(e,t){const{placement:n,platform:r,elements:o}=e,a=await(null==r.isRTL?void 0:r.isRTL(o.floating)),s=oc(n),i=ac(n),l="y"===cc(n),c=Oc.has(s)?-1:1,u=a&&l?-1:1,d=rc(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return i&&"number"===typeof p&&(f="end"===i?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return s===(null==(n=i.offset)?void 0:n.placement)&&null!=(r=i.arrow)&&r.alignmentOffset?{}:{x:o+l.x,y:a+l.y,data:c(c({},l),{},{placement:s})}}}},wu=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a,platform:s}=t,i=rc(e,t),{mainAxis:l=!0,crossAxis:u=!1,limiter:d={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=i,h=o(i,kc),f={x:n,y:r},p=await s.detectOverflow(t,h),m=cc(oc(a)),g=sc(m);let v=f[g],y=f[m];if(l){const e="y"===g?"bottom":"right";v=nc(v+p["y"===g?"top":"left"],v,v-p[e])}if(u){const e="y"===m?"bottom":"right";y=nc(y+p["y"===m?"top":"left"],y,y-p[e])}const b=d.fn(c(c({},t),{},{[g]:v,[m]:y}));return c(c({},b),{},{data:{x:b.x-n,y:b.y-r,enabled:{[g]:l,[m]:u}}})}}},ku=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:s,rects:i,initialPlacement:l,platform:c,elements:u}=t,d=rc(e,t),{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0}=d,y=o(d,xc);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const b=oc(a),x=cc(l),w=oc(l)===l,k=await(null==c.isRTL?void 0:c.isRTL(u.floating)),S=p||(w||!v?[vc(l)]:function(e){const t=vc(e);return[dc(e),t,dc(t)]}(l)),C="none"!==g;!p&&C&&S.push(...gc(l,v,g,k));const N=[l,...S],E=await c.detectOverflow(t,y),j=[];let O=(null==(r=s.flip)?void 0:r.overflows)||[];if(h&&j.push(E[b]),f){const e=function(e,t,n){void 0===n&&(n=!1);const r=ac(e),o=uc(e),a=ic(o);let s="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(s=vc(s)),[s,vc(s)]}(a,i,k);j.push(E[e[0]],E[e[1]])}if(O=[...O,{placement:a,overflows:j}],!j.every(e=>e<=0)){var R,T;const e=((null==(R=s.flip)?void 0:R.index)||0)+1,t=N[e];if(t){if(!("alignment"===f&&x!==cc(t))||O.every(e=>cc(e.placement)!==x||e.overflows[0]>0))return{data:{index:e,overflows:O},reset:{placement:t}}}let n=null==(T=O.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:T.placement;if(!n)switch(m){case"bestFit":{var A;const e=null==(A=O.filter(e=>{if(C){const t=cc(e.placement);return t===x||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:A[0];e&&(n=e);break}case"initialPlacement":n=l}if(a!==n)return{reset:{placement:n}}}return{}}}},Su=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:s,platform:i,elements:l}=t,u=rc(e,t),{apply:d=()=>{}}=u,h=o(u,Sc),f=await i.detectOverflow(t,h),p=oc(a),m=ac(a),g="y"===cc(a),{width:v,height:y}=s.floating;let b,x;"top"===p||"bottom"===p?(b=p,x=m===(await(null==i.isRTL?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=p,b="end"===m?"top":"bottom");const w=y-f.top-f.bottom,k=v-f.left-f.right,S=Jl(y-f[b],w),C=Jl(v-f[x],k),N=!t.middlewareData.shift;let E=S,j=C;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(j=k),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(E=w),N&&!m){const e=Ql(f.left,0),t=Ql(f.right,0),n=Ql(f.top,0),r=Ql(f.bottom,0);g?j=v-2*(0!==e||0!==t?e+t:Ql(f.left,f.right)):E=y-2*(0!==n||0!==r?n+r:Ql(f.top,f.bottom))}await d(c(c({},t),{},{availableWidth:j,availableHeight:E}));const O=await i.getDimensions(l.floating);return v!==O.width||y!==O.height?{reset:{rects:!0}}:{}}}},Cu=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,a=rc(e,t),{strategy:s="referenceHidden"}=a,i=o(a,wc);switch(s){case"referenceHidden":{const e=Ec(await r.detectOverflow(t,c(c({},i),{},{elementContext:"reference"})),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:jc(e)}}}case"escaped":{const e=Ec(await r.detectOverflow(t,c(c({},i),{},{altBoundary:!0})),n.floating);return{data:{escapedOffsets:e,escaped:jc(e)}}}default:return{}}}}},Nu=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:s,elements:i,middlewareData:l}=t,{element:u,padding:d=0}=rc(e,t)||{};if(null==u)return{};const h=yc(d),f={x:n,y:r},p=uc(o),m=ic(p),g=await s.getDimensions(u),v="y"===p,y=v?"top":"left",b=v?"bottom":"right",x=v?"clientHeight":"clientWidth",w=a.reference[m]+a.reference[p]-f[p]-a.floating[m],k=f[p]-a.reference[p],S=await(null==s.getOffsetParent?void 0:s.getOffsetParent(u));let C=S?S[x]:0;C&&await(null==s.isElement?void 0:s.isElement(S))||(C=i.floating[x]||a.floating[m]);const N=w/2-k/2,E=C/2-g[m]/2-1,j=Jl(h[y],E),O=Jl(h[b],E),R=j,T=C-g[m]-O,A=C/2-g[m]/2+N,_=nc(R,A,T),M=!l.arrow&&null!=ac(o)&&A!==_&&a.reference[m]/2-(A<R?j:O)-g[m]/2<0,P=M?A<R?A-R:A-T:0;return{[p]:f[p]+P,data:c({[p]:_,centerOffset:A-_-P},M&&{alignmentOffset:P}),reset:M}}}),Eu=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:s}=t,{offset:i=0,mainAxis:l=!0,crossAxis:u=!0}=rc(e,t),d={x:n,y:r},h=cc(o),f=sc(h);let p=d[f],m=d[h];const g=rc(i,t),v="number"===typeof g?{mainAxis:g,crossAxis:0}:c({mainAxis:0,crossAxis:0},g);if(l){const e="y"===f?"height":"width",t=a.reference[f]-a.floating[e]+v.mainAxis,n=a.reference[f]+a.reference[e]-v.mainAxis;p<t?p=t:p>n&&(p=n)}if(u){var y,b;const e="y"===f?"width":"height",t=Oc.has(oc(o)),n=a.reference[h]-a.floating[e]+(t&&(null==(y=s.offset)?void 0:y[h])||0)+(t?0:v.crossAxis),r=a.reference[h]+a.reference[e]+(t?0:(null==(b=s.offset)?void 0:b[h])||0)-(t?v.crossAxis:0);m<n?m=n:m>r&&(m=r)}return{[f]:p,[h]:m}}}},ju=(e,t,n)=>{const r=new Map,o=c({platform:vu},n),a=c(c({},o.platform),{},{_c:r});return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:s}=n,i=a.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:d,y:h}=Cc(u,r,l),f=r,p={},m=0;for(let v=0;v<i.length;v++){var g;const{name:n,fn:a}=i[v],{x:y,y:b,data:x,reset:w}=await a({x:d,y:h,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:u,platform:c(c({},s),{},{detectOverflow:null!=(g=s.detectOverflow)?g:Nc}),elements:{reference:e,floating:t}});d=null!=y?y:d,h=null!=b?b:h,p=c(c({},p),{},{[n]:c(c({},p[n]),x)}),w&&m<=50&&(m++,"object"===typeof w&&(w.placement&&(f=w.placement),w.rects&&(u=!0===w.rects?await s.getElementRects({reference:e,floating:t,strategy:o}):w.rects),({x:d,y:h}=Cc(u,f,l))),v=-1)}return{x:d,y:h,placement:f,strategy:o,middlewareData:p}})(e,t,c(c({},o),{},{platform:a}))};var Ou="undefined"!==typeof document?e.useLayoutEffect:function(){};function Ru(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Ru(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!==r--;){const n=o[r];if(("_owner"!==n||!e.$$typeof)&&!Ru(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function Tu(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Au(e,t){const n=Tu(e);return Math.round(t*n)/n}function _u(t){const n=e.useRef(t);return Ou(()=>{n.current=t}),n}const Mu=(e,t)=>c(c({},xu(e)),{},{options:[e,t]}),Pu=(e,t)=>c(c({},wu(e)),{},{options:[e,t]}),Iu=(e,t)=>c(c({},Eu(e)),{},{options:[e,t]}),Lu=(e,t)=>c(c({},ku(e)),{},{options:[e,t]}),Fu=(e,t)=>c(c({},Su(e)),{},{options:[e,t]}),zu=(e,t)=>c(c({},Cu(e)),{},{options:[e,t]}),Du=(e,t)=>c(c({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&(o=n,{}.hasOwnProperty.call(o,"current"))?null!=n.current?Nu({element:n.current,padding:r}).fn(t):{}:n?Nu({element:n,padding:r}).fn(t):{};var o}}))(e)),{},{options:[e,t]}),Bu=["children","width","height"];var Uu=e.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5}=e,s=o(e,Bu);return(0,Bt.jsx)(Fs.svg,c(c({},s),{},{ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,Bt.jsx)("polygon",{points:"0,0 30,0 15,10"})}))});Uu.displayName="Arrow";var Hu=Uu;function Wu(t){const[n,r]=e.useState(void 0);return Ns(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const e=new ResizeObserver(e=>{if(!Array.isArray(e))return;if(!e.length)return;const n=e[0];let o,a;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;o=t.inlineSize,a=t.blockSize}else o=t.offsetWidth,a=t.offsetHeight;r({width:o,height:a})});return e.observe(t,{box:"border-box"}),()=>e.unobserve(t)}r(void 0)},[t]),n}const qu=["__scopePopper","virtualRef"],Vu=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"],Gu=["__scopePopper"];var Ku="Popper",[$u,Ju]=is(Ku),[Qu,Yu]=$u(Ku),Xu=t=>{const{__scopePopper:n,children:r}=t,[o,a]=e.useState(null);return(0,Bt.jsx)(Qu,{scope:n,anchor:o,onAnchorChange:a,children:r})};Xu.displayName=Ku;var Zu="PopperAnchor",ed=e.forwardRef((t,n)=>{const{__scopePopper:r,virtualRef:a}=t,s=o(t,qu),i=Yu(Zu,r),l=e.useRef(null),u=lo(n,l),d=e.useRef(null);return e.useEffect(()=>{const e=d.current;d.current=(null===a||void 0===a?void 0:a.current)||l.current,e!==d.current&&i.onAnchorChange(d.current)}),a?null:(0,Bt.jsx)(Fs.div,c(c({},s),{},{ref:u}))});ed.displayName=Zu;var td="PopperContent",[nd,rd]=$u(td),od=e.forwardRef((t,n)=>{var r,a,s,i,l,u,d,h;const{__scopePopper:f,side:p="bottom",sideOffset:m=0,align:g="center",alignOffset:v=0,arrowPadding:y=0,avoidCollisions:b=!0,collisionBoundary:x=[],collisionPadding:w=0,sticky:k="partial",hideWhenDetached:S=!1,updatePositionStrategy:C="optimized",onPlaced:N}=t,E=o(t,Vu),j=Yu(td,f),[O,R]=e.useState(null),T=lo(n,e=>R(e)),[A,_]=e.useState(null),M=Wu(A),P=null!==(r=null===M||void 0===M?void 0:M.width)&&void 0!==r?r:0,I=null!==(a=null===M||void 0===M?void 0:M.height)&&void 0!==a?a:0,L=p+("center"!==g?"-"+g:""),F="number"===typeof w?w:c({top:0,right:0,bottom:0,left:0},w),z=Array.isArray(x)?x:[x],D=z.length>0,B={padding:F,boundary:z.filter(ld),altBoundary:D},{refs:U,floatingStyles:H,placement:W,isPositioned:q,middlewareData:V}=function(t){void 0===t&&(t={});const{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:a,elements:{reference:s,floating:i}={},transform:l=!0,whileElementsMounted:u,open:d}=t,[h,f]=e.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[p,m]=e.useState(o);Ru(p,o)||m(o);const[g,v]=e.useState(null),[y,b]=e.useState(null),x=e.useCallback(e=>{e!==C.current&&(C.current=e,v(e))},[]),w=e.useCallback(e=>{e!==N.current&&(N.current=e,b(e))},[]),k=s||g,S=i||y,C=e.useRef(null),N=e.useRef(null),E=e.useRef(h),j=null!=u,O=_u(u),R=_u(a),T=_u(d),A=e.useCallback(()=>{if(!C.current||!N.current)return;const e={placement:n,strategy:r,middleware:p};R.current&&(e.platform=R.current),ju(C.current,N.current,e).then(e=>{const t=c(c({},e),{},{isPositioned:!1!==T.current});_.current&&!Ru(E.current,t)&&(E.current=t,Rs.flushSync(()=>{f(t)}))})},[p,n,r,R,T]);Ou(()=>{!1===d&&E.current.isPositioned&&(E.current.isPositioned=!1,f(e=>c(c({},e),{},{isPositioned:!1})))},[d]);const _=e.useRef(!1);Ou(()=>(_.current=!0,()=>{_.current=!1}),[]),Ou(()=>{if(k&&(C.current=k),S&&(N.current=S),k&&S){if(O.current)return O.current(k,S,A);A()}},[k,S,A,O,j]);const M=e.useMemo(()=>({reference:C,floating:N,setReference:x,setFloating:w}),[x,w]),P=e.useMemo(()=>({reference:k,floating:S}),[k,S]),I=e.useMemo(()=>{const e={position:r,left:0,top:0};if(!P.floating)return e;const t=Au(P.floating,h.x),n=Au(P.floating,h.y);return l?c(c({},e),{},{transform:"translate("+t+"px, "+n+"px)"},Tu(P.floating)>=1.5&&{willChange:"transform"}):{position:r,left:t,top:n}},[r,l,P.floating,h.x,h.y]);return e.useMemo(()=>c(c({},h),{},{update:A,refs:M,elements:P,floatingStyles:I}),[h,A,M,P,I])}({strategy:"fixed",placement:L,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bu(...t,{animationFrame:"always"===C})},elements:{reference:j.anchor},middleware:[Mu({mainAxis:m+I,alignmentAxis:v}),b&&Pu(c({mainAxis:!0,crossAxis:!1,limiter:"partial"===k?Iu():void 0},B)),b&&Lu(c({},B)),Fu(c(c({},B),{},{apply:e=>{let{elements:t,rects:n,availableWidth:r,availableHeight:o}=e;const{width:a,height:s}=n.reference,i=t.floating.style;i.setProperty("--radix-popper-available-width","".concat(r,"px")),i.setProperty("--radix-popper-available-height","".concat(o,"px")),i.setProperty("--radix-popper-anchor-width","".concat(a,"px")),i.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}})),A&&Du({element:A,padding:y}),cd({arrowWidth:P,arrowHeight:I}),S&&zu(c({strategy:"referenceHidden"},B))]}),[G,K]=ud(W),$=zs(N);Ns(()=>{q&&(null===$||void 0===$||$())},[q,$]);const J=null===(s=V.arrow)||void 0===s?void 0:s.x,Q=null===(i=V.arrow)||void 0===i?void 0:i.y,Y=0!==(null===(l=V.arrow)||void 0===l?void 0:l.centerOffset),[X,Z]=e.useState();return Ns(()=>{O&&Z(window.getComputedStyle(O).zIndex)},[O]),(0,Bt.jsx)("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:c(c({},H),{},{transform:q?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[null===(u=V.transformOrigin)||void 0===u?void 0:u.x,null===(d=V.transformOrigin)||void 0===d?void 0:d.y].join(" ")},(null===(h=V.hide)||void 0===h?void 0:h.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:(0,Bt.jsx)(nd,{scope:f,placedSide:G,onArrowChange:_,arrowX:J,arrowY:Q,shouldHideArrow:Y,children:(0,Bt.jsx)(Fs.div,c(c({"data-side":G,"data-align":K},E),{},{ref:T,style:c(c({},E.style),{},{animation:q?void 0:"none"})}))})})});od.displayName=td;var ad="PopperArrow",sd={top:"bottom",right:"left",bottom:"top",left:"right"},id=e.forwardRef(function(e,t){const{__scopePopper:n}=e,r=o(e,Gu),a=rd(ad,n),s=sd[a.placedSide];return(0,Bt.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,Bt.jsx)(Hu,c(c({},r),{},{ref:t,style:c(c({},r.style),{},{display:"block"})}))})});function ld(e){return null!==e}id.displayName=ad;var cd=e=>({name:"transformOrigin",options:e,fn(t){var n,r,o,a,s;const{placement:i,rects:l,middlewareData:c}=t,u=0!==(null===(n=c.arrow)||void 0===n?void 0:n.centerOffset),d=u?0:e.arrowWidth,h=u?0:e.arrowHeight,[f,p]=ud(i),m={start:"0%",center:"50%",end:"100%"}[p],g=(null!==(r=null===(o=c.arrow)||void 0===o?void 0:o.x)&&void 0!==r?r:0)+d/2,v=(null!==(a=null===(s=c.arrow)||void 0===s?void 0:s.y)&&void 0!==a?a:0)+h/2;let y="",b="";return"bottom"===f?(y=u?m:"".concat(g,"px"),b="".concat(-h,"px")):"top"===f?(y=u?m:"".concat(g,"px"),b="".concat(l.floating.height+h,"px")):"right"===f?(y="".concat(-h,"px"),b=u?m:"".concat(v,"px")):"left"===f&&(y="".concat(l.floating.width+h,"px"),b=u?m:"".concat(v,"px")),{data:{x:y,y:b}}}});function ud(e){const[t,n="center"]=e.split("-");return[t,n]}var dd=Xu,hd=ed,fd=od,pd=id;const md=["container"];var gd=e.forwardRef((t,n)=>{var r;const{container:a}=t,s=o(t,md),[i,l]=e.useState(!1);Ns(()=>l(!0),[]);const u=a||i&&(null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body);return u?Rs.createPortal((0,Bt.jsx)(Fs.div,c(c({},s),{},{ref:n})),u):null});gd.displayName="Portal";const vd=["children"],yd=["children"];function bd(t){const n=xd(t),r=e.forwardRef((t,r)=>{const{children:a}=t,s=o(t,vd),i=e.Children.toArray(a),l=i.find(kd);if(l){const t=l.props.children,o=i.map(n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,o):null}))}return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}function xd(t){const n=e.forwardRef((t,n)=>{const{children:r}=t,a=o(t,yd);if(e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=c({},t);for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){const e=a(...arguments);return o(...arguments),e}:o&&(n[r]=o):"style"===r?n[r]=c(c({},o),a):"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return c(c({},e),n)}(a,r.props);return r.type!==e.Fragment&&(o.ref=n?io(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var wd=Symbol("radix.slottable");function kd(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===wd}function Sd(t){const n=e.useRef({value:t,previous:t});return e.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var Cd=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Nd=e.forwardRef((e,t)=>(0,Bt.jsx)(Fs.span,c(c({},e),{},{ref:t,style:c(c({},Cd),e.style)})));Nd.displayName="VisuallyHidden";var Ed=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},jd=new WeakMap,Od=new WeakMap,Rd={},Td=0,Ad=function(e){return e&&(e.host||Ad(e.parentNode))},_d=function(e,t,n,r){var o=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=Ad(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Rd[n]||(Rd[n]=new WeakMap);var a=Rd[n],s=[],i=new Set,l=new Set(o),c=function(e){e&&!i.has(e)&&(i.add(e),c(e.parentNode))};o.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(i.has(e))u(e);else try{var t=e.getAttribute(r),o=null!==t&&"false"!==t,l=(jd.get(e)||0)+1,c=(a.get(e)||0)+1;jd.set(e,l),a.set(e,c),s.push(e),1===l&&o&&Od.set(e,!0),1===c&&e.setAttribute(n,"true"),o||e.setAttribute(r,"true")}catch(Ey){console.error("aria-hidden: cannot operate on ",e,Ey)}})};return u(t),i.clear(),Td++,function(){s.forEach(function(e){var t=jd.get(e)-1,o=a.get(e)-1;jd.set(e,t),a.set(e,o),t||(Od.has(e)||e.removeAttribute(r),Od.delete(e)),o||e.removeAttribute(n)}),--Td||(jd=new WeakMap,jd=new WeakMap,Od=new WeakMap,Rd={})}},Md=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=t||Ed(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),_d(r,o,n,"aria-hidden")):function(){return null}};var Pd=function(){return Pd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pd.apply(this,arguments)};function Id(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;function Ld(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Fd="right-scroll-bar-position",zd="width-before-scroll-bar";function Dd(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var Bd="undefined"!==typeof window?e.useLayoutEffect:e.useEffect,Ud=new WeakMap;function Hd(t,n){var r=function(t,n){var r=(0,e.useState)(function(){return{value:t,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}})[0];return r.callback=n,r.facade}(n||null,function(e){return t.forEach(function(t){return Dd(t,e)})});return Bd(function(){var e=Ud.get(r);if(e){var n=new Set(e),o=new Set(t),a=r.current;n.forEach(function(e){o.has(e)||Dd(e,null)}),o.forEach(function(e){n.has(e)||Dd(e,a)})}Ud.set(r,t)},[t]),r}function Wd(e){return e}function qd(e,t){void 0===t&&(t=Wd);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var o=t(e,r);return n.push(o),function(){n=n.filter(function(e){return e!==o})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var o=n;n=[],o.forEach(e),t=n}var a=function(){var n=t;t=[],n.forEach(e)},s=function(){return Promise.resolve().then(a)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}};return o}var Vd=function(e){void 0===e&&(e={});var t=qd(null);return t.options=Pd({async:!0,ssr:!1},e),t}(),Gd=function(){},Kd=e.forwardRef(function(t,n){var r=e.useRef(null),o=e.useState({onScrollCapture:Gd,onWheelCapture:Gd,onTouchMoveCapture:Gd}),a=o[0],s=o[1],i=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,y=t.as,b=void 0===y?"div":y,x=t.gapMode,w=Id(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,S=Hd([r,n]),C=Pd(Pd({},w),a);return e.createElement(e.Fragment,null,d&&e.createElement(k,{sideCar:Vd,removeScrollBar:u,shards:h,noRelative:p,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:r,gapMode:x}),i?e.cloneElement(e.Children.only(l),Pd(Pd({},C),{ref:S})):e.createElement(b,Pd({},C,{className:c,ref:S}),l))});Kd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Kd.classNames={fullWidth:zd,zeroRight:Fd};var $d,Jd=function(t){var n=t.sideCar,r=Id(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=n.read();if(!o)throw new Error("Sidecar medium not found");return e.createElement(o,Pd({},r))};Jd.isSideCarExport=!0;function Qd(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$d||n.nc;return t&&e.setAttribute("nonce",t),e}var Yd=function(){var e=0,t=null;return{add:function(n){var r,o;0==e&&(t=Qd())&&(o=n,(r=t).styleSheet?r.styleSheet.cssText=o:r.appendChild(document.createTextNode(o)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Xd=function(){var t=function(){var t=Yd();return function(n,r){e.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&r])}}();return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},Zd={left:0,top:0,right:0,gap:0},eh=function(e){return parseInt(e||"",10)||0},th=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return Zd;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],o=t["padding"===e?"paddingRight":"marginRight"];return[eh(n),eh(r),eh(o)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},nh=Xd(),rh="data-scroll-locked",oh=function(e,t,n,r){var o=e.left,a=e.top,s=e.right,i=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(i,"px ").concat(r,";\n  }\n  body[").concat(rh,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(o,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(i,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Fd," {\n    right: ").concat(i,"px ").concat(r,";\n  }\n  \n  .").concat(zd," {\n    margin-right: ").concat(i,"px ").concat(r,";\n  }\n  \n  .").concat(Fd," .").concat(Fd," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(zd," .").concat(zd," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(rh,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(i,"px;\n  }\n")},ah=function(){var e=parseInt(document.body.getAttribute(rh)||"0",10);return isFinite(e)?e:0},sh=function(t){var n=t.noRelative,r=t.noImportant,o=t.gapMode,a=void 0===o?"margin":o;e.useEffect(function(){return document.body.setAttribute(rh,(ah()+1).toString()),function(){var e=ah()-1;e<=0?document.body.removeAttribute(rh):document.body.setAttribute(rh,e.toString())}},[]);var s=e.useMemo(function(){return th(a)},[a]);return e.createElement(nh,{styles:oh(s,!n,a,r?"":"!important")})},ih=!1;if("undefined"!==typeof window)try{var lh=Object.defineProperty({},"passive",{get:function(){return ih=!0,!0}});window.addEventListener("test",lh,lh),window.removeEventListener("test",lh,lh)}catch(jy){ih=!1}var ch=!!ih&&{passive:!1},uh=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},dh=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),hh(e,r)){var o=fh(e,r);if(o[1]>o[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},hh=function(e,t){return"v"===e?function(e){return uh(e,"overflowY")}(t):function(e){return uh(e,"overflowX")}(t)},fh=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},ph=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},mh=function(e){return[e.deltaX,e.deltaY]},gh=function(e){return e&&"current"in e?e.current:e},vh=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},yh=0,bh=[];function xh(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const wh=(kh=function(t){var n=e.useRef([]),r=e.useRef([0,0]),o=e.useRef(),a=e.useState(yh++)[0],s=e.useState(Xd)[0],i=e.useRef(t);e.useEffect(function(){i.current=t},[t]),e.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var e=Ld([t.lockRef.current],(t.shards||[]).map(gh),!0).filter(Boolean);return e.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),e.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var l=e.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var n,a=ph(e),s=r.current,l="deltaX"in e?e.deltaX:s[0]-a[0],c="deltaY"in e?e.deltaY:s[1]-a[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=window.getSelection(),f=h&&h.anchorNode;if(f&&(f===u||f.contains(u)))return!1;var p=dh(d,u);if(!p)return!0;if(p?n=d:(n="v"===d?"h":"v",p=dh(d,u)),!p)return!1;if(!o.current&&"changedTouches"in e&&(l||c)&&(o.current=n),!n)return!0;var m=o.current||n;return function(e,t,n,r,o){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=a*r,i=n.target,l=t.contains(i),c=!1,u=s>0,d=0,h=0;do{if(!i)break;var f=fh(e,i),p=f[0],m=f[1]-f[2]-a*p;(p||m)&&hh(e,i)&&(d+=m,h+=p);var g=i.parentNode;i=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!l&&i!==document.body||l&&(t.contains(i)||t===i));return(u&&(o&&Math.abs(d)<1||!o&&s>d)||!u&&(o&&Math.abs(h)<1||!o&&-s>h))&&(c=!0),c}(m,t,e,"h"===m?l:c,!0)},[]),c=e.useCallback(function(e){var t=e;if(bh.length&&bh[bh.length-1]===s){var r="deltaY"in t?mh(t):ph(t),o=n.current.filter(function(e){return e.name===t.type&&(e.target===t.target||t.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,r)})[0];if(o&&o.should)t.cancelable&&t.preventDefault();else if(!o){var a=(i.current.shards||[]).map(gh).filter(Boolean).filter(function(e){return e.contains(t.target)});(a.length>0?l(t,a[0]):!i.current.noIsolation)&&t.cancelable&&t.preventDefault()}}},[]),u=e.useCallback(function(e,t,r,o){var a={name:e,delta:t,target:r,should:o,shadowParent:xh(r)};n.current.push(a),setTimeout(function(){n.current=n.current.filter(function(e){return e!==a})},1)},[]),d=e.useCallback(function(e){r.current=ph(e),o.current=void 0},[]),h=e.useCallback(function(e){u(e.type,mh(e),e.target,l(e,t.lockRef.current))},[]),f=e.useCallback(function(e){u(e.type,ph(e),e.target,l(e,t.lockRef.current))},[]);e.useEffect(function(){return bh.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,ch),document.addEventListener("touchmove",c,ch),document.addEventListener("touchstart",d,ch),function(){bh=bh.filter(function(e){return e!==s}),document.removeEventListener("wheel",c,ch),document.removeEventListener("touchmove",c,ch),document.removeEventListener("touchstart",d,ch)}},[]);var p=t.removeScrollBar,m=t.inert;return e.createElement(e.Fragment,null,m?e.createElement(s,{styles:vh(a)}):null,p?e.createElement(sh,{noRelative:t.noRelative,gapMode:t.gapMode}):null)},Vd.useMedium(kh),Jd);var kh,Sh=e.forwardRef(function(t,n){return e.createElement(Kd,Pd({},t,{ref:n,sideCar:wh}))});Sh.classNames=Kd.classNames;const Ch=Sh,Nh=["__scopeSelect","disabled"],Eh=["__scopeSelect","className","style","children","placeholder"],jh=["__scopeSelect","children"],Oh=["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"],Rh=["__scopeSelect","onPlaced"],Th=["__scopeSelect","align","collisionPadding"],Ah=["__scopeSelect","nonce"],_h=["__scopeSelect"],Mh=["__scopeSelect"],Ph=["__scopeSelect","value","disabled","textValue"],Ih=["__scopeSelect","className","style"],Lh=["__scopeSelect"],Fh=["__scopeSelect","onAutoScroll"],zh=["__scopeSelect"],Dh=["__scopeSelect"],Bh=["__scopeSelect","value"];var Uh=[" ","Enter","ArrowUp","ArrowDown"],Hh=[" ","Enter"],Wh="Select",[qh,Vh,Gh]=ws(Wh),[Kh,$h]=is(Wh,[Gh,Ju]),Jh=Ju(),[Qh,Yh]=Kh(Wh),[Xh,Zh]=Kh(Wh),ef=t=>{const{__scopeSelect:n,children:r,open:o,defaultOpen:a,onOpenChange:s,value:i,defaultValue:l,onValueChange:u,dir:d,name:h,autoComplete:f,disabled:p,required:m,form:g}=t,v=Jh(n),[y,b]=e.useState(null),[x,w]=e.useState(null),[k,S]=e.useState(!1),C=Hs(d),[N,E]=Bs({prop:o,defaultProp:null!==a&&void 0!==a&&a,onChange:s,caller:Wh}),[j,O]=Bs({prop:i,defaultProp:l,onChange:u,caller:Wh}),R=e.useRef(null),T=!y||(g||!!y.closest("form")),[A,_]=e.useState(new Set),M=Array.from(A).map(e=>e.props.value).join(";");return(0,Bt.jsx)(dd,c(c({},v),{},{children:(0,Bt.jsxs)(Qh,{required:m,scope:n,trigger:y,onTriggerChange:b,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:k,onValueNodeHasChildrenChange:S,contentId:Os(),value:j,onValueChange:O,open:N,onOpenChange:E,dir:C,triggerPointerDownPosRef:R,disabled:p,children:[(0,Bt.jsx)(qh.Provider,{scope:n,children:(0,Bt.jsx)(Xh,{scope:t.__scopeSelect,onNativeOptionAdd:e.useCallback(e=>{_(t=>new Set(t).add(e))},[]),onNativeOptionRemove:e.useCallback(e=>{_(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:r})}),T?(0,Bt.jsxs)(Wf,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:j,onChange:e=>O(e.target.value),disabled:p,form:g,children:[void 0===j?(0,Bt.jsx)("option",{value:""}):null,Array.from(A)]},M):null]})}))};ef.displayName=Wh;var tf="SelectTrigger",nf=e.forwardRef((t,n)=>{const{__scopeSelect:r,disabled:a=!1}=t,s=o(t,Nh),i=Jh(r),l=Yh(tf,r),u=l.disabled||a,d=lo(n,l.onTriggerChange),h=Vh(r),f=e.useRef("touch"),[p,m,g]=Vf(e=>{const t=h().filter(e=>!e.disabled),n=t.find(e=>e.value===l.value),r=Gf(t,e,n);void 0!==r&&l.onValueChange(r.value)}),v=e=>{u||(l.onOpenChange(!0),g()),e&&(l.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,Bt.jsx)(hd,c(c({asChild:!0},i),{},{children:(0,Bt.jsx)(Fs.button,c(c({type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":qf(l.value)?"":void 0},s),{},{ref:d,onClick:os(s.onClick,e=>{e.currentTarget.focus(),"mouse"!==f.current&&v(e)}),onPointerDown:os(s.onPointerDown,e=>{f.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(v(e),e.preventDefault())}),onKeyDown:os(s.onKeyDown,e=>{const t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||m(e.key),t&&" "===e.key||Uh.includes(e.key)&&(v(),e.preventDefault())})}))}))});nf.displayName=tf;var rf="SelectValue",of=e.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:s,placeholder:i=""}=e,l=o(e,Eh),u=Yh(rf,n),{onValueNodeHasChildrenChange:d}=u,h=void 0!==s,f=lo(t,u.onValueNodeChange);return Ns(()=>{d(h)},[d,h]),(0,Bt.jsx)(Fs.span,c(c({},l),{},{ref:f,style:{pointerEvents:"none"},children:qf(u.value)?(0,Bt.jsx)(Bt.Fragment,{children:i}):s}))});of.displayName=rf;var af=e.forwardRef((e,t)=>{const{__scopeSelect:n,children:r}=e,a=o(e,jh);return(0,Bt.jsx)(Fs.span,c(c({"aria-hidden":!0},a),{},{ref:t,children:r||"\u25bc"}))});af.displayName="SelectIcon";var sf=e=>(0,Bt.jsx)(gd,c({asChild:!0},e));sf.displayName="SelectPortal";var lf="SelectContent",cf=e.forwardRef((t,n)=>{const r=Yh(lf,t.__scopeSelect),[o,a]=e.useState();if(Ns(()=>{a(new DocumentFragment)},[]),!r.open){const e=o;return e?Rs.createPortal((0,Bt.jsx)(df,{scope:t.__scopeSelect,children:(0,Bt.jsx)(qh.Slot,{scope:t.__scopeSelect,children:(0,Bt.jsx)("div",{children:t.children})})}),e):null}return(0,Bt.jsx)(pf,c(c({},t),{},{ref:n}))});cf.displayName=lf;var uf=10,[df,hf]=Kh(lf),ff=bd("SelectContent.RemoveScroll"),pf=e.forwardRef((t,n)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:l,side:u,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:b}=t,x=o(t,Oh),w=Yh(lf,r),[k,S]=e.useState(null),[C,N]=e.useState(null),E=lo(n,e=>S(e)),[j,O]=e.useState(null),[R,T]=e.useState(null),A=Vh(r),[_,M]=e.useState(!1),P=e.useRef(!1);e.useEffect(()=>{if(k)return Md(k)},[k]),Il();const I=e.useCallback(e=>{const[t,...n]=A().map(e=>e.ref.current),[r]=n.slice(-1),o=document.activeElement;for(const a of e){if(a===o)return;if(null===a||void 0===a||a.scrollIntoView({block:"nearest"}),a===t&&C&&(C.scrollTop=0),a===r&&C&&(C.scrollTop=C.scrollHeight),null===a||void 0===a||a.focus(),document.activeElement!==o)return}},[A,C]),L=e.useCallback(()=>I([j,k]),[I,j,k]);e.useEffect(()=>{_&&L()},[_,L]);const{onOpenChange:F,triggerPointerDownPosRef:z}=w;e.useEffect(()=>{if(k){let e={x:0,y:0};const t=t=>{var n,r,o,a;e={x:Math.abs(Math.round(t.pageX)-(null!==(n=null===(r=z.current)||void 0===r?void 0:r.x)&&void 0!==n?n:0)),y:Math.abs(Math.round(t.pageY)-(null!==(o=null===(a=z.current)||void 0===a?void 0:a.y)&&void 0!==o?o:0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():k.contains(n.target)||F(!1),document.removeEventListener("pointermove",t),z.current=null};return null!==z.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[k,F,z]),e.useEffect(()=>{const e=()=>F(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[F]);const[D,B]=Vf(e=>{const t=A().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=Gf(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),U=e.useCallback((e,t,n)=>{const r=!P.current&&!n;(void 0!==w.value&&w.value===t||r)&&(O(e),r&&(P.current=!0))},[w.value]),H=e.useCallback(()=>null===k||void 0===k?void 0:k.focus(),[k]),W=e.useCallback((e,t,n)=>{const r=!P.current&&!n;(void 0!==w.value&&w.value===t||r)&&T(e)},[w.value]),q="popper"===a?gf:mf,V=q===gf?{side:u,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:b}:{};return(0,Bt.jsx)(df,{scope:r,content:k,viewport:C,onViewportChange:N,itemRefCallback:U,selectedItem:j,onItemLeave:H,itemTextRefCallback:W,focusSelectedItem:L,selectedItemText:R,position:a,isPositioned:_,searchRef:D,children:(0,Bt.jsx)(Ch,{as:ff,allowPinchZoom:!0,children:(0,Bt.jsx)(Ul,{asChild:!0,trapped:w.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:os(s,e=>{var t;null===(t=w.trigger)||void 0===t||t.focus({preventScroll:!0}),e.preventDefault()}),children:(0,Bt.jsx)(Tl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:(0,Bt.jsx)(q,c(c(c({role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:e=>e.preventDefault()},x),V),{},{onPlaced:()=>M(!0),ref:E,style:c({display:"flex",flexDirection:"column",outline:"none"},x.style),onKeyDown:os(x.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||B(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=A().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>I(t)),e.preventDefault()}})}))})})})})});pf.displayName="SelectContentImpl";var mf=e.forwardRef((t,n)=>{const{__scopeSelect:r,onPlaced:a}=t,s=o(t,Rh),i=Yh(lf,r),l=hf(lf,r),[u,d]=e.useState(null),[h,f]=e.useState(null),p=lo(n,e=>f(e)),m=Vh(r),g=e.useRef(!1),v=e.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:x,focusSelectedItem:w}=l,k=e.useCallback(()=>{if(i.trigger&&i.valueNode&&u&&h&&y&&b&&x){const e=i.trigger.getBoundingClientRect(),t=h.getBoundingClientRect(),n=i.valueNode.getBoundingClientRect(),r=x.getBoundingClientRect();if("rtl"!==i.dir){const o=r.left-t.left,a=n.left-o,s=e.left-a,i=e.width+s,l=Math.max(i,t.width),c=window.innerWidth-uf,d=Sl(a,[uf,Math.max(uf,c-l)]);u.style.minWidth=i+"px",u.style.left=d+"px"}else{const o=t.right-r.right,a=window.innerWidth-n.right-o,s=window.innerWidth-e.right-a,i=e.width+s,l=Math.max(i,t.width),c=window.innerWidth-uf,d=Sl(a,[uf,Math.max(uf,c-l)]);u.style.minWidth=i+"px",u.style.right=d+"px"}const o=m(),s=window.innerHeight-2*uf,l=y.scrollHeight,c=window.getComputedStyle(h),d=parseInt(c.borderTopWidth,10),f=parseInt(c.paddingTop,10),p=parseInt(c.borderBottomWidth,10),v=d+f+l+parseInt(c.paddingBottom,10)+p,w=Math.min(5*b.offsetHeight,v),k=window.getComputedStyle(y),S=parseInt(k.paddingTop,10),C=parseInt(k.paddingBottom,10),N=e.top+e.height/2-uf,E=s-N,j=b.offsetHeight/2,O=d+f+(b.offsetTop+j),R=v-O;if(O<=N){const e=o.length>0&&b===o[o.length-1].ref.current;u.style.bottom="0px";const t=h.clientHeight-y.offsetTop-y.offsetHeight,n=O+Math.max(E,j+(e?C:0)+t+p);u.style.height=n+"px"}else{const e=o.length>0&&b===o[0].ref.current;u.style.top="0px";const t=Math.max(N,d+y.offsetTop+(e?S:0)+j)+R;u.style.height=t+"px",y.scrollTop=O-N+y.offsetTop}u.style.margin="".concat(uf,"px 0"),u.style.minHeight=w+"px",u.style.maxHeight=s+"px",null===a||void 0===a||a(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,u,h,y,b,x,i.dir,a]);Ns(()=>k(),[k]);const[S,C]=e.useState();Ns(()=>{h&&C(window.getComputedStyle(h).zIndex)},[h]);const N=e.useCallback(e=>{e&&!0===v.current&&(k(),null===w||void 0===w||w(),v.current=!1)},[k,w]);return(0,Bt.jsx)(vf,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:g,onScrollButtonChange:N,children:(0,Bt.jsx)("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:(0,Bt.jsx)(Fs.div,c(c({},s),{},{ref:p,style:c({boxSizing:"border-box",maxHeight:"100%"},s.style)}))})})});mf.displayName="SelectItemAlignedPosition";var gf=e.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=uf}=e,s=o(e,Th),i=Jh(n);return(0,Bt.jsx)(fd,c(c(c({},i),s),{},{ref:t,align:r,collisionPadding:a,style:c(c({boxSizing:"border-box"},s.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});gf.displayName="SelectPopperPosition";var[vf,yf]=Kh(lf,{}),bf="SelectViewport",xf=e.forwardRef((t,n)=>{const{__scopeSelect:r,nonce:a}=t,s=o(t,Ah),i=hf(bf,r),l=yf(bf,r),u=lo(n,i.onViewportChange),d=e.useRef(0);return(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,Bt.jsx)(qh.Slot,{scope:r,children:(0,Bt.jsx)(Fs.div,c(c({"data-radix-select-viewport":"",role:"presentation"},s),{},{ref:u,style:c({position:"relative",flex:1,overflow:"hidden auto"},s.style),onScroll:os(s.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=l;if(null!==r&&void 0!==r&&r.current&&n){const e=Math.abs(d.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*uf,o=parseFloat(n.style.minHeight),a=parseFloat(n.style.height),s=Math.max(o,a);if(s<r){const o=s+e,a=Math.min(r,o),i=o-a;n.style.height=a+"px","0px"===n.style.bottom&&(t.scrollTop=i>0?i:0,n.style.justifyContent="flex-end")}}}d.current=t.scrollTop})}))})]})});xf.displayName=bf;var wf="SelectGroup",[kf,Sf]=Kh(wf),Cf=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=o(e,_h),a=Os();return(0,Bt.jsx)(kf,{scope:n,id:a,children:(0,Bt.jsx)(Fs.div,c(c({role:"group","aria-labelledby":a},r),{},{ref:t}))})});Cf.displayName=wf;var Nf="SelectLabel",Ef=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=o(e,Mh),a=Sf(Nf,n);return(0,Bt.jsx)(Fs.div,c(c({id:a.id},r),{},{ref:t}))});Ef.displayName=Nf;var jf="SelectItem",[Of,Rf]=Kh(jf),Tf=e.forwardRef((t,n)=>{const{__scopeSelect:r,value:a,disabled:s=!1,textValue:i}=t,l=o(t,Ph),u=Yh(jf,r),d=hf(jf,r),h=u.value===a,[f,p]=e.useState(null!==i&&void 0!==i?i:""),[m,g]=e.useState(!1),v=lo(n,e=>{var t;return null===(t=d.itemRefCallback)||void 0===t?void 0:t.call(d,e,a,s)}),y=Os(),b=e.useRef("touch"),x=()=>{s||(u.onValueChange(a),u.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,Bt.jsx)(Of,{scope:r,value:a,disabled:s,textId:y,isSelected:h,onItemTextChange:e.useCallback(e=>{p(t=>{var n;return t||(null!==(n=null===e||void 0===e?void 0:e.textContent)&&void 0!==n?n:"").trim()})},[]),children:(0,Bt.jsx)(qh.ItemSlot,{scope:r,value:a,disabled:s,textValue:f,children:(0,Bt.jsx)(Fs.div,c(c({role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":h&&m,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},l),{},{ref:v,onFocus:os(l.onFocus,()=>g(!0)),onBlur:os(l.onBlur,()=>g(!1)),onClick:os(l.onClick,()=>{"mouse"!==b.current&&x()}),onPointerUp:os(l.onPointerUp,()=>{"mouse"===b.current&&x()}),onPointerDown:os(l.onPointerDown,e=>{b.current=e.pointerType}),onPointerMove:os(l.onPointerMove,e=>{var t;(b.current=e.pointerType,s)?null===(t=d.onItemLeave)||void 0===t||t.call(d):"mouse"===b.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:os(l.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null===(t=d.onItemLeave)||void 0===t||t.call(d))}),onKeyDown:os(l.onKeyDown,e=>{var t;""!==(null===(t=d.searchRef)||void 0===t?void 0:t.current)&&" "===e.key||(Hh.includes(e.key)&&x()," "===e.key&&e.preventDefault())})}))})})});Tf.displayName=jf;var Af="SelectItemText",_f=e.forwardRef((t,n)=>{const{__scopeSelect:r,className:a,style:s}=t,i=o(t,Ih),l=Yh(Af,r),u=hf(Af,r),d=Rf(Af,r),h=Zh(Af,r),[f,p]=e.useState(null),m=lo(n,e=>p(e),d.onItemTextChange,e=>{var t;return null===(t=u.itemTextRefCallback)||void 0===t?void 0:t.call(u,e,d.value,d.disabled)}),g=null===f||void 0===f?void 0:f.textContent,v=e.useMemo(()=>(0,Bt.jsx)("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=h;return Ns(()=>(y(v),()=>b(v)),[y,b,v]),(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Fs.span,c(c({id:d.textId},i),{},{ref:m})),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Rs.createPortal(i.children,l.valueNode):null]})});_f.displayName=Af;var Mf="SelectItemIndicator",Pf=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=o(e,Lh);return Rf(Mf,n).isSelected?(0,Bt.jsx)(Fs.span,c(c({"aria-hidden":!0},r),{},{ref:t})):null});Pf.displayName=Mf;var If="SelectScrollUpButton",Lf=e.forwardRef((t,n)=>{const r=hf(If,t.__scopeSelect),o=yf(If,t.__scopeSelect),[a,s]=e.useState(!1),i=lo(n,o.onScrollButtonChange);return Ns(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?(0,Bt.jsx)(Df,c(c({},t),{},{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});Lf.displayName=If;var Ff="SelectScrollDownButton",zf=e.forwardRef((t,n)=>{const r=hf(Ff,t.__scopeSelect),o=yf(Ff,t.__scopeSelect),[a,s]=e.useState(!1),i=lo(n,o.onScrollButtonChange);return Ns(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;s(n)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?(0,Bt.jsx)(Df,c(c({},t),{},{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});zf.displayName=Ff;var Df=e.forwardRef((t,n)=>{const{__scopeSelect:r,onAutoScroll:a}=t,s=o(t,Fh),i=hf("SelectScrollButton",r),l=e.useRef(null),u=Vh(r),d=e.useCallback(()=>{null!==l.current&&(window.clearInterval(l.current),l.current=null)},[]);return e.useEffect(()=>()=>d(),[d]),Ns(()=>{var e;const t=u().find(e=>e.ref.current===document.activeElement);null===t||void 0===t||null===(e=t.ref.current)||void 0===e||e.scrollIntoView({block:"nearest"})},[u]),(0,Bt.jsx)(Fs.div,c(c({"aria-hidden":!0},s),{},{ref:n,style:c({flexShrink:0},s.style),onPointerDown:os(s.onPointerDown,()=>{null===l.current&&(l.current=window.setInterval(a,50))}),onPointerMove:os(s.onPointerMove,()=>{var e;null===(e=i.onItemLeave)||void 0===e||e.call(i),null===l.current&&(l.current=window.setInterval(a,50))}),onPointerLeave:os(s.onPointerLeave,()=>{d()})}))}),Bf=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=o(e,zh);return(0,Bt.jsx)(Fs.div,c(c({"aria-hidden":!0},r),{},{ref:t}))});Bf.displayName="SelectSeparator";var Uf="SelectArrow",Hf=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=o(e,Dh),a=Jh(n),s=Yh(Uf,n),i=hf(Uf,n);return s.open&&"popper"===i.position?(0,Bt.jsx)(pd,c(c(c({},a),r),{},{ref:t})):null});Hf.displayName=Uf;var Wf=e.forwardRef((t,n)=>{let{__scopeSelect:r,value:a}=t,s=o(t,Bh);const i=e.useRef(null),l=lo(n,i),u=Sd(a);return e.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(u!==a&&n){const t=new Event("change",{bubbles:!0});n.call(e,a),e.dispatchEvent(t)}},[u,a]),(0,Bt.jsx)(Fs.select,c(c({},s),{},{style:c(c({},Cd),s.style),ref:l,defaultValue:a}))});function qf(e){return""===e||void 0===e}function Vf(t){const n=zs(t),r=e.useRef(""),o=e.useRef(0),a=e.useCallback(e=>{const t=r.current+e;n(t),function e(t){r.current=t,window.clearTimeout(o.current),""!==t&&(o.current=window.setTimeout(()=>e(""),1e3))}(t)},[n]),s=e.useCallback(()=>{r.current="",window.clearTimeout(o.current)},[]);return e.useEffect(()=>()=>window.clearTimeout(o.current),[]),[r,a,s]}function Gf(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=(s=e,i=Math.max(o,0),s.map((e,t)=>s[(i+t)%s.length]));var s,i;1===r.length&&(a=a.filter(e=>e!==n));const l=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}Wf.displayName="SelectBubbleInput";var Kf=ef,$f=nf,Jf=of,Qf=af,Yf=sf,Xf=cf,Zf=xf,ep=Ef,tp=Tf,np=_f,rp=Pf,op=Lf,ap=zf,sp=Bf;const ip=fl("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),lp=fl("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),cp=fl("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),up=["className","children"],dp=["className"],hp=["className"],fp=["className","children","position"],pp=["className"],mp=["className","children"],gp=["className"],vp=Kf,yp=Jf,bp=e.forwardRef((e,t)=>{let{className:n,children:r}=e,a=o(e,up);return(0,Bt.jsxs)($f,c(c({ref:t,className:Ua("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n)},a),{},{children:[r,(0,Bt.jsx)(Qf,{asChild:!0,children:(0,Bt.jsx)(ip,{className:"h-4 w-4 opacity-50"})})]}))});bp.displayName=$f.displayName;const xp=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,dp);return(0,Bt.jsx)(op,c(c({ref:t,className:Ua("flex cursor-default items-center justify-center py-1",n)},r),{},{children:(0,Bt.jsx)(lp,{className:"h-4 w-4"})}))});xp.displayName=op.displayName;const wp=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,hp);return(0,Bt.jsx)(ap,c(c({ref:t,className:Ua("flex cursor-default items-center justify-center py-1",n)},r),{},{children:(0,Bt.jsx)(ip,{className:"h-4 w-4"})}))});wp.displayName=ap.displayName;const kp=e.forwardRef((e,t)=>{let{className:n,children:r,position:a="popper"}=e,s=o(e,fp);return(0,Bt.jsx)(Yf,{children:(0,Bt.jsxs)(Xf,c(c({ref:t,className:Ua("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:a},s),{},{children:[(0,Bt.jsx)(xp,{}),(0,Bt.jsx)(Zf,{className:Ua("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,Bt.jsx)(wp,{})]}))})});kp.displayName=Xf.displayName;e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,pp);return(0,Bt.jsx)(ep,c({ref:t,className:Ua("px-2 py-1.5 text-sm font-semibold",n)},r))}).displayName=ep.displayName;const Sp=e.forwardRef((e,t)=>{let{className:n,children:r}=e,a=o(e,mp);return(0,Bt.jsxs)(tp,c(c({ref:t,className:Ua("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n)},a),{},{children:[(0,Bt.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,Bt.jsx)(rp,{children:(0,Bt.jsx)(cp,{className:"h-4 w-4"})})}),(0,Bt.jsx)(np,{children:r})]}))});Sp.displayName=tp.displayName;e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,gp);return(0,Bt.jsx)(sp,c({ref:t,className:Ua("-mx-1 my-1 h-px bg-muted",n)},r))}).displayName=sp.displayName;const Cp=["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"],Np=["__scopeSwitch"],Ep=["__scopeSwitch","control","checked","bubbles"];var jp="Switch",[Op,Rp]=is(jp),[Tp,Ap]=Op(jp),_p=e.forwardRef((t,n)=>{const{__scopeSwitch:r,name:a,checked:s,defaultChecked:i,required:l,disabled:u,value:d="on",onCheckedChange:h,form:f}=t,p=o(t,Cp),[m,g]=e.useState(null),v=lo(n,e=>g(e)),y=e.useRef(!1),b=!m||(f||!!m.closest("form")),[x,w]=Bs({prop:s,defaultProp:null!==i&&void 0!==i&&i,onChange:h,caller:jp});return(0,Bt.jsxs)(Tp,{scope:r,checked:x,disabled:u,children:[(0,Bt.jsx)(Fs.button,c(c({type:"button",role:"switch","aria-checked":x,"aria-required":l,"data-state":Lp(x),"data-disabled":u?"":void 0,disabled:u,value:d},p),{},{ref:v,onClick:os(t.onClick,e=>{w(e=>!e),b&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})),b&&(0,Bt.jsx)(Ip,{control:m,bubbles:!y.current,name:a,value:d,checked:x,required:l,disabled:u,form:f,style:{transform:"translateX(-100%)"}})]})});_p.displayName=jp;var Mp="SwitchThumb",Pp=e.forwardRef((e,t)=>{const{__scopeSwitch:n}=e,r=o(e,Np),a=Ap(Mp,n);return(0,Bt.jsx)(Fs.span,c(c({"data-state":Lp(a.checked),"data-disabled":a.disabled?"":void 0},r),{},{ref:t}))});Pp.displayName=Mp;var Ip=e.forwardRef((t,n)=>{let{__scopeSwitch:r,control:a,checked:s,bubbles:i=!0}=t,l=o(t,Ep);const u=e.useRef(null),d=lo(u,n),h=Sd(s),f=Wu(a);return e.useEffect(()=>{const e=u.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(h!==s&&n){const t=new Event("click",{bubbles:i});n.call(e,s),e.dispatchEvent(t)}},[h,s,i]),(0,Bt.jsx)("input",c(c({type:"checkbox","aria-hidden":!0,defaultChecked:s},l),{},{tabIndex:-1,ref:d,style:c(c(c({},l.style),f),{},{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});function Lp(e){return e?"checked":"unchecked"}Ip.displayName="SwitchBubbleInput";var Fp=_p,zp=Pp;const Dp=["className"],Bp=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Dp);return(0,Bt.jsx)(Fp,c(c({className:Ua("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n)},r),{},{ref:t,children:(0,Bt.jsx)(zp,{className:Ua("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}))});Bp.displayName=Fp.displayName;const Up=["children"],Hp=["children"];function Wp(t){const n=qp(t),r=e.forwardRef((t,r)=>{const{children:a}=t,s=o(t,Up),i=e.Children.toArray(a),l=i.find(Gp);if(l){const t=l.props.children,o=i.map(n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,o):null}))}return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}function qp(t){const n=e.forwardRef((t,n)=>{const{children:r}=t,a=o(t,Hp);if(e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=c({},t);for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){const e=a(...arguments);return o(...arguments),e}:o&&(n[r]=o):"style"===r?n[r]=c(c({},o),a):"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return c(c({},e),n)}(a,r.props);return r.type!==e.Fragment&&(o.ref=n?io(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var Vp=Symbol("radix.slottable");function Gp(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===Vp}const Kp=["__scopeDialog"],$p=["forceMount"],Jp=["__scopeDialog"],Qp=["forceMount"],Yp=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],Xp=["__scopeDialog"],Zp=["__scopeDialog"],em=["__scopeDialog"];var tm="Dialog",[nm,rm]=is(tm),[om,am]=nm(tm),sm=t=>{const{__scopeDialog:n,children:r,open:o,defaultOpen:a,onOpenChange:s,modal:i=!0}=t,l=e.useRef(null),c=e.useRef(null),[u,d]=Bs({prop:o,defaultProp:null!==a&&void 0!==a&&a,onChange:s,caller:tm});return(0,Bt.jsx)(om,{scope:n,triggerRef:l,contentRef:c,contentId:Os(),titleId:Os(),descriptionId:Os(),open:u,onOpenChange:d,onOpenToggle:e.useCallback(()=>d(e=>!e),[d]),modal:i,children:r})};sm.displayName=tm;var im="DialogTrigger",lm=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=o(e,Kp),a=am(im,n),s=lo(t,a.triggerRef);return(0,Bt.jsx)(Fs.button,c(c({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Om(a.open)},r),{},{ref:s,onClick:os(e.onClick,a.onOpenToggle)}))});lm.displayName=im;var cm="DialogPortal",[um,dm]=nm(cm,{forceMount:void 0}),hm=t=>{const{__scopeDialog:n,forceMount:r,children:o,container:a}=t,s=am(cm,n);return(0,Bt.jsx)(um,{scope:n,forceMount:r,children:e.Children.map(o,e=>(0,Bt.jsx)(ci,{present:r||s.open,children:(0,Bt.jsx)(gd,{asChild:!0,container:a,children:e})}))})};hm.displayName=cm;var fm="DialogOverlay",pm=e.forwardRef((e,t)=>{const n=dm(fm,e.__scopeDialog),{forceMount:r=n.forceMount}=e,a=o(e,$p),s=am(fm,e.__scopeDialog);return s.modal?(0,Bt.jsx)(ci,{present:r||s.open,children:(0,Bt.jsx)(gm,c(c({},a),{},{ref:t}))}):null});pm.displayName=fm;var mm=Wp("DialogOverlay.RemoveScroll"),gm=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=o(e,Jp),a=am(fm,n);return(0,Bt.jsx)(Ch,{as:mm,allowPinchZoom:!0,shards:[a.contentRef],children:(0,Bt.jsx)(Fs.div,c(c({"data-state":Om(a.open)},r),{},{ref:t,style:c({pointerEvents:"auto"},r.style)}))})}),vm="DialogContent",ym=e.forwardRef((e,t)=>{const n=dm(vm,e.__scopeDialog),{forceMount:r=n.forceMount}=e,a=o(e,Qp),s=am(vm,e.__scopeDialog);return(0,Bt.jsx)(ci,{present:r||s.open,children:s.modal?(0,Bt.jsx)(bm,c(c({},a),{},{ref:t})):(0,Bt.jsx)(xm,c(c({},a),{},{ref:t}))})});ym.displayName=vm;var bm=e.forwardRef((t,n)=>{const r=am(vm,t.__scopeDialog),o=e.useRef(null),a=lo(n,r.contentRef,o);return e.useEffect(()=>{const e=o.current;if(e)return Md(e)},[]),(0,Bt.jsx)(wm,c(c({},t),{},{ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:os(t.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:os(t.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:os(t.onFocusOutside,e=>e.preventDefault())}))}),xm=e.forwardRef((t,n)=>{const r=am(vm,t.__scopeDialog),o=e.useRef(!1),a=e.useRef(!1);return(0,Bt.jsx)(wm,c(c({},t),{},{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var n,s;(null===(n=t.onCloseAutoFocus)||void 0===n||n.call(t,e),e.defaultPrevented)||(o.current||null===(s=r.triggerRef.current)||void 0===s||s.focus(),e.preventDefault());o.current=!1,a.current=!1},onInteractOutside:e=>{var n,s;null===(n=t.onInteractOutside)||void 0===n||n.call(t,e),e.defaultPrevented||(o.current=!0,"pointerdown"===e.detail.originalEvent.type&&(a.current=!0));const i=e.target;(null===(s=r.triggerRef.current)||void 0===s?void 0:s.contains(i))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&a.current&&e.preventDefault()}}))}),wm=e.forwardRef((t,n)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:i}=t,l=o(t,Yp),u=am(vm,r),d=e.useRef(null),h=lo(n,d);return Il(),(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Ul,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:i,children:(0,Bt.jsx)(Tl,c(c({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Om(u.open)},l),{},{ref:h,onDismiss:()=>u.onOpenChange(!1)}))}),(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(_m,{titleId:u.titleId}),(0,Bt.jsx)(Mm,{contentRef:d,descriptionId:u.descriptionId})]})]})}),km="DialogTitle",Sm=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=o(e,Xp),a=am(km,n);return(0,Bt.jsx)(Fs.h2,c(c({id:a.titleId},r),{},{ref:t}))});Sm.displayName=km;var Cm="DialogDescription",Nm=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=o(e,Zp),a=am(Cm,n);return(0,Bt.jsx)(Fs.p,c(c({id:a.descriptionId},r),{},{ref:t}))});Nm.displayName=Cm;var Em="DialogClose",jm=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=o(e,em),a=am(Em,n);return(0,Bt.jsx)(Fs.button,c(c({type:"button"},r),{},{ref:t,onClick:os(e.onClick,()=>a.onOpenChange(!1))}))});function Om(e){return e?"open":"closed"}jm.displayName=Em;var Rm="DialogTitleWarning",[Tm,Am]=function(t,n){const r=e.createContext(n),a=t=>{const{children:n}=t,a=o(t,as),s=e.useMemo(()=>a,Object.values(a));return(0,Bt.jsx)(r.Provider,{value:s,children:n})};return a.displayName=t+"Provider",[a,function(o){const a=e.useContext(r);if(a)return a;if(void 0!==n)return n;throw new Error("`".concat(o,"` must be used within `").concat(t,"`"))}]}(Rm,{contentName:vm,titleName:km,docsSlug:"dialog"}),_m=t=>{let{titleId:n}=t;const r=Am(Rm),o="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return e.useEffect(()=>{if(n){document.getElementById(n)||console.error(o)}},[o,n]),null},Mm=t=>{let{contentRef:n,descriptionId:r}=t;const o=Am("DialogDescriptionWarning"),a="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(o.contentName,"}.");return e.useEffect(()=>{var e;const t=null===(e=n.current)||void 0===e?void 0:e.getAttribute("aria-describedby");if(r&&t){document.getElementById(r)||console.warn(a)}},[a,n,r]),null},Pm=sm,Im=lm,Lm=hm,Fm=pm,zm=ym,Dm=Sm,Bm=Nm,Um=jm;const Hm=fl("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Wm=["className"],qm=["className","children"],Vm=["className"],Gm=["className"],Km=["className"],$m=["className"],Jm=Pm,Qm=Im,Ym=Lm,Xm=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Wm);return(0,Bt.jsx)(Fm,c({ref:t,className:Ua("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},r))});Xm.displayName=Fm.displayName;const Zm=e.forwardRef((e,t)=>{let{className:n,children:r}=e,a=o(e,qm);return(0,Bt.jsxs)(Ym,{children:[(0,Bt.jsx)(Xm,{}),(0,Bt.jsxs)(zm,c(c({ref:t,className:Ua("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},a),{},{children:[r,(0,Bt.jsxs)(Um,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,Bt.jsx)(Hm,{className:"h-4 w-4"}),(0,Bt.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});Zm.displayName=zm.displayName;const eg=e=>{let{className:t}=e,n=o(e,Vm);return(0,Bt.jsx)("div",c({className:Ua("flex flex-col space-y-1.5 text-center sm:text-left",t)},n))};eg.displayName="DialogHeader";const tg=e=>{let{className:t}=e,n=o(e,Gm);return(0,Bt.jsx)("div",c({className:Ua("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};tg.displayName="DialogFooter";const ng=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Km);return(0,Bt.jsx)(Dm,c({ref:t,className:Ua("text-lg font-semibold leading-none tracking-tight",n)},r))});ng.displayName=Dm.displayName;e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,$m);return(0,Bt.jsx)(Bm,c({ref:t,className:Ua("text-sm text-muted-foreground",n)},r))}).displayName=Bm.displayName;const rg=e=>{let{streamUrl:t,name:n,className:r="",showAlways:o=!1,isActive:a=!1}=e;return t&&(o||a)?(0,Bt.jsx)("div",{className:"bg-black relative overflow-hidden ".concat(r),children:(0,Bt.jsx)("iframe",{src:t,className:"w-full h-full",frameBorder:"0",allow:"autoplay",title:n,style:{pointerEvents:"none"}})}):(0,Bt.jsx)("div",{className:"bg-zinc-800 flex items-center justify-center ".concat(r),children:(0,Bt.jsx)("span",{className:"text-lg font-bold text-zinc-600",children:(null===n||void 0===n?void 0:n.charAt(0))||"?"})})};const og=e=>{let{categoryId:t}=e;const{categories:n}=Ht(),r=n.find(e=>e.id===t);return r?(0,Bt.jsx)("div",{className:"w-1 h-full absolute left-0 top-0",style:{backgroundColor:r.color}}):null},ag=fl("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),sg=fl("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),ig=fl("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function lg(){const{t:t}=no(),{pilots:n,categories:r,addPilot:o,updatePilot:a,deletePilot:s,togglePilotActive:i}=Ht(),[l,u]=(0,e.useState)({name:"",carNumber:"",picture:"",streamUrl:"",categoryId:null,startOrder:""}),[d,h]=(0,e.useState)(null),[f,p]=(0,e.useState)(!1),m=()=>{if(!d.name.trim())return void Xi.error(t("pilots.pilotName")+" is required");const e=c(c({},d),{},{startOrder:parseInt(d.startOrder)||999});a(d.id,e),h(null),p(!1),Xi.success("Pilot updated successfully")},g=[...n].sort((e,t)=>(e.startOrder||999)-(t.startOrder||999));return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsx)(es,{children:(0,Bt.jsx)(ts,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:t("pilots.addNewPilot")})}),(0,Bt.jsx)(rs,{children:(0,Bt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)(kl,{htmlFor:"pilot-name",className:"text-white",children:[t("pilots.pilotName")," *"]}),(0,Bt.jsx)(Ga,{id:"pilot-name",value:l.name,onChange:e=>u(c(c({},l),{},{name:e.target.value})),placeholder:t("pilots.placeholder.name"),className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-pilot-name"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{htmlFor:"pilot-car-number",className:"text-white",children:t("pilots.carNumber")}),(0,Bt.jsx)(Ga,{id:"pilot-car-number",value:l.carNumber,onChange:e=>u(c(c({},l),{},{carNumber:e.target.value})),placeholder:t("pilots.placeholder.carNumber"),className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-pilot-car-number"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{htmlFor:"pilot-order",className:"text-white",children:t("pilots.startOrder")}),(0,Bt.jsx)(Ga,{id:"pilot-order",type:"number",value:l.startOrder,onChange:e=>u(c(c({},l),{},{startOrder:e.target.value})),placeholder:t("pilots.placeholder.startOrder"),className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-pilot-order"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{htmlFor:"pilot-category",className:"text-white",children:t("pilots.category")}),(0,Bt.jsxs)(vp,{value:l.categoryId||"none",onValueChange:e=>u(c(c({},l),{},{categoryId:"none"===e?null:e})),children:[(0,Bt.jsx)(bp,{className:"bg-[#09090B] border-zinc-700 text-white",id:"pilot-category",children:(0,Bt.jsx)(yp,{placeholder:t("common.select")})}),(0,Bt.jsxs)(kp,{children:[(0,Bt.jsx)(Sp,{value:"none",children:t("common.none")}),r.map(e=>(0,Bt.jsx)(Sp,{value:e.id,children:e.name},e.id))]})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{htmlFor:"pilot-picture",className:"text-white",children:t("pilots.pictureUrl")}),(0,Bt.jsx)(Ga,{id:"pilot-picture",value:l.picture,onChange:e=>u(c(c({},l),{},{picture:e.target.value})),placeholder:t("pilots.placeholder.pictureUrl"),className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-pilot-picture"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{htmlFor:"pilot-stream",className:"text-white",children:t("pilots.streamUrl")}),(0,Bt.jsx)(Ga,{id:"pilot-stream",value:l.streamUrl,onChange:e=>u(c(c({},l),{},{streamUrl:e.target.value})),placeholder:t("pilots.placeholder.streamUrl"),className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-pilot-stream"})]}),(0,Bt.jsx)("div",{className:"flex items-end",children:(0,Bt.jsxs)(qa,{onClick:()=>{if(!l.name.trim())return void Xi.error(t("pilots.pilotName")+" is required");const e=c(c({},l),{},{startOrder:parseInt(l.startOrder)||999});o(e),u({name:"",carNumber:"",picture:"",streamUrl:"",categoryId:null,startOrder:""}),Xi.success("Pilot added successfully")},className:"w-full bg-[#FF4500] hover:bg-[#FF4500]/90","data-testid":"button-add-pilot",children:[(0,Bt.jsx)(ag,{className:"w-4 h-4 mr-2"}),t("pilots.addPilot")]})})]})})]}),(0,Bt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(e=>(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800 relative","data-testid":"pilot-card-".concat(e.id),children:[(0,Bt.jsx)(og,{categoryId:e.categoryId}),(0,Bt.jsx)(rs,{className:"pt-6",children:(0,Bt.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Bt.jsx)(rg,{streamUrl:e.streamUrl,name:e.name,showAlways:!0,className:"w-20 h-20 rounded flex-shrink-0"}),(0,Bt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsxs)("span",{className:"text-zinc-500 text-sm",children:["#",e.startOrder||"?"]}),e.carNumber&&(0,Bt.jsx)("span",{className:"bg-[#FF4500] text-white text-xs font-bold px-1.5 py-0.5 rounded",children:e.carNumber}),(0,Bt.jsx)("h3",{className:"font-bold text-lg uppercase truncate text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e.name})]}),e.streamUrl&&(0,Bt.jsx)("p",{className:"text-xs text-zinc-500 truncate font-mono mt-1",children:e.streamUrl}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,Bt.jsx)(Bp,{checked:e.isActive,onCheckedChange:()=>i(e.id),className:"data-[state=checked]:bg-[#22C55E]","data-testid":"switch-pilot-active-".concat(e.id)}),(0,Bt.jsx)("span",{className:"text-sm text-white",children:e.isActive?t("status.active"):t("status.inactive")})]})]}),(0,Bt.jsxs)("div",{className:"flex gap-1",children:[(0,Bt.jsxs)(Jm,{open:f&&(null===d||void 0===d?void 0:d.id)===e.id,onOpenChange:e=>{p(e),e||h(null)},children:[(0,Bt.jsx)(Qm,{asChild:!0,children:(0,Bt.jsx)(qa,{variant:"ghost",size:"icon",onClick:()=>h(c({},e)),className:"text-blue-500 hover:text-blue-400 hover:bg-blue-500/10","data-testid":"button-edit-pilot-".concat(e.id),children:(0,Bt.jsx)(sg,{className:"w-4 h-4"})})}),(0,Bt.jsxs)(Zm,{className:"bg-[#18181B] border-zinc-800 text-white",children:[(0,Bt.jsx)(eg,{children:(0,Bt.jsxs)(ng,{className:"text-white",children:[t("common.edit")," ",t("tabs.pilots")]})}),d&&(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)(kl,{className:"text-white",children:[t("pilots.pilotName")," *"]}),(0,Bt.jsx)(Ga,{value:d.name,onChange:e=>h(c(c({},d),{},{name:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("pilots.carNumber")}),(0,Bt.jsx)(Ga,{value:d.carNumber||"",onChange:e=>h(c(c({},d),{},{carNumber:e.target.value})),placeholder:t("pilots.placeholder.carNumber"),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("pilots.startOrder")}),(0,Bt.jsx)(Ga,{type:"number",value:d.startOrder||"",onChange:e=>h(c(c({},d),{},{startOrder:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("pilots.category")}),(0,Bt.jsxs)(vp,{value:d.categoryId||"none",onValueChange:e=>h(c(c({},d),{},{categoryId:"none"===e?null:e})),children:[(0,Bt.jsx)(bp,{className:"bg-[#09090B] border-zinc-700 text-white",children:(0,Bt.jsx)(yp,{placeholder:t("common.select")})}),(0,Bt.jsxs)(kp,{children:[(0,Bt.jsx)(Sp,{value:"none",children:t("common.none")}),r.map(e=>(0,Bt.jsx)(Sp,{value:e.id,children:e.name},e.id))]})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("pilots.pictureUrl")}),(0,Bt.jsx)(Ga,{value:d.picture,onChange:e=>h(c(c({},d),{},{picture:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("pilots.streamUrl")}),(0,Bt.jsx)(Ga,{value:d.streamUrl,onChange:e=>h(c(c({},d),{},{streamUrl:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]})]}),(0,Bt.jsx)(tg,{children:(0,Bt.jsx)(qa,{onClick:m,className:"bg-[#FF4500] hover:bg-[#FF4500]/90",children:t("common.save")})})]})]}),(0,Bt.jsx)(qa,{variant:"ghost",size:"icon",onClick:()=>{window.confirm(t("common.delete")+"?")&&(s(e.id),Xi.success("Pilot deleted"))},className:"text-red-500 hover:text-red-400 hover:bg-red-500/10","data-testid":"button-delete-pilot-".concat(e.id),children:(0,Bt.jsx)(ig,{className:"w-4 h-4"})})]})]})})]},e.id))}),0===g.length&&(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:t("pilots.noPilots")})]})}function cg(){const{t:t}=no(),{categories:n,addCategory:r,updateCategory:o,deleteCategory:a}=Ht(),[s,i]=(0,e.useState)({name:"",color:"#FF4500"}),[l,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),f=()=>{l.name.trim()?(o(l.id,l),u(null),h(!1),Xi.success("Category updated successfully")):Xi.error(t("categories.categoryName")+" is required")};return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsx)(es,{children:(0,Bt.jsx)(ts,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:t("categories.addNewCategory")})}),(0,Bt.jsx)(rs,{children:(0,Bt.jsxs)("div",{className:"flex gap-4",children:[(0,Bt.jsxs)("div",{className:"flex-1",children:[(0,Bt.jsxs)(kl,{className:"text-white",children:[t("categories.categoryName")," *"]}),(0,Bt.jsx)(Ga,{value:s.name,onChange:e=>i(c(c({},s),{},{name:e.target.value})),placeholder:t("categories.placeholder.name"),className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-category-name"})]}),(0,Bt.jsxs)("div",{className:"w-32",children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("categories.color")}),(0,Bt.jsx)(Ga,{type:"color",value:s.color,onChange:e=>i(c(c({},s),{},{color:e.target.value})),className:"h-10 cursor-pointer","data-testid":"input-category-color"})]}),(0,Bt.jsx)("div",{className:"flex items-end",children:(0,Bt.jsxs)(qa,{onClick:()=>{s.name.trim()?(r(s),i({name:"",color:"#FF4500"}),Xi.success("Category added successfully")):Xi.error(t("categories.categoryName")+" is required")},className:"bg-[#FF4500] hover:bg-[#FF4500]/90","data-testid":"button-add-category",children:[(0,Bt.jsx)(ag,{className:"w-4 h-4 mr-2"}),t("common.add")]})})]})})]}),(0,Bt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(e=>(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800 relative","data-testid":"category-card-".concat(e.id),children:[(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-2",style:{backgroundColor:e.color}}),(0,Bt.jsx)(rs,{className:"pt-6 pl-6",children:(0,Bt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Bt.jsxs)("div",{className:"flex-1",children:[(0,Bt.jsx)("h3",{className:"font-bold text-xl uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif",color:e.color},children:e.name}),(0,Bt.jsx)("p",{className:"text-xs text-zinc-500 mt-1",children:e.color})]}),(0,Bt.jsxs)("div",{className:"flex gap-1",children:[(0,Bt.jsxs)(Jm,{open:d&&(null===l||void 0===l?void 0:l.id)===e.id,onOpenChange:e=>{h(e),e||u(null)},children:[(0,Bt.jsx)(Qm,{asChild:!0,children:(0,Bt.jsx)(qa,{variant:"ghost",size:"icon",onClick:()=>u(c({},e)),className:"text-blue-500 hover:text-blue-400 hover:bg-blue-500/10","data-testid":"button-edit-category-".concat(e.id),children:(0,Bt.jsx)(sg,{className:"w-4 h-4"})})}),(0,Bt.jsxs)(Zm,{className:"bg-[#18181B] border-zinc-800 text-white",children:[(0,Bt.jsx)(eg,{children:(0,Bt.jsxs)(ng,{className:"text-white",children:[t("common.edit")," ",t("tabs.categories")]})}),l&&(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)(kl,{className:"text-white",children:[t("categories.categoryName")," *"]}),(0,Bt.jsx)(Ga,{value:l.name,onChange:e=>u(c(c({},l),{},{name:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("categories.color")}),(0,Bt.jsx)(Ga,{type:"color",value:l.color,onChange:e=>u(c(c({},l),{},{color:e.target.value})),className:"h-10 cursor-pointer"})]})]}),(0,Bt.jsx)(tg,{children:(0,Bt.jsx)(qa,{onClick:f,className:"bg-[#FF4500] hover:bg-[#FF4500]/90",children:t("common.save")})})]})]}),(0,Bt.jsx)(qa,{variant:"ghost",size:"icon",onClick:()=>{window.confirm(t("common.delete")+"?")&&(a(e.id),Xi.success("Category deleted"))},className:"text-red-500 hover:text-red-400 hover:bg-red-500/10","data-testid":"button-delete-category-".concat(e.id),children:(0,Bt.jsx)(ig,{className:"w-4 h-4"})})]})]})})]},e.id))}),0===n.length&&(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:t("categories.noCategories")})]})}const ug=fl("flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),dg=fl("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),hg=fl("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),fg=fl("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),pg=fl("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);function mg(){const{t:t}=no(),{eventName:n,setEventName:r,stages:o,currentStageId:a,setCurrentStageId:s,addStage:i,updateStage:l,deleteStage:u}=Ht(),d=[{id:"SS",name:t("theRace.stageTypes.ss"),description:"Point-to-point timed stage",icon:ug},{id:"Lap Race",name:t("theRace.stageTypes.lapRace"),description:"Circuit racing with multiple laps",icon:dg},{id:"Liaison",name:t("theRace.stageTypes.liaison"),description:"Transfer section between stages",icon:hg},{id:"Service Park",name:t("theRace.stageTypes.servicePark"),description:"Service/repair period",icon:fg}],[h,f]=(0,e.useState)({name:"",type:"SS",ssNumber:"",startTime:"",numberOfLaps:5}),[p,m]=(0,e.useState)(null),[g,v]=(0,e.useState)(!1),y=()=>{p.name.trim()?(l(p.id,p),m(null),v(!1),Xi.success("Updated successfully")):Xi.error(t("theRace.stageName")+" is required")},b=[...o].sort((e,t)=>e.startTime?t.startTime?e.startTime.localeCompare(t.startTime):-1:1),x=o.find(e=>e.id===a),w="Lap Race"===h.type,k="SS"===h.type,S=e=>{const t=d.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.icon)||ug},C=e=>{switch(e){case"SS":return"text-[#FF4500]";case"Lap Race":return"text-[#FACC15]";case"Liaison":return"text-blue-400";case"Service Park":return"text-green-400";default:return"text-zinc-400"}};return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800 border-l-4 border-l-[#FF4500]",children:[(0,Bt.jsx)(es,{children:(0,Bt.jsxs)(ts,{className:"uppercase text-white flex items-center gap-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)(pg,{className:"w-5 h-5 text-[#FF4500]"}),t("theRace.eventName")]})}),(0,Bt.jsx)(rs,{children:(0,Bt.jsx)(Ga,{value:n,onChange:e=>r(e.target.value),placeholder:t("theRace.eventNamePlaceholder"),className:"bg-[#09090B] border-zinc-700 text-white text-lg","data-testid":"input-event-name"})})]}),(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsx)(es,{children:(0,Bt.jsxs)(ts,{className:"uppercase text-white flex items-center gap-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)(ag,{className:"w-5 h-5"}),t("theRace.addNewStage")]})}),(0,Bt.jsxs)(rs,{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white mb-2 block",children:t("theRace.stageType")}),(0,Bt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:d.map(e=>{const t=e.icon;return(0,Bt.jsxs)("button",{onClick:()=>f(c(c({},h),{},{type:e.id})),className:"p-3 rounded-lg border-2 text-left transition-all ".concat(h.type===e.id?"border-[#FF4500] bg-[#FF4500]/10":"border-zinc-700 hover:border-zinc-500"),"data-testid":"stage-type-".concat(e.id),children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(t,{className:"w-4 h-4 ".concat(C(e.id))}),(0,Bt.jsx)("span",{className:"font-bold text-sm text-white",children:e.id})]}),(0,Bt.jsx)("p",{className:"text-xs text-zinc-400 mt-1",children:e.description})]},e.id)})})]}),(0,Bt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Bt.jsxs)("div",{className:"md:col-span-2",children:[(0,Bt.jsxs)(kl,{className:"text-white",children:[t("theRace.stageName")," *"]}),(0,Bt.jsx)(Ga,{value:h.name,onChange:e=>f(c(c({},h),{},{name:e.target.value})),placeholder:t("theRace.placeholder.stageName"),className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-stage-name"})]}),k&&(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("theRace.ssNumber")}),(0,Bt.jsx)(Ga,{value:h.ssNumber,onChange:e=>f(c(c({},h),{},{ssNumber:e.target.value})),placeholder:t("theRace.placeholder.ssNumber"),className:"bg-[#09090B] border-zinc-700 text-white"})]}),w&&(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("theRace.numberOfLaps")}),(0,Bt.jsx)(Ga,{type:"number",min:"1",value:h.numberOfLaps,onChange:e=>f(c(c({},h),{},{numberOfLaps:parseInt(e.target.value)||1})),placeholder:t("theRace.placeholder.laps"),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("theRace.scheduledStart")}),(0,Bt.jsx)(Ga,{value:h.startTime,onChange:e=>f(c(c({},h),{},{startTime:e.target.value})),placeholder:t("theRace.placeholder.time"),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsx)("div",{className:"flex items-end",children:(0,Bt.jsxs)(qa,{onClick:()=>{h.name.trim()?(i(h),f({name:"",type:"SS",ssNumber:"",startTime:"",numberOfLaps:5}),Xi.success("Stage added successfully")):Xi.error(t("theRace.stageName")+" is required")},className:"w-full bg-[#FF4500] hover:bg-[#FF4500]/90","data-testid":"button-add-stage",children:[(0,Bt.jsx)(ag,{className:"w-4 h-4 mr-2"}),t("theRace.addStage")]})})]})]})]}),(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(es,{children:[(0,Bt.jsxs)(ts,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[t("scene1.currentStage")," (Live)"]}),(0,Bt.jsxs)(ns,{className:"text-zinc-400",children:[t("common.select")," - affects overlay display"]})]}),(0,Bt.jsxs)(rs,{children:[(0,Bt.jsxs)(vp,{value:a||"",onValueChange:s,children:[(0,Bt.jsx)(bp,{className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"select-current-stage",children:(0,Bt.jsx)(yp,{placeholder:t("common.select")})}),(0,Bt.jsx)(kp,{children:b.map(e=>{const n=S(e.type);return(0,Bt.jsx)(Sp,{value:e.id,children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(n,{className:"w-4 h-4 ".concat(C(e.type))}),"SS"===e.type&&e.ssNumber?"SS".concat(e.ssNumber," - "):"",e.name,"Lap Race"===e.type&&" (".concat(e.numberOfLaps," ").concat(t("scene3.laps").toLowerCase(),")")]})},e.id)})})]}),x&&(0,Bt.jsxs)("p",{className:"mt-2 text-[#FACC15] font-bold flex items-center gap-2",style:{fontFamily:"JetBrains Mono, monospace"},children:[(0,Bt.jsx)("span",{className:"w-2 h-2 bg-[#FACC15] rounded-full animate-pulse"}),"LIVE: ","SS"===x.type&&x.ssNumber?"SS".concat(x.ssNumber," - "):"",x.name,"Lap Race"===x.type&&" (".concat(x.numberOfLaps," ").concat(t("scene3.laps").toLowerCase(),")")]})]})]}),(0,Bt.jsx)("div",{className:"space-y-2",children:b.map(e=>{const n=S(e.type),r=g&&(null===p||void 0===p?void 0:p.id)===e.id;return(0,Bt.jsx)(Za,{className:"bg-[#18181B] border-zinc-800 ".concat(e.id===a?"border-l-4 border-l-[#FACC15]":""),"data-testid":"stage-card-".concat(e.id),children:(0,Bt.jsx)(rs,{className:"pt-6",children:(0,Bt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Bt.jsxs)("div",{className:"flex-1",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(n,{className:"w-5 h-5 ".concat(C(e.type))}),(0,Bt.jsxs)("h3",{className:"font-bold text-xl uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:["SS"===e.type&&e.ssNumber&&(0,Bt.jsxs)("span",{className:"text-[#FF4500]",children:["SS",e.ssNumber," "]}),e.name]}),(0,Bt.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(C(e.type)," bg-white/5"),children:e.type})]}),(0,Bt.jsxs)("div",{className:"flex gap-4 mt-1 text-sm text-zinc-400",children:[e.startTime&&(0,Bt.jsxs)("span",{children:[t("status.start"),": ",e.startTime]}),"Lap Race"===e.type&&(0,Bt.jsxs)("span",{className:"text-[#FACC15]",children:[e.numberOfLaps," ",t("scene3.laps").toLowerCase()]})]})]}),(0,Bt.jsxs)("div",{className:"flex gap-1",children:[(0,Bt.jsxs)(Jm,{open:r,onOpenChange:e=>{v(e),e||m(null)},children:[(0,Bt.jsx)(Qm,{asChild:!0,children:(0,Bt.jsx)(qa,{variant:"ghost",size:"icon",onClick:()=>m(c({},e)),className:"text-blue-500 hover:text-blue-400 hover:bg-blue-500/10","data-testid":"button-edit-stage-".concat(e.id),children:(0,Bt.jsx)(sg,{className:"w-4 h-4"})})}),(0,Bt.jsxs)(Zm,{className:"bg-[#18181B] border-zinc-800 text-white",children:[(0,Bt.jsx)(eg,{children:(0,Bt.jsxs)(ng,{className:"text-white",children:[t("common.edit")," Stage"]})}),p&&(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("theRace.stageType")}),(0,Bt.jsxs)(vp,{value:p.type,onValueChange:e=>m(c(c({},p),{},{type:e})),children:[(0,Bt.jsx)(bp,{className:"bg-[#09090B] border-zinc-700 text-white",children:(0,Bt.jsx)(yp,{})}),(0,Bt.jsx)(kp,{children:d.map(e=>(0,Bt.jsx)(Sp,{value:e.id,children:e.name},e.id))})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)(kl,{className:"text-white",children:[t("theRace.stageName")," *"]}),(0,Bt.jsx)(Ga,{value:p.name,onChange:e=>m(c(c({},p),{},{name:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),"SS"===p.type&&(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("theRace.ssNumber")}),(0,Bt.jsx)(Ga,{value:p.ssNumber||"",onChange:e=>m(c(c({},p),{},{ssNumber:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),"Lap Race"===p.type&&(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("theRace.numberOfLaps")}),(0,Bt.jsx)(Ga,{type:"number",min:"1",value:p.numberOfLaps||5,onChange:e=>m(c(c({},p),{},{numberOfLaps:parseInt(e.target.value)||1})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("theRace.scheduledStart")}),(0,Bt.jsx)(Ga,{value:p.startTime||"",onChange:e=>m(c(c({},p),{},{startTime:e.target.value})),placeholder:t("theRace.placeholder.time"),className:"bg-[#09090B] border-zinc-700 text-white"})]})]}),(0,Bt.jsx)(tg,{children:(0,Bt.jsx)(qa,{onClick:y,className:"bg-[#FF4500] hover:bg-[#FF4500]/90",children:t("common.save")})})]})]}),(0,Bt.jsx)(qa,{variant:"ghost",size:"icon",onClick:()=>{window.confirm(t("common.delete")+"?")&&(u(e.id),Xi.success("Stage deleted"))},className:"text-red-500 hover:text-red-400 hover:bg-red-500/10","data-testid":"button-delete-stage-".concat(e.id),children:(0,Bt.jsx)(ig,{className:"w-4 h-4"})})]})]})})},e.id)})}),0===o.length&&(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:t("theRace.noStages")})]})}const gg=["__scopeCheckbox","onKeyDown","onClick"],vg=["__scopeCheckbox","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"],yg=["__scopeCheckbox","forceMount"],bg=["__scopeCheckbox"];var xg="Checkbox",[wg,kg]=is(xg),[Sg,Cg]=wg(xg);function Ng(t){const{__scopeCheckbox:n,checked:r,children:o,defaultChecked:a,disabled:s,form:i,name:l,onCheckedChange:u,required:d,value:h="on",internal_do_not_use_render:f}=t,[p,m]=Bs({prop:r,defaultProp:null!==a&&void 0!==a&&a,onChange:u,caller:xg}),[g,v]=e.useState(null),[y,b]=e.useState(null),x=e.useRef(!1),w=!g||(!!i||!!g.closest("form")),k={checked:p,disabled:s,setChecked:m,control:g,setControl:v,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:x,required:d,defaultChecked:!Pg(a)&&a,isFormControl:w,bubbleInput:y,setBubbleInput:b};return(0,Bt.jsx)(Sg,c(c({scope:n},k),{},{children:Mg(f)?f(k):o}))}var Eg="CheckboxTrigger",jg=e.forwardRef((t,n)=>{let{__scopeCheckbox:r,onKeyDown:a,onClick:s}=t,i=o(t,gg);const{control:l,value:u,disabled:d,checked:h,required:f,setControl:p,setChecked:m,hasConsumerStoppedPropagationRef:g,isFormControl:v,bubbleInput:y}=Cg(Eg,r),b=lo(n,p),x=e.useRef(h);return e.useEffect(()=>{const e=null===l||void 0===l?void 0:l.form;if(e){const t=()=>m(x.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,m]),(0,Bt.jsx)(Fs.button,c(c({type:"button",role:"checkbox","aria-checked":Pg(h)?"mixed":h,"aria-required":f,"data-state":Ig(h),"data-disabled":d?"":void 0,disabled:d,value:u},i),{},{ref:b,onKeyDown:os(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:os(s,e=>{m(e=>!!Pg(e)||!e),y&&v&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}))});jg.displayName=Eg;var Og=e.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:s,required:i,disabled:l,value:u,onCheckedChange:d,form:h}=e,f=o(e,vg);return(0,Bt.jsx)(Ng,{__scopeCheckbox:n,checked:a,defaultChecked:s,disabled:l,required:i,onCheckedChange:d,name:r,form:h,value:u,internal_do_not_use_render:e=>{let{isFormControl:r}=e;return(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(jg,c(c({},f),{},{ref:t,__scopeCheckbox:n})),r&&(0,Bt.jsx)(_g,{__scopeCheckbox:n})]})}})});Og.displayName=xg;var Rg="CheckboxIndicator",Tg=e.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r}=e,a=o(e,yg),s=Cg(Rg,n);return(0,Bt.jsx)(ci,{present:r||Pg(s.checked)||!0===s.checked,children:(0,Bt.jsx)(Fs.span,c(c({"data-state":Ig(s.checked),"data-disabled":s.disabled?"":void 0},a),{},{ref:t,style:c({pointerEvents:"none"},e.style)}))})});Tg.displayName=Rg;var Ag="CheckboxBubbleInput",_g=e.forwardRef((t,n)=>{let{__scopeCheckbox:r}=t,a=o(t,bg);const{control:s,hasConsumerStoppedPropagationRef:i,checked:l,defaultChecked:u,required:d,disabled:h,name:f,value:p,form:m,bubbleInput:g,setBubbleInput:v}=Cg(Ag,r),y=lo(n,v),b=Sd(l),x=Wu(s);e.useEffect(()=>{const e=g;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set,r=!i.current;if(b!==l&&n){const t=new Event("click",{bubbles:r});e.indeterminate=Pg(l),n.call(e,!Pg(l)&&l),e.dispatchEvent(t)}},[g,b,l,i]);const w=e.useRef(!Pg(l)&&l);return(0,Bt.jsx)(Fs.input,c(c({type:"checkbox","aria-hidden":!0,defaultChecked:null!==u&&void 0!==u?u:w.current,required:d,disabled:h,name:f,value:p,form:m},a),{},{tabIndex:-1,ref:y,style:c(c(c({},a.style),x),{},{position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"})}))});function Mg(e){return"function"===typeof e}function Pg(e){return"indeterminate"===e}function Ig(e){return Pg(e)?"indeterminate":e?"checked":"unchecked"}_g.displayName=Ag;const Lg=["className"],Fg=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Lg);return(0,Bt.jsx)(Og,c(c({ref:t,className:Ua("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n)},r),{},{children:(0,Bt.jsx)(Tg,{className:Ua("flex items-center justify-center text-current"),children:(0,Bt.jsx)(cp,{className:"h-4 w-4"})})}))});Fg.displayName=Og.displayName;const zg=["value","onChange","placeholder","format"],Dg=e=>{let{value:t,onChange:n,placeholder:r="MM:SS.000",format:a="total"}=e,s=o(e,zg);return(0,Bt.jsx)(Ga,c({value:t,onChange:e=>{let t=e.target.value;t=t.replace(/[^0-9:.]/g,""),n(t)},placeholder:r},s))},Bg=fl("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ug=fl("square-check-big",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Hg=fl("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Wg=()=>{const e=new Date,t=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),r=String(e.getSeconds()).padStart(2,"0"),o=String(e.getMilliseconds()).padStart(3,"0");return"".concat(t,":").concat(n,":").concat(r,".").concat(o)};function qg(e){let{stage:t,pilots:n,categories:r}=e;const{t:o}=no(),{times:a,setTime:s,getTime:i,setArrivalTime:l,getArrivalTime:c,setStartTime:u,getStartTime:d}=Ht(),h=[...n].sort((e,t)=>(e.startOrder||999)-(t.startOrder||999)),f=(e,n)=>{l(e,t.id,n);const r=d(e,t.id);if(r&&n){const o=((e,t)=>{if(!e||!t)return"";try{const[n,r]=t.split(":").map(Number),o=e.split(":"),a=parseInt(o[0]),s=parseInt(o[1]);let i=3600*a+60*s+parseFloat(o[2]||0)-(3600*n+60*r);i<0&&(i+=86400);const l=Math.floor(i/60),c=(i%60).toFixed(3).padStart(6,"0");return"".concat(l,":").concat(c)}catch(Ey){return""}})(n,r);o&&s(e,t.id,o)}},p=(e,n)=>{s(e,t.id,n);const r=d(e,t.id);if(r&&n){const o=((e,t)=>{if(!e||!t)return"";try{const[n,r]=t.split(":").map(Number),o=e.split(":"),a=parseInt(o[0]),s=3600*n+60*r+(60*a+parseFloat(o[1]||0)),i=Math.floor(s/3600)%24,l=Math.floor(s%3600/60),c=(s%60).toFixed(3).padStart(6,"0");return"".concat(String(i).padStart(2,"0"),":").concat(String(l).padStart(2,"0"),":").concat(c)}catch(Ey){return""}})(n,r);o&&l(e,t.id,o)}};return(0,Bt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:h.map(e=>{const n=r.find(t=>t.id===e.categoryId);return(0,Bt.jsxs)(Za,{className:"bg-[#09090B] border-zinc-700 relative",children:[n&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 rounded-l",style:{backgroundColor:n.color}}),(0,Bt.jsxs)(rs,{className:"p-3 pl-4",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Bt.jsxs)("span",{className:"text-zinc-500 text-xs",children:["#",e.startOrder||"?"]}),e.carNumber&&(0,Bt.jsx)("span",{className:"bg-[#FF4500] text-white text-xs font-bold px-1 py-0.5 rounded",children:e.carNumber}),(0,Bt.jsx)("span",{className:"text-white font-bold text-sm uppercase truncate",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e.name})]}),(0,Bt.jsxs)("div",{className:"mb-2",children:[(0,Bt.jsx)(kl,{className:"text-xs text-zinc-400",children:o("times.startTime")}),(0,Bt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Bt.jsx)(Ga,{value:d(e.id,t.id),onChange:n=>u(e.id,t.id,n.target.value),placeholder:o("times.placeholder.shortTime"),className:"bg-[#18181B] border-zinc-700 text-center font-mono text-xs text-white h-8"}),(0,Bt.jsx)("button",{onClick:()=>u(e.id,t.id,""),className:"text-zinc-500 hover:text-red-500 transition-colors p-0.5",title:o("common.clear"),children:(0,Bt.jsx)(Hm,{className:"w-3 h-3"})})]})]}),(0,Bt.jsxs)("div",{className:"mb-2",children:[(0,Bt.jsx)(kl,{className:"text-xs text-zinc-400",children:o("times.arrivalTime")}),(0,Bt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Bt.jsx)(Dg,{value:c(e.id,t.id),onChange:t=>f(e.id,t),placeholder:o("times.placeholder.time"),className:"bg-[#18181B] border-zinc-700 text-center font-mono text-xs text-white h-8 flex-1"}),(0,Bt.jsx)("button",{onClick:()=>{const t=Wg();f(e.id,t)},className:"text-zinc-400 hover:text-[#FF4500] transition-colors p-1.5 bg-zinc-800 hover:bg-zinc-700 rounded",title:o("times.now"),children:(0,Bt.jsx)(Bg,{className:"w-4 h-4"})}),(0,Bt.jsx)("button",{onClick:()=>{l(e.id,t.id,""),s(e.id,t.id,"")},className:"text-zinc-500 hover:text-red-500 transition-colors p-0.5",title:o("common.clear"),children:(0,Bt.jsx)(Hm,{className:"w-3 h-3"})})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-xs text-zinc-400",children:o("times.totalTime")}),(0,Bt.jsx)("div",{className:"flex items-center gap-1",children:(0,Bt.jsx)(Dg,{value:i(e.id,t.id),onChange:t=>p(e.id,t),placeholder:o("times.placeholder.totalTime"),className:"bg-[#18181B] border-zinc-700 text-center font-mono text-xs text-white h-8 flex-1"})})]})]})]},e.id)})})}function Vg(e){let{stage:t,pilots:n,categories:r}=e;const{t:o}=no(),{setStartTime:a,getStartTime:s,setTime:i,getTime:l}=Ht(),c=[...n].sort((e,t)=>(e.startOrder||999)-(t.startOrder||999));return(0,Bt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:c.map(e=>{const n=r.find(t=>t.id===e.categoryId);return(0,Bt.jsxs)(Za,{className:"bg-[#09090B] border-zinc-700 relative",children:[n&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 rounded-l",style:{backgroundColor:n.color}}),(0,Bt.jsxs)(rs,{className:"p-3 pl-4",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Bt.jsxs)("span",{className:"text-zinc-500 text-xs",children:["#",e.startOrder||"?"]}),(0,Bt.jsx)("span",{className:"text-white font-bold text-sm uppercase truncate",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e.name})]}),(0,Bt.jsxs)("div",{className:"mb-2",children:[(0,Bt.jsx)(kl,{className:"text-xs text-zinc-400",children:o("times.startTime")}),(0,Bt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Bt.jsx)(Ga,{value:s(e.id,t.id),onChange:n=>a(e.id,t.id,n.target.value),placeholder:o("times.placeholder.shortTime"),className:"bg-[#18181B] border-zinc-700 text-center font-mono text-xs text-white h-8 flex-1"}),(0,Bt.jsx)("button",{onClick:()=>a(e.id,t.id,Wg().slice(0,5)),className:"text-zinc-400 hover:text-[#FF4500] transition-colors p-1.5 bg-zinc-800 hover:bg-zinc-700 rounded",title:o("times.now"),children:(0,Bt.jsx)(Bg,{className:"w-4 h-4"})}),(0,Bt.jsx)("button",{onClick:()=>a(e.id,t.id,""),className:"text-zinc-500 hover:text-red-500 transition-colors p-0.5",children:(0,Bt.jsx)(Hm,{className:"w-3 h-3"})})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-xs text-zinc-400",children:o("times.endTime")}),(0,Bt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Bt.jsx)(Ga,{value:l(e.id,t.id),onChange:n=>i(e.id,t.id,n.target.value),placeholder:o("times.placeholder.shortTime"),className:"bg-[#18181B] border-zinc-700 text-center font-mono text-xs text-white h-8 flex-1"}),(0,Bt.jsx)("button",{onClick:()=>i(e.id,t.id,Wg().slice(0,5)),className:"text-zinc-400 hover:text-[#FF4500] transition-colors p-1.5 bg-zinc-800 hover:bg-zinc-700 rounded",title:o("times.now"),children:(0,Bt.jsx)(Bg,{className:"w-4 h-4"})}),(0,Bt.jsx)("button",{onClick:()=>i(e.id,t.id,""),className:"text-zinc-500 hover:text-red-500 transition-colors p-0.5",children:(0,Bt.jsx)(Hm,{className:"w-3 h-3"})})]})]})]})]},e.id)})})}function Gg(e){let{stage:t,pilots:n,categories:r}=e;const{t:o}=no(),{setLapTime:a,getLapTime:s,getStagePilots:i,togglePilotInStage:l,selectAllPilotsInStage:c,deselectAllPilotsInStage:u,updateStage:d}=Ht(),h=i(t.id),f=[...n.filter(e=>h.includes(e.id))].sort((e,t)=>(e.startOrder||999)-(t.startOrder||999)),p=Array.from({length:t.numberOfLaps||5},(e,t)=>t),m=h.length===n.length,g=0===h.length;return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-[#09090B] rounded border border-zinc-700",children:[(0,Bt.jsxs)(kl,{className:"text-white whitespace-nowrap",children:[o("times.raceStartTime"),":"]}),(0,Bt.jsx)(Ga,{value:t.startTime||"",onChange:e=>d(t.id,{startTime:e.target.value}),placeholder:"HH:MM:SS",className:"bg-[#18181B] border-zinc-700 text-center font-mono text-white h-8 w-40"}),(0,Bt.jsxs)(qa,{size:"sm",variant:"outline",onClick:()=>d(t.id,{startTime:Wg().slice(0,8)}),className:"border-zinc-700 text-white",children:[(0,Bt.jsx)(Bg,{className:"w-3 h-3 mr-1"}),o("times.now")]})]}),(0,Bt.jsxs)("div",{className:"p-3 bg-[#09090B] rounded border border-zinc-700",children:[(0,Bt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Bt.jsxs)(kl,{className:"text-white",children:[o("times.pilotsInRace")," (",h.length,"/",n.length,")"]}),(0,Bt.jsxs)("div",{className:"flex gap-2",children:[(0,Bt.jsxs)(qa,{size:"sm",variant:"ghost",onClick:()=>c(t.id),className:"text-xs ".concat(m?"text-green-500":"text-zinc-400"),children:[(0,Bt.jsx)(Ug,{className:"w-3 h-3 mr-1"}),o("common.all")]}),(0,Bt.jsxs)(qa,{size:"sm",variant:"ghost",onClick:()=>u(t.id),className:"text-xs ".concat(g?"text-red-500":"text-zinc-400"),children:[(0,Bt.jsx)(Hg,{className:"w-3 h-3 mr-1"}),o("common.none")]})]})]}),(0,Bt.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(e=>(0,Bt.jsxs)("label",{className:"flex items-center gap-1 px-2 py-1 rounded cursor-pointer transition-colors ".concat(h.includes(e.id)?"bg-[#FF4500]/20 border border-[#FF4500]":"bg-zinc-800 border border-zinc-700"),children:[(0,Bt.jsx)(Fg,{checked:h.includes(e.id),onCheckedChange:()=>l(t.id,e.id),className:"w-3 h-3"}),(0,Bt.jsx)("span",{className:"text-white text-xs",children:e.name})]},e.id))})]}),0===f.length?(0,Bt.jsx)("div",{className:"text-center py-8 text-zinc-500",children:o("times.selectPilots")}):(0,Bt.jsx)("div",{className:"overflow-x-auto",children:(0,Bt.jsxs)("table",{className:"w-full border-collapse",children:[(0,Bt.jsx)("thead",{children:(0,Bt.jsxs)("tr",{className:"border-b border-zinc-700",children:[(0,Bt.jsx)("th",{className:"text-left text-white uppercase font-bold p-2 sticky left-0 bg-[#18181B] z-10",style:{fontFamily:"Barlow Condensed, sans-serif"},children:o("scene3.pilot")}),p.map(e=>(0,Bt.jsxs)("th",{className:"text-center text-white uppercase font-bold p-2 min-w-[140px]",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsxs)("div",{children:[o("times.lap")," ",e+1]}),(0,Bt.jsxs)("div",{className:"text-xs text-zinc-400 font-normal",children:[o("times.time")," / ",o("times.duration")]})]},e))]})}),(0,Bt.jsx)("tbody",{children:f.map(e=>{const n=r.find(t=>t.id===e.categoryId);return(0,Bt.jsxs)("tr",{className:"border-b border-zinc-800 hover:bg-white/5",children:[(0,Bt.jsx)("td",{className:"p-2 sticky left-0 bg-[#18181B] z-10",children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[n&&(0,Bt.jsx)("div",{className:"w-1 h-6 rounded",style:{backgroundColor:n.color}}),(0,Bt.jsxs)("span",{className:"text-zinc-500 text-xs",children:["#",e.startOrder||"?"]}),(0,Bt.jsx)("span",{className:"text-white font-bold text-sm",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e.name})]})}),p.map(n=>{const r=s(e.id,t.id,n),i=((e,t,n)=>{if(!e)return"";const r=e=>{if(!e)return null;const t=e.split(":");if(t.length<2)return null;const n=3===t.length?parseInt(t[0]):0,r=3===t.length?parseInt(t[1]):parseInt(t[0]),o=3===t.length?t[2]:t[1],[a,s]=o.split(".");return 1e3*(3600*n+60*r+parseFloat(a||0)+parseFloat("0.".concat(s||0)))},o=r(e),a=t?r(t):n?r(n):null;if(null===o||null===a)return"";const s=o-a;if(s<0)return"";const i=s/1e3,l=Math.floor(i/60),c=(i%60).toFixed(3);return"".concat(l,":").concat(c.padStart(6,"0"))})(r,n>0?s(e.id,t.id,n-1):null,t.startTime);return(0,Bt.jsx)("td",{className:"p-2",children:(0,Bt.jsxs)("div",{className:"space-y-1",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Bt.jsx)(Dg,{value:r,onChange:r=>a(e.id,t.id,n,r),placeholder:o("times.placeholder.time"),className:"bg-[#09090B] border-zinc-700 text-center font-mono text-xs text-white h-7 flex-1"}),(0,Bt.jsx)("button",{onClick:()=>a(e.id,t.id,n,Wg()),className:"text-zinc-400 hover:text-[#FF4500] transition-colors p-1.5 bg-zinc-800 hover:bg-zinc-700 rounded",title:o("times.now"),children:(0,Bt.jsx)(Bg,{className:"w-4 h-4"})}),(0,Bt.jsx)("button",{onClick:()=>a(e.id,t.id,n,""),className:"text-zinc-500 hover:text-red-500 transition-colors p-0.5",title:o("common.clear"),children:(0,Bt.jsx)(Hm,{className:"w-3 h-3"})})]}),i&&(0,Bt.jsx)("div",{className:"text-xs text-[#22C55E] font-mono text-center",children:i})]})},n)})]},e.id)})})]})})]})}function Kg(){const{t:e}=no(),{pilots:t,stages:n,categories:r}=Ht(),o=[...n].sort((e,t)=>e.startTime?t.startTime?e.startTime.localeCompare(t.startTime):-1:1);return 0===t.length?(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:e("times.addPilotsFirst")}):0===n.length?(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:e("times.addStagesFirst")}):(0,Bt.jsx)("div",{className:"space-y-6",children:o.map(n=>{const o=(e=>{switch(e){case"SS":default:return ug;case"Lap Race":return dg;case"Liaison":return hg;case"Service Park":return fg}})(n.type),a=(e=>{switch(e){case"SS":return"border-l-[#FF4500]";case"Lap Race":return"border-l-[#FACC15]";case"Liaison":return"border-l-blue-400";case"Service Park":return"border-l-green-400";default:return"border-l-zinc-400"}})(n.type);return(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800 border-l-4 ".concat(a),children:[(0,Bt.jsxs)(es,{children:[(0,Bt.jsxs)(ts,{className:"uppercase text-white flex items-center gap-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)(o,{className:"w-5 h-5"}),"SS"===n.type&&n.ssNumber&&(0,Bt.jsxs)("span",{className:"text-[#FF4500]",children:["SS",n.ssNumber]}),n.name,"Lap Race"===n.type&&(0,Bt.jsxs)("span",{className:"text-sm text-zinc-400 font-normal",children:["(",n.numberOfLaps," ",e("scene3.laps").toLowerCase(),")"]})]}),"Lap Race"!==n.type&&n.startTime&&(0,Bt.jsxs)(ns,{className:"text-zinc-400",children:[e("times.scheduled"),": ",n.startTime]})]}),(0,Bt.jsxs)(rs,{children:["SS"===n.type&&(0,Bt.jsx)(qg,{stage:n,pilots:t,categories:r}),("Liaison"===n.type||"Service Park"===n.type)&&(0,Bt.jsx)(Vg,{stage:n,pilots:t,categories:r}),"Lap Race"===n.type&&(0,Bt.jsx)(Gg,{stage:n,pilots:t,categories:r})]})]},n.id)})})}const $g=["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"],Jg=["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],Qg=["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],Yg=["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"],Xg=["__scopeSlider"],Zg=["__scopeSlider"],ev=["__scopeSlider","index","name"],tv=["__scopeSlider","value"];var nv=["PageUp","PageDown"],rv=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ov={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},av="Slider",[sv,iv,lv]=ws(av),[cv,uv]=is(av,[lv]),[dv,hv]=cv(av),fv=e.forwardRef((t,n)=>{const{name:r,min:a=0,max:s=100,step:i=1,orientation:l="horizontal",disabled:u=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[a],value:f,onValueChange:p=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v}=t,y=o(t,$g),b=e.useRef(new Set),x=e.useRef(0),w="horizontal"===l?gv:vv,[k=[],S]=Bs({prop:f,defaultProp:h,onChange:e=>{var t;null===(t=[...b.current][x.current])||void 0===t||t.focus(),p(e)}}),C=e.useRef(k);function N(e,t){let{commit:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1};const r=function(e){return(String(e).split(".")[1]||"").length}(i),o=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-a)/i)*i+a,r),l=Sl(o,[a,s]);S(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}(e,l,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(r,d*i)){x.current=r.indexOf(l);const t=String(r)!==String(e);return t&&n&&m(r),t?r:e}return e})}return(0,Bt.jsx)(dv,{scope:t.__scopeSlider,name:r,disabled:u,min:a,max:s,valueIndexToChangeRef:x,thumbs:b.current,values:k,orientation:l,form:v,children:(0,Bt.jsx)(sv.Provider,{scope:t.__scopeSlider,children:(0,Bt.jsx)(sv.Slot,{scope:t.__scopeSlider,children:(0,Bt.jsx)(w,c(c({"aria-disabled":u,"data-disabled":u?"":void 0},y),{},{ref:n,onPointerDown:os(y.onPointerDown,()=>{u||(C.current=k)}),min:a,max:s,inverted:g,onSlideStart:u?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}(k,e);N(e,t)},onSlideMove:u?void 0:function(e){N(e,x.current)},onSlideEnd:u?void 0:function(){const e=C.current[x.current];k[x.current]!==e&&m(k)},onHomeKeyDown:()=>!u&&N(a,0,{commit:!0}),onEndKeyDown:()=>!u&&N(s,k.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:t,direction:n}=e;if(!u){const e=nv.includes(t.key)||t.shiftKey&&rv.includes(t.key)?10:1,r=x.current;N(k[r]+i*e*n,r,{commit:!0})}}}))})})})});fv.displayName=av;var[pv,mv]=cv(av,{startEdge:"left",endEdge:"right",size:"width",direction:1}),gv=e.forwardRef((t,n)=>{const{min:r,max:a,dir:s,inverted:i,onSlideStart:l,onSlideMove:u,onSlideEnd:d,onStepKeyDown:h}=t,f=o(t,Jg),[p,m]=e.useState(null),g=lo(n,e=>m(e)),v=e.useRef(void 0),y=Hs(s),b="ltr"===y,x=b&&!i||!b&&i;function w(e){const t=v.current||p.getBoundingClientRect(),n=Ov([0,t.width],x?[r,a]:[a,r]);return v.current=t,n(e-t.left)}return(0,Bt.jsx)(pv,{scope:t.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:(0,Bt.jsx)(yv,c(c({dir:y,"data-orientation":"horizontal"},f),{},{ref:g,style:c(c({},f.style),{},{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:e=>{const t=w(e.clientX);null===l||void 0===l||l(t)},onSlideMove:e=>{const t=w(e.clientX);null===u||void 0===u||u(t)},onSlideEnd:()=>{v.current=void 0,null===d||void 0===d||d()},onStepKeyDown:e=>{const t=ov[x?"from-left":"from-right"].includes(e.key);null===h||void 0===h||h({event:e,direction:t?-1:1})}}))})}),vv=e.forwardRef((t,n)=>{const{min:r,max:a,inverted:s,onSlideStart:i,onSlideMove:l,onSlideEnd:u,onStepKeyDown:d}=t,h=o(t,Qg),f=e.useRef(null),p=lo(n,f),m=e.useRef(void 0),g=!s;function v(e){const t=m.current||f.current.getBoundingClientRect(),n=Ov([0,t.height],g?[a,r]:[r,a]);return m.current=t,n(e-t.top)}return(0,Bt.jsx)(pv,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:(0,Bt.jsx)(yv,c(c({"data-orientation":"vertical"},h),{},{ref:p,style:c(c({},h.style),{},{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:e=>{const t=v(e.clientY);null===i||void 0===i||i(t)},onSlideMove:e=>{const t=v(e.clientY);null===l||void 0===l||l(t)},onSlideEnd:()=>{m.current=void 0,null===u||void 0===u||u()},onStepKeyDown:e=>{const t=ov[g?"from-bottom":"from-top"].includes(e.key);null===d||void 0===d||d({event:e,direction:t?-1:1})}}))})}),yv=e.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:s,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:u}=e,d=o(e,Yg),h=hv(av,n);return(0,Bt.jsx)(Fs.span,c(c({},d),{},{ref:t,onKeyDown:os(e.onKeyDown,e=>{"Home"===e.key?(i(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):nv.concat(rv).includes(e.key)&&(u(e),e.preventDefault())}),onPointerDown:os(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),h.thumbs.has(t)?t.focus():r(e)}),onPointerMove:os(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&a(e)}),onPointerUp:os(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))})}))}),bv="SliderTrack",xv=e.forwardRef((e,t)=>{const{__scopeSlider:n}=e,r=o(e,Xg),a=hv(bv,n);return(0,Bt.jsx)(Fs.span,c(c({"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation},r),{},{ref:t}))});xv.displayName=bv;var wv="SliderRange",kv=e.forwardRef((t,n)=>{const{__scopeSlider:r}=t,a=o(t,Zg),s=hv(wv,r),i=mv(wv,r),l=lo(n,e.useRef(null)),u=s.values.length,d=s.values.map(e=>jv(e,s.min,s.max)),h=u>1?Math.min(...d):0,f=100-Math.max(...d);return(0,Bt.jsx)(Fs.span,c(c({"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0},a),{},{ref:l,style:c(c({},t.style),{},{[i.startEdge]:h+"%",[i.endEdge]:f+"%"})}))});kv.displayName=wv;var Sv="SliderThumb",Cv=e.forwardRef((t,n)=>{const r=iv(t.__scopeSlider),[o,a]=e.useState(null),s=lo(n,e=>a(e)),i=e.useMemo(()=>o?r().findIndex(e=>e.ref.current===o):-1,[r,o]);return(0,Bt.jsx)(Nv,c(c({},t),{},{ref:s,index:i}))}),Nv=e.forwardRef((t,n)=>{const{__scopeSlider:r,index:a,name:s}=t,i=o(t,ev),l=hv(Sv,r),u=mv(Sv,r),[d,h]=e.useState(null),f=lo(n,e=>h(e)),p=!d||(l.form||!!d.closest("form")),m=Wu(d),g=l.values[a],v=void 0===g?0:jv(g,l.min,l.max),y=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(a,l.values.length),b=null===m||void 0===m?void 0:m[u.size],x=b?function(e,t,n){const r=e/2,o=Ov([0,50],[0,r]);return(r-o(t)*n)*n}(b,v,u.direction):0;return e.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),(0,Bt.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:"calc(".concat(v,"% + ").concat(x,"px)")},children:[(0,Bt.jsx)(sv.ItemSlot,{scope:t.__scopeSlider,children:(0,Bt.jsx)(Fs.span,c(c({role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":l.min,"aria-valuenow":g,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0},i),{},{ref:f,style:void 0===g?{display:"none"}:t.style,onFocus:os(t.onFocus,()=>{l.valueIndexToChangeRef.current=a})}))}),p&&(0,Bt.jsx)(Ev,{name:null!==s&&void 0!==s?s:l.name?l.name+(l.values.length>1?"[]":""):void 0,form:l.form,value:g},a)]})});Cv.displayName=Sv;var Ev=e.forwardRef((t,n)=>{let{__scopeSlider:r,value:a}=t,s=o(t,tv);const i=e.useRef(null),l=lo(i,n),u=Sd(a);return e.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(u!==a&&n){const t=new Event("input",{bubbles:!0});n.call(e,a),e.dispatchEvent(t)}},[u,a]),(0,Bt.jsx)(Fs.input,c(c({style:{display:"none"}},s),{},{ref:l,defaultValue:a}))});function jv(e,t,n){return Sl(100/(n-t)*(e-t),[0,100])}function Ov(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}Ev.displayName="RadioBubbleInput";var Rv=fv,Tv=xv,Av=kv,_v=Cv;const Mv=["className"],Pv=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Mv);return(0,Bt.jsxs)(Rv,c(c({ref:t,className:Ua("relative flex w-full touch-none select-none items-center",n)},r),{},{children:[(0,Bt.jsx)(Tv,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,Bt.jsx)(Av,{className:"absolute h-full bg-primary"})}),(0,Bt.jsx)(_v,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}))});Pv.displayName=Rv.displayName;const Iv=t=>{let{pilotId:n,streamUrl:r,name:o,className:a="",showControls:s=!1,showMeter:i=!1,showMuteIndicator:l=!0,forceUnmute:c=!1,forceMute:u=!1,size:d="normal"}=t;const{getStreamConfig:h,streamConfigs:f,globalAudio:p}=Ht(),m=(0,e.useRef)(null),g=h(n),v=Object.values(f).some(e=>null===e||void 0===e?void 0:e.solo);let y=g.muted||p.muted||v&&!g.solo;c&&(y=!1),u&&(y=!0);const b=Math.round(g.volume/100*(p.volume/100)*100),x={filter:"saturate(".concat(g.saturation,"%) contrast(").concat(g.contrast,"%) brightness(").concat(g.brightness,"%)")};if(!r)return(0,Bt.jsx)("div",{className:"bg-zinc-800 flex items-center justify-center ".concat(a),children:(0,Bt.jsx)("span",{className:"text-lg font-bold text-zinc-600",children:(null===o||void 0===o?void 0:o.charAt(0))||"?"})});let w;try{w=new URL(r)}catch(k){w={toString:()=>r,searchParams:{set:()=>{}}}}return y?(w.searchParams.set("muted","1"),w.searchParams.set("volume","0")):w.searchParams.set("volume",b.toString()),i&&w.searchParams.set("meter","1"),(0,Bt.jsxs)("div",{className:"bg-black relative overflow-hidden ".concat(a),style:x,children:[(0,Bt.jsx)("iframe",{ref:m,src:w.toString(),className:"w-full h-full",frameBorder:"0",allow:"autoplay",title:o,style:{pointerEvents:s?"auto":"none"}}),y&&l&&(0,Bt.jsx)("div",{className:"absolute bottom-1 right-1 bg-black/70 px-1 rounded text-xs text-red-500 font-bold",children:"\ud83d\udd07"})]})},Lv=t=>{let{isActive:n=!0,isMuted:r=!1,volume:o=100,height:a=150,width:s=10,className:i="",showLabels:l=!1}=t;const[c,u]=(0,e.useState)({left:0,right:0}),d=(0,e.useRef)(null);(0,e.useEffect)(()=>{if(!n||r)return void u({left:0,right:0});const e=setInterval(()=>{const e=o/100*.6,t=.3*Math.random(),n=Math.min(1,e+t+(Math.random()>.9?.2:0)),r=Math.min(1,e+t+(Math.random()>.9?.2:0));u({left:n,right:r})},100);return()=>{clearInterval(e),d.current&&cancelAnimationFrame(d.current)}},[n,r,o]);const h=(e,t)=>{const n=Math.floor(20*e);return(0,Bt.jsx)("div",{className:"flex flex-col-reverse gap-[1px]",style:{width:"".concat(s/2-1,"px"),height:"".concat(a,"px")},children:Array.from({length:20}).map((e,r)=>{let o="bg-zinc-800";if(r<n){const e=r/20*100;o=e<60?"bg-green-500":e<80?"bg-yellow-500":"bg-red-500"}return(0,Bt.jsx)("div",{className:"w-full transition-colors duration-75 ".concat(o),style:{height:"".concat(a/20-1,"px")}},"".concat(t,"-").concat(r))})})};return(0,Bt.jsxs)("div",{className:"flex flex-col items-center ".concat(i),children:[(0,Bt.jsxs)("div",{className:"flex gap-[2px] bg-black p-1 rounded",children:[h(c.left,"left"),h(c.right,"right")]}),l&&(0,Bt.jsxs)("div",{className:"flex justify-between w-full text-[8px] text-zinc-500 mt-1 px-1",children:[(0,Bt.jsx)("span",{children:"L"}),(0,Bt.jsx)("span",{children:"R"})]})]})},Fv=t=>{let{streamConfigs:n={},globalVolume:r=100,globalMuted:o=!1,height:a=200,width:s=20,className:i=""}=t;const[l,c]=(0,e.useState)(0);(0,e.useEffect)(()=>{if(o)return void c(0);const e=Object.values(n).filter(e=>e&&!e.muted);if(!(e.length>0))return void c(0);const t=setInterval(()=>{const t=r/100*.5,n=Math.min(.1*e.length,.3),o=.2*Math.random(),a=Math.min(1,t+n+o);c(a)},100);return()=>clearInterval(t)},[n,r,o]);const u=Math.floor(30*l);return(0,Bt.jsxs)("div",{className:"flex flex-col items-center ".concat(i),children:[(0,Bt.jsx)("div",{className:"flex flex-col-reverse gap-[1px] bg-black p-1 rounded",style:{width:"".concat(s,"px"),height:"".concat(a,"px")},children:Array.from({length:30}).map((e,t)=>{let n="bg-zinc-800";if(t<u){const e=t/30*100;n=e<60?"bg-green-500":e<80?"bg-yellow-500":"bg-red-500"}return(0,Bt.jsx)("div",{className:"w-full transition-colors duration-75 ".concat(n),style:{height:"".concat(a/30-1,"px")}},t)})}),(0,Bt.jsx)("span",{className:"text-[9px] text-zinc-500 mt-1",children:"MASTER"})]})},zv=fl("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Dv=fl("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),Bv=fl("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);function Uv(){const{t:e}=no(),{pilots:t,categories:n,streamConfigs:r,globalAudio:o,setGlobalAudio:a,getStreamConfig:s,setStreamConfig:i,setSoloStream:l}=Ht(),u=[...t].sort((e,t)=>(e.startOrder||999)-(t.startOrder||999));return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsx)(es,{className:"pb-2",children:(0,Bt.jsx)(ts,{className:"uppercase text-white text-lg",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e("streams.globalAudioControl")})}),(0,Bt.jsx)(rs,{children:(0,Bt.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Bt.jsx)(Fv,{streamConfigs:r,globalVolume:o.volume,globalMuted:o.muted,height:100,width:16}),(0,Bt.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Bt.jsx)(kl,{className:"text-sm text-white",children:e("streams.masterVolume")}),(0,Bt.jsxs)("span",{className:"text-sm text-zinc-400 font-mono",children:[o.volume,"%"]})]}),(0,Bt.jsx)(Pv,{value:[o.volume],onValueChange:e=>{let[t]=e;return a(c(c({},o),{},{volume:t}))},max:100,min:0,step:5,className:"w-full","data-testid":"global-volume-slider"})]}),(0,Bt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Bt.jsxs)(qa,{variant:o.muted?"destructive":"outline",size:"sm",onClick:()=>a(c(c({},o),{},{muted:!o.muted})),className:o.muted?"":"border-zinc-700 text-white","data-testid":"global-mute-button",children:[o.muted?(0,Bt.jsx)(zv,{className:"w-4 h-4 mr-2"}):(0,Bt.jsx)(Dv,{className:"w-4 h-4 mr-2"}),o.muted?e("streams.unmuteAll"):e("streams.muteAll")]}),o.muted&&(0,Bt.jsx)("span",{className:"text-red-500 text-sm font-bold animate-pulse",children:"ALL AUDIO MUTED"})]})]})]})})]}),(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(es,{children:[(0,Bt.jsx)(ts,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e("streams.pilotStreams")}),(0,Bt.jsx)(ns,{className:"text-zinc-400",children:"Configure audio and video settings for each pilot's stream. Changes apply live to the overlay."})]}),(0,Bt.jsx)(rs,{children:0===u.filter(e=>e.streamUrl).length?(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:e("streams.noActiveStreams")}):(0,Bt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:u.filter(e=>e.streamUrl).map(t=>{const a=s(t.id),c=n.find(e=>e.id===t.categoryId),u=Object.values(r).some(e=>null===e||void 0===e?void 0:e.solo),d=a.muted||o.muted||u&&!a.solo;return(0,Bt.jsxs)(Za,{className:"bg-[#09090B] border-zinc-700 relative overflow-hidden ".concat(a.solo?"ring-2 ring-[#FACC15]":""),"data-testid":"stream-config-card-".concat(t.id),children:[c&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1",style:{backgroundColor:c.color}}),(0,Bt.jsxs)(rs,{className:"pt-4 pl-4",children:[(0,Bt.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,Bt.jsx)("div",{className:"flex-1 aspect-video bg-black rounded overflow-hidden",style:{maxHeight:"150px"},children:(0,Bt.jsx)(Iv,{pilotId:t.id,streamUrl:t.streamUrl,name:t.name,className:"w-full h-full",showControls:!1,showMeter:!0})}),(0,Bt.jsx)(Lv,{isActive:t.isActive,isMuted:d,volume:Math.round(a.volume/100*(o.volume/100)*100),height:85,width:10})]}),(0,Bt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Bt.jsxs)("h3",{className:"font-bold text-sm uppercase text-white truncate",style:{fontFamily:"Barlow Condensed, sans-serif"},children:["#",t.startOrder||"?"," ",t.name]}),(0,Bt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Bt.jsx)(qa,{variant:"ghost",size:"icon",onClick:()=>l(t.id),className:"h-7 w-7 ".concat(a.solo?"bg-[#FACC15] text-black hover:bg-[#FACC15]/80":"text-zinc-400 hover:text-white hover:bg-zinc-800"),title:e("streams.solo"),"data-testid":"stream-solo-".concat(t.id),children:(0,Bt.jsx)(Bv,{className:"w-4 h-4"})}),(0,Bt.jsx)(qa,{variant:"ghost",size:"icon",onClick:()=>i(t.id,{muted:!a.muted}),className:"h-7 w-7 ".concat(a.muted?"bg-red-500/20 text-red-500 hover:bg-red-500/30":"text-zinc-400 hover:text-white hover:bg-zinc-800"),title:e("streams.mute"),"data-testid":"stream-mute-".concat(t.id),children:a.muted?(0,Bt.jsx)(zv,{className:"w-4 h-4"}):(0,Bt.jsx)(Dv,{className:"w-4 h-4"})})]})]}),(0,Bt.jsxs)("div",{className:"space-y-3",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Bt.jsx)(kl,{className:"text-xs text-zinc-400",children:e("streams.volume")}),(0,Bt.jsxs)("span",{className:"text-xs text-zinc-500 font-mono",children:[a.volume,"%"]})]}),(0,Bt.jsx)(Pv,{value:[a.volume],onValueChange:e=>{let[n]=e;return i(t.id,{volume:n})},max:100,min:0,step:5,className:"w-full","data-testid":"stream-volume-".concat(t.id)})]}),(0,Bt.jsxs)("div",{className:"pt-2 border-t border-zinc-700",children:[(0,Bt.jsx)(kl,{className:"text-xs text-zinc-400 block mb-2",children:"Video"}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Bt.jsx)("span",{className:"text-xs text-zinc-500 w-20",children:e("streams.saturation")}),(0,Bt.jsx)(Pv,{value:[a.saturation],onValueChange:e=>{let[n]=e;return i(t.id,{saturation:n})},max:200,min:0,step:10,className:"flex-1","data-testid":"stream-saturation-".concat(t.id)}),(0,Bt.jsxs)("span",{className:"text-xs text-zinc-500 font-mono w-10 text-right",children:[a.saturation,"%"]})]}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Bt.jsx)("span",{className:"text-xs text-zinc-500 w-20",children:e("streams.contrast")}),(0,Bt.jsx)(Pv,{value:[a.contrast],onValueChange:e=>{let[n]=e;return i(t.id,{contrast:n})},max:200,min:0,step:10,className:"flex-1","data-testid":"stream-contrast-".concat(t.id)}),(0,Bt.jsxs)("span",{className:"text-xs text-zinc-500 font-mono w-10 text-right",children:[a.contrast,"%"]})]}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)("span",{className:"text-xs text-zinc-500 w-20",children:e("streams.brightness")}),(0,Bt.jsx)(Pv,{value:[a.brightness],onValueChange:e=>{let[n]=e;return i(t.id,{brightness:n})},max:200,min:0,step:10,className:"flex-1","data-testid":"stream-brightness-".concat(t.id)}),(0,Bt.jsxs)("span",{className:"text-xs text-zinc-500 font-mono w-10 text-right",children:[a.brightness,"%"]})]})]}),(0,Bt.jsx)(qa,{variant:"ghost",size:"sm",onClick:()=>i(t.id,{volume:100,muted:!1,saturation:100,contrast:100,brightness:100}),className:"w-full text-xs text-zinc-400 hover:text-white mt-2","data-testid":"stream-reset-".concat(t.id),children:e("streams.resetDefaults")})]})]})]},t.id)})})})]}),(0,Bt.jsx)("div",{className:"text-xs text-zinc-600 text-center px-4",children:"Note: Audio meters show simulated levels based on volume settings. For real audio monitoring, VDO.Ninja streams include built-in meters via the &meter=1 parameter."})]})}const Hv=fl("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Wv=fl("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),qv=fl("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),Vv=fl("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),Gv=fl("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Kv=fl("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),$v=fl("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Jv=fl("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function Qv(e){var t,n;let{className:r="",showLabel:o=!0}=e;const{currentLanguage:a,changeLanguage:s,languages:i,t:l}=no();return(0,Bt.jsxs)("div",{className:"flex items-center gap-3 ".concat(r),children:[o&&(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(Wv,{className:"w-4 h-4 text-zinc-400"}),(0,Bt.jsx)("span",{className:"text-white text-sm font-medium",children:l("config.language")})]}),(0,Bt.jsxs)(vp,{value:a,onValueChange:s,children:[(0,Bt.jsx)(bp,{className:"bg-[#18181B] border-zinc-700 text-white min-w-[200px]","data-testid":"language-selector",children:(0,Bt.jsxs)(yp,{children:[null===(t=i.find(e=>e.code===a))||void 0===t?void 0:t.flag," ",null===(n=i.find(e=>e.code===a))||void 0===n?void 0:n.nativeName]})}),(0,Bt.jsx)(kp,{children:i.map(e=>(0,Bt.jsx)(Sp,{value:e.code,"data-testid":"language-option-".concat(e.code),children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)("span",{className:"text-lg",children:e.flag}),(0,Bt.jsx)("span",{children:e.nativeName}),e.nativeName!==e.name&&(0,Bt.jsxs)("span",{className:"text-zinc-500 text-xs",children:["(",e.name,")"]})]})},e.code))})]})]})}function Yv(e){let{className:t=""}=e;const{currentLanguage:n,changeLanguage:r,languages:o}=no(),a=o.find(e=>e.code===n);return(0,Bt.jsxs)(vp,{value:n,onValueChange:r,children:[(0,Bt.jsx)(bp,{className:"bg-transparent border-zinc-700 text-white w-auto min-w-0 px-2 ".concat(t),"data-testid":"language-selector-compact",children:(0,Bt.jsx)(yp,{children:(0,Bt.jsx)("span",{className:"text-lg",children:null===a||void 0===a?void 0:a.flag})})}),(0,Bt.jsx)(kp,{children:o.map(e=>(0,Bt.jsx)(Sp,{value:e.code,"data-testid":"language-option-".concat(e.code),children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)("span",{className:"text-lg",children:e.flag}),(0,Bt.jsx)("span",{children:e.nativeName})]})},e.code))})]})}function Xv(){const{t:t}=no(),{pilots:n,categories:r,stages:o,mapUrl:a,setMapUrl:s,logoUrl:i,setLogoUrl:l,exportData:c,importData:u,clearAllData:d,wsEnabled:h,wsChannelKey:f,wsConnectionStatus:p,wsError:m,connectWebSocket:g,disconnectWebSocket:v,generateNewChannelKey:y}=Ht(),b=(0,e.useRef)(null),[x,w]=(0,e.useState)(!1),[k,S]=(0,e.useState)(""),C=n.filter(e=>e.isActive);return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(es,{children:[(0,Bt.jsxs)(ts,{className:"uppercase text-white flex items-center gap-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)(Hv,{className:"w-5 h-5"}),t("config.branding")]}),(0,Bt.jsx)(ns,{className:"text-zinc-400",children:"Customize your channel branding for the overlay"})]}),(0,Bt.jsx)(rs,{children:(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{className:"space-y-2",children:[(0,Bt.jsx)(kl,{className:"text-white",children:t("config.logoUrl")}),(0,Bt.jsx)(Ga,{value:i||"",onChange:e=>l(e.target.value),placeholder:t("config.logoUrlPlaceholder"),className:"bg-[#09090B] border-zinc-700 text-white font-mono text-sm","data-testid":"input-logo-url"}),(0,Bt.jsx)("p",{className:"text-xs text-zinc-500",children:"Your logo will appear on all overlay scenes. Recommended: PNG with transparent background."})]}),i&&(0,Bt.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-[#09090B] rounded border border-zinc-700",children:[(0,Bt.jsx)("span",{className:"text-xs text-zinc-400",children:"Preview:"}),(0,Bt.jsx)("img",{src:i,alt:"Logo preview",className:"h-10 max-w-[150px] object-contain",onError:e=>{e.target.style.display="none"}})]})]})})]}),(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(es,{children:[(0,Bt.jsxs)(ts,{className:"uppercase text-white flex items-center gap-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)(Wv,{className:"w-5 h-5"}),t("config.language")]}),(0,Bt.jsx)(ns,{className:"text-zinc-400",children:t("config.selectLanguage")})]}),(0,Bt.jsx)(rs,{children:(0,Bt.jsx)(Qv,{showLabel:!1})})]}),(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(es,{children:[(0,Bt.jsxs)(ts,{className:"uppercase text-white flex items-center gap-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)(qv,{className:"w-5 h-5"}),t("config.googleMapsIntegration")]}),(0,Bt.jsx)(ns,{className:"text-zinc-400",children:t("config.googleMapsDesc")})]}),(0,Bt.jsx)(rs,{children:(0,Bt.jsxs)("div",{className:"space-y-2",children:[(0,Bt.jsx)(kl,{className:"text-white",children:"Google Maps Embed URL"}),(0,Bt.jsx)(Ga,{value:a||"",onChange:e=>s(e.target.value),placeholder:t("config.mapsUrlPlaceholder"),className:"bg-[#09090B] border-zinc-700 text-white font-mono text-sm","data-testid":"input-map-url"}),(0,Bt.jsx)("p",{className:"text-xs text-zinc-500",children:"Tip: Go to Google Maps \u2192 Share \u2192 Embed a map \u2192 Copy the src URL from the iframe code"})]})})]}),(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(es,{children:[(0,Bt.jsxs)(ts,{className:"uppercase text-white flex items-center gap-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:["connected"===p?(0,Bt.jsx)(Vv,{className:"w-5 h-5 text-green-500"}):(0,Bt.jsx)(Gv,{className:"w-5 h-5 text-zinc-500"}),t("config.liveSync")]}),(0,Bt.jsx)(ns,{className:"text-zinc-400",children:t("config.liveSyncDesc")})]}),(0,Bt.jsxs)(rs,{className:"space-y-4",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("connected"===p?"bg-green-500":"connecting"===p?"bg-yellow-500 animate-pulse":"error"===p?"bg-red-500":"bg-zinc-500")}),(0,Bt.jsx)("span",{className:"text-white capitalize",children:t("connected"===p?"config.connected":"connecting"===p?"config.connecting":"error"===p?"config.error":"config.disconnected")}),m&&(0,Bt.jsxs)("span",{className:"text-red-400 text-sm",children:["(",m,")"]})]}),"connected"===p?(0,Bt.jsxs)("div",{className:"space-y-3",children:[(0,Bt.jsxs)("div",{className:"bg-[#09090B] p-3 rounded border border-zinc-700",children:[(0,Bt.jsx)(kl,{className:"text-xs text-zinc-400 block mb-1",children:t("config.yourChannelKey")}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)("code",{className:"text-[#FACC15] font-mono flex-1 truncate",children:f}),(0,Bt.jsx)(qa,{variant:"ghost",size:"icon",onClick:()=>{const e=f||k;e&&(navigator.clipboard.writeText(e),w(!0),Xi.success("Channel key copied to clipboard"),setTimeout(()=>w(!1),2e3))},className:"h-8 w-8",children:x?(0,Bt.jsx)(cp,{className:"w-4 h-4 text-green-500"}):(0,Bt.jsx)(Kv,{className:"w-4 h-4 text-zinc-400"})})]})]}),(0,Bt.jsxs)(qa,{onClick:()=>{const e=f||k,t="".concat(window.location.origin).concat("/Nero-Rally-Show-Overlay","/overlay?ws=").concat(encodeURIComponent(e));navigator.clipboard.writeText(t),Xi.success("Overlay URL with key copied!")},variant:"outline",className:"w-full border-zinc-700 text-white",children:[(0,Bt.jsx)(Kv,{className:"w-4 h-4 mr-2"}),"Copy Overlay URL with Key"]}),(0,Bt.jsx)(qa,{onClick:v,variant:"destructive",className:"w-full",children:t("header.disconnect")})]}):(0,Bt.jsxs)("div",{className:"space-y-3",children:[(0,Bt.jsxs)("div",{className:"flex gap-2",children:[(0,Bt.jsx)(Ga,{value:k,onChange:e=>S(e.target.value),placeholder:t("config.channelKeyPlaceholder"),className:"bg-[#09090B] border-zinc-700 text-white font-mono"}),(0,Bt.jsx)(qa,{onClick:()=>{const e=y();S(e),Xi.success("New channel key generated")},variant:"outline",className:"border-zinc-700 text-white shrink-0",children:t("config.generateKey")})]}),(0,Bt.jsx)(qa,{onClick:async()=>{if(!k.trim())return void Xi.error("Please generate or enter a channel key");await g(k)?Xi.success("Connected to WebSocket channel"):Xi.error("Failed to connect: "+(m||"Unknown error"))},disabled:!k.trim()||"connecting"===p,className:"w-full bg-[#FF4500] hover:bg-[#FF4500]/90",children:t("connecting"===p?"config.connecting":"header.connect")})]})]})]}),(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(es,{children:[(0,Bt.jsx)(ts,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:t("config.keyboardShortcuts")}),(0,Bt.jsx)(ns,{className:"text-zinc-400",children:t("config.keyboardShortcutsDesc")})]}),(0,Bt.jsx)(rs,{children:(0,Bt.jsxs)("div",{className:"space-y-2",style:{fontFamily:"JetBrains Mono, monospace"},children:[(0,Bt.jsxs)("div",{className:"flex justify-between p-2 bg-[#09090B] rounded text-white",children:[(0,Bt.jsxs)("span",{children:[(0,Bt.jsx)("kbd",{className:"px-2 py-1 bg-zinc-800 rounded",children:"1"})," ",t("config.switchToScene")," 1"]}),(0,Bt.jsx)("span",{className:"text-zinc-500",children:t("scenes.liveStage")})]}),(0,Bt.jsxs)("div",{className:"flex justify-between p-2 bg-[#09090B] rounded text-white",children:[(0,Bt.jsxs)("span",{children:[(0,Bt.jsx)("kbd",{className:"px-2 py-1 bg-zinc-800 rounded",children:"2"})," ",t("config.switchToScene")," 2"]}),(0,Bt.jsx)("span",{className:"text-zinc-500",children:t("scenes.timingTower")})]}),(0,Bt.jsxs)("div",{className:"flex justify-between p-2 bg-[#09090B] rounded text-white",children:[(0,Bt.jsxs)("span",{children:[(0,Bt.jsx)("kbd",{className:"px-2 py-1 bg-zinc-800 rounded",children:"3"})," ",t("config.switchToScene")," 3"]}),(0,Bt.jsx)("span",{className:"text-zinc-500",children:t("scenes.leaderboard")})]}),(0,Bt.jsxs)("div",{className:"flex justify-between p-2 bg-[#09090B] rounded text-white",children:[(0,Bt.jsxs)("span",{children:[(0,Bt.jsx)("kbd",{className:"px-2 py-1 bg-zinc-800 rounded",children:"4"})," ",t("config.switchToScene")," 4"]}),(0,Bt.jsx)("span",{className:"text-zinc-500",children:t("scenes.pilotFocus")})]})]})})]}),(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(es,{children:[(0,Bt.jsx)(ts,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:t("config.dataManagement")}),(0,Bt.jsx)(ns,{className:"text-zinc-400",children:"Export or import your configuration"})]}),(0,Bt.jsxs)(rs,{className:"space-y-4",children:[(0,Bt.jsxs)("div",{className:"flex gap-4",children:[(0,Bt.jsxs)(qa,{onClick:()=>{const e=c(),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="rally-config-".concat((new Date).toISOString().slice(0,10),".json"),r.click(),URL.revokeObjectURL(n),Xi.success("Configuration exported")},variant:"outline",className:"flex-1 border-zinc-700 text-white","data-testid":"button-export-config",children:[(0,Bt.jsx)($v,{className:"w-4 h-4 mr-2"}),t("config.exportJson")]}),(0,Bt.jsxs)(qa,{onClick:()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.click()},variant:"outline",className:"flex-1 border-zinc-700 text-white","data-testid":"button-import-config",children:[(0,Bt.jsx)(Jv,{className:"w-4 h-4 mr-2"}),t("config.importJson")]}),(0,Bt.jsx)("input",{ref:b,type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=e=>{u(e.target.result)?Xi.success("Configuration imported successfully"):Xi.error("Failed to import configuration")},n.readAsText(t)},className:"hidden"})]}),(0,Bt.jsx)("div",{className:"pt-4 border-t border-zinc-700",children:(0,Bt.jsx)(qa,{onClick:()=>{window.confirm(t("config.clearDataConfirm"))&&(d(),Xi.success("All data cleared"))},variant:"destructive",className:"w-full","data-testid":"button-clear-all",children:t("config.clearAllData")})})]})]}),(0,Bt.jsxs)(Za,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsx)(es,{children:(0,Bt.jsx)(ts,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:t("config.currentSummary")})}),(0,Bt.jsx)(rs,{children:(0,Bt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,Bt.jsxs)("div",{className:"bg-[#09090B] p-4 rounded",children:[(0,Bt.jsx)("div",{className:"text-3xl font-bold text-[#FF4500]",children:n.length}),(0,Bt.jsx)("div",{className:"text-sm text-zinc-400",children:t("config.pilotsCount")})]}),(0,Bt.jsxs)("div",{className:"bg-[#09090B] p-4 rounded",children:[(0,Bt.jsx)("div",{className:"text-3xl font-bold text-[#FF4500]",children:r.length}),(0,Bt.jsx)("div",{className:"text-sm text-zinc-400",children:t("config.categoriesCount")})]}),(0,Bt.jsxs)("div",{className:"bg-[#09090B] p-4 rounded",children:[(0,Bt.jsx)("div",{className:"text-3xl font-bold text-[#FF4500]",children:o.length}),(0,Bt.jsx)("div",{className:"text-sm text-zinc-400",children:t("config.stagesCount")})]}),(0,Bt.jsxs)("div",{className:"bg-[#09090B] p-4 rounded",children:[(0,Bt.jsx)("div",{className:"text-3xl font-bold text-[#22C55E]",children:C.length}),(0,Bt.jsx)("div",{className:"text-sm text-zinc-400",children:t("streams.pilotStreams")})]})]})})]})]})}function Zv(){const{chromaKey:t,setChromaKey:n}=Ht(),{t:r}=no(),[o,a]=e.useState("#000000"),s=[{name:r("config.black"),value:"#000000",label:"K"},{name:r("config.greenScreen"),value:"#00B140",label:"G"},{name:r("config.blueScreen"),value:"#0047BB",label:"B"}];return(0,Bt.jsx)("div",{className:"min-h-screen bg-[#09090B] text-white p-6",children:(0,Bt.jsxs)("div",{className:"max-w-[1600px] mx-auto",children:[(0,Bt.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)("h1",{className:"text-5xl font-bold uppercase tracking-tighter text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:r("header.title")}),(0,Bt.jsx)("p",{className:"text-zinc-400 mt-2",children:r("header.subtitle")})]}),(0,Bt.jsx)("div",{className:"flex gap-3",children:(0,Bt.jsxs)(qa,{onClick:()=>{window.open("".concat("/Nero-Rally-Show-Overlay","/overlay"),"_blank"),Xi.success("Overlay page opened in new tab")},className:"bg-[#FF4500] hover:bg-[#FF4500]/90 text-white uppercase font-bold","data-testid":"go-to-overlay-button",children:[(0,Bt.jsx)(pl,{className:"w-4 h-4 mr-2"}),r("header.goLive")]})})]}),(0,Bt.jsxs)(Za,{className:"mb-6 bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(es,{children:[(0,Bt.jsxs)(ts,{className:"flex items-center gap-2 uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)(ml,{className:"w-5 h-5"}),r("config.backgroundChromaKey")]}),(0,Bt.jsx)(ns,{className:"text-zinc-400",children:r("config.selectBackground")})]}),(0,Bt.jsx)(rs,{children:(0,Bt.jsxs)("div",{className:"flex flex-wrap gap-3",children:[s.map(e=>(0,Bt.jsx)("button",{onClick:()=>n(e.value),className:"px-4 py-2 rounded border-2 transition-all hover:scale-105 ".concat(t===e.value?"border-[#FF4500]":"border-zinc-700"),style:{backgroundColor:e.value},"data-testid":"chroma-".concat(e.label.toLowerCase(),"-button"),children:(0,Bt.jsx)("span",{className:"text-white font-bold",style:{textShadow:"0 0 4px rgba(0,0,0,0.8)"},children:e.name})},e.value)),(0,Bt.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,Bt.jsx)(Ga,{type:"color",value:o,onChange:e=>a(e.target.value),className:"w-16 h-10 cursor-pointer","data-testid":"custom-chroma-picker"}),(0,Bt.jsx)(qa,{onClick:()=>n(o),variant:"outline",className:"border-zinc-700 text-white","data-testid":"apply-custom-chroma-button",children:r("config.applyCustom")})]})]})})]}),(0,Bt.jsxs)(Li,{defaultValue:"pilots",className:"space-y-6",children:[(0,Bt.jsxs)(Fi,{className:"bg-[#18181B] border border-zinc-800",children:[(0,Bt.jsx)(zi,{value:"pilots",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-pilots",children:r("tabs.pilots")}),(0,Bt.jsx)(zi,{value:"categories",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-categories",children:r("tabs.categories")}),(0,Bt.jsx)(zi,{value:"therace",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-therace",children:r("tabs.theRace")}),(0,Bt.jsx)(zi,{value:"times",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-times",children:r("tabs.times")}),(0,Bt.jsx)(zi,{value:"streams",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-streams",children:r("tabs.streams")}),(0,Bt.jsx)(zi,{value:"config",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-config",children:r("tabs.config")})]}),(0,Bt.jsx)(Di,{value:"pilots",children:(0,Bt.jsx)(lg,{})}),(0,Bt.jsx)(Di,{value:"categories",children:(0,Bt.jsx)(cg,{})}),(0,Bt.jsx)(Di,{value:"therace",children:(0,Bt.jsx)(mg,{})}),(0,Bt.jsx)(Di,{value:"times",children:(0,Bt.jsx)(Kg,{})}),(0,Bt.jsx)(Di,{value:"streams",children:(0,Bt.jsx)(Uv,{})}),(0,Bt.jsx)(Di,{value:"config",children:(0,Bt.jsx)(Xv,{})})]})]})})}const ey=e=>{let{children:t}=e;const n=document.getElementById("left-controls");return n?Rs.createPortal(t,n):null},ty=(e,t,n,r)=>{var o,a;const s=null===(o=n[e])||void 0===o?void 0:o[t];if(null===(a=r[e])||void 0===a?void 0:a[t])return"finished";if(!s)return"not_started";const i=new Date,[l,c]=s.split(":").map(Number),u=new Date;return u.setHours(l,c,0,0),i>=u?"racing":"not_started"},ny=e=>{if(!e)return"00:00.000";try{const t=new Date,[n,r]=e.split(":").map(Number),o=new Date;if(o.setHours(n,r,0,0),t<o)return"00:00.000";const a=t-o,s=Math.floor(a/1e3),i=Math.floor(s/60),l=s%60,c=Math.floor(a%1e3);return"".concat(String(i).padStart(2,"0"),":").concat(String(l).padStart(2,"0"),".").concat(String(c).padStart(3,"0"))}catch(Ey){return"00:00.000"}},ry=e=>{if(!e)return 0;try{const t=e.split(":");if(t.length>=2){const e=parseInt(t[0])||0;return 60*e+(parseFloat(t[1])||0)}return parseFloat(e)||0}catch(Ey){return 0}},oy=(e,t,n,r)=>{const o={racing:0,finished:1,not_started:2};return[...e].sort((e,a)=>{const s=ty(e.id,t,n,r),i=ty(a.id,t,n,r);if(o[s]!==o[i])return o[s]-o[i];if("finished"===s){var l,c;return ry(null===(l=r[e.id])||void 0===l?void 0:l[t])-ry(null===(c=r[a.id])||void 0===c?void 0:c[t])}return 0})},ay=fl("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),sy=fl("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),iy=[{id:"1",name:"1 Stream",cols:1,rows:1,slots:1},{id:"1x2",name:"1x2 Vertical",cols:1,rows:2,slots:2},{id:"2x1",name:"2x1 Horizontal",cols:2,rows:1,slots:2},{id:"2x2",name:"2x2 Grid",cols:2,rows:2,slots:4},{id:"3x2",name:"3x2 Grid",cols:3,rows:2,slots:6}],ly="__google_maps__";function cy(t){let{hideStreams:n=!1}=t;const{pilots:r,stages:o,currentStageId:a,startTimes:s,times:i,categories:l,chromaKey:u,mapUrl:d,logoUrl:h,eventName:f,lapTimes:p,stagePilots:m,positions:g}=Ht(),{t:v}=no(),[y,b]=(0,e.useState)(new Date),[x,w]=(0,e.useState)("2x2"),[k,S]=(0,e.useState)([]),[C,N]=(0,e.useState)(0),[E,j]=(0,e.useState)(0),[O,R]=(0,e.useState)({}),T=(0,e.useRef)(null),A=o.find(e=>e.id===a),_="Lap Race"===(null===A||void 0===A?void 0:A.type),M="SS"===(null===A||void 0===A?void 0:A.type);(0,e.useEffect)(()=>{const e=setInterval(()=>b(new Date),100);return()=>clearInterval(e)},[]);const P=iy.find(e=>e.id===x)||iy[3],I=r.filter(e=>e.isActive&&e.streamUrl),L=(0,e.useMemo)(()=>{if(!a||!A)return r.map((e,t)=>({pilot:e,position:t+1,completedLaps:0}));if(_)return((e,t,n,r,o)=>{const a=r[t]||e.map(e=>e.id),s=e.filter(e=>a.includes(e.id)).map(e=>{var r;const a=(null===(r=n[e.id])||void 0===r?void 0:r[t])||[],s=a.filter(e=>e&&""!==e.trim()).length;let i=0;return a.forEach(e=>{if(!e)return;const t=e.split(":");if(t.length>=2){const e=3===t.length&&parseInt(t[0])||0,n=3===t.length?parseInt(t[1])||0:parseInt(t[0])||0,r=3===t.length?t[2]:t[1],[o,a]=(r||"0").split(".");i+=1e3*(3600*e+60*n+parseFloat(o||0)+parseFloat("0.".concat(a||0)))}}),{pilot:e,completedLaps:s,totalTimeMs:i,isFinished:s>=o,lastLapTime:a[a.length-1]||null}});return s.sort((e,t)=>t.completedLaps!==e.completedLaps?t.completedLaps-e.completedLaps:0===e.completedLaps?0:e.totalTimeMs-t.totalTimeMs),s.map((e,t)=>c(c({},e),{},{position:t+1}))})(r,a,p,m,A.numberOfLaps||5);return oy(r,a,s,i).map((e,t)=>({pilot:e,position:t+1}))},[r,a,A,_,p,m,s,i]);(0,e.useEffect)(()=>{const e={};L.forEach(t=>{let{pilot:n,position:r}=t;e[n.id]=r}),R(e)},[L]),(0,e.useEffect)(()=>{if(T.current){const e=T.current,t=e.scrollWidth,n=e.clientWidth;j(Math.max(0,t-n))}},[L]),(0,e.useEffect)(()=>{0===k.length&&I.length>0&&S(I.slice(0,P.slots).map(e=>e.id))},[I,P.slots,k.length]);const F=e=>{S(t=>t.includes(e)?t.filter(t=>t!==e):t.length<P.slots?[...t,e]:t)},z=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},D=k.map(e=>(e=>{if(e===ly)return{type:"map",id:ly};const t=r.find(t=>t.id===e);return t?c({type:"pilot"},t):null})(e)).filter(Boolean),B=e=>{const t=L.find(t=>t.pilot.id===e);return t?{position:t.position,completedLaps:t.completedLaps||0,isFinished:t.isFinished||!1,totalLaps:(null===A||void 0===A?void 0:A.numberOfLaps)||0}:null};return(0,Bt.jsxs)("div",{className:"relative w-full h-full p-8","data-testid":"scene-1-live-stage",children:[(0,Bt.jsx)(ey,{children:(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white text-xs uppercase mb-2 block",children:v("scene1.layout")}),(0,Bt.jsxs)(vp,{value:x,onValueChange:w,children:[(0,Bt.jsx)(bp,{className:"bg-[#18181B] border-zinc-700 text-white text-sm",children:(0,Bt.jsx)(yp,{})}),(0,Bt.jsx)(kp,{children:iy.map(e=>(0,Bt.jsx)(Sp,{value:e.id,children:e.name},e.id))})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)(kl,{className:"text-white text-xs uppercase mb-2 block",children:[v("scene1.selectItems")," (",k.length,"/",P.slots,")"]}),(0,Bt.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[d&&(0,Bt.jsxs)("div",{className:"flex items-center space-x-2 pb-2 border-b border-zinc-700 mb-2",children:[(0,Bt.jsx)(Fg,{id:"slot-map",checked:k.includes(ly),onCheckedChange:()=>F(ly),disabled:!k.includes(ly)&&k.length>=P.slots}),(0,Bt.jsxs)("label",{htmlFor:"slot-map",className:"text-white text-sm cursor-pointer flex items-center gap-2",children:[(0,Bt.jsx)(qv,{className:"w-4 h-4 text-[#FF4500]"}),v("scene1.googleMaps")]})]}),I.map(e=>{const t=_?B(e.id):null;return(0,Bt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Bt.jsx)(Fg,{id:"pilot-".concat(e.id),checked:k.includes(e.id),onCheckedChange:()=>F(e.id),disabled:!k.includes(e.id)&&k.length>=P.slots}),(0,Bt.jsxs)("label",{htmlFor:"pilot-".concat(e.id),className:"text-white text-sm cursor-pointer flex items-center gap-2",children:[t&&(0,Bt.jsxs)("span",{className:"text-[#FF4500] font-bold text-xs",children:["P",t.position]}),e.name]})]},e.id)})]})]}),k.length>0&&(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white text-xs uppercase mb-2 block",children:v("scene1.reorderDragDrop")}),(0,Bt.jsx)("div",{className:"space-y-1",children:k.map((e,t)=>{const n=e===ly,o=n?null:r.find(t=>t.id===e),a=n?v("scene1.googleMaps"):null===o||void 0===o?void 0:o.name;return a?(0,Bt.jsx)("div",{draggable:!0,onDragStart:e=>((e,t)=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.toString())})(e,t),onDragOver:z,onDrop:e=>((e,t)=>{e.preventDefault();const n=parseInt(e.dataTransfer.getData("text/plain"));n!==t&&S(e=>{const r=[...e],[o]=r.splice(n,1);return r.splice(t,0,o),r})})(e,t),className:"bg-[#18181B] border border-zinc-700 p-2 rounded cursor-move hover:bg-zinc-800 transition-colors",children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsxs)("span",{className:"text-zinc-500 text-xs",children:[t+1,"."]}),n&&(0,Bt.jsx)(qv,{className:"w-3 h-3 text-[#FF4500]"}),(0,Bt.jsx)("span",{className:"text-white text-sm",children:a})]})},e):null})})]})]})}),(0,Bt.jsx)("div",{className:"grid ".concat("grid-cols-".concat(P.cols," grid-rows-").concat(P.rows)," gap-4 h-[calc(100%-200px)]"),children:0===D.length?(0,Bt.jsx)("div",{className:"flex items-center justify-center h-full col-span-full",children:(0,Bt.jsxs)("div",{className:"text-center",children:[(0,Bt.jsx)("p",{className:"text-white text-2xl font-bold uppercase",style:{fontFamily:"Barlow Condensed, sans-serif"},children:v("scene1.noItemsSelected")}),(0,Bt.jsx)("p",{className:"text-zinc-400 mt-2",children:v("scene1.selectPilotsOrMaps")})]})}):D.map(e=>{if("map"===e.type)return(0,Bt.jsxs)("div",{className:"relative rounded overflow-hidden border-2 border-[#FF4500]",style:{backgroundColor:u},children:[(0,Bt.jsx)("iframe",{src:d,className:"w-full h-full border-0",allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:v("scene1.rallyMap")}),(0,Bt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/95 to-transparent p-3",children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(qv,{className:"w-5 h-5 text-[#FF4500]"}),(0,Bt.jsx)("p",{className:"text-white font-bold text-lg uppercase",style:{fontFamily:"Barlow Condensed, sans-serif",textShadow:"0 0 8px rgba(0,0,0,1)"},children:v("scene1.rallyMap")})]})})]},ly);const t=e,r=l.find(e=>e.id===t.categoryId),o=_?B(t.id):null;let c="",h="text-zinc-400",f=null;if(_&&o)f=(0,Bt.jsxs)("div",{className:"absolute top-2 left-2 bg-black/80 px-2 py-1 rounded flex items-center gap-1",children:[(0,Bt.jsxs)("span",{className:"text-[#FF4500] font-bold text-lg",children:["P",o.position]}),(0,Bt.jsxs)("span",{className:"text-zinc-400 text-sm",children:["Lap ",o.completedLaps,"/",o.totalLaps]})]}),o.isFinished&&(c="FINISHED",h="text-[#22C55E]");else if(M){var p,m;const e=ty(t.id,a,s,i),n=null===(p=s[t.id])||void 0===p?void 0:p[a],r=null===(m=i[t.id])||void 0===m?void 0:m[a];"racing"===e&&n?(c=ny(n),h="text-[#FF8C00]"):"finished"===e&&r?(c=r,h="text-[#22C55E]"):n&&(c="Start: ".concat(n),h="text-zinc-500")}return(0,Bt.jsxs)("div",{className:"relative rounded overflow-hidden border-2 border-[#FF4500]",style:{backgroundColor:n?u:"black"},children:[r&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 z-10",style:{backgroundColor:r.color}}),f,!n&&(0,Bt.jsx)(Iv,{pilotId:t.id,streamUrl:t.streamUrl,name:t.name,className:"w-full h-full"}),(0,Bt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/95 to-transparent p-3",children:(0,Bt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Bt.jsxs)("p",{className:"text-white font-bold text-lg uppercase",style:{fontFamily:"Barlow Condensed, sans-serif",textShadow:"0 0 8px rgba(0,0,0,1), 2px 2px 4px rgba(0,0,0,1), -1px -1px 2px rgba(0,0,0,1)"},children:[(0,Bt.jsxs)("span",{className:"text-zinc-400 text-base mr-2",style:{textShadow:"0 0 6px rgba(0,0,0,1)"},children:["#",t.startOrder||"?"]}),t.name]}),c&&(0,Bt.jsx)("p",{className:"font-mono text-lg font-bold ".concat(h),style:{fontFamily:"JetBrains Mono, monospace",textShadow:"0 0 10px rgba(0,0,0,1), 2px 2px 6px rgba(0,0,0,1), -1px -1px 3px rgba(0,0,0,1)"},children:c})]})})]},t.id)})}),A&&a&&(0,Bt.jsxs)("div",{className:"absolute bottom-8 left-8 right-8",children:[(0,Bt.jsx)("div",{className:"bg-black/95 backdrop-blur-sm border-l-4 border-[#FF4500] overflow-hidden mb-4",children:(0,Bt.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-3",children:[_?(0,Bt.jsx)(dg,{className:"w-6 h-6 text-[#FACC15]"}):(0,Bt.jsx)(ug,{className:"w-6 h-6 text-[#FF4500]"}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)("p",{className:"text-zinc-400 text-sm uppercase",style:{fontFamily:"Inter, sans-serif"},children:_?"Race":"Current Stage"}),(0,Bt.jsx)("p",{className:"text-white text-3xl font-bold uppercase mt-1",style:{fontFamily:"Barlow Condensed, sans-serif"},children:A?M&&A.ssNumber?"SS".concat(A.ssNumber," ").concat(A.name):A.name:""})]})]}),h&&(0,Bt.jsx)("img",{src:h,alt:"Channel Logo",className:"h-16 max-w-[200px] object-contain"})]})}),(0,Bt.jsxs)("div",{className:"relative bg-black/95 backdrop-blur-sm border-t-2 border-[#FF4500]",children:[C>0&&(0,Bt.jsx)("button",{onClick:()=>N(Math.max(0,C-200)),className:"absolute left-0 top-0 bottom-0 z-10 bg-black/90 hover:bg-black px-2 text-white",children:(0,Bt.jsx)(ay,{className:"w-6 h-6"})}),(0,Bt.jsx)("div",{className:"overflow-hidden px-10",ref:T,children:(0,Bt.jsx)("div",{className:"flex gap-2 py-2 transition-transform duration-500 ease-out",style:{transform:"translateX(-".concat(C,"px)")},children:L.map(e=>{let{pilot:t,position:n,completedLaps:r,isFinished:o}=e;const c=l.find(e=>e.id===t.categoryId);let u="border-zinc-700",d="",h="text-zinc-500";if(_)o?(u="border-[#22C55E]",d="FINISHED",h="text-[#22C55E]"):r>0&&(u="border-[#FACC15]",d="Lap ".concat(r,"/").concat((null===A||void 0===A?void 0:A.numberOfLaps)||0),h="text-[#FACC15]");else if(M){var f,p;const e=ty(t.id,a,s,i),n=null===(f=s[t.id])||void 0===f?void 0:f[a],r=null===(p=i[t.id])||void 0===p?void 0:p[a];"finished"===e&&r?(u="border-[#22C55E]",d=r,h="text-[#22C55E]"):"racing"===e&&n?(u="border-[#FF8C00]",d=ny(n),h="text-[#FF8C00]"):n&&(d="Start: ".concat(n),h="text-zinc-500")}return(0,Bt.jsxs)("div",{className:"relative flex-shrink-0 bg-white/5 border-2 ".concat(u," px-4 py-2 min-w-[150px] transition-all duration-500 ease-out"),style:{order:n},children:[c&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1",style:{backgroundColor:c.color}}),(0,Bt.jsxs)("div",{className:"pl-2 flex items-center gap-2",children:[_&&(0,Bt.jsxs)("span",{className:"text-[#FF4500] font-bold text-sm",children:["P",n]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)("p",{className:"text-white text-sm font-bold uppercase truncate",style:{fontFamily:"Barlow Condensed, sans-serif"},children:t.name}),d&&(0,Bt.jsx)("p",{className:"font-mono text-xs ".concat(h),style:{fontFamily:"JetBrains Mono, monospace"},children:d})]})]})]},t.id)})})}),C<E&&E>0&&(0,Bt.jsx)("button",{onClick:()=>N(Math.min(E,C+200)),className:"absolute right-0 top-0 bottom-0 z-10 bg-black/90 hover:bg-black px-2 text-white",children:(0,Bt.jsx)(sy,{className:"w-6 h-6"})})]})]})]})}const uy=fl("radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),dy=e=>{if(!e)return"";const t=e/1e3,n=Math.floor(t/60),r=(t%60).toFixed(3);return"".concat(n,":").concat(r.padStart(6,"0"))};function hy(t){let{hideStreams:n=!1}=t;const{pilots:r,categories:o,stages:a,times:s,startTimes:i,currentStageId:l,chromaKey:u,logoUrl:d,lapTimes:h,stagePilots:f}=Ht(),{t:p}=no(),[m,g]=(0,e.useState)(new Date),[v,y]=(0,e.useState)(null),[b,x]=(0,e.useState)(null),w=a.find(e=>e.id===l),k="Lap Race"===(null===w||void 0===w?void 0:w.type),S="SS"===(null===w||void 0===w?void 0:w.type);(0,e.useEffect)(()=>{const e=setInterval(()=>g(new Date),100);return()=>clearInterval(e)},[]);const C=(0,e.useMemo)(()=>{if(!l||!w)return[];if(k)return((e,t,n,r,o)=>{const a=r[t]||e.map(e=>e.id),s=e.filter(e=>a.includes(e.id)).map(e=>{var r;const a=(null===(r=n[e.id])||void 0===r?void 0:r[t])||[],s=a.filter(e=>e&&""!==e.trim()).length;let i=0;a.forEach(e=>{if(!e)return;const t=e.split(":");if(t.length>=2){const e=3===t.length&&parseInt(t[0])||0,n=3===t.length?parseInt(t[1])||0:parseInt(t[0])||0,r=3===t.length?t[2]:t[1],[o,a]=(r||"0").split(".");i+=1e3*(3600*e+60*n+parseFloat(o||0)+parseFloat("0.".concat(a||0)))}});const l=s>=o,c=s>0&&!l;return{pilot:e,completedLaps:s,totalTimeMs:i,isFinished:l,isRacing:c,status:l?"finished":c?"racing":"not_started"}});return s.sort((e,t)=>t.completedLaps!==e.completedLaps?t.completedLaps-e.completedLaps:0===e.completedLaps?0:e.totalTimeMs-t.totalTimeMs),s.map((e,t)=>c(c({},e),{},{position:t+1}))})(r,l,h,f,w.numberOfLaps||5);return oy(r,l,i,s).map((e,t)=>{const n=ty(e.id,l,i,s);return{pilot:e,position:t+1,status:n,isFinished:"finished"===n,isRacing:"racing"===n}})},[r,l,w,k,h,f,i,s]);if((0,e.useEffect)(()=>{if(!v&&C.length>0){const e=C.find(e=>e.pilot.isActive&&e.pilot.streamUrl);e&&y(e.pilot.id)}},[C,v]),!l)return(0,Bt.jsx)("div",{className:"relative w-full h-full flex items-center justify-center","data-testid":"scene-2-timing-tower",children:(0,Bt.jsx)("p",{className:"text-white text-2xl",children:p("scene2.noCurrentStage")})});const N=C.filter(e=>"racing"===e.status),E=C.filter(e=>"finished"===e.status),j=C.filter(e=>"not_started"===e.status),O=E[0],R=(e,t)=>{const{pilot:a,position:c,completedLaps:u,totalTimeMs:d,isFinished:h,isRacing:f}=e,m=o.find(e=>e.id===a.categoryId),g=b===a.id,v=a.streamUrl;let S="",C="text-zinc-500",N="bg-zinc-700";if(k)h?(S=dy(d),C="text-[#22C55E]",N="bg-[#22C55E]"):f&&(S="".concat(p("times.lap")," ").concat(u,"/").concat((null===w||void 0===w?void 0:w.numberOfLaps)||0),C="text-[#FACC15]",N="bg-[#FACC15]");else{var E,j;const e=null===(E=i[a.id])||void 0===E?void 0:E[l],t=null===(j=s[a.id])||void 0===j?void 0:j[l];h&&t?(S=t,C="text-[#22C55E]",N="bg-[#22C55E]"):f&&e?(S=ny(e),C="text-[#FF8C00]",N="bg-[#FF8C00]"):e&&(S="".concat(p("status.start"),": ").concat(e),C="text-zinc-500")}let R="";if(h&&O&&O.pilot.id!==a.id)if(k){const e=O.totalTimeMs;if(e&&d){R="+".concat(dy(d-e))}}else{var T,A;const e=ry(null===(T=s[O.pilot.id])||void 0===T?void 0:T[l]),t=ry(null===(A=s[a.id])||void 0===A?void 0:A[l]);if(e&&t){R="+".concat(((t-e)/1e3).toFixed(3),"s")}}return(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)("div",{onClick:()=>(e=>{var t;null!==(t=r.find(t=>t.id===e))&&void 0!==t&&t.streamUrl&&x(b===e?null:e)})(a.id),className:"relative flex items-center px-3 py-2 border-b border-zinc-800/50 transition-all duration-300 ".concat(v?"cursor-pointer hover:bg-white/5":""," ").concat(g?"bg-white/10":""),children:[m&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1",style:{backgroundColor:m.color}}),(0,Bt.jsx)("div",{className:"w-8 flex-shrink-0 ml-2",children:(0,Bt.jsx)("span",{className:"text-[#FF4500] font-bold text-sm",children:c})}),(0,Bt.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 flex-shrink-0",style:{backgroundColor:"zinc-700"===N.replace("bg-","")?"#3f3f46":N.replace("bg-[","").replace("]","")}}),(0,Bt.jsx)("div",{className:"flex-1 min-w-0",children:(0,Bt.jsx)("span",{className:"text-white text-sm font-bold uppercase truncate block",style:{fontFamily:"Barlow Condensed, sans-serif"},children:a.name})}),(0,Bt.jsxs)("div",{className:"text-right flex-shrink-0 ml-2",children:[(0,Bt.jsx)("span",{className:"font-mono text-sm ".concat(C),style:{fontFamily:"JetBrains Mono, monospace"},children:S}),R&&(0,Bt.jsx)("span",{className:"text-zinc-500 text-xs ml-2 font-mono",children:R})]}),v&&(0,Bt.jsx)("button",{onClick:e=>((e,t)=>{e.stopPropagation(),b===t&&x(null),y(t)})(e,a.id),className:"ml-2 text-zinc-500 hover:text-white transition-colors",children:(0,Bt.jsx)(sy,{className:"w-4 h-4 transition-transform ".concat(g?"rotate-90":"")})})]}),g&&v&&!n&&(0,Bt.jsx)("div",{className:"h-32 bg-black m-2 rounded overflow-hidden",children:(0,Bt.jsx)(Iv,{pilotId:a.id,streamUrl:a.streamUrl,name:a.name,className:"w-full h-full",muted:!0})})]},a.id)},T=r.find(e=>e.id===v),A=C.find(e=>e.pilot.id===v);return(0,Bt.jsxs)("div",{className:"relative w-full h-full flex","data-testid":"scene-2-timing-tower",children:[(0,Bt.jsxs)("div",{className:"w-[280px] bg-gradient-to-b from-black/95 to-black/80 backdrop-blur-sm overflow-y-auto",children:[(0,Bt.jsxs)("div",{className:"relative p-4 pb-3 overflow-hidden",children:[(0,Bt.jsx)("div",{className:"absolute -right-10 -top-10 w-32 h-32 bg-[#FF4500]/20 rotate-45"}),d&&(0,Bt.jsx)("div",{className:"flex justify-center mb-3 relative z-10",children:(0,Bt.jsx)("img",{src:d,alt:"Channel Logo",className:"w-1/2 max-h-16 object-contain"})}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2 relative z-10",children:[k?(0,Bt.jsx)(dg,{className:"w-5 h-5 text-[#FACC15]"}):(0,Bt.jsx)(ug,{className:"w-5 h-5 text-[#FF4500]"}),(0,Bt.jsx)("h2",{className:"text-[#FF4500] text-2xl font-black uppercase tracking-wider",style:{fontFamily:"Barlow Condensed, sans-serif"},children:p("scene2.liveTiming")})]}),w&&(0,Bt.jsx)("div",{className:"flex items-center gap-2 mt-1 relative z-10",children:(0,Bt.jsxs)("span",{className:"text-zinc-400 text-xs font-bold uppercase",children:[S&&w.ssNumber?"SS".concat(w.ssNumber," "):"",w.name,k&&" (".concat(w.numberOfLaps," ").concat(p("scene3.laps").toLowerCase(),")")]})})]}),N.length>0&&(0,Bt.jsxs)("div",{className:"mb-2",children:[(0,Bt.jsx)("div",{className:"px-3 py-1 bg-[#FF8C00]/20 border-l-2 border-[#FF8C00]",children:(0,Bt.jsxs)("span",{className:"text-[#FF8C00] text-xs font-bold uppercase flex items-center gap-1",children:[(0,Bt.jsx)(uy,{className:"w-3 h-3 animate-pulse"}),p(k?"scene2.racing":"scene2.onStage")]})}),N.map((e,t)=>R(e))]}),E.length>0&&(0,Bt.jsxs)("div",{className:"mb-2",children:[(0,Bt.jsx)("div",{className:"px-3 py-1 bg-[#22C55E]/20 border-l-2 border-[#22C55E]",children:(0,Bt.jsx)("span",{className:"text-[#22C55E] text-xs font-bold uppercase",children:p("scene2.finished")})}),E.map((e,t)=>R(e))]}),j.length>0&&(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)("div",{className:"px-3 py-1 bg-zinc-800/50 border-l-2 border-zinc-600",children:(0,Bt.jsx)("span",{className:"text-zinc-400 text-xs font-bold uppercase",children:p(k?"scene2.notStarted":"scene2.willStart")})}),j.map((e,t)=>R(e))]})]}),(0,Bt.jsx)("div",{className:"flex-1 relative",style:{backgroundColor:u},children:T&&T.streamUrl&&!n?(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Iv,{pilotId:T.id,streamUrl:T.streamUrl,name:T.name,className:"w-full h-full"}),(0,Bt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-6",children:(0,Bt.jsxs)("div",{className:"flex items-center gap-4",children:[A&&(0,Bt.jsx)("div",{className:"bg-[#FF4500] px-3 py-1 rounded",children:(0,Bt.jsxs)("span",{className:"text-white font-bold text-2xl",children:["P",A.position]})}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)("p",{className:"text-white text-3xl font-bold uppercase",style:{fontFamily:"Barlow Condensed, sans-serif"},children:T.name}),k&&A&&(0,Bt.jsxs)("p",{className:"text-[#FACC15] text-lg font-mono",children:[p("times.lap")," ",A.completedLaps||0,"/",(null===w||void 0===w?void 0:w.numberOfLaps)||0]})]})]})})]}):(0,Bt.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Bt.jsx)("p",{className:"text-white text-xl",children:p("scene2.selectPilotWithStream")})})})]})}const fy=e=>{if(!e)return"-";const t=e/1e3,n=Math.floor(t/60),r=(t%60).toFixed(3);return"".concat(n,":").concat(r.padStart(6,"0"))};function py(t){let{hideStreams:n=!1}=t;const{pilots:r,stages:o,times:a,startTimes:s,categories:i,logoUrl:l,lapTimes:u,stagePilots:d}=Ht(),{t:h}=no(),[f,p]=(0,e.useState)(null),[m,g]=(0,e.useState)("all"),[v,y]=(0,e.useState)(new Date),b=o.find(e=>e.id===f),x=o.filter(e=>"SS"===e.type),w=o.filter(e=>"Lap Race"===e.type),k=[...x].sort((e,t)=>e.startTime?t.startTime?e.startTime.localeCompare(t.startTime):-1:1),S=[...w].sort((e,t)=>e.startTime?t.startTime?e.startTime.localeCompare(t.startTime):-1:1);(0,e.useEffect)(()=>{const e=setInterval(()=>y(new Date),100);return()=>clearInterval(e)},[]);const C=(0,e.useMemo)(()=>{if(f&&b){if("Lap Race"===b.type)return((e,t,n,r,o)=>{const a=r[t]||e.map(e=>e.id),s=e.filter(e=>a.includes(e.id)).map(e=>{var r;const a=(null===(r=n[e.id])||void 0===r?void 0:r[t])||[],s=a.filter(e=>e&&""!==e.trim()).length;let i=0;a.forEach(e=>{if(!e)return;const t=e.split(":");if(t.length>=2){const e=3===t.length&&parseInt(t[0])||0,n=3===t.length?parseInt(t[1])||0:parseInt(t[0])||0,r=3===t.length?t[2]:t[1],[o,a]=(r||"0").split(".");i+=1e3*(3600*e+60*n+parseFloat(o||0)+parseFloat("0.".concat(a||0)))}});const l=s>=o,u=s>0&&!l;return c(c({},e),{},{completedLaps:s,totalTimeMs:i,isFinished:l,isRacing:u,hasTime:s>0,sortTime:l?i:u?i+999999999:1/0})});return s.sort((e,t)=>e.isFinished&&t.isFinished?e.totalTimeMs-t.totalTimeMs:e.isFinished&&!t.isFinished?-1:!e.isFinished&&t.isFinished?1:e.isRacing&&t.isRacing?t.completedLaps!==e.completedLaps?t.completedLaps-e.completedLaps:e.totalTimeMs-t.totalTimeMs:e.isRacing&&!t.isRacing?-1:!e.isRacing&&t.isRacing?1:0),s})(r,f,u,d,b.numberOfLaps||5);if("SS"===b.type)return r.map(e=>{var t,n;const r=ty(e.id,f,s,a),o=null===(t=s[e.id])||void 0===t?void 0:t[f],i=null===(n=a[e.id])||void 0===n?void 0:n[f];let l="-",u="text-white",d=1/0;"racing"===r&&o?(l=ny(o),u="text-[#FACC15]",d=ry(l)||1/0):"finished"===r&&i&&(l=i,u="text-white",d=ry(i));let h=0,p=0,m=!1;for(const c of k){var g;const t=null===(g=a[e.id])||void 0===g?void 0:g[c.id];if(t)h+=ry(t),p++;else if(c.id===f){var v;const t=ty(e.id,c.id,s,a),n=null===(v=s[e.id])||void 0===v?void 0:v[c.id];if("racing"===t&&n){const e=ny(n);h+=ry(e)||0,m=!0}}if(c.id===f)break}const y=Math.floor(h/60),b=(h%60).toFixed(3).padStart(6,"0"),x=p>0||m?"".concat(y,":").concat(b):"-",w=m?"text-[#FACC15]":"text-white";return c(c({},e),{},{displayTime:l,timeColor:u,sortTime:d,overallTime:h,overallDisplay:x,overallColor:w,hasTime:"finished"===r||"racing"===r,status:r})}).sort((e,t)=>e.hasTime||t.hasTime?e.hasTime?t.hasTime?e.sortTime-t.sortTime:-1:1:0)}return r.map(e=>{let t=0,n=0,r=!1;k.forEach(o=>{var i;const l=null===(i=a[e.id])||void 0===i?void 0:i[o.id];if(l)t+=ry(l),n++;else{var c;const n=ty(e.id,o.id,s,a),i=null===(c=s[e.id])||void 0===c?void 0:c[o.id];if("racing"===n&&i&&!r){const e=ny(i);t+=ry(e),r=!0}}});const o=Math.floor(t/60),i=(t%60).toFixed(3).padStart(6,"0"),l=n>0||r?"".concat(o,":").concat(i):"-";return c(c({},e),{},{totalTime:t,completedStages:n,displayTime:l,timeColor:r?"text-[#FACC15]":"text-white",sortTime:n>0||r?t:1/0,overallDisplay:l,hasTime:n>0||r})}).sort((e,t)=>e.hasTime||t.hasTime?e.hasTime?t.hasTime?e.sortTime-t.sortTime:-1:1:0)},[f,b,r,a,s,u,d,k]),N=C.find(e=>e.hasTime),E="Lap Race"===(null===b||void 0===b?void 0:b.type);return(0,Bt.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center p-8","data-testid":"scene-3-leaderboard",children:[l&&(0,Bt.jsx)("div",{className:"absolute top-8 right-8 z-10",children:(0,Bt.jsx)("img",{src:l,alt:"Channel Logo",className:"h-28 max-w-[280px] object-contain"})}),(0,Bt.jsx)(ey,{children:(0,Bt.jsx)("div",{className:"space-y-4",children:(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white text-xs uppercase mb-2 block",children:h("scene3.selectView")}),(0,Bt.jsxs)(vp,{value:f||"overall",onValueChange:e=>p("overall"===e?null:e),children:[(0,Bt.jsx)(bp,{className:"bg-[#18181B] border-zinc-700 text-white text-sm",children:(0,Bt.jsx)(yp,{})}),(0,Bt.jsxs)(kp,{children:[(0,Bt.jsx)(Sp,{value:"overall",children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(ug,{className:"w-4 h-4 text-[#FF4500]"}),h("scene3.overallRallyStandings")]})}),k.length>0&&(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("div",{className:"px-2 py-1 text-xs text-zinc-500 uppercase border-t border-zinc-700 mt-1",children:h("scene3.specialStages")}),k.map(e=>(0,Bt.jsx)(Sp,{value:e.id,children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(ug,{className:"w-4 h-4 text-[#FF4500]"}),e.ssNumber?"SS".concat(e.ssNumber," - "):"",e.name]})},e.id))]}),S.length>0&&(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("div",{className:"px-2 py-1 text-xs text-zinc-500 uppercase border-t border-zinc-700 mt-1",children:h("scene3.lapRaces")}),S.map(e=>(0,Bt.jsx)(Sp,{value:e.id,children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(dg,{className:"w-4 h-4 text-[#FACC15]"}),e.name," (",e.numberOfLaps," ",h("scene3.laps").toLowerCase(),")"]})},e.id))]})]})]})]})})}),(0,Bt.jsxs)("div",{className:"w-full max-w-6xl",children:[(0,Bt.jsxs)("div",{className:"text-center mb-8",children:[(0,Bt.jsx)("div",{className:"flex items-center justify-center gap-3 mb-2",children:b?(0,Bt.jsx)(Bt.Fragment,{children:e.createElement((e=>{switch(e){case"SS":default:return ug;case"Lap Race":return dg;case"Liaison":return hg;case"Service Park":return fg}})(b.type),{className:"w-10 h-10 ".concat("Lap Race"===b.type?"text-[#FACC15]":"text-[#FF4500]")})}):(0,Bt.jsx)(ug,{className:"w-10 h-10 text-[#FF4500]"})}),(0,Bt.jsx)("h1",{className:"text-6xl font-bold uppercase text-[#FF4500] mb-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:b?"SS"===b.type&&b.ssNumber?"SS".concat(b.ssNumber," - ").concat(b.name):b.name:h("scene3.overallStandings")}),E&&b&&(0,Bt.jsxs)("p",{className:"text-zinc-400 text-xl",children:[b.numberOfLaps," ",h("scene3.laps")]})]}),(0,Bt.jsx)("div",{className:"bg-black/95 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden",children:(0,Bt.jsxs)("table",{className:"w-full",children:[(0,Bt.jsx)("thead",{children:(0,Bt.jsxs)("tr",{className:"bg-[#18181B] text-white border-b border-white/10",children:[(0,Bt.jsx)("th",{className:"p-1 w-1"}),(0,Bt.jsx)("th",{className:"p-4 text-left uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:h("scene3.pos")}),(0,Bt.jsx)("th",{className:"p-4 text-left uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:h("scene3.pilot")}),E?(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("th",{className:"p-4 text-center uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:h("scene3.laps")}),(0,Bt.jsx)("th",{className:"p-4 text-right uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:h("scene3.totalTime")})]}):f?(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("th",{className:"p-4 text-right uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:h("scene3.ssTime")}),(0,Bt.jsx)("th",{className:"p-4 text-right uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:h("scene3.overall")})]}):(0,Bt.jsx)("th",{className:"p-4 text-right uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:h("scene3.overall")}),(0,Bt.jsx)("th",{className:"p-4 text-right uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:h("scene3.gap")})]})}),(0,Bt.jsx)("tbody",{children:C.map((e,t)=>{let r="-";if(N&&e.id!==N.id&&e.hasTime)if(E){if(e.isFinished&&N.isFinished){const t=e.totalTimeMs-N.totalTimeMs;r="+"+fy(t)}else if(e.isRacing||e.isFinished){const t=(N.completedLaps||0)-(e.completedLaps||0);t>0&&(r="+".concat(t," ").concat(h("scene3.laps").toLowerCase()))}}else r="+"+(e.sortTime-N.sortTime).toFixed(3)+"s";else e.hasTime&&e.id===(null===N||void 0===N?void 0:N.id)&&(r=h("scene3.leader"));const o=i.find(t=>t.id===e.categoryId);return(0,Bt.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-colors relative",children:[(0,Bt.jsx)("td",{className:"p-1 w-1 relative",children:o&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1",style:{backgroundColor:o.color}})}),(0,Bt.jsx)("td",{className:"p-4",children:(0,Bt.jsx)("span",{className:"text-3xl font-bold ".concat(0===t&&e.hasTime?"text-[#FACC15]":1===t&&e.hasTime?"text-zinc-300":2===t&&e.hasTime?"text-[#CD7F32]":"text-white"),style:{fontFamily:"JetBrains Mono, monospace"},children:e.hasTime?t+1:"-"})}),(0,Bt.jsx)("td",{className:"p-4",children:(0,Bt.jsxs)("div",{className:"flex items-center gap-3",children:[e.streamUrl&&e.isActive&&!n?(0,Bt.jsx)("div",{className:"w-32 h-18 rounded overflow-hidden bg-black",style:{aspectRatio:"16/9"},children:(0,Bt.jsx)(Iv,{pilotId:e.id,streamUrl:e.streamUrl,name:e.name,className:"w-full h-full"})}):e.picture?(0,Bt.jsx)("img",{src:e.picture,alt:e.name,className:"w-12 h-12 rounded object-cover"}):(0,Bt.jsx)("div",{className:"w-12 h-12 rounded bg-zinc-800 flex items-center justify-center",children:(0,Bt.jsx)("span",{className:"text-lg font-bold text-zinc-600",children:e.name.charAt(0)})}),(0,Bt.jsx)("span",{className:"text-white text-xl font-bold uppercase",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e.name})]})}),E?(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("td",{className:"p-4 text-center",children:(0,Bt.jsxs)("span",{className:"text-xl font-mono ".concat(e.isFinished?"text-[#22C55E]":e.isRacing?"text-[#FACC15]":"text-zinc-500"),style:{fontFamily:"JetBrains Mono, monospace"},children:[e.completedLaps||0,"/",(null===b||void 0===b?void 0:b.numberOfLaps)||0]})}),(0,Bt.jsx)("td",{className:"p-4 text-right",children:(0,Bt.jsx)("span",{className:"text-2xl font-mono ".concat(e.isFinished?"text-[#22C55E]":e.isRacing?"text-[#FACC15]":"text-zinc-500"),style:{fontFamily:"JetBrains Mono, monospace"},children:e.hasTime?fy(e.totalTimeMs):"-"})})]}):f?(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("td",{className:"p-4 text-right",children:(0,Bt.jsx)("span",{className:"text-2xl font-mono ".concat(e.timeColor),style:{fontFamily:"JetBrains Mono, monospace"},children:e.displayTime})}),(0,Bt.jsx)("td",{className:"p-4 text-right",children:(0,Bt.jsx)("span",{className:"text-xl font-mono ".concat(e.overallColor||"text-white"),style:{fontFamily:"JetBrains Mono, monospace"},children:e.overallDisplay})})]}):(0,Bt.jsx)("td",{className:"p-4 text-right",children:(0,Bt.jsx)("span",{className:"text-xl font-mono ".concat(e.timeColor),style:{fontFamily:"JetBrains Mono, monospace"},children:e.overallDisplay})}),(0,Bt.jsx)("td",{className:"p-4 text-right",children:(0,Bt.jsx)("span",{className:"text-zinc-400 text-lg font-mono",style:{fontFamily:"JetBrains Mono, monospace"},children:r})})]},e.id)})})]})}),0===C.length&&(0,Bt.jsx)("div",{className:"text-center py-12",children:(0,Bt.jsx)("p",{className:"text-zinc-500 text-xl",children:"No data available"})})]})]})}const my=e=>{switch(e){case"SS":default:return ug;case"Lap Race":return dg;case"Liaison":return hg;case"Service Park":return fg}},gy=e=>{switch(e){case"SS":default:return"#FF4500";case"Lap Race":return"#FACC15";case"Liaison":return"#3B82F6";case"Service Park":return"#22C55E"}},vy=e=>{if(!e)return"-";const t=e/1e3,n=Math.floor(t/60),r=(t%60).toFixed(3);return"".concat(n,":").concat(r.padStart(6,"0"))};function yy(t){var n,r;let{hideStreams:o=!1}=t;const{pilots:a,stages:s,times:i,startTimes:l,currentStageId:c,chromaKey:u,logoUrl:d,lapTimes:h,stagePilots:f}=Ht(),{t:p}=no(),[m,g]=(0,e.useState)((null===(n=a[0])||void 0===n?void 0:n.id)||null),[v,y]=(0,e.useState)(c||(null===(r=s[0])||void 0===r?void 0:r.id)||null),[b,x]=(0,e.useState)(new Date);(0,e.useEffect)(()=>{const e=setInterval(()=>x(new Date),100);return()=>clearInterval(e)},[]),(0,e.useEffect)(()=>{!m&&a.length>0&&g(a[0].id)},[a,m]),(0,e.useEffect)(()=>{!v&&s.length>0&&y(s[0].id)},[s,v]),(0,e.useEffect)(()=>{c&&c!==v&&y(c)},[c]);const w=a.find(e=>e.id===m),k=s.find(e=>e.id===v),S=(null===k||void 0===k||k.type,null===k||void 0===k||k.type,(0,e.useMemo)(()=>[...s].sort((e,t)=>e.startTime?t.startTime?e.startTime.localeCompare(t.startTime):-1:1),[s])),C=(0,e.useMemo)(()=>w?S.map(e=>{const t="Lap Race"===e.type,n="SS"===e.type;if(t){var r;const t=(null===(r=h[w.id])||void 0===r?void 0:r[e.id])||[],n=t.filter(e=>e&&""!==e.trim()).length,o=e.numberOfLaps||5,a=n>=o,s=n>0&&!a;let i=0;t.forEach(e=>{if(!e)return;const t=e.split(":");if(t.length>=2){const e=3===t.length&&parseInt(t[0])||0,n=3===t.length?parseInt(t[1])||0:parseInt(t[0])||0,r=3===t.length?t[2]:t[1],[o,a]=(r||"0").split(".");i+=1e3*(3600*e+60*n+parseFloat(o||0)+parseFloat("0.".concat(a||0)))}});const l=t.map((n,r)=>{if(!n)return null;return((e,t,n)=>{const r=e=>{if(!e)return null;const t=e.split(":");if(t.length<2)return null;const n=3===t.length&&parseInt(t[0])||0,r=3===t.length?parseInt(t[1])||0:parseInt(t[0])||0,o=3===t.length?t[2]:t[1],[a,s]=(o||"0").split(".");return 1e3*(3600*n+60*r+parseFloat(a||0)+parseFloat("0.".concat(s||0)))},o=r(e),a=t?r(t):n?r(n):null;if(null===o||null===a)return null;const s=o-a;return s<0?null:s})(n,r>0?t[r-1]:null,e.startTime)});let c="-",u="not_started";return a?(c=vy(i),u="finished"):s&&(c="Lap ".concat(n,"/").concat(o),u="racing"),{stage:e,time:c,status:u,isLapRace:!0,completedLaps:n,numberOfLaps:o,totalTimeMs:i,pilotLaps:t,lapDurations:l}}if(n){var o,a;const t=ty(w.id,e.id,l,i),n=null===(o=l[w.id])||void 0===o?void 0:o[e.id],r=null===(a=i[w.id])||void 0===a?void 0:a[e.id];let s="-";return"racing"===t&&n?s=ny(n):"finished"===t&&r?s=r:"not_started"===t&&n&&(s="Start: "+n),{stage:e,time:s,status:t,isLapRace:!1}}{var s,c;const t=null===(s=l[w.id])||void 0===s?void 0:s[e.id],n=null===(c=i[w.id])||void 0===c?void 0:c[e.id];let r="-",o="not_started";return n?(r="".concat(t||"?"," \u2192 ").concat(n),o="finished"):t&&(r="Start: ".concat(t),o="racing"),{stage:e,time:r,status:o,isLapRace:!1}}}):[],[S,w,h,l,i]),N=C.find(e=>e.stage.id===v);return w?(0,Bt.jsxs)("div",{className:"relative w-full h-full flex","data-testid":"scene-4-pilot-focus",children:[(0,Bt.jsx)(ey,{children:(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white text-xs uppercase mb-2 block",children:p("scene4.selectPilot")}),(0,Bt.jsxs)(vp,{value:m,onValueChange:g,children:[(0,Bt.jsx)(bp,{className:"bg-[#18181B] border-zinc-700 text-white text-sm",children:(0,Bt.jsx)(yp,{})}),(0,Bt.jsx)(kp,{children:a.map(e=>(0,Bt.jsx)(Sp,{value:e.id,children:e.name},e.id))})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(kl,{className:"text-white text-xs uppercase mb-2 block",children:p("scene4.selectStage")}),(0,Bt.jsxs)(vp,{value:v,onValueChange:y,children:[(0,Bt.jsx)(bp,{className:"bg-[#18181B] border-zinc-700 text-white text-sm",children:(0,Bt.jsx)(yp,{})}),(0,Bt.jsx)(kp,{children:S.map(e=>{const t=my(e.type);return(0,Bt.jsx)(Sp,{value:e.id,children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(t,{className:"w-4 h-4",style:{color:gy(e.type)}}),"SS"===e.type&&e.ssNumber?"SS".concat(e.ssNumber," - "):"",e.name]})},e.id)})})]})]})]})}),(0,Bt.jsx)("div",{className:"flex-1 p-8",children:w.streamUrl&&!o?(0,Bt.jsxs)("div",{className:"h-full bg-black rounded overflow-hidden border-2 border-[#FF4500] relative",children:[(0,Bt.jsx)(Iv,{pilotId:w.id,streamUrl:w.streamUrl,name:w.name,className:"w-full h-full"}),N&&(0,Bt.jsxs)("div",{className:"absolute top-4 right-4 bg-black/90 backdrop-blur-sm p-4 rounded border border-[#FF4500]",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[e.createElement(my(null===k||void 0===k?void 0:k.type),{className:"w-4 h-4",style:{color:gy(null===k||void 0===k?void 0:k.type)}}),(0,Bt.jsx)("p",{className:"text-zinc-400 text-xs uppercase",children:"SS"===(null===k||void 0===k?void 0:k.type)&&null!==k&&void 0!==k&&k.ssNumber?"SS".concat(k.ssNumber):null===k||void 0===k?void 0:k.name})]}),(0,Bt.jsx)("p",{className:"text-2xl font-mono font-bold ".concat("racing"===N.status?"text-[#FACC15]":"finished"===N.status?"text-[#22C55E]":"text-zinc-500"),style:{fontFamily:"JetBrains Mono, monospace"},children:N.time})]})]}):o&&w.streamUrl?(0,Bt.jsx)("div",{className:"h-full rounded overflow-hidden border-2 border-[#FF4500] relative",style:{backgroundColor:u},children:N&&(0,Bt.jsxs)("div",{className:"absolute top-4 right-4 bg-black/90 backdrop-blur-sm p-4 rounded border border-[#FF4500]",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[e.createElement(my(null===k||void 0===k?void 0:k.type),{className:"w-4 h-4",style:{color:gy(null===k||void 0===k?void 0:k.type)}}),(0,Bt.jsx)("p",{className:"text-zinc-400 text-xs uppercase",children:"SS"===(null===k||void 0===k?void 0:k.type)&&null!==k&&void 0!==k&&k.ssNumber?"SS".concat(k.ssNumber):null===k||void 0===k?void 0:k.name})]}),(0,Bt.jsx)("p",{className:"text-2xl font-mono font-bold ".concat("racing"===N.status?"text-[#FACC15]":"finished"===N.status?"text-[#22C55E]":"text-zinc-500"),style:{fontFamily:"JetBrains Mono, monospace"},children:N.time})]})}):(0,Bt.jsx)("div",{className:"h-full rounded border-2 border-[#FF4500] flex items-center justify-center",style:{backgroundColor:o?u:"black"},children:(0,Bt.jsx)("p",{className:"text-zinc-500 text-xl",children:p("scene4.noStreamAvailable")})})}),(0,Bt.jsxs)("div",{className:"w-1/3 bg-black/95 backdrop-blur-sm p-6 overflow-y-auto",children:[d&&(0,Bt.jsx)("div",{className:"flex justify-center mb-4",children:(0,Bt.jsx)("img",{src:d,alt:"Channel Logo",className:"w-1/2 max-h-16 object-contain"})}),(0,Bt.jsxs)("div",{className:"text-center mb-6",children:[w.picture?(0,Bt.jsx)("img",{src:w.picture,alt:w.name,className:"w-24 h-24 rounded-full object-cover mx-auto mb-3 border-4 border-[#FF4500]"}):(0,Bt.jsx)("div",{className:"w-24 h-24 rounded-full bg-zinc-800 mx-auto mb-3 flex items-center justify-center border-4 border-[#FF4500]",children:(0,Bt.jsx)("span",{className:"text-4xl font-bold text-white",children:w.name.charAt(0)})}),(0,Bt.jsx)("h2",{className:"text-3xl font-bold uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:w.name}),w.carNumber&&(0,Bt.jsxs)("span",{className:"inline-block bg-[#FF4500] text-white text-sm font-bold px-2 py-0.5 rounded mt-1",children:["#",w.carNumber]}),w.isActive&&(0,Bt.jsxs)("div",{className:"inline-flex items-center gap-2 mt-2 px-3 py-1 bg-[#FF4500] rounded-full ml-2",children:[(0,Bt.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,Bt.jsx)("span",{className:"text-white text-xs font-bold uppercase",children:p("scene4.live")})]})]}),N&&N.isLapRace&&(0,Bt.jsxs)("div",{className:"mb-6 p-4 bg-white/5 rounded border border-[#FACC15]/30",children:[(0,Bt.jsxs)("h3",{className:"text-lg font-bold uppercase text-[#FACC15] mb-3 flex items-center gap-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)(dg,{className:"w-5 h-5"}),null===k||void 0===k?void 0:k.name," - ",p("scene4.lapTimes")]}),(0,Bt.jsxs)("div",{className:"space-y-2",children:[Array.from({length:N.numberOfLaps},(e,t)=>{var n,r;const o=null===(n=N.pilotLaps)||void 0===n?void 0:n[t],a=null===(r=N.lapDurations)||void 0===r?void 0:r[t],s=!!o;return(0,Bt.jsxs)("div",{className:"flex justify-between items-center p-2 rounded ".concat(s?"bg-[#22C55E]/10 border border-[#22C55E]/30":"bg-zinc-800/50"),children:[(0,Bt.jsxs)("span",{className:"text-zinc-400 text-sm",children:[p("times.lap")," ",t+1]}),(0,Bt.jsx)("div",{className:"text-right",children:s?(0,Bt.jsx)(Bt.Fragment,{children:(0,Bt.jsx)("span",{className:"text-[#22C55E] font-mono text-sm",style:{fontFamily:"JetBrains Mono, monospace"},children:a?vy(a):"-"})}):(0,Bt.jsx)("span",{className:"text-zinc-600 text-sm",children:"-"})})]},t)}),N.totalTimeMs>0&&(0,Bt.jsxs)("div",{className:"flex justify-between items-center p-2 rounded bg-[#FACC15]/20 border border-[#FACC15]/50 mt-3",children:[(0,Bt.jsx)("span",{className:"text-[#FACC15] font-bold text-sm",children:p("scene4.total")}),(0,Bt.jsx)("span",{className:"text-[#FACC15] font-mono font-bold",style:{fontFamily:"JetBrains Mono, monospace"},children:vy(N.totalTimeMs)})]})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)("h3",{className:"text-xl font-bold uppercase text-[#FF4500] mb-3",style:{fontFamily:"Barlow Condensed, sans-serif"},children:p("scene4.allStageTimes")}),(0,Bt.jsx)("div",{className:"space-y-2",children:0===C.length?(0,Bt.jsx)("p",{className:"text-zinc-500 text-center py-8",children:p("scene4.noStagesRegistered")}):C.map(e=>{const t=my(e.stage.type),n=gy(e.stage.type);return(0,Bt.jsx)("div",{className:"border p-3 cursor-pointer transition-colors ".concat(e.stage.id===v?"bg-[#FF4500]/20 border-[#FF4500]":"bg-white/5 border-white/10 hover:bg-white/10"),onClick:()=>y(e.stage.id),children:(0,Bt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(t,{className:"w-4 h-4",style:{color:n}}),(0,Bt.jsx)("span",{className:"text-zinc-400 uppercase text-sm",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"SS"===e.stage.type&&e.stage.ssNumber?"SS".concat(e.stage.ssNumber):e.stage.name})]}),(0,Bt.jsx)("span",{className:"text-lg font-mono ".concat("racing"===e.status?"text-[#FACC15]":"finished"===e.status?"text-white":"text-zinc-500"),style:{fontFamily:"JetBrains Mono, monospace"},children:e.time})]})},e.stage.id)})})]})]})]}):(0,Bt.jsx)("div",{className:"flex items-center justify-center h-full","data-testid":"scene-4-pilot-focus",children:(0,Bt.jsx)("p",{className:"text-white text-2xl font-bold uppercase",style:{fontFamily:"Barlow Condensed, sans-serif"},children:p("scene4.noPilotSelected")})})}const by=fl("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function xy(){const[t]=Tt(),{t:n}=no(),{chromaKey:r,currentScene:o,setCurrentScene:a,dataVersion:s,wsEnabled:i,wsConnectionStatus:l,wsError:c,connectWebSocket:u,disconnectWebSocket:d}=Ht(),[h,f]=(0,e.useState)(null),[p,m]=(0,e.useState)("normal"),[g,v]=(0,e.useState)(256),[y,b]=(0,e.useState)(!1),[x,w]=(0,e.useState)(""),[k,S]=(0,e.useState)(!1),[C,N]=(0,e.useState)(!1);(0,e.useEffect)(()=>{if(k)return;const e=t.get("ws");e&&"connected"!==l&&"connecting"!==l&&(S(!0),console.log("[Overlay] Auto-connecting with URL key:",e),u(e))},[t,l,u,k]),(0,e.useEffect)(()=>{const e=document.getElementById("emergent-badge");return e&&(e.style.display="none"),()=>{e&&(e.style.display="inline-flex")}},[]),(0,e.useEffect)(()=>{null===h&&f(s)},[s,h]),(0,e.useEffect)(()=>{const e=e=>{const t=parseInt(e.key);t>=1&&t<=4&&a(t)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a]),(0,e.useEffect)(()=>{if("connected"===l)return;const e=setInterval(()=>{m("checking");try{const e=localStorage.getItem("rally_data_version"),t=e?JSON.parse(e):null;t&&"number"===typeof t&&h&&t!==h?(m("changed"),f(t),window.dispatchEvent(new Event("rally-reload-data")),setTimeout(()=>m("normal"),1e3)):setTimeout(()=>m("normal"),300)}catch(Ey){console.error("Heartbeat error:",Ey),m("normal")}},2e3);return()=>clearInterval(e)},[h,l]);const E=[{num:1,name:n("scenes.liveStage")},{num:2,name:n("scenes.timingTower")},{num:3,name:n("scenes.leaderboard")},{num:4,name:n("scenes.pilotFocus")}];return(0,Bt.jsxs)("div",{className:"fixed inset-0 overflow-hidden",style:{backgroundColor:r},"data-testid":"overlay-container",children:[(0,Bt.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-50 bg-black/95 border-b-2 border-[#FF4500] backdrop-blur-sm",children:[(0,Bt.jsxs)("div",{className:"flex items-center justify-between px-4 py-2",children:[(0,Bt.jsx)("div",{className:"flex items-center gap-2",children:E.map(e=>(0,Bt.jsxs)("button",{onClick:()=>a(e.num),className:"px-4 py-1 rounded text-sm font-bold transition-all ".concat(o===e.num?"bg-[#FF4500] text-white":"bg-zinc-800 text-zinc-300 hover:bg-zinc-700"),style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)("span",{className:"text-[#FACC15]",children:e.num})," ",e.name]},e.num))}),(0,Bt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Bt.jsx)(Yv,{}),(0,Bt.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[(0,Bt.jsx)(Fg,{checked:C,onCheckedChange:N,className:"border-zinc-500 data-[state=checked]:bg-[#FF4500] data-[state=checked]:border-[#FF4500]","data-testid":"hide-streams-checkbox"}),(0,Bt.jsxs)("span",{className:"flex items-center gap-1 text-xs text-zinc-300 font-medium",children:[(0,Bt.jsx)(by,{className:"w-3 h-3"}),n("header.hideStreams")]})]}),(0,Bt.jsx)("button",{onClick:()=>b(!y),className:"flex items-center gap-1 px-3 py-1 rounded text-xs font-bold transition-all ".concat("connected"===l?"bg-[#22C55E]/20 text-[#22C55E] border border-[#22C55E]/50":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),"data-testid":"ws-status-button",children:"connected"===l?(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Vv,{className:"w-3 h-3"}),(0,Bt.jsx)("span",{children:"Live"})]}):(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Gv,{className:"w-3 h-3"}),(0,Bt.jsx)("span",{children:n("header.connect")})]})}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2 min-w-[85px]",children:[(0,Bt.jsx)("div",{className:"w-3 h-3 rounded-full transition-all duration-200 flex-shrink-0 ".concat("connected"===l?"bg-[#22C55E]":"checking"===p?"bg-[#22C55E] animate-pulse":"changed"===p?"bg-[#FF4500] animate-pulse":"bg-zinc-700")}),(0,Bt.jsx)("span",{className:"text-xs text-zinc-500 whitespace-nowrap",children:"connected"===l?"WebSocket":n("changed"===p?"header.updated":"header.local")})]})]})]}),y&&(0,Bt.jsxs)("div",{className:"absolute top-full right-4 mt-2 p-4 bg-[#18181B] border border-zinc-700 rounded-lg shadow-xl z-50 w-80",children:[(0,Bt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Bt.jsx)("h3",{className:"text-white font-bold text-sm",children:n("config.liveSync")}),(0,Bt.jsx)("button",{onClick:()=>b(!1),className:"text-zinc-500 hover:text-white",children:(0,Bt.jsx)(Hm,{className:"w-4 h-4"})})]}),"connected"===l?(0,Bt.jsxs)("div",{className:"space-y-3",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2 text-[#22C55E] text-sm",children:[(0,Bt.jsx)(Vv,{className:"w-4 h-4"}),(0,Bt.jsx)("span",{children:n("config.connected")})]}),(0,Bt.jsx)(qa,{variant:"destructive",size:"sm",className:"w-full",onClick:()=>{d(),b(!1)},children:n("header.disconnect")})]}):(0,Bt.jsxs)("div",{className:"space-y-3",children:[(0,Bt.jsx)("p",{className:"text-zinc-400 text-xs",children:n("config.pasteKeyToConnect")}),(0,Bt.jsx)(Ga,{value:x,onChange:e=>w(e.target.value),placeholder:n("config.channelKeyPlaceholder"),className:"bg-[#09090B] border-zinc-700 text-white font-mono text-sm","data-testid":"ws-key-input"}),c&&(0,Bt.jsx)("p",{className:"text-red-400 text-xs",children:c}),(0,Bt.jsx)(qa,{className:"w-full bg-[#FF4500] hover:bg-[#FF4500]/90",size:"sm",onClick:async()=>{if(!x.trim())return;await u(x.trim())&&(b(!1),w(""))},disabled:"connecting"===l||!x.trim(),"data-testid":"ws-connect-button",children:n("connecting"===l?"config.connecting":"header.connect")})]})]})]}),(0,Bt.jsx)("div",{className:"absolute left-0 top-12 bottom-0 bg-black/95 border-r-2 border-[#FF4500] backdrop-blur-sm z-40 p-4 overflow-y-auto resize-x",style:{width:"".concat(g,"px"),minWidth:"200px",maxWidth:"400px"},id:"left-controls"}),(0,Bt.jsx)("div",{className:"pt-12 h-full transition-all",style:{paddingLeft:"".concat(g,"px")},children:(()=>{switch(o){case 1:default:return(0,Bt.jsx)(cy,{hideStreams:C});case 2:return(0,Bt.jsx)(hy,{hideStreams:C});case 3:return(0,Bt.jsx)(py,{hideStreams:C});case 4:return(0,Bt.jsx)(yy,{hideStreams:C})}})()})]})}var wy=(e,t,n,r,o,a,s,i)=>{let l=document.documentElement,c=["light","dark"];function u(t){(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,r=n&&a?o.map(e=>a[e]||e):o;n?(l.classList.remove(...r),l.classList.add(a&&a[t]?a[t]:t)):l.setAttribute(e,t)}),function(e){i&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(r)u(r);else try{let e=localStorage.getItem(t)||n;u(s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(d){}},ky=e.createContext(void 0),Sy={setTheme:e=>{},themes:[]};e.memo(t=>{let{forcedTheme:n,storageKey:r,attribute:o,enableSystem:a,enableColorScheme:s,defaultTheme:i,value:l,themes:u,nonce:d,scriptProps:h}=t,f=JSON.stringify([o,r,i,n,u,l,a,s]).slice(1,-1);return e.createElement("script",c(c({},h),{},{suppressHydrationWarning:!0,nonce:"undefined"==typeof window?d:"",dangerouslySetInnerHTML:{__html:"(".concat(wy.toString(),")(").concat(f,")")}}))});const Cy=t=>{let n=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));const{theme:r="system"}=(()=>{var t;return null!=(t=e.useContext(ky))?t:Sy})();return(0,Bt.jsx)(sl,c({theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},n))};const Ny=function(){return(0,Bt.jsx)(oo,{children:(0,Bt.jsx)(qt,{children:(0,Bt.jsxs)(St,{basename:"/Nero-Rally-Show-Overlay",children:[(0,Bt.jsxs)(We,{children:[(0,Bt.jsx)(Ue,{path:"/",element:(0,Bt.jsx)(Zv,{})}),(0,Bt.jsx)(Ue,{path:"/overlay",element:(0,Bt.jsx)(xy,{})})]}),(0,Bt.jsx)(Cy,{position:"top-right"})]})})})};r.createRoot(document.getElementById("root")).render((0,Bt.jsx)(e.StrictMode,{children:(0,Bt.jsx)(Ny,{})}))})()})();
//# sourceMappingURL=main.db88105d.js.map