/*! For license information please see main.6a17b3e9.js.LICENSE.txt */
(()=>{var e={259(e,t,n){var r;r=()=>{var e,t={},r={exports:t},o=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&h(e,n,t[n]);if(c)for(var n of c(t))d.call(t,n)&&h(e,n,t[n]);return e},p=(e,t)=>a(e,i(t)),m=(e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})},g=function(e,t){this[0]=e,this[1]=t},v={};m(v,{ErrorInfo:()=>E,Realtime:()=>cr,Rest:()=>An,default:()=>io,makeProtocolMessageFromDeserialized:()=>bn,msgpack:()=>oo}),r.exports=(e=v,((e,t,n,r)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let a of l(t))u.call(e,a)||a===n||o(e,a,{get:()=>t[a],enumerable:!(r=s(t,a))||r.enumerable});return e})(o({},"__esModule",{value:!0}),e));var y=class{},b="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:self;function w(e,t){return"".concat(e).padStart(t?3:2,"0")}function x(e){return y.Config.logTimestamps?function(t){const n=new Date;e(w(n.getHours())+":"+w(n.getMinutes())+":"+w(n.getSeconds())+"."+w(n.getMilliseconds(),1)+" "+t)}:function(t){e(t)}}var k=class e{constructor(){this.deprecated=(e,t)=>{this.deprecationWarning("".concat(e," is deprecated and will be removed in a future version. ").concat(t))},this.shouldLog=e=>e<=this.logLevel,this.setLog=(e,t)=>{void 0!==e&&(this.logLevel=e),void 0!==t&&(this.logHandler=this.logErrorHandler=t)},this.logLevel=e.defaultLogLevel,this.logHandler=e.defaultLogHandler,this.logErrorHandler=e.defaultLogErrorHandler}static initLogHandlers(){const[t,n]=(()=>{var e;let t,n;return"function"===typeof(null==(e=null==b?void 0:b.console)?void 0:e.log)?(t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log.apply(console,t)},n=console.warn?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn.apply(console,t)}:t):t=n=function(){},[t,n].map(x)})();this.defaultLogHandler=t,this.defaultLogErrorHandler=n,this.defaultLogger=new e}static logActionNoStrip(e,t,n,r){e.logAction(t,n,r)}logAction(e,t,n){this.shouldLog(e)&&(1===e?this.logErrorHandler:this.logHandler)("Ably: "+t+": "+n,e)}renamedClientOption(e,t){this.deprecationWarning("The `".concat(e,"` client option has been renamed to `").concat(t,"`. Please update your code to use `").concat(t,"` instead. `").concat(e,"` will be removed in a future version."))}renamedMethod(e,t,n){this.deprecationWarning("`".concat(e,"`\u2019s `").concat(t,"` method has been renamed to `").concat(n,"`. Please update your code to use `").concat(n,"` instead. `").concat(t,"` will be removed in a future version."))}deprecationWarning(e){this.shouldLog(1)&&this.logErrorHandler("Ably: Deprecation warning - ".concat(e),1)}};k.defaultLogLevel=1,k.LOG_NONE=0,k.LOG_ERROR=1,k.LOG_MAJOR=2,k.LOG_MINOR=3,k.LOG_MICRO=4,k.logAction=(e,t,n,r)=>{k.logActionNoStrip(e,t,n,r)};var S=k,C={};function N(e){let t="["+e.constructor.name;return e.message&&(t+=": "+e.message),e.statusCode&&(t+="; statusCode="+e.statusCode),e.code&&(t+="; code="+e.code),e.cause&&(t+="; cause="+Z(e.cause)),!e.href||e.message&&e.message.indexOf("help.ably.io")>-1||(t+="; see "+e.href+" "),t+="]",t}m(C,{Format:()=>K,allSame:()=>q,allToLowerCase:()=>le,allToUpperCase:()=>ce,arrChooseN:()=>oe,arrDeleteValue:()=>U,arrEquals:()=>ve,arrIntersect:()=>F,arrIntersectOb:()=>B,arrPopRandomElement:()=>$,arrWithoutValue:()=>H,cheapRandStr:()=>ne,containsValue:()=>D,copy:()=>j,createMissingPluginError:()=>ye,dataSizeBytes:()=>te,decodeBody:()=>se,encodeBody:()=>ie,ensureArray:()=>T,forInOwnNonNullProperties:()=>V,getBackoffCoefficient:()=>ue,getGlobalObject:()=>fe,getJitterCoefficient:()=>de,getRetryTime:()=>he,inherits:()=>L,inspectBody:()=>ee,inspectError:()=>Z,intersect:()=>z,isEmpty:()=>A,isErrorInfoOrPartialErrorInfo:()=>X,isNil:()=>P,isObject:()=>_,keysArray:()=>W,listenerToAsyncIterator:()=>xe,matchDerivedChannel:()=>me,mixin:()=>O,parseQueryString:()=>Y,prototypicalClone:()=>I,randomString:()=>re,shallowClone:()=>M,shallowEquals:()=>pe,stringifyValues:()=>Q,throwMissingPluginError:()=>be,toBase64:()=>ge,toQueryString:()=>J,valuesArray:()=>G,whenPromiseSettles:()=>ae,withTimeoutAsync:()=>we});var E=class e extends Error{constructor(t,n,r,o){super(t),"undefined"!==typeof Object.setPrototypeOf&&Object.setPrototypeOf(this,e.prototype),this.code=n,this.statusCode=r,this.cause=o}toString(){return N(this)}static fromValues(t){const{message:n,code:r,statusCode:o}=t;if("string"!==typeof n||"number"!==typeof r||"number"!==typeof o)throw new Error("ErrorInfo.fromValues(): invalid values: "+y.Config.inspect(t));const a=Object.assign(new e(n,r,o),t);return a.code&&!a.href&&(a.href="https://help.ably.io/error/"+a.code),a}},R=class e extends Error{constructor(t,n,r,o){super(t),"undefined"!==typeof Object.setPrototypeOf&&Object.setPrototypeOf(this,e.prototype),this.code=n,this.statusCode=r,this.cause=o}toString(){return N(this)}static fromValues(t){const{message:n,code:r,statusCode:o}=t;if("string"!==typeof n||!P(r)&&"number"!==typeof r||!P(o)&&"number"!==typeof o)throw new Error("PartialErrorInfo.fromValues(): invalid values: "+y.Config.inspect(t));const a=Object.assign(new e(n,r,o),t);return a.code&&!a.href&&(a.href="https://help.ably.io/error/"+a.code),a}};function O(e){for(let t=0;t<(arguments.length<=1?0:arguments.length-1);t++){const n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];if(!n)break;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}function j(e){return O({},e)}function T(e){return P(e)?[]:Array.isArray(e)?e:[e]}function _(e){return"[object Object]"==Object.prototype.toString.call(e)}function A(e){for(const t in e)return!1;return!0}function P(e){return null==e}function M(e){const t=new Object;for(const n in e)t[n]=e[n];return t}function I(e,t){class n{}n.prototype=e;const r=new n;return t&&O(r,t),r}var L=function(e,t){y.Config.inherits?y.Config.inherits(e,t):(e.super_=t,e.prototype=I(t.prototype,{constructor:e}))};function D(e,t){for(const n in e)if(e[n]==t)return!0;return!1}function z(e,t){return Array.isArray(t)?F(e,t):B(e,t)}function F(e,t){const n=[];for(let r=0;r<e.length;r++){const o=e[r];-1!=t.indexOf(o)&&n.push(o)}return n}function B(e,t){const n=[];for(let r=0;r<e.length;r++){const o=e[r];o in t&&n.push(o)}return n}function U(e,t){const n=e.indexOf(t),r=-1!=n;return r&&e.splice(n,1),r}function H(e,t){const n=e.slice();return U(n,t),n}function W(e,t){const n=[];for(const r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||n.push(r);return n}function G(e,t){const n=[];for(const r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||n.push(e[r]);return n}function V(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n]&&t(n)}function q(e,t){if(0===e.length)return!0;const n=e[0][t];return e.every(function(e){return e[t]===n})}var K=(e=>(e.msgpack="msgpack",e.json="json",e))(K||{});function $(e){return e.splice((t=e,Math.floor(Math.random()*t.length)),1)[0];var t}function J(e){const t=[];if(e)for(const n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function Q(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,String(n)]}))}function Y(e){let t;const n=/([^?&=]+)=?([^&]*)/g,r={};for(;t=n.exec(e);)r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return r}function X(e){return"object"==typeof e&&null!==e&&(e instanceof E||e instanceof R)}function Z(e){var t,n;return e instanceof Error||"ErrorInfo"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)||"PartialErrorInfo"===(null==(n=null==e?void 0:e.constructor)?void 0:n.name)?e.toString():y.Config.inspect(e)}function ee(e){return y.BufferUtils.isBuffer(e)?e.toString():"string"===typeof e?e:y.Config.inspect(e)}function te(e){if(y.BufferUtils.isBuffer(e))return y.BufferUtils.byteLength(e);if("string"===typeof e)return y.Config.stringByteSize(e);if("number"===typeof e)return 8;if("boolean"===typeof e)return 1;throw new Error("Expected input of Utils.dataSizeBytes to be a string, a number, a boolean or a buffer, but was: ".concat(typeof e))}function ne(){return String(Math.random()).substr(2)}var re=async e=>{const t=await y.Config.getRandomArrayBuffer(e);return y.BufferUtils.base64Encode(t)};function oe(e,t){const n=Math.min(t,e.length),r=e.slice(),o=[];for(let a=0;a<n;a++)o.push($(r));return o}function ae(e,t){e.then(e=>{null==t||t(null,e)}).catch(e=>{null==t||t(e)})}function se(e,t,n){return"msgpack"==n?(t||be("MsgPack"),t.decode(e)):JSON.parse(String(e))}function ie(e,t,n){return"msgpack"==n?(t||be("MsgPack"),t.encode(e,!0)):JSON.stringify(e)}function le(e){return e.map(function(e){return e&&e.toLowerCase()})}function ce(e){return e.map(function(e){return e&&e.toUpperCase()})}function ue(e){return Math.min((e+2)/3,2)}function de(){return 1-.2*Math.random()}function he(e,t){return e*ue(t)*de()}function fe(){return"undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:self}function pe(e,t){return Object.keys(e).every(n=>e[n]===t[n])&&Object.keys(t).every(n=>t[n]===e[n])}function me(e){const t=e.match(/^(\[([^?]*)(?:(.*))\])?(.+)$/);if(!t||!t.length||t.length<5)throw new E("regex match failed",400,40010);if(t[2])throw new E("cannot use a derived option with a ".concat(t[2]," channel"),400,40010);return{qualifierParam:t[3]||"",channelName:t[4]}}function ge(e){const t=y.BufferUtils,n=t.utf8Encode(e);return t.base64Encode(n)}function ve(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})}function ye(e){return new E("".concat(e," plugin not provided"),40019,400)}function be(e){throw ye(e)}async function we(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=new E(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Timeout expired",5e4,500);return Promise.race([e,new Promise((e,r)=>setTimeout(()=>r(n),t))])}function xe(e){return((e,t,n)=>{var r=(e,t,o,a)=>{try{var s=n[e](t),i=(t=s.value)instanceof g,l=s.done;Promise.resolve(i?t[0]:t).then(n=>i?r("return"===e?e:"next",t[1]?{done:n.done,value:n.value}:n,o,a):o({value:n,done:l})).catch(e=>r("throw",e,o,a))}catch(c){a(c)}},o=e=>a[e]=t=>new Promise((n,o)=>r(e,t,n,o)),a={};return n=n.apply(e,t),a[Symbol.asyncIterator]=()=>a,o("next"),o("throw"),o("return"),a})(this,null,function*(){const t=[];let n=null;const r=e(e=>{if(n){const t=n;n=null,t(e)}else t.push(e)});try{for(;;)if(t.length>0)yield t.shift();else{if(n)throw new E("Concurrent next() calls are not supported",4e4,400);const e=yield new g(new Promise(e=>{n=e}));yield e}}finally{r()}})}var ke="2.17.1",Se={ENDPOINT:"main",ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["main.a.fallback.ably-realtime.com","main.b.fallback.ably-realtime.com","main.c.fallback.ably-realtime.com","main.d.fallback.ably-realtime.com","main.e.fallback.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:ke,protocolVersion:5,agent:"ably-js/"+ke,getPort:function(e,t){return t||e.tls?e.tlsPort:e.port},getHttpScheme:function(e){return e.tls?"https://":"http://"},getPrimaryDomainFromEndpoint:Ne,getEndpointFallbackHosts:Ee,getFallbackHosts:Oe,getHosts:function(e){return[e.primaryDomain].concat(Oe(e))},checkHost:je,objectifyOptions:function(e,t,n,r,o){if(void 0===e){const e="".concat(n,t?" must be initialized with either a client options object, an Ably API key, or an Ably Token":" must be initialized with a client options object");throw S.logAction(r,S.LOG_ERROR,"".concat(n,"()"),e),new Error(e)}let a;if("string"===typeof e)if(-1==e.indexOf(":")){if(!t){const e="".concat(n," cannot be initialized with just an Ably Token; you must provide a client options object with a `plugins` property. (Set this Ably Token as the object\u2019s `token` property.)");throw S.logAction(r,S.LOG_ERROR,"".concat(n,"()"),e),new Error(e)}a={token:e}}else{if(!t){const e="".concat(n," cannot be initialized with just an Ably API key; you must provide a client options object with a `plugins` property. (Set this Ably API key as the object\u2019s `key` property.)");throw S.logAction(r,S.LOG_ERROR,"".concat(n,"()"),e),new Error(e)}a={key:e}}else a=e;return o&&(a=p(f({},a),{plugins:f(f({},o),a.plugins)})),a},normaliseOptions:function(e,t,n){const r=null!=n?n:S.defaultLogger;e.environment&&r.deprecated("The `environment` client option","Use the `endpoint` client option instead."),e.restHost&&r.deprecated("The `restHost` client option","Use the `endpoint` client option instead."),e.realtimeHost&&r.deprecated("The `realtimeHost` client option","Use the `endpoint` client option instead."),function(e){if(e.endpoint&&(e.environment||e.restHost||e.realtimeHost))throw new E("The `endpoint` option cannot be used in conjunction with the `environment`, `restHost`, or `realtimeHost` options.",40106,400);if(e.environment&&(e.restHost||e.realtimeHost))throw new E("The `environment` option cannot be used in conjunction with the `restHost`, or `realtimeHost` options.",40106,400)}(e),"function"===typeof e.recover&&!0===e.closeOnUnload&&(S.logAction(r,S.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),e.recover=void 0),"closeOnUnload"in e||(e.closeOnUnload=!e.recover),"queueMessages"in e||(e.queueMessages=!0);const o=e.endpoint||Se.ENDPOINT;e.fallbackHosts||e.restHost||e.realtimeHost||e.port||e.tlsPort||(e.fallbackHosts=Ee(e.environment||o));const a=e.environment&&"".concat(e.environment,".realtime.ably.net"),s=e.restHost||e.realtimeHost||a||Ne(o);(e.fallbackHosts||[]).concat(s).forEach(je),e.port=e.port||Se.PORT,e.tlsPort=e.tlsPort||Se.TLS_PORT,"tls"in e||(e.tls=!0);const i=function(e){const t={};for(const n in Se.TIMEOUTS)t[n]=e[n]||Se.TIMEOUTS[n];return t}(e);e.useBinaryProtocol=!!t&&("useBinaryProtocol"in e?y.Config.supportsBinary&&e.useBinaryProtocol:y.Config.preferBinary);const l={};e.clientId&&(l["X-Ably-ClientId"]=y.BufferUtils.base64Encode(y.BufferUtils.utf8Encode(e.clientId))),"idempotentRestPublishing"in e||(e.idempotentRestPublishing=!0);let c=null,u=e.connectivityCheckUrl;if(e.connectivityCheckUrl){let[t,n]=e.connectivityCheckUrl.split("?");c=n?Y(n):{},-1===t.indexOf("://")&&(t="https://"+t),u=t}let d=e.wsConnectivityCheckUrl;return d&&-1===d.indexOf("://")&&(d="wss://"+d),p(f({},e),{primaryDomain:s,maxMessageSize:e.maxMessageSize||Se.maxMessageSize,timeouts:i,connectivityCheckParams:c,connectivityCheckUrl:u,wsConnectivityCheckUrl:d,headers:l})},defaultGetHeaders:function(e){let{format:t,protocolVersion:n=Pe.protocolVersion}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{accept:Ae[null!=t?t:e.useBinaryProtocol?"msgpack":"json"],"X-Ably-Version":n.toString(),"Ably-Agent":Te(e)}},defaultPostHeaders:function(e){let{format:t,protocolVersion:n=Pe.protocolVersion}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Ae[null!=t?t:e.useBinaryProtocol?"msgpack":"json"];return{accept:r,"content-type":r,"X-Ably-Version":n.toString(),"Ably-Agent":Te(e)}}};function Ce(e){return e.includes(".")||e.includes("::")||"localhost"===e}function Ne(e){if(Ce(e))return e;if(e.startsWith("nonprod:")){const t=e.replace("nonprod:","");return"".concat(t,".realtime.ably-nonprod.net")}return"".concat(e,".realtime.ably.net")}function Ee(e){return Ce(e)?[]:e.startsWith("nonprod:")?Re(e.replace("nonprod:",""),"ably-realtime-nonprod.com"):Re(e,"ably-realtime.com")}function Re(e,t){return["a","b","c","d","e"].map(n=>"".concat(e,".").concat(n,".fallback.").concat(t))}function Oe(e){const t=e.fallbackHosts,n="undefined"!==typeof e.httpMaxRetryCount?e.httpMaxRetryCount:Se.httpMaxRetryCount;return t?oe(t,n):[]}function je(e){if("string"!==typeof e)throw new E("host must be a string; was a "+typeof e,4e4,400);if(!e.length)throw new E("host must not be zero-length",4e4,400)}function Te(e){let t=Se.agent;if(e.agents)for(var n in e.agents)t+=" "+n+"/"+e.agents[n];return t}function _e(e,t,n){const r=n||{};if(r.cipher){e||be("Crypto");const n=e.getCipher(r.cipher,t);r.cipher=n.cipherParams,r.channelCipher=n.cipher}else"cipher"in r&&(r.cipher=void 0,r.channelCipher=null);return r}var Ae={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},Pe={format:"json",protocolVersion:Se.protocolVersion},Me=Se,Ie=class e{constructor(e,t){this.logger=e,this.members=t||[]}call(e,t){for(const r of this.members)if(r)try{r(e,t)}catch(n){S.logAction(this.logger,S.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+n+"; stack = "+n.stack)}}push(){this.members.push(...arguments)}createPromise(){return new Promise((e,t)=>{this.push((n,r)=>{n?t(n):e(r)})})}resolveAll(e){this.call(null,e)}rejectAll(e){this.call(e)}static create(t,n){const r=new e(t,n);return Object.assign((e,t)=>r.call(e,t),{push:e=>r.push(e),createPromise:()=>r.createPromise(),resolveAll:e=>r.resolveAll(e),rejectAll:e=>r.rejectAll(e)})}},Le=(e=>(e.Get="get",e.Delete="delete",e.Post="post",e.Put="put",e.Patch="patch",e))(Le||{}),De=Le,ze=(e=>(e[e.Success=200]="Success",e[e.NoContent=204]="NoContent",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.RequestTimeout=408]="RequestTimeout",e[e.InternalServerError=500]="InternalServerError",e))(ze||{}),Fe=ze,Be=Math.pow(2,17);function Ue(e){return X(e)?(e.code||(403===e.statusCode?e.code=40300:(e.code=40170,e.statusCode=401)),e):new E(Z(e),e.code||40170,e.statusCode||401)}function He(e){if(!e)return"";"string"==typeof e&&(e=JSON.parse(e));const t=Object.create(null),n=W(e,!0);if(!n)return"";n.sort();for(let r=0;r<n.length;r++)t[n[r]]=e[n[r]].sort();return JSON.stringify(t)}function We(e,t){if(e.authCallback)S.logAction(t,S.LOG_MINOR,"Auth()","using token auth with authCallback");else if(e.authUrl)S.logAction(t,S.LOG_MINOR,"Auth()","using token auth with authUrl");else if(e.key)S.logAction(t,S.LOG_MINOR,"Auth()","using token auth with client-side signing");else{if(!e.tokenDetails){const e="authOptions must include valid authentication parameters";throw S.logAction(t,S.LOG_ERROR,"Auth()",e),new Error(e)}S.logAction(t,S.LOG_MINOR,"Auth()","using token auth with supplied token only")}}function Ge(e){return e.useTokenAuth||!function(e){return"useTokenAuth"in e&&!e.useTokenAuth}(e)&&(e.authCallback||e.authUrl||e.token||e.tokenDetails)}var Ve=0,qe=class{constructor(e,t){if(this.authOptions={},this.client=e,this.tokenParams=t.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,Ge(t))(function(e){return!e.key&&!e.authCallback&&!e.authUrl})(t)&&S.logAction(this.logger,S.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(t.defaultTokenParams,t),We(this.authOptions,this.logger);else{if(!t.key){const e="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw S.logAction(this.logger,S.LOG_ERROR,"Auth()",e),new E(e,40160,401)}S.logAction(this.logger,S.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(t)}}get logger(){return this.client.logger}async authorize(e,t){if(t&&t.key&&this.authOptions.key!==t.key)throw new E("Unable to update auth options with incompatible key",40102,401);try{let n=await this._forceNewToken(null!=e?e:null,null!=t?t:null);return this.client.connection?new Promise((e,t)=>{this.client.connection.connectionManager.onAuthUpdated(n,(n,r)=>n?t(n):e(r))}):n}catch(n){throw this.client.connection&&n.statusCode===Fe.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(n),n}}async _forceNewToken(e,t){this.tokenDetails=null,this._saveTokenOptions(e,t),We(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(e,t){const n=t||this.authOptions,r=e||j(this.tokenParams);let o,a=this.client;if(n.authCallback)S.logAction(this.logger,S.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),o=n.authCallback;else if(n.authUrl)S.logAction(this.logger,S.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),o=(e,t)=>{const r=O({accept:"application/json, text/plain"},n.authHeaders),o=n.authMethod&&"post"===n.authMethod.toLowerCase();let a;const s=n.authUrl.indexOf("?");s>-1&&(a=Y(n.authUrl.slice(s)),n.authUrl=n.authUrl.slice(0,s),o||(n.authParams=O(a,n.authParams)));const i=O({},n.authParams||{},e),l=e=>{var n,r;let o=null!=(n=e.body)?n:null,a=null;if(e.error)S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+Z(e.error));else{const t=null!=(r=e.headers["content-type"])?r:null;a=Array.isArray(t)?t.join(", "):t,S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+a+"; body: "+ee(o))}if(e.error)return void t(e.error,null);if(e.unpacked)return void t(null,o);if(y.BufferUtils.isBuffer(o)&&(o=o.toString()),!a)return void t(new E("authUrl response is missing a content-type header",40170,401),null);const s=a.indexOf("application/json")>-1,i=a.indexOf("text/plain")>-1||a.indexOf("application/jwt")>-1;if(s||i){if(s){if(o.length>Be)return void t(new E("authUrl response exceeded max permitted length",40170,401),null);try{o=JSON.parse(o)}catch(l){return void t(new E("Unexpected error processing authURL response; err = "+l.message,40170,401),null)}}t(null,o,a)}else t(new E("authUrl responded with unacceptable content-type "+a+", should be either text/plain, application/jwt or application/json",40170,401),null)};if(S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+n.authUrl+"; Params: "+JSON.stringify(i)+"; method: "+(o?"POST":"GET")),o){const e=r||{};e["content-type"]="application/x-www-form-urlencoded";const t=J(i).slice(1);ae(this.client.http.doUri(De.Post,n.authUrl,e,t,a),(e,t)=>l(e||t))}else ae(this.client.http.doUri(De.Get,n.authUrl,r||{},null,i),(e,t)=>l(e||t))};else{if(!n.key){const e="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw S.logAction(this.logger,S.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new E(e,40171,403)}S.logAction(this.logger,S.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),o=(e,t)=>{ae(this.createTokenRequest(e,n),(e,n)=>t(e,null!=n?n:null))}}"capability"in r&&(r.capability=He(r.capability));const s=(e,t)=>{const r="/keys/"+e.keyName+"/requestToken",o=Me.defaultPostHeaders(this.client.options,{format:"json"});n.requestHeaders&&O(o,n.requestHeaders),S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+r+"; Token params: "+JSON.stringify(e)),ae(this.client.http.do(De.Post,function(e){return a.baseUri(e)+r},o,JSON.stringify(e),null),(e,n)=>e?t(e):t(n.error,n.body,n.unpacked))};return new Promise((e,t)=>{let a=!1,i=this.client.options.timeouts.realtimeRequestTimeout,l=setTimeout(()=>{a=!0;const e="Token request callback timed out after "+i/1e3+" seconds";S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()",e),t(new E(e,40170,401))},i);o(r,(r,o,i)=>{if(a)return;if(clearTimeout(l),r)return S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+Z(r)),void t(Ue(r));if("string"===typeof o)return void(0===o.length?t(new E("Token string is empty",40170,401)):o.length>Be?t(new E("Token string exceeded max permitted length (was "+o.length+" bytes)",40170,401)):"undefined"===o||"null"===o?t(new E("Token string was literal null/undefined",40170,401)):"{"!==o[0]||i&&i.indexOf("application/jwt")>-1?e({token:o}):t(new E("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)));if("object"!==typeof o||null===o){const e="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof o;return S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()",e),void t(new E(e,40170,401))}const c=JSON.stringify(o).length;if(c>Be&&!n.suppressMaxLengthCheck)t(new E("Token request/details object exceeded max permitted stringified size (was "+c+" bytes)",40170,401));else if("issued"in o)e(o);else{if(!("keyName"in o)){const e="Expected token request callback to call back with a token string, token request object, or token details object";return S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()",e),void t(new E(e,40170,401))}s(o,(n,r,o)=>{if(n)return S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+Z(n)),void t(Ue(n));o||(r=JSON.parse(r)),S.logAction(this.logger,S.LOG_MINOR,"Auth.getToken()","token received"),e(r)})}})})}async createTokenRequest(e,t){t=t||this.authOptions,e=e||j(this.tokenParams);const n=t.key;if(!n)throw new E("No key specified",40101,403);const r=n.split(":"),o=r[0],a=r[1];if(!a)throw new E("Invalid key specified",40101,403);if(""===e.clientId)throw new E("clientId can\u2019t be an empty string",40012,400);"capability"in e&&(e.capability=He(e.capability));const s=O({keyName:o},e),i=e.clientId||"",l=e.ttl||"",c=e.capability||"";s.timestamp||(s.timestamp=await this._getTimestamp(t&&t.queryTime));const u=s.nonce||(s.nonce=("000000"+Math.floor(1e16*Math.random())).slice(-16)),d=s.timestamp,h=s.keyName+"\n"+l+"\n"+c+"\n"+i+"\n"+d+"\n"+u+"\n";return s.mac=s.mac||((e,t)=>{const n=y.BufferUtils,r=n.utf8Encode(e),o=n.utf8Encode(t),a=n.hmacSha256(r,o);return n.base64Encode(a)})(h,a),S.logAction(this.logger,S.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),s}async getAuthParams(){if("basic"==this.method)return{key:this.key};{let e=await this._ensureValidAuthCredentials(!1);if(!e)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:e.token}}}async getAuthHeaders(){if("basic"==this.method)return{authorization:"Basic "+this.basicKey};{const e=await this._ensureValidAuthCredentials(!1);if(!e)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+ge(e.token)}}}_saveBasicOptions(e){this.method="basic",this.key=e.key,this.basicKey=ge(e.key),this.authOptions=e||{},"clientId"in e&&this._userSetClientId(e.clientId)}_saveTokenOptions(e,t){this.method="token",e&&(this.tokenParams=e),t&&(t.token&&(t.tokenDetails="string"===typeof t.token?{token:t.token}:t.token),t.tokenDetails&&(this.tokenDetails=t.tokenDetails),"clientId"in t&&this._userSetClientId(t.clientId),this.authOptions=t)}async _ensureValidAuthCredentials(e){const t=this.tokenDetails;if(t){if(this._tokenClientIdMismatch(t.clientId))throw new E("Mismatch between clientId in token ("+t.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.client.isTimeOffsetSet()||!t.expires||t.expires>=this.client.getTimestampUsingOffset())return S.logAction(this.logger,S.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+t.expires),t;S.logAction(this.logger,S.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const n=(this.waitingForTokenRequest||(this.waitingForTokenRequest=Ie.create(this.logger))).createPromise();if(null!==this.currentTokenRequestId&&!e)return n;const r=this.currentTokenRequestId=Ve++;let o,a=null;try{o=await this.requestToken(this.tokenParams,this.authOptions)}catch(i){a=i}if(this.currentTokenRequestId>r)return S.logAction(this.logger,S.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),n;this.currentTokenRequestId=null;const s=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,a?(null==s||s.rejectAll(a),n):(null==s||s.resolveAll(this.tokenDetails=o),n)}_userSetClientId(e){if("string"!==typeof e&&null!==e)throw new E("clientId must be either a string or null",40012,400);if("*"===e)throw new E('Can\u2019t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const t=this._uncheckedSetClientId(e);if(t)throw t}}_uncheckedSetClientId(e){if(this._tokenClientIdMismatch(e)){const t="Unexpected clientId mismatch: client has "+this.clientId+", requested "+e,n=new E(t,40102,401);return S.logAction(this.logger,S.LOG_ERROR,"Auth._uncheckedSetClientId()",t),n}return this.clientId=this.tokenParams.clientId=e,null}_tokenClientIdMismatch(e){return!(!this.clientId||"*"===this.clientId||!e||"*"===e||this.clientId===e)}static isTokenErr(e){return e.code&&e.code>=40140&&e.code<40150}revokeTokens(e,t){return this.client.rest.revokeTokens(e,t)}async _getTimestamp(e){return this.client.getTimestamp(e||!!this.authOptions.queryTime)}};function Ke(e){const t=[];if(e)for(const n in e)t.push(n+"="+e[n]);return t.join("&")}function $e(e,t){return e+(t?"?":"")+Ke(t)}var Je=class{constructor(e){this.client=e,this.platformHttp=new y.Http(e),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var e,t;return null!=(t=null==(e=this.client)?void 0:e.logger)?t:S.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(e){const t=e.connection,n=t&&t.connectionManager.host;return n?[n].concat(Me.getFallbackHosts(e.options)):Me.getHosts(e.options)}async do(e,t,n,r,o){try{const a=this.client;if(!a)return{error:new E("http.do called without client",5e4,500)};const s="function"===typeof t?t:function(e){return a.baseUri(e)+t},i=a._currentFallback;if(i){if(i.validUntil>Date.now()){const l=await this.doUri(e,s(i.host),n,r,o);return l.error&&this.platformHttp.shouldFallback(l.error)?(a._currentFallback=null,this.do(e,t,n,r,o)):l}a._currentFallback=null}const l=this._getHosts(a);if(1===l.length)return this.doUri(e,s(l[0]),n,r,o);let c=null;const u=async(t,i)=>{const l=t.shift();c=null!=c?c:new Date;const d=await this.doUri(e,s(l),n,r,o);return d.error&&this.platformHttp.shouldFallback(d.error)&&t.length?Date.now()-c.getTime()>a.options.timeouts.httpMaxRetryDuration?{error:new E("Timeout for trying fallback hosts retries. Total elapsed time exceeded the ".concat(a.options.timeouts.httpMaxRetryDuration,"ms limit"),50003,500)}:u(t,!0):(i&&(a._currentFallback={host:l,validUntil:Date.now()+a.options.timeouts.fallbackRetryTimeout}),d)};return u(l)}catch(a){return{error:new E("Unexpected error in Http.do: ".concat(Z(a)),500,5e4)}}}async doUri(e,t,n,r,o){try{!function(e,t,n,r,o){o.shouldLog(S.LOG_MICRO)&&S.logActionNoStrip(o,S.LOG_MICRO,"Http."+e+"()","Sending; "+$e(t,r)+"; Body"+(y.BufferUtils.isBuffer(n)?" (Base64): "+y.BufferUtils.base64Encode(n):": "+n))}(e,t,r,o,this.logger);const a=await this.platformHttp.doUri(e,t,n,r,o);return this.logger.shouldLog(S.LOG_MICRO)&&function(e,t,n,r,o){e.error?S.logActionNoStrip(o,S.LOG_MICRO,"Http."+t+"()","Received Error; "+$e(n,r)+"; Error: "+Z(e.error)):S.logActionNoStrip(o,S.LOG_MICRO,"Http."+t+"()","Received; "+$e(n,r)+"; Headers: "+Ke(e.headers)+"; StatusCode: "+e.statusCode+"; Body"+(y.BufferUtils.isBuffer(e.body)?" (Base64): "+y.BufferUtils.base64Encode(e.body):": "+e.body))}(a,e,t,o,this.logger),a}catch(a){return{error:new E("Unexpected error in Http.doUri: ".concat(Z(a)),500,5e4)}}}};function Qe(e,t,n){let r,o,a;for(let s=0;s<e.length;s++)if(r=e[s],n&&(r=r[n]),Array.isArray(r)){for(;-1!==(o=r.indexOf(t));)r.splice(o,1);n&&0===r.length&&delete e[s][n]}else if(_(r))for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&Array.isArray(r[a])&&Qe([r],t,a)}var Ye=class{constructor(e){this.logger=e,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){const e=t[0];if("function"!==typeof e)throw new Error("EventListener.on(): Invalid arguments: "+y.Config.inspect(t));this.any.push(e)}if(2===t.length){const[e,n]=t;if("function"!==typeof n)throw new Error("EventListener.on(): Invalid arguments: "+y.Config.inspect(t));if(P(e))this.any.push(n);else if(Array.isArray(e))e.forEach(e=>{this.on(e,n)});else{if("string"!==typeof e)throw new Error("EventListener.on(): Invalid arguments: "+y.Config.inspect(t));(this.events[e]||(this.events[e]=[])).push(n)}}}off(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0==t.length||P(t[0])&&P(t[1]))return this.any=[],this.events=Object.create(null),this.anyOnce=[],void(this.eventsOnce=Object.create(null));const[r,o]=t;let a=null,s=null;if(1!==t.length&&o){if("function"!==typeof o)throw new Error("EventEmitter.off(): invalid arguments:"+y.Config.inspect(t));[s,a]=[r,o]}else"function"===typeof r?a=r:s=r;if(a&&P(s))Qe([this.any,this.events,this.anyOnce,this.eventsOnce],a);else if(Array.isArray(s))s.forEach(e=>{this.off(e,a)});else{if("string"!==typeof s)throw new Error("EventEmitter.off(): invalid arguments:"+y.Config.inspect(t));a?Qe([this.events,this.eventsOnce],a,s):(delete this.events[s],delete this.eventsOnce[s])}}listeners(e){if(e){const t=this.events[e]||[];return this.eventsOnce[e]&&Array.prototype.push.apply(t,this.eventsOnce[e]),t.length?t:null}return this.any.length?this.any:null}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o={event:e},a=[];this.anyOnce.length&&(Array.prototype.push.apply(a,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(a,this.any);const s=this.eventsOnce[e];s&&(Array.prototype.push.apply(a,s),delete this.eventsOnce[e]);const i=this.events[e];i&&Array.prototype.push.apply(a,i),a.forEach(e=>{!function(e,t,n,r){try{n.apply(t,r)}catch(o){S.logAction(e,S.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+o+"; stack = "+(o&&o.stack))}}(this.logger,o,e,n)})}once(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.length;if(0===r||1===r&&"function"!==typeof t[0]){const e=t[0];return new Promise(t=>{this.once(e,t)})}const[o,a]=t;if(1===t.length&&"function"===typeof o)this.anyOnce.push(o);else if(P(o)){if("function"!==typeof a)throw new Error("EventEmitter.once(): Invalid arguments:"+y.Config.inspect(t));this.anyOnce.push(a)}else if(Array.isArray(o)){const e=this,n=function(){const r=Array.prototype.slice.call(arguments);if(o.forEach(function(t){e.off(t,n)}),"function"!==typeof a)throw new Error("EventEmitter.once(): Invalid arguments:"+y.Config.inspect(t));a.apply(this,r)};o.forEach(function(t){e.on(t,n)})}else{if("string"!==typeof o)throw new Error("EventEmitter.once(): Invalid arguments:"+y.Config.inspect(t));const e=this.eventsOnce[o]||(this.eventsOnce[o]=[]);if(a){if("function"!==typeof a)throw new Error("EventEmitter.once(): Invalid arguments:"+y.Config.inspect(t));e.push(a)}}}async whenState(e,t){if("string"!==typeof e||"string"!==typeof t)throw new Error("whenState requires a valid state String argument");return e===t?null:this.once(e)}},Xe={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18,OBJECT:19,OBJECT_SYNC:20,ANNOTATION:21},Ze=[];Object.keys(Xe).forEach(function(e){Ze[Xe[e]]=e});var et={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,HAS_OBJECTS:128,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19,ANNOTATION_PUBLISH:1<<21,ANNOTATION_SUBSCRIBE:1<<22,OBJECT_SUBSCRIBE:1<<24,OBJECT_PUBLISH:1<<25},tt=Object.keys(et);et.MODE_ALL=et.PRESENCE|et.PUBLISH|et.SUBSCRIBE|et.PRESENCE_SUBSCRIBE|et.ANNOTATION_PUBLISH|et.ANNOTATION_SUBSCRIBE|et.OBJECT_SUBSCRIBE|et.OBJECT_PUBLISH;var nt=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE","ANNOTATION_PUBLISH","ANNOTATION_SUBSCRIBE","OBJECT_SUBSCRIBE","OBJECT_PUBLISH"];function rt(e,t,n){if(n&&n.cipher){e||be("Crypto");const r=e.getCipher(n.cipher,t);return{cipher:r.cipherParams,channelCipher:r.cipher}}return null!=n?n:{}}async function ot(e,t,n){let r=n.channelCipher,o=e,a=t?t+"/":"";y.BufferUtils.isBuffer(o)||(o=y.BufferUtils.utf8Encode(String(o)),a+="utf-8/");const s=await r.encrypt(o);return a=a+"cipher+"+r.algorithm,{data:s,encoding:a}}async function at(e,t){const{data:n,encoding:r}=st(e.data,e.encoding);return e.data=n,e.encoding=r,null!=t&&t.cipher?async function(e,t){const{data:n,encoding:r}=await ot(e.data,e.encoding,t);return e.data=n,e.encoding=r,e}(e,t):e}function st(e,t){if("string"==typeof e||y.BufferUtils.isBuffer(e)||null===e||void 0===e)return{data:e,encoding:t};if(_(e)||Array.isArray(e))return{data:JSON.stringify(e),encoding:t?t+"/json":"json"};throw new E("Data type is unsupported",40013,400)}async function it(e,t){const{data:n,encoding:r,error:o}=await lt(e.data,e.encoding,t);if(e.data=n,e.encoding=r,o)throw o}async function lt(e,t,n){const r=function(e){return e&&e.channelOptions?e:{channelOptions:e,plugins:{},baseEncodedPreviousPayload:void 0}}(n);let o,a=e,s=e,i=t;if(t){const e=t.split("/");let n,c=e.length,u="";try{for(;(n=c)>0;){const t=e[--c].match(/([-\w]+)(\+([\w-]+))?/);if(!t)break;switch(u=t[1],u){case"base64":s=y.BufferUtils.base64Decode(String(s)),n==e.length&&(a=s);continue;case"utf-8":s=y.BufferUtils.utf8Decode(s);continue;case"json":s=JSON.parse(s);continue;case"cipher":if(null!=r.channelOptions&&r.channelOptions.cipher&&r.channelOptions.channelCipher){const e=t[3],n=r.channelOptions.channelCipher;if(e!=n.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");s=await n.decrypt(s);continue}throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!r.plugins||!r.plugins.vcdiff)throw new E("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if("undefined"===typeof Uint8Array)throw new E("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let e=r.baseEncodedPreviousPayload;"string"===typeof e&&(e=y.BufferUtils.utf8Encode(e));const t=y.BufferUtils.toBuffer(e);s=y.BufferUtils.toBuffer(s),s=y.BufferUtils.arrayBufferViewToBuffer(r.plugins.vcdiff.decode(s,t)),a=s}catch(l){throw new E("Vcdiff delta decode failed with "+l,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(l){const e=l;o=new E("Error processing the ".concat(u," encoding, decoder returned \u2018").concat(e.message,"\u2019"),e.code||40013,400)}finally{i=n<=0?null:e.slice(0,n).join("/")}}return o?{error:o,data:s,encoding:i}:(r.baseEncodedPreviousPayload=a,{data:s,encoding:i})}function ct(){const e=arguments.length>0?"json":"msgpack",{data:t,encoding:n}=ut(this.data,this.encoding,e);return Object.assign({},this,{encoding:n,data:t})}function ut(e,t,n){return e&&y.BufferUtils.isBuffer(e)?"msgpack"===n?{data:y.BufferUtils.toBuffer(e),encoding:t}:{data:y.BufferUtils.base64Encode(e),encoding:t?t+"/base64":"base64"}:{data:e,encoding:t}}var dt={encryptData:ot,encodeData:st,encodeDataForWire:ut,decodeData:lt};function ht(e){const{id:t,connectionId:n,timestamp:r}=e;let o;switch(e.action){case Xe.MESSAGE:o=e.messages;break;case Xe.PRESENCE:case Xe.SYNC:o=e.presence;break;case Xe.ANNOTATION:o=e.annotations;break;case Xe.OBJECT:case Xe.OBJECT_SYNC:o=e.state;break;default:throw new E("Unexpected action "+e.action,4e4,400)}for(let a=0;a<o.length;a++){const e=o[a];e.connectionId||(e.connectionId=n),e.timestamp||(e.timestamp=r),t&&!e.id&&(e.id=t+":"+a)}}function ft(e,t){let n="["+t;for(const r in e)"data"===r?"string"==typeof e.data?n+="; data="+e.data:y.BufferUtils.isBuffer(e.data)?n+="; data (buffer)="+y.BufferUtils.base64Encode(e.data):"undefined"!==typeof e.data&&(n+="; data (json)="+JSON.stringify(e.data)):!r||"extras"!==r&&"operation"!==r?"version"===r?n+="; version="+JSON.stringify(e[r]):"annotations"===r?n+="; annotations="+JSON.stringify(e[r]):void 0!==e[r]&&(n+="; "+r+"="+e[r]):n+="; "+r+"="+JSON.stringify(e[r]);return n+="]",n}var pt=class{},mt=class{constructor(e){var t,n,r,o,a,s,i,l,c,u;this.Platform=y,this.ErrorInfo=E,this.Logger=S,this.Defaults=Me,this.Utils=C,this.EventEmitter=Ye,this.MessageEncoding=dt,this._additionalHTTPRequestImplementations=null!=(t=e.plugins)?t:null,this.logger=new S,this.logger.setLog(e.logLevel,e.logHandler),S.logAction(this.logger,S.LOG_MICRO,"BaseClient()","initialized with clientOptions "+y.Config.inspect(e)),this._MsgPack=null!=(r=null==(n=e.plugins)?void 0:n.MsgPack)?r:null;const d=this.options=Me.normaliseOptions(e,this._MsgPack,this.logger);if(d.key){const e=d.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!e){const e="invalid key parameter";throw S.logAction(this.logger,S.LOG_ERROR,"BaseClient()",e),new E(e,40400,404)}d.keyName=e[1],d.keySecret=e[2]}if("clientId"in d){if("string"!==typeof d.clientId&&null!==d.clientId)throw new E("clientId must be either a string or null",40012,400);if("*"===d.clientId)throw new E('Can\u2019t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}S.logAction(this.logger,S.LOG_MINOR,"BaseClient()","started; version = "+Me.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new Je(this),this.auth=new qe(this,d),this._rest=(null==(o=e.plugins)?void 0:o.Rest)?new e.plugins.Rest(this):null,this._Crypto=null!=(s=null==(a=e.plugins)?void 0:a.Crypto)?s:null,this.__FilteredSubscriptions=null!=(l=null==(i=e.plugins)?void 0:i.MessageInteractions)?l:null,this._Annotations=null!=(u=null==(c=e.plugins)?void 0:c.Annotations)?u:null}get rest(){return this._rest||be("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||be("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}device(){var e;return(null==(e=this.options.plugins)?void 0:e.Push)&&this.push.LocalDevice||be("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(e){return Me.getHttpScheme(this.options)+e+":"+Me.getPort(this.options,!1)}async stats(e){return this.rest.stats(e)}async time(e){return this.rest.time(e)}async request(e,t,n,r,o,a){return this.rest.request(e,t,n,r,o,a)}batchPublish(e){return this.rest.batchPublish(e)}batchPresence(e){return this.rest.batchPresence(e)}setLog(e){this.logger.setLog(e.level,e.handler)}async getTimestamp(e){return!this.isTimeOffsetSet()&&e?this.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.serverTimeOffset||0)}isTimeOffsetSet(){return null!==this.serverTimeOffset}};mt.Platform=y;var gt=mt,vt=class e{toJSON(){var e,t,n;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:null==(e=this.push)?void 0:e.recipient,state:null==(t=this.push)?void 0:t.state,error:null==(n=this.push)?void 0:n.error}}}toString(){var e,t,n,r;let o="[DeviceDetails";return this.id&&(o+="; id="+this.id),this.platform&&(o+="; platform="+this.platform),this.formFactor&&(o+="; formFactor="+this.formFactor),this.clientId&&(o+="; clientId="+this.clientId),this.metadata&&(o+="; metadata="+this.metadata),this.deviceIdentityToken&&(o+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(null==(e=this.push)?void 0:e.recipient)&&(o+="; push.recipient="+JSON.stringify(this.push.recipient)),(null==(t=this.push)?void 0:t.state)&&(o+="; push.state="+this.push.state),(null==(n=this.push)?void 0:n.error)&&(o+="; push.error="+JSON.stringify(this.push.error)),(null==(r=this.push)?void 0:r.metadata)&&(o+="; push.metadata="+this.push.metadata),o+="]",o}static toRequestBody(e,t,n){return ie(e,t,n)}static fromResponseBody(t,n,r){return r&&(t=se(t,n,r)),Array.isArray(t)?e.fromValuesArray(t):e.fromValues(t)}static fromValues(t){return t.error=t.error&&E.fromValues(t.error),Object.assign(new e,t)}static fromLocalDevice(t){return Object.assign(new e,t)}static fromValuesArray(t){const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r}};async function yt(e,t,n,r){return e.http.supportsAuthHeaders?r(O(await e.auth.getAuthHeaders(),t),n):r(t,O(await e.auth.getAuthParams(),n))}var bt=class e{static async get(t,n,r,o,a,s){return e.do(De.Get,t,n,null,r,o,a,null!=s&&s)}static async delete(t,n,r,o,a,s){return e.do(De.Delete,t,n,null,r,o,a,s)}static async post(t,n,r,o,a,s,i){return e.do(De.Post,t,n,r,o,a,s,i)}static async patch(t,n,r,o,a,s,i){return e.do(De.Patch,t,n,r,o,a,s,i)}static async put(t,n,r,o,a,s,i){return e.do(De.Put,t,n,r,o,a,s,i)}static async do(e,t,n,r,o,a,s,i){s&&((a=a||{}).envelope=s);const l=t.logger;let c=await yt(t,o,a,async function o(a,s){var i;if(l.shouldLog(S.LOG_MICRO)){let o=r;if((null==(i=a["content-type"])?void 0:i.indexOf("msgpack"))>0)try{t._MsgPack||be("MsgPack"),o=t._MsgPack.decode(r)}catch(u){S.logAction(l,S.LOG_MICRO,"Resource."+e+"()","Sending MsgPack Decoding Error: "+Z(u))}S.logAction(l,S.LOG_MICRO,"Resource."+e+"()","Sending; "+$e(n,s)+"; Body: "+o)}const c=await t.http.do(e,n,a,r,s);return c.error&&qe.isTokenErr(c.error)?(await t.auth.authorize(null,null),yt(t,a,s,o)):{err:c.error,body:c.body,headers:c.headers,unpacked:c.unpacked,statusCode:c.statusCode}});if(s&&(c=function(e,t,n){if(e.err&&!e.body)return{err:e.err};if(e.statusCode===Fe.NoContent)return p(f({},e),{body:[],unpacked:!0});let r=e.body;if(!e.unpacked)try{r=se(r,t,n)}catch(i){return X(i)?{err:i}:{err:new R(Z(i),null)}}if(!r)return{err:new R("unenvelope(): Response body is missing",null)};const{statusCode:o,response:a,headers:s}=r;if(void 0===o)return p(f({},e),{body:r,unpacked:!0});if(o<200||o>=300){let t=a&&a.error||e.err;return t||(t=new Error("Error in unenveloping "+r),t.statusCode=o),{err:t,body:a,headers:s,unpacked:!0,statusCode:o}}return{err:e.err,body:a,headers:s,unpacked:!0,statusCode:o}}(c,t._MsgPack,s)),l.shouldLog(S.LOG_MICRO)&&function(e,t,n,r,o){e.err?S.logAction(o,S.LOG_MICRO,"Resource."+t+"()","Received Error; "+$e(n,r)+"; Error: "+Z(e.err)):S.logAction(o,S.LOG_MICRO,"Resource."+t+"()","Received; "+$e(n,r)+"; Headers: "+Ke(e.headers)+"; StatusCode: "+e.statusCode+"; Body: "+(y.BufferUtils.isBuffer(e.body)?" (Base64): "+y.BufferUtils.base64Encode(e.body):": "+y.Config.inspect(e.body)))}(c,e,n,a,l),i){if(c.err)throw c.err;{const e=f({},c);return delete e.err,e}}return c}};function wt(e){const t=e.match(/^\.\/(\w+)\?(.*)$/);return t&&t[2]&&Y(t[2])}var xt=class{constructor(e,t,n){this.resource=e,this.items=t,this._relParams=n}async first(){if(this.hasFirst())return this.get(this._relParams.first);throw new E("No link to the first page of results",40400,404)}async current(){if(this.hasCurrent())return this.get(this._relParams.current);throw new E("No link to the current page of results",40400,404)}async next(){return this.hasNext()?this.get(this._relParams.next):null}hasFirst(){return null!=this._relParams&&"first"in this._relParams}hasCurrent(){return null!=this._relParams&&"current"in this._relParams}hasNext(){return null!=this._relParams&&"next"in this._relParams}isLast(){return!this.hasNext()}async get(e){const t=this.resource,n=await bt.get(t.client,t.path,t.headers,e,t.envelope,!1);return t.handlePage(n)}},kt=class extends xt{constructor(e,t,n,r,o,a){super(e,t,o),this.statusCode=r,this.success=r<300&&r>=200,this.headers=n,this.errorCode=a&&a.code,this.errorMessage=a&&a.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},St=class{constructor(e,t,n,r,o,a){this.client=e,this.path=t,this.headers=n,this.envelope=null!=r?r:null,this.bodyHandler=o,this.useHttpPaginatedResponse=a||!1}get logger(){return this.client.logger}async get(e){const t=await bt.get(this.client,this.path,this.headers,e,this.envelope,!1);return this.handlePage(t)}async delete(e){const t=await bt.delete(this.client,this.path,this.headers,e,this.envelope,!1);return this.handlePage(t)}async post(e,t){const n=await bt.post(this.client,this.path,t,this.headers,e,this.envelope,!1);return this.handlePage(n)}async put(e,t){const n=await bt.put(this.client,this.path,t,this.headers,e,this.envelope,!1);return this.handlePage(n)}async patch(e,t){const n=await bt.patch(this.client,this.path,t,this.headers,e,this.envelope,!1);return this.handlePage(n)}async handlePage(e){if(e.err&&(t=e.err,n=e.body,!this.useHttpPaginatedResponse||!n&&"number"!==typeof t.code))throw S.logAction(this.logger,S.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+Z(e.err)),e.err;var t,n;let r,o,a;try{r=e.statusCode==Fe.NoContent?[]:await this.bodyHandler(e.body,e.headers||{},e.unpacked)}catch(s){throw e.err||s}return e.headers&&(o=e.headers.Link||e.headers.link)&&(a=function(e){"string"==typeof e&&(e=e.split(","));const t={};for(let n=0;n<e.length;n++){const r=e[n].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(r){const e=wt(r[1]);e&&(t[r[2]]=e)}}return t}(o)),this.useHttpPaginatedResponse?new kt(this,r,e.headers||{},e.statusCode,a,e.err):new xt(this,r,a)}},Ct=class e{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let e="[PushChannelSubscription";return this.channel&&(e+="; channel="+this.channel),this.deviceId&&(e+="; deviceId="+this.deviceId),this.clientId&&(e+="; clientId="+this.clientId),e+="]",e}static fromResponseBody(t,n,r){return r&&(t=se(t,n,r)),Array.isArray(t)?e.fromValuesArray(t):e.fromValues(t)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r}};Ct.toRequestBody=ie;var Nt=Ct,Et=class{constructor(e){this.client=e,this.deviceRegistrations=new Rt(e),this.channelSubscriptions=new Ot(e)}async publish(e,t){const n=this.client,r=n.options.useBinaryProtocol?"msgpack":"json",o=Me.defaultPostHeaders(n.options),a={},s=O({recipient:e},t);O(o,n.options.headers),n.options.pushFullWait&&O(a,{fullWait:"true"});const i=ie(s,n._MsgPack,r);await bt.post(n,"/push/publish",i,o,a,null,!0)}},Rt=class{constructor(e){this.client=e}async save(e){const t=this.client,n=vt.fromValues(e),r=t.options.useBinaryProtocol?"msgpack":"json",o=Me.defaultPostHeaders(t.options),a={};O(o,t.options.headers),t.options.pushFullWait&&O(a,{fullWait:"true"});const s=ie(n,t._MsgPack,r),i=await bt.put(t,"/push/deviceRegistrations/"+encodeURIComponent(e.id),s,o,a,null,!0);return vt.fromResponseBody(i.body,t._MsgPack,i.unpacked?void 0:r)}async get(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=Me.defaultGetHeaders(t.options),o=e.id||e;if("string"!==typeof o||!o.length)throw new E("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);O(r,t.options.headers);const a=await bt.get(t,"/push/deviceRegistrations/"+encodeURIComponent(o),r,{},null,!0);return vt.fromResponseBody(a.body,t._MsgPack,a.unpacked?void 0:n)}async list(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:n,o=Me.defaultGetHeaders(t.options);return O(o,t.options.headers),new St(t,"/push/deviceRegistrations",o,r,async function(e,r,o){return vt.fromResponseBody(e,t._MsgPack,o?void 0:n)}).get(e)}async remove(e){const t=this.client,n=Me.defaultGetHeaders(t.options),r={},o=e.id||e;if("string"!==typeof o||!o.length)throw new E("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);O(n,t.options.headers),t.options.pushFullWait&&O(r,{fullWait:"true"}),await bt.delete(t,"/push/deviceRegistrations/"+encodeURIComponent(o),n,r,null,!0)}async removeWhere(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=Me.defaultGetHeaders(t.options,{format:n});O(r,t.options.headers),t.options.pushFullWait&&O(e,{fullWait:"true"}),await bt.delete(t,"/push/deviceRegistrations",r,e,null,!0)}},Ot=class e{constructor(t){this.remove=e.prototype.removeWhere,this.client=t}async save(e){const t=this.client,n=Nt.fromValues(e),r=t.options.useBinaryProtocol?"msgpack":"json",o=Me.defaultPostHeaders(t.options),a={};O(o,t.options.headers),t.options.pushFullWait&&O(a,{fullWait:"true"});const s=ie(n,t._MsgPack,r),i=await bt.post(t,"/push/channelSubscriptions",s,o,a,null,!0);return Nt.fromResponseBody(i.body,t._MsgPack,i.unpacked?void 0:r)}async list(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:n,o=Me.defaultGetHeaders(t.options);return O(o,t.options.headers),new St(t,"/push/channelSubscriptions",o,r,async function(e,r,o){return Nt.fromResponseBody(e,t._MsgPack,o?void 0:n)}).get(e)}async removeWhere(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=Me.defaultGetHeaders(t.options,{format:n});O(r,t.options.headers),t.options.pushFullWait&&O(e,{fullWait:"true"}),await bt.delete(t,"/push/channelSubscriptions",r,e,null,!0)}async listChannels(e){const t=this.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:n,o=Me.defaultGetHeaders(t.options);return O(o,t.options.headers),t.options.pushFullWait&&O(e,{fullWait:"true"}),new St(t,"/push/channels",o,r,async function(e,r,o){const a=!o&&n?se(e,t._MsgPack,n):e;for(let t=0;t<a.length;t++)a[t]=String(a[t]);return a}).get(e)}},jt=class{constructor(e){var t;this.client=e,this.admin=new Et(e),y.Config.push&&(null==(t=e.options.plugins)?void 0:t.Push)&&(this.stateMachine=new e.options.plugins.Push.ActivationStateMachine(e),this.LocalDevice=e.options.plugins.Push.localDeviceFactory(vt))}async activate(e,t){await new Promise((n,r)=>{var o;(null==(o=this.client.options.plugins)?void 0:o.Push)?this.stateMachine?this.stateMachine.activatedCallback?r(new E("Activation already in progress",4e4,400)):(this.stateMachine.activatedCallback=e=>{e?r(e):n()},this.stateMachine.updateFailedCallback=t,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,e))):r(new E("This platform is not supported as a target of push notifications",4e4,400)):r(ye("Push"))})}async deactivate(e){await new Promise((t,n)=>{var r;(null==(r=this.client.options.plugins)?void 0:r.Push)?this.stateMachine?this.stateMachine.deactivatedCallback?n(new E("Deactivation already in progress",4e4,400)):(this.stateMachine.deactivatedCallback=e=>{e?n(e):t()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,e))):n(new E("This platform is not supported as a target of push notifications",4e4,400)):n(ye("Push"))})}},Tt=["absent","present","enter","leave","update"];async function _t(e,t,n,r){const o=rt(t,e,null!=r?r:null);return Mt.fromValues(n).decode(o,e)}async function At(e,t){return Promise.all(e.map(function(e){return async function(e,t){return Mt.fromValues(e).decode(t.channelOptions,t.logger)}(e,t)}))}var Pt=class e extends pt{isSynthesized(){return!this.id||!this.connectionId||this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const e=this.id.split(":");return{connectionId:e[0],msgSerial:parseInt(e[1],10),index:parseInt(e[2],10)}}async encode(e){return at(Object.assign(new Mt,this,{action:Tt.indexOf(this.action||"present")}),e)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}static fromData(t){return t instanceof e?t:e.fromValues({data:t})}toString(){return ft(this,"PresenceMessage")}},Mt=class e extends pt{toJSON(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ct.call(this,...t)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}async decode(e,t){const n=Object.assign(new Pt,p(f({},this),{action:Tt[this.action]}));try{await it(n,e)}catch(r){S.logAction(t,S.LOG_ERROR,"WirePresenceMessage.decode()",Z(r))}return n}toString(){return ft(this,"WirePresenceMessage")}},It=Pt,Lt=class{constructor(e){this.channel=e}get logger(){return this.channel.logger}async get(e){S.logAction(this.logger,S.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const t=this.channel.client,n=t.options.useBinaryProtocol?"msgpack":"json",r=this.channel.client.http.supportsLinkHeaders?void 0:n,o=Me.defaultGetHeaders(t.options);return O(o,t.options.headers),new St(t,this.channel.client.rest.presenceMixin.basePath(this),o,r,async(e,r,o)=>At(o?e:se(e,t._MsgPack,n),this.channel)).get(e)}async history(e){return S.logAction(this.logger,S.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,e)}},Dt=["message.create","message.update","message.delete","meta","message.summary","message.append"];function zt(e){let t=0;return e.name&&(t+=e.name.length),e.clientId&&(t+=e.clientId.length),e.extras&&(t+=JSON.stringify(e.extras).length),e.data&&(t+=te(e.data)),t}async function Ft(e,t,n,r){const o=rt(t,e,null!=r?r:null);return qt.fromValues(n).decode(o,e)}async function Bt(e,t){return qt.fromValues(e).decode(t.channelOptions,t.logger)}async function Ut(e,t){return Promise.all(e.map(function(e){return Bt(e,t)}))}async function Ht(e,t){return Promise.all(e.map(e=>e.encode(t)))}var Wt=ie;function Gt(e){let t,n=0;for(let r=0;r<e.length;r++)t=e[r],n+=t.size||(t.size=zt(t));return n}var Vt=class e extends pt{expandFields(){if(this.version||(this.version={}),!this.version.serial&&this.serial&&(this.version.serial=this.serial),!this.version.timestamp&&this.timestamp&&(this.version.timestamp=this.timestamp),this.annotations?this.annotations.summary||(this.annotations.summary={}):this.annotations={summary:{}},this.annotations&&this.annotations.summary)for(const[e,t]of Object.entries(this.annotations.summary))if(e.endsWith(":distinct.v1")||e.endsWith(":unique.v1")||e.endsWith(":multiple.v1"))for(const[,n]of Object.entries(t))n.clipped||(n.clipped=!1);else e.endsWith(":flag.v1")&&(t.clipped||(t.clipped=!1))}async encode(e){return at(Object.assign(new qt,this,{action:Dt.indexOf(this.action||"message.create")}),e)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}toString(){return ft(this,"Message")}},qt=class e extends pt{toJSON(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ct.call(this,...t)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}async decodeWithErr(e,t){const n=Object.assign(new Vt,p(f({},this),{action:(r=this.action,Dt[r||0]||"unknown")}));var r;let o;try{await it(n,e)}catch(a){S.logAction(t,S.LOG_ERROR,"WireMessage.decode()",Z(a)),o=a}return n.expandFields(),{decoded:n,err:o}}async decode(e,t){const{decoded:n}=await this.decodeWithErr(e,t);return n}toString(){return ft(this,"WireMessage")}},Kt=Vt,$t=class{constructor(e,t,n){var r,o;this._annotations=null,S.logAction(e.logger,S.LOG_MINOR,"RestChannel()","started; name = "+t),this.name=t,this.client=e,this.presence=new Lt(this),this.channelOptions=_e(null!=(r=e._Crypto)?r:null,this.logger,n),(null==(o=e.options.plugins)?void 0:o.Push)&&(this._push=new e.options.plugins.Push.PushChannel(this)),e._Annotations&&(this._annotations=new e._Annotations.RestAnnotations(this))}get annotations(){return this._annotations||be("Annotations"),this._annotations}get push(){return this._push||be("Push"),this._push}get logger(){return this.client.logger}setOptions(e){var t;this.channelOptions=_e(null!=(t=this.client._Crypto)?t:null,this.logger,e)}async history(e){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,e)}async publish(){const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];let n,r;if("string"===typeof e||null===e)n=[Kt.fromValues({name:e,data:t})],r=arguments.length<=2?void 0:arguments[2];else if(_(e))n=[Kt.fromValues(e)],r=arguments.length<=1?void 0:arguments[1];else{if(!Array.isArray(e))throw new E("The single-argument form of publish() expects a message object or an array of message objects",40013,400);n=Kt.fromValuesArray(e),r=arguments.length<=1?void 0:arguments[1]}r||(r={});const o=this.client,a=o.options,s=a.useBinaryProtocol?"msgpack":"json",i=o.options.idempotentRestPublishing,l=Me.defaultPostHeaders(o.options);if(O(l,a.headers),i&&function(e){return e.every(function(e){return!e.id})}(n)){const e=await re(9);n.forEach(function(t,n){t.id=e+":"+n.toString()})}const c=await Ht(n,this.channelOptions),u=Gt(c),d=a.maxMessageSize;if(u>d)throw new E("Maximum size of messages that can be published at once exceeded (was ".concat(u," bytes; limit is ").concat(d," bytes)"),40009,400);return this._publish(Wt(c,o._MsgPack,s),l,r)}async _publish(e,t,n){const r=this.client,o=r.options.useBinaryProtocol?"msgpack":"json",{body:a,unpacked:s}=await bt.post(r,r.rest.channelMixin.basePath(this)+"/messages",e,t,n,null,!0),i=(s?a:se(a,r._MsgPack,o))||{};return delete i.channel,delete i.messageId,i}async status(){return this.client.rest.channelMixin.status(this)}async getMessage(e){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.getMessage()","channel = "+this.name),this.client.rest.channelMixin.getMessage(this,e)}async updateMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.updateMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.update",e,t,n)}async deleteMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.deleteMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.delete",e,t,n)}async appendMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.appendMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.append",e,t,n)}async getMessageVersions(e,t){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.getMessageVersions()","channel = "+this.name),this.client.rest.channelMixin.getMessageVersions(this,e,t)}},Jt=class e{constructor(e){this.entries=e&&e.entries||void 0,this.schema=e&&e.schema||void 0,this.appId=e&&e.appId||void 0,this.inProgress=e&&e.inProgress||void 0,this.unit=e&&e.unit||void 0,this.intervalId=e&&e.intervalId||void 0}static fromValues(t){return new e(t)}},Qt=class{static basePath(e){return"/channels/"+encodeURIComponent(e.name)}static history(e,t){const n=e.client,r=n.options.useBinaryProtocol?"msgpack":"json",o=e.client.http.supportsLinkHeaders?void 0:r,a=Me.defaultGetHeaders(n.options);return O(a,n.options.headers),new St(n,this.basePath(e)+"/messages",a,o,async function(t,o,a){return Ut(a?t:se(t,n._MsgPack,r),e)}).get(t)}static async status(e){const t=e.client.options.useBinaryProtocol?"msgpack":"json",n=Me.defaultPostHeaders(e.client.options);return(await bt.get(e.client,this.basePath(e),n,{},t,!0)).body}static async getMessage(e,t){const n="string"===typeof t?t:t.serial;if(!n)throw new E('This message lacks a serial. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const r=e.client,o=r.options.useBinaryProtocol?"msgpack":"json",a=Me.defaultGetHeaders(r.options);O(a,r.options.headers);const{body:s,unpacked:i}=await bt.get(r,this.basePath(e)+"/messages/"+encodeURIComponent(n),a,{},null,!0);return Bt(i?s:se(s,r._MsgPack,o),e)}static async updateDeleteMessage(e,t,n,r,o){if(!n.serial)throw new E('This message lacks a serial and cannot be updated. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const a=e.client,s=a.options.useBinaryProtocol?"msgpack":"json",i=Me.defaultPostHeaders(a.options);O(i,a.options.headers);const l=Kt.fromValues(n);l.action=t,l.version=r;const c=await l.encode(e.channelOptions),u=Wt(c,a._MsgPack,s);let d=bt.patch;const{body:h,unpacked:f}=await d(a,this.basePath(e)+"/messages/"+encodeURIComponent(n.serial),u,i,o||{},null,!0);return(f?h:se(h,a._MsgPack,s))||{versionSerial:null}}static getMessageVersions(e,t,n){const r="string"===typeof t?t:t.serial;if(!r)throw new E('This message lacks a serial. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const o=e.client,a=o.options.useBinaryProtocol?"msgpack":"json",s=e.client.http.supportsLinkHeaders?void 0:a,i=Me.defaultGetHeaders(o.options);return O(i,o.options.headers),new St(o,this.basePath(e)+"/messages/"+encodeURIComponent(r)+"/versions",i,s,async(t,n,r)=>Ut(r?t:se(t,o._MsgPack,a),e)).get(n||{})}},Yt=class{static basePath(e){return Qt.basePath(e.channel)+"/presence"}static async history(e,t){const n=e.channel.client,r=n.options.useBinaryProtocol?"msgpack":"json",o=e.channel.client.http.supportsLinkHeaders?void 0:r,a=Me.defaultGetHeaders(n.options);return O(a,n.options.headers),new St(n,this.basePath(e)+"/history",a,o,async(t,o,a)=>At(a?t:se(t,n._MsgPack,r),e.channel)).get(t)}},Xt=class{constructor(e){this.channelMixin=Qt,this.presenceMixin=Yt,this.Resource=bt,this.PaginatedResource=St,this.DeviceDetails=vt,this.PushChannelSubscription=Nt,this.client=e,this.channels=new Zt(this.client),this.push=new jt(this.client)}async stats(e){const t=Me.defaultGetHeaders(this.client.options),n=this.client.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:n;return O(t,this.client.options.headers),new St(this.client,"/stats",t,r,async(e,t,r)=>{const o=r?e:se(e,this.client._MsgPack,n);for(let n=0;n<o.length;n++)o[n]=Jt.fromValues(o[n]);return o}).get(e)}async time(e){const t=Me.defaultGetHeaders(this.client.options,{format:"json"});this.client.options.headers&&O(t,this.client.options.headers);let{error:n,body:r,unpacked:o}=await this.client.http.do(De.Get,e=>this.client.baseUri(e)+"/time",t,null,e);if(n)throw n;o||(r=JSON.parse(r));const a=r[0];if(!a)throw new E("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=a-Date.now(),a}async request(e,t,n,r,o,a){var s;const[i,l,c]=(()=>this.client.options.useBinaryProtocol?(this.client._MsgPack||be("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"])(),u=this.client.http.supportsLinkHeaders?void 0:c;r=r||{};const d=e.toLowerCase(),h="get"==d?Me.defaultGetHeaders(this.client.options,{format:c,protocolVersion:n}):Me.defaultPostHeaders(this.client.options,{format:c,protocolVersion:n});"string"!==typeof o&&(o=null!=(s=i(o))?s:null),O(h,this.client.options.headers),a&&O(h,a);const f=new St(this.client,t,h,u,async function(e,t,n){return T(n?e:l(e))},!0);if(!y.Http.methods.includes(d))throw new E("Unsupported method "+d,40500,405);return y.Http.methodsWithBody.includes(d)?f[d](r,o):f[d](r)}async batchPublish(e){let t,n;Array.isArray(e)?(t=e,n=!1):(t=[e],n=!0);const r=this.client.options.useBinaryProtocol?"msgpack":"json",o=Me.defaultPostHeaders(this.client.options);this.client.options.headers&&O(o,this.client.options.headers);const a=ie(t,this.client._MsgPack,r),s=await bt.post(this.client,"/messages",a,o,{},null,!0),i=s.unpacked?s.body:se(s.body,this.client._MsgPack,r);return n?i[0]:i}async batchPresence(e){const t=this.client.options.useBinaryProtocol?"msgpack":"json",n=Me.defaultGetHeaders(this.client.options);this.client.options.headers&&O(n,this.client.options.headers);const r=e.join(","),o=await bt.get(this.client,"/presence",n,{channels:r},null,!0);return o.unpacked?o.body:se(o.body,this.client._MsgPack,t)}async revokeTokens(e,t){if(Ge(this.client.options))throw new E("Cannot revoke tokens when using token auth",40162,401);const n=this.client.options.keyName;let r=null!=t?t:{};const o=f({targets:e.map(e=>"".concat(e.type,":").concat(e.value))},r),a=this.client.options.useBinaryProtocol?"msgpack":"json",s=Me.defaultPostHeaders(this.client.options);this.client.options.headers&&O(s,this.client.options.headers);const i=ie(o,this.client._MsgPack,a),l=await bt.post(this.client,"/keys/".concat(n,"/revokeTokens"),i,s,{},null,!0);return l.unpacked?l.body:se(l.body,this.client._MsgPack,a)}},Zt=class{constructor(e){this.client=e,this.all=Object.create(null)}get(e,t){e=String(e);let n=this.all[e];return n?t&&n.setOptions(t):this.all[e]=n=new $t(this.client,e,t),n}release(e){delete this.all[String(e)]}},en=class extends gt{constructor(e){super(Me.objectifyOptions(e,!1,"BaseRest",S.defaultLogger,{Rest:Xt}))}},tn={Rest:Xt},nn=class extends Kt{static async fromEncoded(e,t){return Ft(S.defaultLogger,y.Crypto,e,t)}static async fromEncodedArray(e,t){return async function(e,t,n,r){return Promise.all(n.map(function(n){return Ft(e,t,n,r)}))}(S.defaultLogger,y.Crypto,e,t)}static fromValues(e){return Kt.fromValues(e)}},rn=class extends It{static async fromEncoded(e,t){return _t(S.defaultLogger,y.Crypto,e,t)}static async fromEncodedArray(e,t){return async function(e,t,n,r){return Promise.all(n.map(function(n){return _t(e,t,n,r)}))}(S.defaultLogger,y.Crypto,e,t)}static fromValues(e){return It.fromValues(e)}},on=["annotation.create","annotation.delete"];async function an(e,t,n){return cn.fromValues(t).decode(n||{},e)}async function sn(e,t){return Promise.all(e.map(function(e){return async function(e,t){return cn.fromValues(e).decode(t.channelOptions,t.logger)}(e,t)}))}var ln=class e extends pt{async encode(){return at(Object.assign(new cn,this,{action:on.indexOf(this.action||"annotation.create")}),{})}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}toString(){return ft(this,"Annotation")}},cn=class e extends pt{toJSON(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ct.call(this,...t)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){return t.map(t=>e.fromValues(t))}async decode(e,t){const n=Object.assign(new ln,p(f({},this),{action:on[this.action]}));try{await it(n,e)}catch(r){S.logAction(t,S.LOG_ERROR,"WireAnnotation.decode()",Z(r))}return n}toString(){return ft(this,"WireAnnotation")}},un=ln,dn=class extends un{static async fromEncoded(e,t){return an(S.defaultLogger,e,t)}static async fromEncodedArray(e,t){return async function(e,t,n){return Promise.all(t.map(function(t){return an(e,t,n)}))}(S.defaultLogger,e,t)}static fromValues(e){return un.fromValues(e)}};function hn(e){let t;switch(typeof e){case"string":t=e;break;case"object":t=e.serial}if(!t||"string"!==typeof t)throw new E("First argument of annotations.publish() must be either a Message (or at least an object with a string `serial` property) or a message serial (string)",40003,400);return t}function fn(e,t){const n=hn(e);if(!t||"object"!==typeof t)throw new E("Second argument of annotations.publish() must be an object (the intended annotation to publish)",40003,400);const r=un.fromValues(t);return r.messageSerial=n,r.action||(r.action="annotation.create"),r}function pn(e,t){return e.client.rest.channelMixin.basePath(e)+"/messages/"+encodeURIComponent(t)+"/annotations"}var mn=class{constructor(e){this.channel=e}async publish(e,t){const n=fn(e,t),r=await n.encode(),o=this.channel.client,a=o.options.useBinaryProtocol?"msgpack":"json",s=Me.defaultPostHeaders(o.options);O(s,o.options.headers);const i=ie([r],o._MsgPack,a);await bt.post(o,pn(this.channel,n.messageSerial),i,s,{},null,!0)}async delete(e,t){return t.action="annotation.delete",this.publish(e,t)}async get(e,t){const n=this.channel.client,r=hn(e),o=n.options.useBinaryProtocol?"msgpack":"json",a=n.http.supportsLinkHeaders?void 0:o,s=Me.defaultGetHeaders(n.options);return O(s,n.options.headers),new St(n,pn(this.channel,r),s,a,async(e,t,r)=>sn(r?e:se(e,n._MsgPack,o),this.channel)).get(t)}},gn=ie;function vn(e){const t=[];if(e)for(let n=0;n<e.length;n++)t.push(e[n].toString());return"[ "+t.join(", ")+" ]"}function yn(e,t,n,r){let o,a,s,i,l;return e.error&&(o=E.fromValues(e.error)),e.messages&&(a=qt.fromValuesArray(e.messages)),t&&e.presence&&(s=t.WirePresenceMessage.fromValuesArray(e.presence)),n&&e.annotations&&(i=n.WireAnnotation.fromValuesArray(e.annotations)),r&&e.state&&(l=r.WireObjectMessage.fromValuesArray(e.state,C,dt)),Object.assign(new kn,p(f({},e),{presence:s,messages:a,annotations:i,state:l,error:o}))}function bn(e){return t=>{var n;return yn(t,{PresenceMessage:It,WirePresenceMessage:Mt},{Annotation:un,WireAnnotation:cn,RealtimeAnnotations:On,RestAnnotations:mn},null!=(n=null==e?void 0:e.LiveObjectsPlugin)?n:null)}}function wn(e){return Object.assign(new kn,e)}function xn(e,t,n,r){let o="[ProtocolMessage";void 0!==e.action&&(o+="; action="+Ze[e.action]||0);const a=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let s;for(let i=0;i<a.length;i++)s=a[i],void 0!==e[s]&&(o+="; "+s+"="+e[s]);if(e.messages&&(o+="; messages="+vn(qt.fromValuesArray(e.messages))),e.presence&&t&&(o+="; presence="+vn(t.WirePresenceMessage.fromValuesArray(e.presence))),e.annotations&&n&&(o+="; annotations="+vn(n.WireAnnotation.fromValuesArray(e.annotations))),e.state&&r&&(o+="; state="+vn(r.WireObjectMessage.fromValuesArray(e.state,C,dt))),e.error&&(o+="; error="+E.fromValues(e.error).toString()),e.auth&&e.auth.accessToken&&(o+="; token="+e.auth.accessToken),e.flags&&(o+="; flags="+tt.filter(e.hasFlag).join(",")),e.params){let t="";V(e.params,function(n){t.length>0&&(t+="; "),t+=n+"="+e.params[n]}),t.length>0&&(o+="; params=["+t+"]")}return o+="]",o}var kn=class{constructor(){this.hasFlag=e=>(this.flags&et[e])>0}setFlag(e){return this.flags=this.flags|et[e]}getMode(){return(this.flags||0)&et.MODE_ALL}encodeModesToFlags(e){e.forEach(e=>this.setFlag(e))}decodeModesFromFlags(){const e=[];return nt.forEach(t=>{this.hasFlag(t)&&e.push(t)}),e.length>0?e:void 0}},Sn=kn,Cn=class{constructor(e,t,n,r,o){this.previous=e,this.current=t,"attached"===t&&(this.resumed=n,this.hasBacklog=r),o&&(this.reason=o)}},Nn=function(){};function En(e){const t=e||{},{agent:n}=t;return((e,t)=>{var n={};for(var r in e)u.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&c)for(var r of c(e))t.indexOf(r)<0&&d.call(e,r)&&(n[r]=e[r]);return n})(t,["agent"])}var Rn=class e extends Ye{constructor(e,t,n){var r,o,a;super(e.logger),this._annotations=null,this._mode=0,this.retryCount=0,this.history=async function(e){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const t=this.client.rest.channelMixin;if(e&&e.untilAttach){if("attached"!==this.state)throw new E("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new E("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete e.untilAttach,e.from_serial=this.properties.attachSerial}return t.history(this,e)},this.whenState=e=>Ye.prototype.whenState.call(this,e,this.state),S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel()","started; name = "+t),this.name=t,this.channelOptions=_e(null!=(r=e._Crypto)?r:null,this.logger,n),this.client=e,this._presence=e._RealtimePresence?new e._RealtimePresence.RealtimePresence(this):null,e._Annotations&&(this._annotations=new e._Annotations.RealtimeAnnotations(this)),this.connectionManager=e.connection.connectionManager,this.state="initialized",this.subscriptions=new Ye(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(n),this.errorReason=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:e.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new Ye(this.logger),(null==(o=e.options.plugins)?void 0:o.Push)&&(this._push=new e.options.plugins.Push.PushChannel(this)),(null==(a=e.options.plugins)?void 0:a.LiveObjects)&&(this._object=new e.options.plugins.LiveObjects.RealtimeObject(this))}get presence(){return this._presence||be("RealtimePresence"),this._presence}get annotations(){return this._annotations||be("Annotations"),this._annotations}get push(){return this._push||be("Push"),this._push}get object(){return this._object||be("LiveObjects"),this._object}invalidStateError(){return new E("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(e){return"function"===typeof(e=Array.prototype.slice.call(e))[0]&&e.unshift(null),e}async setOptions(e){var t;const n=this.channelOptions,r=function(e){if(e&&"params"in e&&!_(e.params))return new E("options.params must be an object",4e4,400);if(e&&"modes"in e){if(!Array.isArray(e.modes))return new E("options.modes must be an array",4e4,400);for(let t=0;t<e.modes.length;t++){const n=e.modes[t];if(!n||"string"!==typeof n||!nt.includes(String.prototype.toUpperCase.call(n)))return new E("Invalid channel mode: "+n,4e4,400)}}}(e);if(r)throw r;if(this.channelOptions=_e(null!=(t=this.client._Crypto)?t:null,this.logger,e),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(e,n))return this.attachImpl(),new Promise((e,t)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(n){switch(this.event){case"update":case"attached":e();break;default:t(n.reason)}})})}_shouldReattachToSetOptions(e,t){if("attached"!==this.state&&"attaching"!==this.state)return!1;if(null==e?void 0:e.params){const n=En(e.params),r=En(t.params);if(Object.keys(n).length!==Object.keys(r).length)return!0;if(!pe(r,n))return!0}return!(!(null==e?void 0:e.modes)||t.modes&&ve(e.modes,t.modes))}async publish(){const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];let n,r;if("string"===typeof e||null===e||void 0===e)n=[Kt.fromValues({name:e,data:t})],r=arguments.length<=2?void 0:arguments[2];else if(_(e))n=[Kt.fromValues(e)],r=arguments.length<=1?void 0:arguments[1];else{if(!Array.isArray(e))throw new E("The single-argument form of publish() expects a message object or an array of message objects",40013,400);n=Kt.fromValuesArray(e),r=arguments.length<=1?void 0:arguments[1]}const o=this.client.options.maxMessageSize,a=await Ht(n,this.channelOptions),s=Gt(a);if(s>o)throw new E("Maximum size of messages that can be published at once exceeded (was ".concat(s," bytes; limit is ").concat(o," bytes)"),40009,400);this.throwIfUnpublishableState(),S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+this.state+", message count = "+a.length);const i=wn({action:Xe.MESSAGE,channel:this.name,messages:a,params:r?Q(r):void 0});return await this.sendMessage(i)||{serials:[]}}throwIfUnpublishableState(){if(!this.connectionManager.activeState())throw this.connectionManager.getError();if("failed"===this.state||"suspended"===this.state)throw this.invalidStateError()}onEvent(e){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const t=this.subscriptions;for(let n=0;n<e.length;n++){const r=e[n];t.emit(r.name,r)}}async attach(){return"attached"===this.state?null:new Promise((e,t)=>{this._attach(!1,null,(n,r)=>n?t(n):e(r))})}_attach(e,t,n){n||(n=e=>{e&&S.logAction(this.logger,S.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+e.toString())});const r=this.connectionManager;r.activeState()?(("attaching"!==this.state||e)&&this.requestState("attaching",t),this.once(function(e){switch(this.event){case"attached":null==n||n(null,e);break;case"detached":case"suspended":case"failed":null==n||n(e.reason||r.getError()||new E("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":null==n||n(new E("Attach request superseded by a subsequent detach request",9e4,409))}})):n(r.getError())}attachImpl(){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const e=wn({action:Xe.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this.channelOptions.modes&&e.encodeModesToFlags(ce(this.channelOptions.modes)),this._attachResume&&e.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(e.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(e).catch(Nn)}async detach(){const e=this.connectionManager;switch(this.state){case"suspended":return void this.notifyState("detached");case"detached":return;case"failed":throw new E("Unable to detach; channel state = failed",90001,400);default:if("connected"!==e.state.state)return void this.notifyState("detached");this.requestState("detaching");case"detaching":return new Promise((t,n)=>{this.once(function(r){switch(this.event){case"detached":t();break;case"attached":case"suspended":case"failed":n(r.reason||e.getError()||new E("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":n(new E("Detach request superseded by a subsequent attach request",9e4,409))}})})}}detachImpl(){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const e=wn({action:Xe.DETACH,channel:this.name});this.sendMessage(e).catch(Nn)}async subscribe(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const[o,a]=e.processListenerArgs(n);if("failed"===this.state)throw E.fromValues(this.invalidStateError());return o&&"object"===typeof o&&!Array.isArray(o)?this.client._FilteredSubscriptions.subscribeFilter(this,o,a):this.subscriptions.on(o,a),!1!==this.channelOptions.attachOnSubscribe?this.attach():null}unsubscribe(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const[a,s]=e.processListenerArgs(r);"object"===typeof a&&!s||(null==(t=this.filteredSubscriptions)?void 0:t.has(s))?this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,a,s).forEach(e=>this.subscriptions.off(e)):this.subscriptions.off(a,s)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new R("Unable to sync to channel; not attached",4e4)}const e=this.connectionManager;if(!e.activeState())throw e.getError();const t=wn({action:Xe.SYNC,channel:this.name});this.syncChannelSerial&&(t.channelSerial=this.syncChannelSerial),e.send(t)}async sendMessage(e){return new Promise((t,n)=>{this.connectionManager.send(e,this.client.options.queueMessages,(e,r)=>{e?n(e):t(r)})})}async sendPresence(e){const t=wn({action:Xe.PRESENCE,channel:this.name,presence:e});await this.sendMessage(t)}async sendState(e){const t=wn({action:Xe.OBJECT,channel:this.name,state:e});await this.sendMessage(t)}async processMessage(e){e.action!==Xe.ATTACHED&&e.action!==Xe.MESSAGE&&e.action!==Xe.PRESENCE&&e.action!==Xe.OBJECT&&e.action!==Xe.ANNOTATION||this.setChannelSerial(e.channelSerial);let t,n=!1;switch(e.action){case Xe.ATTACHED:{this.properties.attachSerial=e.channelSerial,this._mode=e.getMode(),this.params=e.params||{};const t=e.decodeModesFromFlags();this.modes=t&&le(t)||void 0;const n=e.hasFlag("RESUMED"),r=e.hasFlag("HAS_PRESENCE"),o=e.hasFlag("HAS_BACKLOG"),a=e.hasFlag("HAS_OBJECTS");if("attached"===this.state){n||(this._presence&&this._presence.onAttached(r),this._object&&this._object.onAttached(a));const t=new Cn(this.state,this.state,n,o,e.error);this._allChannelChanges.emit("update",t),n&&!this.channelOptions.updateOnAttached||this.emit("update",t)}else"detaching"===this.state?this.checkPendingState():this.notifyState("attached",e.error,n,r,o,a);break}case Xe.DETACHED:{const t=e.error?E.fromValues(e.error):new E("Channel detached",90001,404);"detaching"===this.state?this.notifyState("detached",t):"attaching"===this.state?this.notifyState("suspended",t):"attached"!==this.state&&"suspended"!==this.state||this.requestState("attaching",t);break}case Xe.SYNC:if(n=!0,t=this.syncChannelSerial=e.channelSerial,!e.presence)break;case Xe.PRESENCE:{if(!e.presence)break;ht(e);const r=this.channelOptions;if(this._presence){const o=await Promise.all(e.presence.map(e=>e.decode(r,this.logger)));this._presence.setPresence(o,n,t)}break}case Xe.OBJECT:case Xe.OBJECT_SYNC:{if(!this._object||!e.state)return;ht(e);const t=this.client.connection.connectionManager.getActiveTransportFormat(),n=e.state.map(e=>e.decode(this.client,t));e.action===Xe.OBJECT?this._object.handleObjectMessages(n):this._object.handleObjectSyncMessages(n,e.channelSerial);break}case Xe.MESSAGE:{if("attached"!==this.state)return void S.logAction(this.logger,S.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+e.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');ht(e);const t=e.messages,n=t[0],r=t[t.length-1];if(n.extras&&n.extras.delta&&n.extras.delta.from!==this._lastPayload.messageId){const t='Delta message decode failure - previous message not available for message "'+e.id+'" on this channel "'+this.name+'".';S.logAction(this.logger,S.LOG_ERROR,"RealtimeChannel.processMessage()",t),this._startDecodeFailureRecovery(new E(t,40018,400));break}let o=[];for(let e=0;e<t.length;e++){const{decoded:n,err:r}=await t[e].decodeWithErr(this._decodingContext,this.logger);if(o[e]=n,r)switch(r.code){case 40018:return void this._startDecodeFailureRecovery(r);case 40019:case 40021:return void this.notifyState("failed",r)}}this._lastPayload.messageId=r.id,this._lastPayload.protocolMessageChannelSerial=e.channelSerial,this.onEvent(o);break}case Xe.ANNOTATION:{ht(e);const t=this.channelOptions;if(this._annotations){const n=await Promise.all((e.annotations||[]).map(e=>e.decode(t,this.logger)));this._annotations._processIncoming(n)}break}case Xe.ERROR:{const t=e.error;t&&80016==t.code?this.checkPendingState():this.notifyState("failed",E.fromValues(t));break}default:S.logAction(this.logger,S.LOG_MAJOR,"RealtimeChannel.processMessage()","Protocol error: unrecognised message action ("+e.action+")")}}_startDecodeFailureRecovery(e){this._lastPayload.decodeFailureRecoveryInProgress||(S.logAction(this.logger,S.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,e,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(e,t,n,r,o,a){if(S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+e),this.clearStateTimer(),["detached","suspended","failed"].includes(e)&&(this.properties.channelSerial=null),e===this.state)return;this._presence&&this._presence.actOnChannelState(e,r,t),this._object&&this._object.actOnChannelState(e,a),"suspended"===e&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),t&&(this.errorReason=t);const s=new Cn(this.state,e,n,o,t),i='Channel state for channel "'+this.name+'"',l=e+(t?"; reason: "+t:"");"failed"===e?S.logAction(this.logger,S.LOG_ERROR,i,l):S.logAction(this.logger,S.LOG_MAJOR,i,l),"attaching"!==e&&"suspended"!==e&&(this.retryCount=0),"attached"===e&&this.onAttached(),"attached"===e?this._attachResume=!0:"detaching"!==e&&"failed"!==e||(this._attachResume=!1),this.state=e,this._allChannelChanges.emit(e,s),this.emit(e,s)}requestState(e,t){S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+e),this.notifyState(e,t),this.checkPendingState()}checkPendingState(){if(this.connectionManager.state.sendEvents)switch(S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync()}else S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state)}timeoutPendingState(){switch(this.state){case"attaching":{const e=new E("Channel attach timed out",90007,408);this.notifyState("suspended",e);break}case"detaching":{const e=new E("Channel detach timed out",90007,408);this.notifyState("attached",e);break}default:this.checkPendingState()}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const e=this.stateTimer;e&&(clearTimeout(e),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const e=he(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{"suspended"===this.state&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},e)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const e=this.state;return"initialized"===e||"detached"===e||"failed"===e?null:new E("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+e,90001,400)}setChannelSerial(e){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+e+"; previous = "+this.properties.channelSerial),e&&(this.properties.channelSerial=e)}async status(){return this.client.rest.channelMixin.status(this)}async getMessage(e){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.getMessage()","channel = "+this.name),this.client.rest.channelMixin.getMessage(this,e)}async updateMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.updateMessage()","channel = "+this.name),this.sendUpdate(e,"message.update",t,n)}async deleteMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.deleteMessage()","channel = "+this.name),this.sendUpdate(e,"message.delete",t,n)}async appendMessage(e,t,n){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.appendMessage()","channel = "+this.name),this.sendUpdate(e,"message.append",t,n)}async sendUpdate(e,t,n,r){var o,a;if(!e.serial)throw new E('This message lacks a serial and cannot be updated. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);this.throwIfUnpublishableState();const s=Kt.fromValues(p(f({},e),{action:t,version:n})),i=await s.encode(this.channelOptions),l=wn({action:Xe.MESSAGE,channel:this.name,messages:[i],params:r?Q(r):void 0}),c=await this.sendMessage(l);return{versionSerial:null!=(a=null==(o=null==c?void 0:c.serials)?void 0:o[0])?a:null}}async getMessageVersions(e,t){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.getMessageVersions()","channel = "+this.name),this.client.rest.channelMixin.getMessageVersions(this,e,t)}async ensureAttached(){switch(this.state){case"attached":case"suspended":break;case"initialized":case"detached":case"detaching":case"attaching":await this.attach();break;default:throw E.fromValues(this.invalidStateError())}}},On=class{constructor(e){this.channel=e,this.logger=e.logger,this.subscriptions=new Ye(this.logger)}async publish(e,t){const n=this.channel.name,r=fn(e,t),o=await r.encode();this.channel.throwIfUnpublishableState(),S.logAction(this.logger,S.LOG_MICRO,"RealtimeAnnotations.publish()","channelName = "+n+", sending annotation with messageSerial = "+r.messageSerial+", type = "+r.type);const a=wn({action:Xe.ANNOTATION,channel:n,annotations:[o]});await this.channel.sendMessage(a)}async delete(e,t){t.action="annotation.delete",await this.publish(e,t)}async subscribe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Rn.processListenerArgs(t),o=r[0],a=r[1],s=this.channel;if("failed"===s.state)throw E.fromValues(s.invalidStateError());if(this.subscriptions.on(o,a),!1!==this.channel.channelOptions.attachOnSubscribe&&await s.attach(),0===("attached"===this.channel.state&&this.channel._mode&et.ANNOTATION_SUBSCRIBE))throw new E("You are trying to add an annotation listener, but you haven't requested the annotation_subscribe channel mode in ChannelOptions, so this won't do anything (we only deliver annotations to clients who have explicitly requested them)",93001,400)}unsubscribe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Rn.processListenerArgs(t),o=r[0],a=r[1];this.subscriptions.off(o,a)}_processIncoming(e){for(const t of e)this.subscriptions.emit(t.type||"",t)}async get(e,t){return mn.prototype.get.call(this,e,t)}},jn=class e extends en{constructor(t){var n,r;if(!e._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(Me.objectifyOptions(t,!0,"Rest",S.defaultLogger,p(f({},tn),{Crypto:null!=(n=e.Crypto)?n:void 0,MsgPack:null!=(r=e._MsgPack)?r:void 0,Annotations:{Annotation:un,WireAnnotation:cn,RealtimeAnnotations:On,RestAnnotations:mn}})))}static get Crypto(){if(null===this._Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(e){this._Crypto=e}};jn._Crypto=null,jn.Message=nn,jn.PresenceMessage=rn,jn.Annotation=dn,jn._MsgPack=null,jn._Http=Je;var Tn,_n,An=jn,Pn=class extends Ye{constructor(e){super(e),this.messages=[]}count(){return this.messages.length}push(e){this.messages.push(e)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(e){this.messages.push.apply(this.messages,e)}prepend(e){this.messages.unshift.apply(this.messages,e)}completeMessages(e,t,n){S.logAction(this.logger,S.LOG_MICRO,"MessageQueue.completeMessages()","all"==e?"(all)":"serial = "+e.serial+"; count = "+e.count),t=t||null;const r=this.messages;if(0===r.length)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");let o=[];if("all"===e)o=r.splice(0);else{const t=r[0];if(t){const n=t.message.msgSerial,a=e.serial+e.count;a>n&&(o=r.splice(0,a-n))}}for(let a=0;a<o.length;a++){const e=o[a],r=null==n?void 0:n[a];e.callback(t,r)}0==r.length&&this.emit("idle")}completeAllMessages(e){this.completeMessages("all",e)}resetSendAttempted(){for(let e of this.messages)e.sendAttempted=!1}clear(){S.logAction(this.logger,S.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},Mn=class{constructor(e,t){this.message=e,this.callback=t,this.merged=!1;const n=e.action;this.sendAttempted=!1,this.ackRequired="number"===typeof n&&[Xe.MESSAGE,Xe.PRESENCE,Xe.ANNOTATION,Xe.OBJECT].includes(n)}},In=class extends Ye{constructor(e){super(e.logger),this.transport=e,this.messageQueue=new Pn(this.logger),e.on("ack",(e,t,n)=>{this.onAck(e,t,n)}),e.on("nack",(e,t,n)=>{this.onNack(e,t,n)})}onAck(e,t,n){S.logAction(this.logger,S.LOG_MICRO,"Protocol.onAck()","serial = "+e+"; count = "+t),this.messageQueue.completeMessages({serial:e,count:t},null,n)}onNack(e,t,n){S.logAction(this.logger,S.LOG_ERROR,"Protocol.onNack()","serial = "+e+"; count = "+t+"; err = "+Z(n)),n||(n=new E("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages({serial:e,count:t},n)}onceIdle(e){const t=this.messageQueue;0!==t.count()?t.once("idle",e):e()}send(e){e.ackRequired&&this.messageQueue.push(e),this.logger.shouldLog(S.LOG_MICRO)&&S.logActionNoStrip(this.logger,S.LOG_MICRO,"Protocol.send()","sending msg; "+xn(e.message,this.transport.connectionManager.realtime._RealtimePresence,this.transport.connectionManager.realtime._Annotations,this.transport.connectionManager.realtime._liveObjectsPlugin)),e.sendAttempted=!0,this.transport.send(e.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const e=this.transport;this.onceIdle(function(){e.disconnect()})}},Ln=class{constructor(e,t,n,r){this.previous=e,this.current=t,n&&(this.retryIn=n),r&&(this.reason=r)}},Dn={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},zn={disconnected:()=>E.fromValues({statusCode:400,code:Dn.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>E.fromValues({statusCode:400,code:Dn.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>E.fromValues({statusCode:400,code:Dn.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>E.fromValues({statusCode:400,code:Dn.CLOSING,message:"Connection closing"}),closed:()=>E.fromValues({statusCode:400,code:Dn.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>E.fromValues({statusCode:500,code:Dn.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>E.fromValues({statusCode:500,code:Dn.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})},Fn=wn({action:Xe.CLOSE}),Bn=wn({action:Xe.DISCONNECT}),Un=class extends Ye{constructor(e,t,n,r){super(e.logger),r&&(n.format=void 0,n.heartbeats=!0),this.connectionManager=e,this.auth=t,this.params=n,this.timeouts=n.options.timeouts,this.format=n.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",zn.closed())}disconnect(e){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",e||zn.disconnected())}fail(e){this.isConnected&&this.requestDisconnect(),this.finish("failed",e||zn.failed())}finish(e,t){var n;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout(null!=(n=this.idleTimer)?n:void 0),this.idleTimer=null,this.emit(e,t),this.dispose())}onProtocolMessage(e){switch(this.logger.shouldLog(S.LOG_MICRO)&&S.logActionNoStrip(this.logger,S.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+xn(e,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._liveObjectsPlugin)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),e.action){case Xe.HEARTBEAT:S.logActionNoStrip(this.logger,S.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",e.id);break;case Xe.CONNECTED:this.onConnect(e),this.emit("connected",e.error,e.connectionId,e.connectionDetails,e);break;case Xe.CLOSED:this.onClose(e);break;case Xe.DISCONNECTED:this.onDisconnect(e);break;case Xe.ACK:this.emit("ack",e.msgSerial,e.count,e.res);break;case Xe.NACK:this.emit("nack",e.msgSerial,e.count,e.error);break;case Xe.SYNC:this.connectionManager.onChannelMessage(e,this);break;case Xe.ACTIVATE:break;case Xe.AUTH:ae(this.auth.authorize(),e=>{e&&S.logAction(this.logger,S.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+Z(e))});break;case Xe.ERROR:if(S.logAction(this.logger,S.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+y.Config.inspect(e.error)+(e.channel?", channel: "+e.channel:"")),void 0===e.channel){this.onFatalError(e);break}this.connectionManager.onChannelMessage(e,this);break;default:this.connectionManager.onChannelMessage(e,this)}}onConnect(e){if(this.isConnected=!0,!e.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const t=e.connectionDetails.maxIdleInterval;t&&(this.maxIdleInterval=t+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(e){const t=e&&e.error;S.logAction(this.logger,S.LOG_MINOR,"Transport.onDisconnect()","err = "+Z(t)),this.finish("disconnected",t)}onFatalError(e){const t=e&&e.error;S.logAction(this.logger,S.LOG_MINOR,"Transport.onFatalError()","err = "+Z(t)),this.finish("failed",t)}onClose(e){const t=e&&e.error;S.logAction(this.logger,S.LOG_MINOR,"Transport.onClose()","err = "+Z(t)),this.finish("closed",t)}requestClose(){S.logAction(this.logger,S.LOG_MINOR,"Transport.requestClose()",""),this.send(Fn)}requestDisconnect(){S.logAction(this.logger,S.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(Bn)}ping(e){const t={action:Xe.HEARTBEAT};e&&(t.id=e),this.send(wn(t))}dispose(){S.logAction(this.logger,S.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(e){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},e))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const e=Date.now()-this.lastActivity,t=this.maxIdleInterval-e;if(t<=0){const t="No activity seen from realtime in "+e+"ms; assuming connection has dropped";S.logAction(this.logger,S.LOG_ERROR,"Transport.onIdleTimerExpire()",t),this.disconnect(new E(t,80003,408))}else this.setIdleTimer(t+100)}static tryConnect(e,t,n,r,o){const a=new e(t,n,r);let s;const i=function(e){clearTimeout(s),o({event:this.event,error:e})},l=t.options.timeouts.realtimeRequestTimeout;return s=setTimeout(()=>{a.off(["preconnect","disconnected","failed"]),a.dispose(),i.call({event:"disconnected"},new E("Timeout waiting for transport to indicate itself viable",5e4,500))},l),a.on(["failed","disconnected"],i),a.on("preconnect",function(){S.logAction(t.logger,S.LOG_MINOR,"Transport.tryConnect()","viable transport "+a),clearTimeout(s),a.off(["failed","disconnected"],i),o(null,a)}),a.connect(),a}static isAvailable(){throw new E("isAvailable not implemented for transport",5e4,500)}};(_n=Tn||(Tn={})).WebSocket="web_socket",_n.Comet="comet",_n.XhrPolling="xhr_polling";var Hn="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:self,Wn=()=>{var e;return"undefined"!==typeof y.WebStorage&&(null==(e=y.WebStorage)?void 0:e.localSupported)},Gn=()=>{var e;return"undefined"!==typeof y.WebStorage&&(null==(e=y.WebStorage)?void 0:e.sessionSupported)},Vn=function(){},qn="ably-transport-preference";function Kn(e){try{return JSON.parse(e)}catch(t){return null}}var $n=class{constructor(e,t,n,r){this.options=e,this.host=t,this.mode=n,this.connectionKey=r,this.format=e.useBinaryProtocol?"msgpack":"json"}getConnectParams(e){const t=e?j(e):{},n=this.options;switch(this.mode){case"resume":t.resume=this.connectionKey;break;case"recover":{const e=Kn(n.recover);e&&(t.recover=e.connectionKey);break}}return void 0!==n.clientId&&(t.clientId=n.clientId),!1===n.echoMessages&&(t.echo="false"),void 0!==this.format&&(t.format=this.format),void 0!==this.stream&&(t.stream=this.stream),void 0!==this.heartbeats&&(t.heartbeats=this.heartbeats),t.v=Me.protocolVersion,t.agent=Te(this.options),void 0!==n.transportParams&&O(t,n.transportParams),t}toString(){let e="[mode="+this.mode;return this.host&&(e+=",host="+this.host),this.connectionKey&&(e+=",connectionKey="+this.connectionKey),this.format&&(e+=",format="+this.format),e+="]",e}},Jn=class e extends Ye{constructor(e,t){super(e.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=e,this.initTransports(),this.options=t;const n=t.timeouts,r=n.webSocketConnectTimeout+n.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:r,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:n.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:n.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:n.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new Pn(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=n.connectionStateTtl,this.maxIdleInterval=null,this.transports=z(t.transports||Me.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(Tn.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(Tn.XhrPolling)?this.baseTransport=Tn.XhrPolling:this.transports.includes(Tn.Comet)&&(this.baseTransport=Tn.Comet),this.domains=Me.getHosts(t),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,S.logAction(this.logger,S.LOG_MINOR,"Realtime.ConnectionManager()","started"),S.logAction(this.logger,S.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(t.transports||Me.defaultTransports)+"]"),S.logAction(this.logger,S.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),S.logAction(this.logger,S.LOG_MICRO,"Realtime.ConnectionManager()","http domains = ["+this.domains+"]"),!this.transports.length){const e="no requested transports available";throw S.logAction(this.logger,S.LOG_ERROR,"realtime.ConnectionManager()",e),new Error(e)}const o=y.Config.addEventListener;o&&(Gn()&&"function"===typeof t.recover&&o("beforeunload",this.persistConnection.bind(this)),!0===t.closeOnUnload&&o("beforeunload",()=>{S.logAction(this.logger,S.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),o("online",()=>{var e;this.state==this.states.disconnected||this.state==this.states.suspended?(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager caught browser \u2018online\u2019 event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&(null==(e=this.pendingTransport)||e.off(),this.disconnectAllTransports(),this.startConnect())}),o("offline",()=>{this.state==this.states.connected&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager caught browser \u2018offline\u2019 event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(e){const t={supportedTransports:{}};return this.initTransports(e,t),t.supportedTransports}static initTransports(e,t){const n=f(f({},y.Transports.bundledImplementations),e);[Tn.WebSocket,...y.Transports.order].forEach(e=>{const r=n[e];r&&r.isAvailable()&&(t.supportedTransports[e]=r)})}initTransports(){e.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(e,t){return new $n(this.options,e,t,this.connectionKey)}getTransportParams(e){(e=>{if(this.connectionKey)return void e("resume");if("string"===typeof this.options.recover)return void e("recover");const t=this.options.recover,n=this.getSessionRecoverData(),r=this.sessionRecoveryName();if(n&&"function"===typeof t)return S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+r+")"),void t(n,t=>{t?(this.options.recover=n.recoveryKey,e("recover")):e("clean")});e("clean")})(t=>{const n=this.createTransportParams(null,t);if("recover"===t){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const e=Kn(this.options.recover);e&&(this.msgSerial=e.msgSerial)}else S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+n.toString());e(n)})}tryATransport(e,t,n){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+t),this.proposedTransport=Un.tryConnect(this.supportedTransports[t],this,this.realtime.auth,e,(r,o)=>{const a=this.state;return a==this.states.closing||a==this.states.closed||a==this.states.failed?(o&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+a.state+" while we were attempting the transport; closing "+o),o.close()),void n(!0)):r?(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+t+" "+r.event+", err: "+r.error.toString()),void(!qe.isTokenErr(r.error)||this.errorReason&&qe.isTokenErr(this.errorReason)?"failed"===r.event?(this.notifyState({state:"failed",error:r.error}),n(!0)):"disconnected"===r.event&&(!(s=r.error).statusCode||!s.code||s.statusCode>=500||Object.values(Dn).includes(s.code)?n(!1):(this.notifyState({state:this.states.connecting.failState,error:r.error}),n(!0))):(this.errorReason=r.error,ae(this.realtime.auth._forceNewToken(null,null),r=>{r?this.actOnErrorFromAuthorize(r):this.tryATransport(e,t,n)})))):(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+t+"; setting pending"),this.setTransportPending(o,e),void n(null,o));var s})}setTransportPending(e,t){const n=t.mode;S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+e+"; mode = "+n),this.pendingTransport=e,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),e.once("connected",(t,r,o)=>{this.activateTransport(t,e,r,o),"recover"===n&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const r=this;e.on(["disconnected","closed","failed"],function(t){r.deactivateTransport(e,this.event,t)}),this.emit("transport.pending",e)}activateTransport(e,t,n,r){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+t),e&&S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+e),n&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+n),r&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(r)),this.persistTransportPreference(t);const o=this.state,a=this.states.connected.state;if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+o.state),o.state==this.states.closing.state||o.state==this.states.closed.state||o.state==this.states.failed.state)return S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),t.disconnect(),!1;if(delete this.pendingTransport,!t.isConnected)return S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+t+" since it appears to no longer be connected"),!1;const s=this.activeProtocol;this.activeProtocol=new In(t),this.host=t.params.host;const i=r.connectionKey;if(i&&this.connectionKey!=i&&this.setConnection(n,r,!!e),this.onConnectionDetailsUpdate(r,t),y.Config.nextTick(()=>{t.on("connected",(e,n,r)=>{this.onConnectionDetailsUpdate(r,t),this.emit("update",new Ln(a,a,null,e))})}),o.state===this.states.connected.state?e&&(this.errorReason=this.realtime.connection.errorReason=e,this.emit("update",new Ln(a,a,null,e))):(this.notifyState({state:"connected",error:e}),this.errorReason=this.realtime.connection.errorReason=e||null),this.emit("transport.active",t),s)if(s.messageQueue.count()>0&&S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+s.transport.shortName+", new one is "+t.shortName+") finishing with "+s.messageQueue.count()+" messages still pending"),s.transport===t){const e="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+t.shortName+"; stack = "+(new Error).stack;S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.activateTransport()",e)}else s.finish();return!0}deactivateTransport(e,t,n){const r=this.activeProtocol,o=r&&r.getTransport()===e,a=e===this.pendingTransport,s=this.noTransportsScheduledForActivation();if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+e),S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+t+(o?"; was active":a?"; was pending":"")+(s?"":"; another transport is scheduled for activation")),n&&n.message&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+n.message),o&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(r.getPendingMessages()),r.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",e),o&&s||o&&"failed"===t||"closed"===t||null===r&&a){if("disconnected"===t&&n&&n.statusCode>500&&this.domains.length>1)return this.unpersistTransportPreference(),this.forceFallbackHost=!0,void this.notifyState({state:t,error:n,retryImmediately:!0});const e="failed"===t&&qe.isTokenErr(n)?"disconnected":t;return void this.notifyState({state:e,error:n})}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(e,t,n){const r=this.connectionId;(r&&r!==e||!r&&n)&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==e&&S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=e,this.realtime.connection.key=this.connectionKey=t.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.queuedMessages.resetSendAttempted(),this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const e=Date.now()-this.lastActivity;e>this.connectionStateTtl+this.maxIdleInterval&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+e+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(Gn()){const e=this.createRecoveryKey();e&&this.setSessionRecoverData({recoveryKey:e,disconnectedAt:Date.now(),location:Hn.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getActiveTransportFormat(){var e;return null==(e=this.activeProtocol)?void 0:e.getTransport().format}getError(){if(this.errorReason){const e=R.fromValues(this.errorReason);return e.cause=this.errorReason,e}return this.getStateError()}getStateError(){var e,t;return null==(t=(e=zn)[this.state.state])?void 0:t.call(e)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(e){const t="Connection state",n=e.current+(e.reason?"; reason: "+e.reason:"");"failed"===e.current?S.logAction(this.logger,S.LOG_ERROR,t,n):S.logAction(this.logger,S.LOG_MAJOR,t,n),S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+e.current+"; reason = "+(e.reason&&e.reason.message));const r=this.state=this.states[e.current];e.reason&&(this.errorReason=e.reason,this.realtime.connection.errorReason=e.reason),(r.terminal||"suspended"===r.state)&&this.clearConnection(),this.emit("connectionstate",e)}startTransitionTimer(e){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+e.state),this.transitionTimer&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager "+e.state+" timer expired","requesting new state: "+e.failState),this.notifyState({state:e.failState}))},e.retryDelay)}cancelTransitionTimer(){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(e){"disconnected"!==e&&"suspended"!==e&&"connecting"!==e&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(e){this.retryTimer=setTimeout(()=>{S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},e)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then(()=>{S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{S.logAction(this.logger,S.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&ae(this.realtime.http.checkConnectivity(),(e,t)=>{e||!t?(S.logAction(this.logger,S.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new E("Unable to connect (network unreachable)",80003,404)})):S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(e){this.webSocketGiveUpTimer=setTimeout(()=>{var t,n;this.wsCheckResult||(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,null==(t=this.proposedTransport)||t.dispose(),null==(n=this.pendingTransport)||n.dispose(),this.connectBase(e,++this.connectCounter)):S.logAction(this.logger,S.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(e){var t,n;const r=e.state,o="disconnected"===r&&(this.state===this.states.connected||e.retryImmediately||this.state===this.states.connecting&&e.error&&qe.isTokenErr(e.error)&&!(this.errorReason&&qe.isTokenErr(this.errorReason)));if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+r+(o?"; will retry connection immediately":"")),r==this.state.state)return;if(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(e.state),"suspended"!==r&&"connected"!==r||(this.disconnectedRetryCount=0),this.state.terminal)return;const a=this.states[e.state];let s=a.retryDelay;"disconnected"===a.state&&(this.disconnectedRetryCount++,s=he(a.retryDelay,this.disconnectedRetryCount));const i=new Ln(this.state.state,a.state,s,e.error||(null==(n=(t=zn)[a.state])?void 0:n.call(t)));if(o){const e=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},t=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;t&&t<1e3?(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+t+"ms ago, waiting another "+(1e3-t)+"ms before trying again"),setTimeout(e,1e3-t)):y.Config.nextTick(e)}else"disconnected"!==r&&"suspended"!==r||this.startRetryTimer(s);("disconnected"===r&&!o||"suspended"===r||a.terminal)&&y.Config.nextTick(()=>{this.disconnectAllTransports()}),"connected"!=r||this.activeProtocol||S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(i),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(r,i.reason),this.failQueuedMessages(i.reason))}requestState(e){var t,n;const r=e.state;if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+r+"; current state: "+this.state.state),r==this.state.state)return;if(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(r),"connecting"==r&&"connected"==this.state.state)return;if("closing"==r&&"closed"==this.state.state)return;const o=this.states[r],a=new Ln(this.state.state,o.state,null,e.error||(null==(n=(t=zn)[o.state])?void 0:n.call(t)));this.enactStateChange(a),"connecting"==r&&y.Config.nextTick(()=>{this.startConnect()}),"closing"==r&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting)return void S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);const e=this.realtime.auth,t=++this.connectCounter,n=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(e=>{if("recover"===e.mode&&e.options.recover){const t=Kn(e.options.recover);t&&this.realtime.channels.recoverChannels(t.channelSerials)}t===this.connectCounter&&this.connectImpl(e,t)})};if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),"basic"===e.method)n();else{const r=e=>{t===this.connectCounter&&(e?this.actOnErrorFromAuthorize(e):n())};this.errorReason&&qe.isTokenErr(this.errorReason)?ae(e._forceNewToken(null,null),r):ae(e._ensureValidAuthCredentials(!1),r)}}connectImpl(e,t){const n=this.state.state;if(n!==this.states.connecting.state)return void S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+n);const r=this.getTransportPreference();r&&r===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(e,++this.connectCounter))}).catch(Vn),r&&r===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(e,t):this.connectWs(e,t)}connectWs(e,t){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(e),this.tryTransportWithFallbacks("web_socket",e,!0,t,()=>!1!==this.wsCheckResult&&!this.abandonedWebSocket)}connectBase(e,t){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,e,!1,t,()=>!0):this.notifyState({state:"disconnected",error:new E("No transports left to try",8e4,404)})}tryTransportWithFallbacks(e,t,n,r,o){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",e);const a=e=>{this.notifyState({state:this.states.connecting.failState,error:e})},s=this.domains.slice(),i=(e,t)=>{r===this.connectCounter&&(o()?t||e||c():t&&t.dispose())},l=s.shift();if(!l)return void a(new E("Unable to connect (no available host)",80003,404));t.host=l;const c=()=>{s.length?this.realtime.http.checkConnectivity?ae(this.realtime.http.checkConnectivity(),(n,l)=>{r===this.connectCounter&&o()&&(n?a(n):l?(t.host=$(s),this.tryATransport(t,e,i)):a(new E("Unable to connect (network unreachable)",80003,404)))}):a(new R("Internal error: Http.checkConnectivity not set",null,500)):a(new E("Unable to connect (and no more fallback hosts to try)",80003,404))};if(this.forceFallbackHost&&s.length)return this.forceFallbackHost=!1,void c();this.tryATransport(t,e,i)}closeImpl(){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(e,t){var n;switch(this.state.state){case"connected":{S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const r=null==(n=this.activeProtocol)?void 0:n.getTransport();r&&r.onAuthUpdated&&r.onAuthUpdated(e);const o=wn({action:Xe.AUTH,auth:{accessToken:e.token}});this.send(o);const a=()=>{this.off(s),t(null,e)},s=e=>{"failed"===e.current&&(this.off(a),this.off(s),t(e.reason||this.getStateError()))};this.once("connectiondetails",a),this.on("connectionstate",s);break}case"connecting":S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const n=r=>{switch(r.current){case"connected":this.off(n),t(null,e);break;case"failed":case"closed":case"suspended":this.off(n),t(r.reason||this.getStateError())}};this.on("connectionstate",n),"connecting"===this.state.state?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(e,t,n){n=n||Vn;const r=this.state;if(r.sendEvents)return S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.send()","sending event"),void this.sendImpl(new Mn(e,n));if(!t||!r.queueEvents){const e="rejecting event, queueEvent was "+t+", state was "+r.state;return S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.send()",e),void n(this.errorReason||new E(e,9e4,400))}this.logger.shouldLog(S.LOG_MICRO)&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+xn(e,this.realtime._RealtimePresence,this.realtime._Annotations,this.realtime._liveObjectsPlugin)),this.queue(e,n)}sendImpl(e){const t=e.message;e.ackRequired&&!e.sendAttempted&&(t.msgSerial=this.msgSerial++);try{this.activeProtocol.send(e)}catch(n){S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+n.stack)}}queue(e,t){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.queue()","queueing event"),this.queuedMessages.push(new Mn(e,t))}sendQueuedMessages(){let e;for(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");e=this.queuedMessages.shift();)this.sendImpl(e)}queuePendingMessages(e){e&&e.length&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+e.length+" pending messages"),this.queuedMessages.prepend(e))}failQueuedMessages(e){const t=this.queuedMessages.count();t>0&&(S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+t+" queued messages, err = "+Z(e)),this.queuedMessages.completeAllMessages(e))}onChannelMessage(e,t){this.pendingChannelMessagesState.queue.push({message:e,transport:t}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const e=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(e.message).catch(e=>{S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",e)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(e){await this.realtime.channels.processChannelMessage(e)}async ping(){var e;if("connected"!==this.state.state)throw new E("Unable to ping service; not connected",4e4,400);const t=null==(e=this.activeProtocol)?void 0:e.getTransport();if(!t)throw this.getStateError();S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.ping()","transport = "+t);const n=Date.now(),r=ne();return we(new Promise(e=>{const o=a=>{a===r&&(t.off("heartbeat",o),e(Date.now()-n))};t.on("heartbeat",o),t.ping(r)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(e){this.activeProtocol.getTransport().fail(e)}getTransportPreference(){var e,t;return this.transportPreference||Wn()&&(null==(t=null==(e=y.WebStorage)?void 0:e.get)?void 0:t.call(e,qn))}persistTransportPreference(e){var t,n;this.transportPreference=e.shortName,Wn()&&(null==(n=null==(t=y.WebStorage)?void 0:t.set)||n.call(t,qn,e.shortName))}unpersistTransportPreference(){var e,t;this.transportPreference=null,Wn()&&(null==(t=null==(e=y.WebStorage)?void 0:e.remove)||t.call(e,qn))}actOnErrorFromAuthorize(e){if(40171===e.code)this.notifyState({state:"failed",error:e});else if(40102===e.code)this.notifyState({state:"failed",error:e});else if(e.statusCode===Fe.Forbidden){const t="Client configured authentication provider returned 403; failing the connection";S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",t),this.notifyState({state:"failed",error:new E(t,80019,403,e)})}else{const t="Client configured authentication provider request failed";S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",t),this.notifyState({state:this.state.failState,error:new E(t,80019,401,e)})}}onConnectionDetailsUpdate(e,t){if(!e)return;this.connectionDetails=e,e.maxMessageSize&&(this.options.maxMessageSize=e.maxMessageSize);const n=e.clientId;if(n){const e=this.realtime.auth._uncheckedSetClientId(n);if(e)return S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",e.message),void t.fail(e)}const r=e.connectionStateTtl;r&&(this.connectionStateTtl=r),this.maxIdleInterval=e.maxIdleInterval,this.emit("connectiondetails",e)}checkWsConnectivity(){const e=this.options.wsConnectivityCheckUrl||Me.wsConnectivityCheckUrl,t=new y.Config.WebSocket(e);return new Promise((e,n)=>{let r=!1;t.onopen=()=>{r||(r=!0,e(),t.close())},t.onclose=t.onerror=()=>{r||(r=!0,n())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var e,t;return Gn()&&(null==(t=null==(e=y.WebStorage)?void 0:e.getSession)?void 0:t.call(e,this.sessionRecoveryName()))}setSessionRecoverData(e){var t,n;return Gn()&&(null==(n=null==(t=y.WebStorage)?void 0:t.setSession)?void 0:n.call(t,this.sessionRecoveryName(),e))}clearSessionRecoverData(){var e,t;return Gn()&&(null==(t=null==(e=y.WebStorage)?void 0:e.removeSession)?void 0:t.call(e,this.sessionRecoveryName()))}},Qn=class extends Ye{constructor(e,t){super(e.logger),this.whenState=e=>Ye.prototype.whenState.call(this,e,this.state),this.ably=e,this.connectionManager=new Jn(e,t),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",e=>{const t=this.state=e.current;y.Config.nextTick(()=>{this.emit(t,e)})}),this.connectionManager.on("update",e=>{y.Config.nextTick(()=>{this.emit("update",e)})})}connect(){S.logAction(this.logger,S.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return S.logAction(this.logger,S.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){S.logAction(this.logger,S.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},Yn=class e extends gt{constructor(t){var n,r,o,a;if(super(Me.objectifyOptions(t,!1,"BaseRealtime",S.defaultLogger)),S.logAction(this.logger,S.LOG_MINOR,"Realtime()",""),"string"===typeof EdgeRuntime)throw new E('Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === \'string\')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.',4e4,400);this._additionalTransportImplementations=e.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=null!=(r=null==(n=this.options.plugins)?void 0:n.RealtimePresence)?r:null,this._liveObjectsPlugin=null!=(a=null==(o=this.options.plugins)?void 0:o.LiveObjects)?a:null,this.connection=new Qn(this,this.options),this._channels=new Zn(this),!1!==this.options.autoConnect&&this.connect()}static transportImplementationsFromPlugins(e){const t={};return(null==e?void 0:e.WebSocketTransport)&&(t[Tn.WebSocket]=e.WebSocketTransport),(null==e?void 0:e.XHRPolling)&&(t[Tn.XhrPolling]=e.XHRPolling),t}get channels(){return this._channels}get clientId(){return this.auth.clientId}connect(){S.logAction(this.logger,S.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){S.logAction(this.logger,S.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};Yn.EventEmitter=Ye;var Xn=Yn,Zn=class extends Ye{constructor(e){super(e.logger),this.realtime=e,this.all=Object.create(null),e.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let e={};for(const t of W(this.all,!0)){const n=this.all[t];n.properties.channelSerial&&(e[t]=n.properties.channelSerial)}return e}recoverChannels(e){for(const t of W(e,!0))this.get(t).properties.channelSerial=e[t]}async processChannelMessage(e){const t=e.channel;if(void 0===t)return void S.logAction(this.logger,S.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+e.action);const n=this.all[t];n?await n.processMessage(e):S.logAction(this.logger,S.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+t)}onTransportActive(){for(const e in this.all){const t=this.all[e];"attaching"===t.state||"detaching"===t.state?t.checkPendingState():"suspended"===t.state?t._attach(!1,null):"attached"===t.state&&t.requestState("attaching")}}propogateConnectionInterruption(e,t){const n=["attaching","attached","detaching","suspended"],r={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"}[e];for(const o in this.all){const e=this.all[o];n.includes(e.state)&&e.notifyState(r,t)}}get(e,t){e=String(e);let n=this.all[e];if(n){if(t){if(n._shouldReattachToSetOptions(t,n.channelOptions))throw new E("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);n.setOptions(t)}}else n=this.all[e]=new Rn(this.realtime,e,t);return n}getDerived(e,t,n){if(t.filter){const n=ge(t.filter),r=me(e);e="[filter=".concat(n).concat(r.qualifierParam,"]").concat(r.channelName)}return this.get(e,n)}release(e){e=String(e);const t=this.all[e];if(!t)return;const n=t.getReleaseErr();if(n)throw n;delete this.all[e]}},er=Xn;function tr(e,t){if(e.isSynthesized()||t.isSynthesized())return e.timestamp>=t.timestamp;const n=e.parseId(),r=t.parseId();return n.msgSerial===r.msgSerial?n.index>r.index:n.msgSerial>r.msgSerial}var nr=class extends Ye{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tr;super(e.logger),this.presence=e,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=t,this.newerThan=n}get(e){return this.map[e]}getClient(e){const t=this.map,n=[];for(const r in t){const o=t[r];o.clientId==e&&"absent"!=o.action&&n.push(o)}return n}list(e){const t=this.map,n=e&&e.clientId,r=e&&e.connectionId,o=[];for(const a in t){const e=t[a];"absent"!==e.action&&(n&&n!=e.clientId||r&&r!=e.connectionId||o.push(e))}return o}put(e){"enter"!==e.action&&"update"!==e.action||((e=It.fromValues(e)).action="present");const t=this.map,n=this.memberKey(e);this.residualMembers&&delete this.residualMembers[n];const r=t[n];return!(r&&!this.newerThan(e,r))&&(t[n]=e,!0)}values(){const e=this.map,t=[];for(const n in e){const r=e[n];"absent"!=r.action&&t.push(r)}return t}remove(e){const t=this.map,n=this.memberKey(e),r=t[n];return!(r&&!this.newerThan(e,r))&&(this.syncInProgress?((e=It.fromValues(e)).action="absent",t[n]=e):delete t[n],!!r)}startSync(){const e=this.map,t=this.syncInProgress;S.logAction(this.logger,S.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),this.syncInProgress||(this.residualMembers=j(e),this.setInProgress(!0))}endSync(){const e=this.map,t=this.syncInProgress;if(S.logAction(this.logger,S.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t){for(const t in e)"absent"===e[t].action&&delete e[t];this.presence._synthesizeLeaves(G(this.residualMembers));for(const t in this.residualMembers)delete e[t];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}async waitSync(){const e=this.syncInProgress;S.logAction(this.logger,S.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+e),e&&await this.once("sync")}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(e){S.logAction(this.logger,S.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+e),this.syncInProgress=e,this.presence.syncComplete=!e}};function rr(e){const t=e.channel.client,n=t.auth.clientId;return(!n||"*"===n)&&"connected"===t.connection.state}var or=class extends Ye{constructor(e){super(e.logger),this.channel=e,this.syncComplete=!1,this.members=new nr(this,e=>e.clientId+":"+e.connectionId),this._myMembers=new nr(this,e=>e.clientId),this.subscriptions=new Ye(this.logger),this.pendingPresence=[]}async enter(e){if(rr(this))throw new E("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"enter")}async update(e){if(rr(this))throw new E("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"update")}async enterClient(e,t){return this._enterOrUpdateClient(void 0,e,t,"enter")}async updateClient(e,t){return this._enterOrUpdateClient(void 0,e,t,"update")}async _enterOrUpdateClient(e,t,n,r){const o=this.channel;if(!o.connectionManager.activeState())throw o.connectionManager.getError();S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence."+r+"Client()","channel = "+o.name+", id = "+e+", client = "+(t||"(implicit) "+this.channel.client.auth.clientId));const a=It.fromData(n);a.action=r,e&&(a.id=e),t&&(a.clientId=t);const s=await a.encode(o.channelOptions);switch(o.state){case"attached":return o.sendPresence([s]);case"initialized":case"detached":o.attach();case"attaching":return new Promise((e,t)=>{this.pendingPresence.push({presence:s,callback:n=>n?t(n):e()})});default:{const e=new R("Unable to "+r+" presence channel while in "+o.state+" state",90001);throw e.code=90001,e}}}async leave(e){if(rr(this))throw new E("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,e)}async leaveClient(e,t){const n=this.channel;if(!n.connectionManager.activeState())throw n.connectionManager.getError();S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+e);const r=It.fromData(t);r.action="leave",e&&(r.clientId=e);const o=await r.encode(n.channelOptions);switch(n.state){case"attached":return n.sendPresence([o]);case"attaching":return new Promise((e,t)=>{this.pendingPresence.push({presence:o,callback:n=>n?t(n):e()})});case"initialized":case"failed":throw new R("Unable to leave presence channel (incompatible state)",90001);default:throw n.invalidStateError()}}async get(e){const t=!e||!("waitForSync"in e)||e.waitForSync;function n(t){return e?t.list(e):t.values()}if("suspended"===this.channel.state){if(t)throw E.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"});return n(this.members)}await this.channel.ensureAttached();const r=this.members;return t&&await r.waitSync(),n(this.members)}async history(e){S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const t=this.channel.client.rest.presenceMixin;if(e&&e.untilAttach){if("attached"!==this.channel.state)throw new E("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);delete e.untilAttach,e.from_serial=this.channel.properties.attachSerial}return t.history(this,e)}setPresence(e,t,n){let r,o;S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+e.length+" participants; syncChannelSerial = "+n);const a=this.members,s=this._myMembers,i=[],l=this.channel.connectionManager.connectionId;t&&(this.members.startSync(),n&&(o=n.match(/^[\w-]+:(.*)$/))&&(r=o[1]));for(let c of e)switch(c.action){case"leave":a.remove(c)&&i.push(c),c.connectionId!==l||c.isSynthesized()||s.remove(c);break;case"enter":case"present":case"update":a.put(c)&&i.push(c),c.connectionId===l&&s.put(c)}t&&!r&&(a.endSync(),this.channel.syncChannelSerial=null);for(let c=0;c<i.length;c++){const e=i[c];this.subscriptions.emit(e.action,e)}}onAttached(e){S.logAction(this.logger,S.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+e),e?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const t=this.pendingPresence,n=t.length;if(n){this.pendingPresence=[];const e=[],r=Ie.create(this.logger);S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.onAttached","sending "+n+" queued presence messages");for(let o=0;o<n;o++){const n=t[o];e.push(n.presence),r.push(n.callback)}this.channel.sendPresence(e).then(()=>r()).catch(e=>r(e))}}actOnChannelState(e,t,n){switch(e){case"attached":this.onAttached(t);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(n)}}failPendingPresence(e){if(this.pendingPresence.length){S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+Z(e));for(let n=0;n<this.pendingPresence.length;n++)try{this.pendingPresence[n].callback(e)}catch(t){}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const e=this._myMembers,t=this.channel.connectionManager.connectionId;for(const n in e.map){const r=e.map[n];S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+r.clientId+'" into the presence set');const o=r.connectionId===t?r.id:void 0;this._enterOrUpdateClient(o,r.clientId,r.data,"enter").catch(e=>{const t=new E("Presence auto re-enter failed",91004,400,e);S.logAction(this.logger,S.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()","Presence auto re-enter failed; reason = "+Z(e));const n=new Cn(this.channel.state,this.channel.state,!0,!1,t);this.channel.emit("update",n)})}}_synthesizeLeaves(e){const t=this.subscriptions;e.forEach(function(e){const n=It.fromValues({action:"leave",connectionId:e.connectionId,clientId:e.clientId,data:e.data,encoding:e.encoding,timestamp:Date.now()});t.emit("leave",n)})}async subscribe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Rn.processListenerArgs(t),o=r[0],a=r[1],s=this.channel;if("failed"===s.state)throw E.fromValues(s.invalidStateError());this.subscriptions.on(o,a),!1!==s.channelOptions.attachOnSubscribe&&await s.attach()}unsubscribe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Rn.processListenerArgs(t),o=r[0],a=r[1];this.subscriptions.off(o,a)}},ar=Tn.WebSocket,sr=class extends Un{constructor(e,t,n){super(e,t,n),this.shortName=ar,n.heartbeats=y.Config.useProtocolHeartbeats,this.wsHost=n.host}static isAvailable(){return!!y.Config.WebSocket}createWebSocket(e,t){return this.uri=e+J(t),new y.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.connect()","starting"),Un.prototype.connect.call(this);const e=this,t=this.params,n=t.options,r=(n.tls?"wss://":"ws://")+this.wsHost+":"+Me.getPort(n)+"/";S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.connect()","uri: "+r),ae(this.auth.getAuthParams(),function(n,o){if(e.isDisposed)return;let a="";for(const e in o)a+=" "+e+": "+o[e]+";";if(S.logAction(e.logger,S.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+a+" err: "+n),n)return void e.disconnect(n);const s=t.getConnectParams(o);try{const t=e.wsConnection=e.createWebSocket(r,s);t.binaryType=y.Config.binaryType,t.onopen=function(){e.onWsOpen()},t.onclose=function(t){e.onWsClose(t)},t.onmessage=function(t){e.onWsData(t.data)},t.onerror=function(t){e.onWsError(t)},t.on&&t.on("ping",function(){e.onActivity()})}catch(i){S.logAction(e.logger,S.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(i.stack||i.message)),e.disconnect(i)}})}send(e){const t=this.wsConnection;if(t)try{t.send(gn(e,this.connectionManager.realtime._MsgPack,this.params.format))}catch(n){const e="Exception from ws connection when trying to send: "+Z(n);S.logAction(this.logger,S.LOG_ERROR,"WebSocketTransport.send()",e),this.finish("disconnected",new E(e,5e4,500))}else S.logAction(this.logger,S.LOG_ERROR,"WebSocketTransport.send()","No socket connection")}onWsData(e){S.logAction(this.logger,S.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+e.length+"; type = "+typeof e);try{this.onProtocolMessage((t=e,n=this.connectionManager.realtime._MsgPack,r=this.connectionManager.realtime._RealtimePresence,o=this.connectionManager.realtime._Annotations,a=this.connectionManager.realtime._liveObjectsPlugin,s=this.format,yn(se(t,n,s),r,o,a)))}catch(i){S.logAction(this.logger,S.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+i.stack)}var t,n,r,o,a,s}onWsOpen(){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(e){let t,n;if("object"==typeof e?(n=e.code,t=e.wasClean||1e3===n):(n=e,t=1e3==n),delete this.wsConnection,t){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const e=new E("Websocket closed",80003,400);this.finish("disconnected",e)}else{const e="Unclean disconnection of WebSocket ; code = "+n,t=new E(e,80003,400);S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onWsClose()",e),this.finish("disconnected",t)}this.emit("disposed")}onWsError(e){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+e.message),y.Config.nextTick(()=>{this.disconnect(Error(e.message))})}dispose(){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const e=this.wsConnection;e&&(e.onmessage=function(){},delete this.wsConnection,y.Config.nextTick(()=>{if(S.logAction(this.logger,S.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!e)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");e.close()}))}},ir=class{static subscribeFilter(e,t,n){const r=e=>{var r,o,a,s,i,l;const c={name:e.name,refTimeserial:null==(o=null==(r=e.extras)?void 0:r.ref)?void 0:o.timeserial,refType:null==(s=null==(a=e.extras)?void 0:a.ref)?void 0:s.type,isRef:!!(null==(l=null==(i=e.extras)?void 0:i.ref)?void 0:l.timeserial),clientId:e.clientId};Object.entries(t).find(e=>{let[t,n]=e;return void 0!==n&&c[t]!==n})||n(e)};this.addFilteredSubscription(e,t,n,r),e.subscriptions.on(r)}static addFilteredSubscription(e,t,n,r){var o;if(e.filteredSubscriptions||(e.filteredSubscriptions=new Map),e.filteredSubscriptions.has(n)){const a=e.filteredSubscriptions.get(n);a.set(t,(null==(o=null==a?void 0:a.get(t))?void 0:o.concat(r))||[r])}else e.filteredSubscriptions.set(n,new Map([[t,[r]]]))}static getAndDeleteFilteredSubscriptions(e,t,n){if(!e.filteredSubscriptions)return[];if(!n&&t)return Array.from(e.filteredSubscriptions.entries()).map(n=>{let[r,o]=n;var a;let s=o.get(t);return o.delete(t),0===o.size&&(null==(a=e.filteredSubscriptions)||a.delete(r)),s}).reduce((e,t)=>t?e.concat(...t):e,[]);if(!n||!e.filteredSubscriptions.has(n))return[];const r=e.filteredSubscriptions.get(n);if(!t){const t=Array.from(r.values()).reduce((e,t)=>e.concat(...t),[]);return e.filteredSubscriptions.delete(n),t}let o=r.get(t);return r.delete(t),o||[]}},lr=class e extends er{constructor(t){var n;const r=e._MsgPack;if(!r)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(Me.objectifyOptions(t,!0,"Realtime",S.defaultLogger,p(f({},tn),{Crypto:null!=(n=e.Crypto)?n:void 0,MsgPack:r,RealtimePresence:{RealtimePresence:or,PresenceMessage:It,WirePresenceMessage:Mt},Annotations:{Annotation:un,WireAnnotation:cn,RealtimeAnnotations:On,RestAnnotations:mn},WebSocketTransport:sr,MessageInteractions:ir})))}static get Crypto(){if(null===this._Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(e){this._Crypto=e}};lr.Utils=C,lr.ConnectionManager=Jn,lr.ProtocolMessage=Sn,lr._Crypto=null,lr.Message=nn,lr.PresenceMessage=rn,lr.Annotation=dn,lr._MsgPack=null,lr._Http=Je,lr._PresenceMap=nr,lr._MessageEncoding=dt;var cr=lr,ur=Uint8Array,dr=Uint32Array,hr=Math.pow,fr=new dr(8),pr=[],mr=new dr(64);function gr(e){return(e-(0|e))*hr(2,32)|0}for(var vr,yr,br=2,wr=0;wr<64;){for(vr=!0,yr=2;yr<=br/2;yr++)br%yr===0&&(vr=!1);vr&&(wr<8&&(fr[wr]=gr(hr(br,.5))),pr[wr]=gr(hr(br,1/3)),wr++),br++}var xr=!!new ur(new dr([1]).buffer)[0];function kr(e){return xr?e>>>24|(e>>>16&255)<<8|(65280&e)<<8|e<<24:e}function Sr(e,t){return e>>>t|e<<32-t}function Cr(e){var t,n=fr.slice(),r=e.length,o=8*r,a=512-(o+64)%512-1+o+65,s=new ur(a/8),i=new dr(s.buffer);s.set(e,0),s[r]=128,i[i.length-1]=kr(o);for(var l=0;l<a/32;l+=16){var c=n.slice();for(t=0;t<64;t++){var u;if(t<16)u=kr(i[l+t]);else{var d=mr[t-15],h=mr[t-2];u=mr[t-7]+mr[t-16]+(Sr(d,7)^Sr(d,18)^d>>>3)+(Sr(h,17)^Sr(h,19)^h>>>10)}mr[t]=u|=0;for(var f=(Sr(c[4],6)^Sr(c[4],11)^Sr(c[4],25))+(c[4]&c[5]^~c[4]&c[6])+c[7]+u+pr[t],p=(Sr(c[0],2)^Sr(c[0],13)^Sr(c[0],22))+(c[0]&c[1]^c[2]&(c[0]^c[1])),m=7;m>0;m--)c[m]=c[m-1];c[0]=f+p|0,c[4]=c[4]+f|0}for(t=0;t<8;t++)n[t]=n[t]+c[t]|0}return new ur(new dr(n.map(function(e){return kr(e)})).buffer)}var Nr,Er=new class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(e){let t="";const n=this.base64CharSet,r=e.byteLength,o=r%3,a=r-o;let s,i,l,c,u;for(let d=0;d<a;d+=3)u=e[d]<<16|e[d+1]<<8|e[d+2],s=(16515072&u)>>18,i=(258048&u)>>12,l=(4032&u)>>6,c=63&u,t+=n[s]+n[i]+n[l]+n[c];return 1==o?(u=e[a],s=(252&u)>>2,i=(3&u)<<4,t+=n[s]+n[i]+"=="):2==o&&(u=e[a]<<8|e[a+1],s=(64512&u)>>10,i=(1008&u)>>4,l=(15&u)<<2,t+=n[s]+n[i]+n[l]+"="),t}base64ToArrayBuffer(e){const t=null==atob?void 0:atob(e),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++){const e=t.charCodeAt(o);r[o]=e}return this.toArrayBuffer(r)}isBuffer(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}toBuffer(e){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(this.toArrayBuffer(e));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(e){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(e){return this.uint8ViewToBase64(this.toBuffer(e))}base64UrlEncode(e){return this.base64Encode(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}base64Decode(e){if(ArrayBuffer&&y.Config.atob)return this.base64ToArrayBuffer(e);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(e){return this.toBuffer(e).reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}hexDecode(e){if(e.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++)t[n]=parseInt(e.slice(2*n,2*(n+1)),16);return this.toArrayBuffer(t)}utf8Encode(e){if(y.Config.TextEncoder){const t=(new y.Config.TextEncoder).encode(e);return this.toArrayBuffer(t)}throw new Error("Expected TextEncoder to be configured")}utf8Decode(e){if(!this.isBuffer(e))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return(new TextDecoder).decode(e);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(e,t){if(!e||!t)return!1;const n=this.toArrayBuffer(e),r=this.toArrayBuffer(t);if(n.byteLength!=r.byteLength)return!1;const o=new Uint8Array(n),a=new Uint8Array(r);for(var s=0;s<o.length;s++)if(o[s]!=a[s])return!1;return!0}byteLength(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}arrayBufferViewToBuffer(e){return this.toArrayBuffer(e)}concat(e){const t=e.reduce((e,t)=>e+t.byteLength,0),n=new Uint8Array(t);let r=0;for(const o of e){const e=this.toBuffer(o);n.set(e,r),r+=e.byteLength}return n.buffer}sha256(e){const t=Cr(this.toBuffer(e));return this.toArrayBuffer(t)}hmacSha256(e,t){const n=function(e,t){if(e.length>64&&(e=Cr(e)),e.length<64){const t=new Uint8Array(64);t.set(e,0),e=t}for(var n=new Uint8Array(64),r=new Uint8Array(64),o=0;o<64;o++)n[o]=54^e[o],r[o]=92^e[o];var a=new Uint8Array(t.length+64);a.set(n,0),a.set(t,64);var s=new Uint8Array(96);return s.set(r,0),s.set(Cr(a),64),Cr(s)}(this.toBuffer(t),this.toBuffer(e));return this.toArrayBuffer(n)}},Rr=(e=>(e[e.REQ_SEND=0]="REQ_SEND",e[e.REQ_RECV=1]="REQ_RECV",e[e.REQ_RECV_POLL=2]="REQ_RECV_POLL",e[e.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",e))(Rr||{}),Or=Rr;function jr(){return new E("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var Tr=((Nr=class{constructor(e){var t;this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this.client=null!=e?e:null;const n=(null==e?void 0:e.options.connectivityCheckUrl)||Me.connectivityCheckUrl,r=null!=(t=null==e?void 0:e.options.connectivityCheckParams)?t:null,o=!(null==e?void 0:e.options.connectivityCheckUrl),a=f(f({},Tr.bundledRequestImplementations),null==e?void 0:e._additionalHTTPRequestImplementations),s=a.XHRRequest,i=a.FetchRequest,l=!(!s&&!i);if(!l)throw jr();y.Config.xhrSupported&&s?(this.supportsAuthHeaders=!0,this.Request=async function(t,n,r,o,a){return new Promise(i=>{var l;const c=s.createRequest(n,r,o,a,Or.REQ_SEND,null!=(l=e&&e.options.timeouts)?l:null,this.logger,t);c.once("complete",(e,t,n,r,o)=>i({error:e,body:t,headers:n,unpacked:r,statusCode:o})),c.exec()})},(null==e?void 0:e.options.disableConnectivityCheck)?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var e;S.logAction(this.logger,S.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+n);const t=await this.doUri(De.Get,n,null,null,r);let a=!1;var s;return a=o?!t.error&&"yes"==(null==(e=t.body)?void 0:e.replace(/\n/,"")):!t.error&&(s=t.statusCode)>=200&&s<400,S.logAction(this.logger,S.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+a),a}):y.Config.fetchSupported&&i?(this.supportsAuthHeaders=!0,this.Request=async(t,n,r,o,a)=>i(t,null!=e?e:null,n,r,o,a),(null==e?void 0:e.options.disableConnectivityCheck)?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var e;S.logAction(this.logger,S.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+n);const t=await this.doUri(De.Get,n,null,null,null),r=!t.error&&"yes"==(null==(e=t.body)?void 0:e.replace(/\n/,""));return S.logAction(this.logger,S.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+r),r}):this.Request=async()=>({error:l?new R("no supported HTTP transports available",null,400):jr()})}get logger(){var e,t;return null!=(t=null==(e=this.client)?void 0:e.logger)?t:S.defaultLogger}async doUri(e,t,n,r,o){return this.Request?this.Request(e,t,n,o,r):{error:new R("Request invoked before assigned to",null,500)}}shouldFallback(e){const t=e.statusCode;return 408===t&&!e.code||400===t&&!e.code||t>=500&&t<=504}}).methods=[De.Get,De.Delete,De.Post,De.Put,De.Patch],Nr.methodsWithoutBody=[De.Get,De.Delete],Nr.methodsWithBody=[De.Post,De.Put,De.Patch],Nr),_r=Tr,Ar="ablyjs-storage-test",Pr="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:self,Mr=new class{constructor(){try{Pr.sessionStorage.setItem(Ar,Ar),Pr.sessionStorage.removeItem(Ar),this.sessionSupported=!0}catch(e){this.sessionSupported=!1}try{Pr.localStorage.setItem(Ar,Ar),Pr.localStorage.removeItem(Ar),this.localSupported=!0}catch(e){this.localSupported=!1}}get(e){return this._get(e,!1)}getSession(e){return this._get(e,!0)}remove(e){return this._remove(e,!1)}removeSession(e){return this._remove(e,!0)}set(e,t,n){return this._set(e,t,n,!1)}setSession(e,t,n){return this._set(e,t,n,!0)}_set(e,t,n,r){const o={value:t};return n&&(o.expires=Date.now()+n),this.storageInterface(r).setItem(e,JSON.stringify(o))}_get(e,t){if(t&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!t&&!this.localSupported)throw new Error("Local Storage not supported");const n=this.storageInterface(t).getItem(e);if(!n)return null;const r=JSON.parse(n);return r.expires&&r.expires<Date.now()?(this.storageInterface(t).removeItem(e),null):r.value}_remove(e,t){return this.storageInterface(t).removeItem(e)}storageInterface(e){return e?Pr.sessionStorage:Pr.localStorage}},Ir=fe(),Lr="string"===typeof EdgeRuntime;"undefined"!==typeof Window||"undefined"!==typeof WorkerGlobalScope||Lr||console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");var Dr={agent:"browser",logTimestamps:!0,userAgent:Ir.navigator&&Ir.navigator.userAgent.toString(),currentUrl:Ir.location&&Ir.location.href,binaryType:"arraybuffer",WebSocket:Ir.WebSocket,fetchSupported:!!Ir.fetch,xhrSupported:Ir.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:function(){const e=Ir.location;return!Ir.WebSocket||!e||!e.origin||e.origin.indexOf("http")>-1}(),useProtocolHeartbeats:!0,supportsBinary:!!Ir.TextDecoder,preferBinary:!1,ArrayBuffer:Ir.ArrayBuffer,atob:Ir.atob,nextTick:"function"===typeof Ir.queueMicrotask?e=>Ir.queueMicrotask(e):e=>Promise.resolve().then(e),addEventListener:Ir.addEventListener,inspect:JSON.stringify,stringByteSize:function(e){return Ir.TextDecoder&&(new Ir.TextEncoder).encode(e).length||e.length},TextEncoder:Ir.TextEncoder,TextDecoder:Ir.TextDecoder,getRandomArrayBuffer:async function(e){const t=new Uint8Array(e);return Ir.crypto.getRandomValues(t),t.buffer},isWebworker:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,push:{platform:"browser",formFactor:"desktop",storage:Mr}};function zr(e){return function(e){const t=[80015,80017,80030];return!!e.code&&!qe.isTokenErr(e)&&(!!t.includes(e.code)||e.code>=4e4&&e.code<5e4)}(e)?[wn({action:Xe.ERROR,error:e})]:[wn({action:Xe.DISCONNECTED,error:e})]}var Fr=class extends Un{constructor(e,t,n){super(e,t,n,!0),this.onAuthUpdated=e=>{this.authParams={access_token:e.token}},this.stream=!("stream"in n)||n.stream,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.connect()","starting"),Un.prototype.connect.call(this);const e=this.params,t=e.options,n=e.host||t.primaryDomain,r=Me.getPort(t),o=t.tls?"https://":"http://";this.baseUri=o+n+":"+r+"/comet/";const a=this.baseUri+"connect";S.logAction(this.logger,S.LOG_MINOR,"CometTransport.connect()","uri: "+a),ae(this.auth.getAuthParams(),(e,t)=>{if(e)return void this.disconnect(e);if(this.isDisposed)return;this.authParams=t;const n=this.params.getConnectParams(t);"stream"in n&&(this.stream=n.stream),S.logAction(this.logger,S.LOG_MINOR,"CometTransport.connect()","connectParams:"+J(n));let r=!1;const o=this.recvRequest=this.createRequest(a,null,n,null,this.stream?Or.REQ_RECV_STREAM:Or.REQ_RECV);o.on("data",e=>{this.recvRequest&&(r||(r=!0,this.emit("preconnect")),this.onData(e))}),o.on("complete",e=>{this.recvRequest||(e=e||new E("Request cancelled",80003,400)),this.recvRequest=null,r||e||(r=!0,this.emit("preconnect")),this.onActivity(),e?e.code?this.onData(zr(e)):this.disconnect(e):y.Config.nextTick(()=>{this.recv()})}),o.exec()})}requestClose(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(e){const t=e?this.closeUri:this.disconnectUri;if(t){const n=this.createRequest(t,null,this.authParams,null,Or.REQ_SEND);n.on("complete",t=>{t&&(S.logAction(this.logger,S.LOG_ERROR,"CometTransport.request"+(e?"Close()":"Disconnect()"),"request returned err = "+Z(t)),this.finish("disconnected",t))}),n.exec()}}dispose(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(S.logAction(this.logger,S.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",zn.disconnected()),y.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(e){var t;if(this.isDisposed)return;const n=null==(t=e.connectionDetails)?void 0:t.connectionKey;Un.prototype.onConnect.call(this,e);const r=this.baseUri+n;S.logAction(this.logger,S.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+r),this.sendUri=r+"/send",this.recvUri=r+"/recv",this.closeUri=r+"/close",this.disconnectUri=r+"/disconnect"}send(e){if(this.sendRequest)return this.pendingItems=this.pendingItems||[],void this.pendingItems.push(e);const t=this.pendingItems||[];t.push(e),this.pendingItems=null,this.sendItems(t)}sendAnyPending(){const e=this.pendingItems;e&&(this.pendingItems=null,this.sendItems(e))}sendItems(e){const t=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(e),Or.REQ_SEND);t.on("complete",(e,t)=>{e&&S.logAction(this.logger,S.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+Z(e)),this.sendRequest=null,e?e.code?this.onData(zr(e)):this.disconnect(e):(t&&this.onData(t),this.pendingItems&&y.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()}))}),t.exec()}recv(){if(this.recvRequest)return;if(!this.isConnected)return;const e=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?Or.REQ_RECV_STREAM:Or.REQ_RECV_POLL);e.on("data",e=>{this.onData(e)}),e.on("complete",e=>{this.recvRequest=null,this.onActivity(),e?e.code?this.onData(zr(e)):this.disconnect(e):y.Config.nextTick(()=>{this.recv()})}),e.exec()}onData(e){try{const t=this.decodeResponse(e);if(t&&t.length)for(let e=0;e<t.length;e++)this.onProtocolMessage(yn(t[e],this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._liveObjectsPlugin))}catch(t){S.logAction(this.logger,S.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+t.stack)}}encodeRequest(e){return JSON.stringify(e)}decodeResponse(e){return"string"==typeof e?JSON.parse(e):e}};function Br(e,t){if(function(e,t){return le(W(t)).includes("x-ably-errorcode")}(0,t))return e.error&&E.fromValues(e.error)}var Ur=function(){},Hr=0,Wr={},Gr=class e extends Ye{constructor(e,t,n,r,o,a,s,i){super(s),(n=n||{}).rnd=ne(),this.uri=e+J(n),this.headers=t||{},this.body=r,this.method=i?i.toUpperCase():P(r)?"GET":"POST",this.requestMode=o,this.timeouts=a,this.timedOut=!1,this.requestComplete=!1,this.id=String(++Hr),Wr[this.id]=this}static createRequest(t,n,r,o,a,s,i,l){const c=s||Me.TIMEOUTS;return new e(t,n,j(r),o,a,c,i,l)}complete(e,t,n,r,o){this.requestComplete||(this.requestComplete=!0,!e&&t&&this.emit("data",t),this.emit("complete",e,t,n,r,o),this.dispose())}abort(){this.dispose()}exec(){let e=this.headers;const t=this.requestMode==Or.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,n=this.timer=setTimeout(()=>{this.timedOut=!0,o.abort()},t),r=this.method,o=this.xhr=new XMLHttpRequest,a=e.accept;let s=this.body,i="text";a?0===a.indexOf("application/x-msgpack")&&(i="arraybuffer"):e.accept="application/json",s&&(e["content-type"]||(e["content-type"]="application/json")).indexOf("application/json")>-1&&"string"!=typeof s&&(s=JSON.stringify(s)),o.open(r,this.uri,!0),o.responseType=i,"authorization"in e&&(o.withCredentials=!0);for(const y in e)o.setRequestHeader(y,e[y]);const l=(e,t,n,r)=>{var o;let a=t+" (event type: "+e.type+")";(null==(o=null==this?void 0:this.xhr)?void 0:o.statusText)&&(a+=", current statusText is "+this.xhr.statusText),S.logAction(this.logger,S.LOG_ERROR,"Request.on"+e.type+"()",a),this.complete(new R(a,n,r))};let c,u,d;o.onerror=e=>{l(e,"XHR error occurred",null,400)},o.onabort=e=>{this.timedOut?l(e,"Request aborted due to request timeout expiring",null,408):l(e,"Request cancelled",null,400)},o.ontimeout=e=>{l(e,"Request timed out",null,408)};let h=0,f=!1;const p=()=>{clearTimeout(n),d=u<400,204!=u?c=this.requestMode==Or.REQ_RECV_STREAM&&d&&function(e){return e.getResponseHeader&&(e.getResponseHeader("transfer-encoding")||!e.getResponseHeader("content-length"))}(o):this.complete(null,null,null,null,u)},m=()=>{let t;try{const n=function(e,t){return e.getResponseHeader&&e.getResponseHeader(t)}(o,"content-type");if(n?n.indexOf("application/json")>=0:"text"==o.responseType){const e="arraybuffer"===o.responseType?y.BufferUtils.utf8Decode(o.response):String(o.responseText);t=e.length?JSON.parse(e):e,f=!0}else t=o.response;void 0!==t.response?(u=t.statusCode,d=u<400,e=t.headers,t=t.response):e=function(e){const t=e.getAllResponseHeaders().trim().split("\r\n"),n={};for(let r=0;r<t.length;r++){const e=t[r].split(":").map(e=>e.trim());n[e[0].toLowerCase()]=e[1]}return n}(o)}catch(r){return void this.complete(new R("Malformed response body from server: "+r.message,null,400))}if(d||Array.isArray(t))return void this.complete(null,t,e,f,u);let n=Br(t,e);n||(n=new R("Error response received from server: "+u+" body was: "+y.Config.inspect(t),null,u)),this.complete(n,t,e,f,u)};function g(){const e=o.responseText,t=e.length-1;let n,r;for(;h<t&&(n=e.indexOf("\n",h))>-1;)r=e.slice(h,n),h=n+1,v(r)}const v=e=>{try{e=JSON.parse(e)}catch(t){return void this.complete(new R("Malformed response body from server: "+t.message,null,400))}this.emit("data",e)},b=()=>{g(),this.streamComplete=!0,y.Config.nextTick(()=>{this.complete()})};o.onreadystatechange=()=>{const e=o.readyState;e<3||0!==o.status&&(void 0===u&&(u=o.status,p()),3==e&&c?g():4==e&&(c?b():m()))},o.send(s)}dispose(){const e=this.xhr;if(e){e.onreadystatechange=e.onerror=e.onabort=e.ontimeout=Ur,this.xhr=null;const t=this.timer;t&&(clearTimeout(t),this.timer=null),this.requestComplete||e.abort()}delete Wr[this.id]}},Vr=Tn.XhrPolling,qr={order:["xhr_polling"],bundledImplementations:{web_socket:sr,xhr_polling:class extends Fr{constructor(e,t,n){super(e,t,n),this.shortName=Vr,n.stream=!1,this.shortName=Vr}static isAvailable(){return!(!y.Config.xhrSupported||!y.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(e,t,n,r,o){return Gr.createRequest(e,t,n,r,o,this.timeouts,this.logger)}}}},Kr={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[Tn.XhrPolling,Tn.WebSocket]};function $r(e,t,n){const r=(new TextEncoder).encode(n);for(let o=0;o<r.length;o++)e.setUint8(t+o,r[o])}function Jr(e,t,n){return(new TextDecoder).decode(e.buffer.slice(t,t+n))}function Qr(e){return(new TextEncoder).encode(e).length}var Yr=4294967296,Xr=1/Yr,Zr=class{constructor(e,t){this.map=e=>{const t={};for(let n=0;n<e;n++)t[this.parse()]=this.parse();return t},this.bin=e=>{const t=new ArrayBuffer(e);return new Uint8Array(t).set(new Uint8Array(this.view.buffer,this.offset,e),0),this.offset+=e,t},this.buf=this.bin,this.str=e=>{const t=Jr(this.view,this.offset,e);return this.offset+=e,t},this.array=e=>{const t=new Array(e);for(let n=0;n<e;n++)t[n]=this.parse();return t},this.ext=e=>(this.offset+=e,{type:this.view.getInt8(this.offset),data:this.buf(e)}),this.parse=()=>{const e=this.view.getUint8(this.offset);let t,n;if(0===(128&e))return this.offset++,e;if(128===(240&e))return n=15&e,this.offset++,this.map(n);if(144===(240&e))return n=15&e,this.offset++,this.array(n);if(160===(224&e))return n=31&e,this.offset++,this.str(n);if(224===(224&e))return t=this.view.getInt8(this.offset),this.offset++,t;switch(e){case 192:return this.offset++,null;case 193:return void this.offset++;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return n=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(n);case 197:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(n);case 198:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(n);case 199:return n=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(n);case 200:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(n);case 201:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(n);case 202:return t=this.view.getFloat32(this.offset+1),this.offset+=5,t;case 203:return t=this.view.getFloat64(this.offset+1),this.offset+=9,t;case 204:return t=this.view.getUint8(this.offset+1),this.offset+=2,t;case 205:return t=this.view.getUint16(this.offset+1),this.offset+=3,t;case 206:return t=this.view.getUint32(this.offset+1),this.offset+=5,t;case 207:return t=function(e,t){return t=t||0,e.getUint32(t)*Yr+e.getUint32(t+4)}(this.view,this.offset+1),this.offset+=9,t;case 208:return t=this.view.getInt8(this.offset+1),this.offset+=2,t;case 209:return t=this.view.getInt16(this.offset+1),this.offset+=3,t;case 210:return t=this.view.getInt32(this.offset+1),this.offset+=5,t;case 211:return t=function(e,t){return t=t||0,e.getInt32(t)*Yr+e.getUint32(t+4)}(this.view,this.offset+1),this.offset+=9,t;case 212:return n=1,this.offset++,this.ext(n);case 213:return n=2,this.offset++,this.ext(n);case 214:return n=4,this.offset++,this.ext(n);case 215:return n=8,this.offset++,this.ext(n);case 216:return n=16,this.offset++,this.ext(n);case 217:return n=this.view.getUint8(this.offset+1),this.offset+=2,this.str(n);case 218:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.str(n);case 219:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.str(n);case 220:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.array(n);case 221:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.array(n);case 222:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.map(n);case 223:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.map(n)}throw new Error("Unknown type 0x"+e.toString(16))},this.offset=t||0,this.view=e}};function eo(e,t){return Object.keys(e).filter(function(n){const r=e[n];return(!t||void 0!==r&&null!==r)&&("function"!==typeof r||!!r.toJSON)})}function to(e,t,n,r){const o=typeof e;if("string"===typeof e){const r=Qr(e);if(r<32)return t.setUint8(n,160|r),$r(t,n+1,e),1+r;if(r<256)return t.setUint8(n,217),t.setUint8(n+1,r),$r(t,n+2,e),2+r;if(r<65536)return t.setUint8(n,218),t.setUint16(n+1,r),$r(t,n+3,e),3+r;if(r<4294967296)return t.setUint8(n,219),t.setUint32(n+1,r),$r(t,n+5,e),5+r}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e.byteLength;if(r<256)return t.setUint8(n,196),t.setUint8(n+1,r),new Uint8Array(t.buffer).set(new Uint8Array(e),n+2),2+r;if(r<65536)return t.setUint8(n,197),t.setUint16(n+1,r),new Uint8Array(t.buffer).set(new Uint8Array(e),n+3),3+r;if(r<4294967296)return t.setUint8(n,198),t.setUint32(n+1,r),new Uint8Array(t.buffer).set(new Uint8Array(e),n+5),5+r}if("number"===typeof e){if(Math.floor(e)!==e)return t.setUint8(n,203),t.setFloat64(n+1,e),9;if(e>=0){if(e<128)return t.setUint8(n,e),1;if(e<256)return t.setUint8(n,204),t.setUint8(n+1,e),2;if(e<65536)return t.setUint8(n,205),t.setUint16(n+1,e),3;if(e<4294967296)return t.setUint8(n,206),t.setUint32(n+1,e),5;if(e<0x10000000000000000)return t.setUint8(n,207),function(e,t,n){n<0x10000000000000000?(e.setUint32(t,Math.floor(n*Xr)),e.setInt32(t+4,-1&n)):(e.setUint32(t,4294967295),e.setUint32(t+4,4294967295))}(t,n+1,e),9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(n,e),1;if(e>=-128)return t.setUint8(n,208),t.setInt8(n+1,e),2;if(e>=-32768)return t.setUint8(n,209),t.setInt16(n+1,e),3;if(e>=-2147483648)return t.setUint8(n,210),t.setInt32(n+1,e),5;if(e>=-0x8000000000000000)return t.setUint8(n,211),function(e,t,n){n<0x8000000000000000?(e.setInt32(t,Math.floor(n*Xr)),e.setInt32(t+4,-1&n)):(e.setUint32(t,2147483647),e.setUint32(t+4,2147483647))}(t,n+1,e),9;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if("undefined"===o)return r?0:(t.setUint8(n,212),t.setUint8(n+1,0),t.setUint8(n+2,0),3);if(null===e)return r?0:(t.setUint8(n,192),1);if("boolean"===o)return t.setUint8(n,e?195:194),1;if("function"===typeof e.toJSON)return to(e.toJSON(),t,n,r);if("object"===o){let o,a,s=0;const i=Array.isArray(e);if(i?o=e.length:(a=eo(e,r),o=a.length),o<16?(t.setUint8(n,o|(i?144:128)),s=1):o<65536?(t.setUint8(n,i?220:222),t.setUint16(n+1,o),s=3):o<4294967296&&(t.setUint8(n,i?221:223),t.setUint32(n+1,o),s=5),i)for(let l=0;l<o;l++)s+=to(e[l],t,n+s,r);else if(a)for(let l=0;l<o;l++){const o=a[l];s+=to(o,t,n+s),s+=to(e[o],t,n+s,r)}return s}if("function"===o)return 0;throw new Error("Unknown type "+o)}function no(e,t){const n=typeof e;if("string"===n){const t=Qr(e);if(t<32)return 1+t;if(t<256)return 2+t;if(t<65536)return 3+t;if(t<4294967296)return 5+t}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){const t=e.byteLength;if(t<256)return 2+t;if(t<65536)return 3+t;if(t<4294967296)return 5+t}if("number"===typeof e){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===n)return 1;if(null===e)return t?0:1;if(void 0===e)return t?0:3;if("function"===typeof e.toJSON)return no(e.toJSON(),t);if("object"===n){let n,r=0;if(Array.isArray(e)){n=e.length;for(let o=0;o<n;o++)r+=no(e[o],t)}else{const o=eo(e,t);n=o.length;for(let a=0;a<n;a++){const n=o[a];r+=no(n)+no(e[n],t)}}if(n<16)return 1+r;if(n<65536)return 3+r;if(n<4294967296)return 5+r;throw new Error("Array or object too long 0x"+n.toString(16))}if("function"===n)return 0;throw new Error("Unknown type "+n)}var ro,oo={encode:function(e,t){const n=no(e,t);if(0===n)return;const r=new ArrayBuffer(n);return to(e,new DataView(r),0,t),r},decode:function(e){const t=new DataView(e),n=new Zr(t),r=n.parse();if(n.offset!==e.byteLength)throw new Error(e.byteLength-n.offset+" trailing bytes");return r},inspect:function(e){if(void 0===e)return"undefined";let t,n;if(e instanceof ArrayBuffer?(n="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(n="DataView",t=e),!t)return JSON.stringify(e);const r=[];for(let o=0;o<e.byteLength;o++){if(o>20){r.push("...");break}let e=t.getUint8(o).toString(16);1===e.length&&(e="0"+e),r.push(e)}return"<"+n+" "+r.join(" ")+">"},utf8Write:$r,utf8Read:Jr,utf8ByteCount:Qr},ao={XHRRequest:Gr,FetchRequest:async function(e,t,n,r,o,a){const s=new Headers(r||{}),i=e?e.toUpperCase():P(a)?"GET":"POST",l=new AbortController;let c;const u=new Promise(e=>{c=setTimeout(()=>{l.abort(),e({error:new R("Request timed out",null,408)})},t?t.options.timeouts.httpRequestTimeout:Me.TIMEOUTS.httpRequestTimeout)}),d={method:i,headers:s,body:a,signal:l.signal};y.Config.isWebworker||(d.credentials=s.has("authorization")?"include":"same-origin");const h=(async()=>{try{const e=new URLSearchParams(o||{});e.set("rnd",ne());const t=n+"?"+e,r=await fe().fetch(t,d);if(clearTimeout(c),204==r.status)return{error:null,statusCode:r.status};const a=r.headers.get("Content-Type");let s;s=a&&a.indexOf("application/x-msgpack")>-1?await r.arrayBuffer():a&&a.indexOf("application/json")>-1?await r.json():await r.text();const i=!!a&&-1===a.indexOf("application/x-msgpack"),l=function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(r.headers);if(r.ok)return{error:null,body:s,headers:l,unpacked:i,statusCode:r.status};{const e=function(e,t){if(function(e,t){return!!t.get("x-ably-errorcode")}(0,t))return e.error&&E.fromValues(e.error)}(s,r.headers)||new R("Error response received from server: "+r.status+" body was: "+y.Config.inspect(s),null,r.status);return{error:e,body:s,headers:l,unpacked:i,statusCode:r.status}}}catch(e){return clearTimeout(c),{error:e}}})();return Promise.race([u,h])}},so=function(e,t){class n{constructor(e,t,n,r){this.algorithm=e,this.keyLength=t,this.mode=n,this.key=r}}class r{static getDefaultParams(e){var r;if(!e.key)throw new Error("Crypto.getDefaultParams: a key is required");r="string"===typeof e.key?t.toArrayBuffer(t.base64Decode(e.key.replace("_","/").replace("-","+"))):e.key instanceof ArrayBuffer?e.key:t.toArrayBuffer(e.key);var o=e.algorithm||"aes",a=8*r.byteLength,s=e.mode||"cbc",i=new n(o,a,s,r);if(e.keyLength&&e.keyLength!==i.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+e.keyLength+" was specified, but the key actually has length "+i.keyLength);return function(e){if("aes"===e.algorithm&&"cbc"===e.mode){if(128===e.keyLength||256===e.keyLength)return;throw new Error("Unsupported key length "+e.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}(i),i}static async generateRandomKey(t){try{return e.getRandomArrayBuffer((t||256)/8)}catch(n){throw new E("Failed to generate random key: "+n.message,400,5e4,n)}}static getCipher(e,t){var r,a=function(e){return e instanceof n}(e)?e:this.getDefaultParams(e);return{cipherParams:a,cipher:new o(a,null!=(r=e.iv)?r:null,t)}}}r.CipherParams=n;class o{constructor(e,n,r){if(this.logger=r,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browser\u2019s SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browser\u2019s SubtleCrypto class is not available.");this.algorithm=e.algorithm+"-"+String(e.keyLength)+"-"+e.mode,this.webCryptoAlgorithm=e.algorithm+"-"+e.mode,this.key=t.toArrayBuffer(e.key),this.iv=n?t.toArrayBuffer(n):null}concat(e,n){const r=new ArrayBuffer(e.byteLength+n.byteLength),o=new DataView(r),a=new DataView(t.toArrayBuffer(e));for(let t=0;t<a.byteLength;t++)o.setInt8(t,a.getInt8(t));const s=new DataView(t.toArrayBuffer(n));for(let t=0;t<s.byteLength;t++)o.setInt8(a.byteLength+t,s.getInt8(t));return r}async encrypt(e){S.logAction(this.logger,S.LOG_MICRO,"CBCCipher.encrypt()","");const t=await this.getIv(),n=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),r=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:t},n,e);return this.concat(t,r)}async decrypt(e){S.logAction(this.logger,S.LOG_MICRO,"CBCCipher.decrypt()","");const n=t.toArrayBuffer(e),r=n.slice(0,16),o=n.slice(16),a=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:r},a,o)}async getIv(){if(this.iv){var n=this.iv;return this.iv=null,n}const r=await e.getRandomArrayBuffer(16);return t.toArrayBuffer(r)}}return r}(Dr,Er);y.Crypto=so,y.BufferUtils=Er,y.Http=_r,y.Config=Dr,y.Transports=qr,y.WebStorage=Mr;for(const n of[An,cr])n.Crypto=so,n._MsgPack=oo;_r.bundledRequestImplementations=ao,S.initLogHandlers(),y.Defaults=(ro=Kr,Object.assign(Se,ro)),y.Config.agent&&(y.Defaults.agent+=" "+y.Config.agent);var io={ErrorInfo:E,Rest:An,Realtime:cr,msgpack:oo,makeProtocolMessageFromDeserialized:bn};return"object"==typeof r.exports&&(r.exports=((e,t,n,r)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let o of Object.getOwnPropertyNames(t))Object.prototype.hasOwnProperty.call(e,o)||o===n||Object.defineProperty(e,o,{get:()=>t[o],enumerable:!(r=Object.getOwnPropertyDescriptor(t,o))||r.enumerable});return e})(r.exports,t)),r.exports},e.exports=r()},4(e,t,n){"use strict";var r=n(853),o=n(43),a=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(s(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),E=Symbol.for("react.lazy");Symbol.for("react.scope");var R=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var O=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var j=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function A(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case C:return"SuspenseList";case R:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:A(e.type)||"Memo";case E:t=e._payload,e=e._init;try{return A(e(t))}catch(n){}}return null}var P=Array.isArray,M=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},D=[],z=-1;function F(e){return{current:e}}function B(e){0>z||(e.current=D[z],D[z]=null,z--)}function U(e,t){z++,D[z]=e.current,e.current=t}var H,W,G=F(null),V=F(null),q=F(null),K=F(null);function $(e,t){switch(U(q,t),U(V,e),U(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yd(t=vd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(G),U(G,e)}function J(){B(G),B(V),B(q)}function Q(e){null!==e.memoizedState&&U(K,e);var t=G.current,n=yd(t,e.type);t!==n&&(U(V,e),U(G,n))}function Y(e){V.current===e&&(B(G),B(V)),K.current===e&&(B(K),uh._currentValue=L)}function X(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||"",W=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+H+e+W}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(o){var r=o}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){r=a}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(i){if(i&&r&&"string"===typeof i.stack)return[i.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],i=a[1];if(s&&i){var l=s.split("\n"),c=i.split("\n");for(o=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(r===l.length||o===c.length)for(r=l.length-1,o=c.length-1;1<=r&&0<=o&&l[r]!==c[o];)o--;for(;1<=r&&0<=o;r--,o--)if(l[r]!==c[o]){if(1!==r||1!==o)do{if(r--,0>--o||l[r]!==c[o]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=o);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?X(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,oe=r.unstable_scheduleCallback,ae=r.unstable_cancelCallback,se=r.unstable_shouldYield,ie=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ve=null,ye=null;function be(e){if("function"===typeof me&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xe(e)/ke|0)|0},xe=Math.log,ke=Math.LN2;var Se=256,Ce=262144,Ne=4194304;function Ee(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Re(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var o=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var i=134217727&r;return 0!==i?0!==(r=i&~a)?o=Ee(r):0!==(s&=i)?o=Ee(s):n||0!==(n=i&~e)&&(o=Ee(n)):0!==(i=r&~a)?o=Ee(i):0!==s?o=Ee(s):n||0!==(n=r&~e)&&(o=Ee(n)),0===o?0:0!==t&&t!==o&&0===(t&a)&&((a=o&-o)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:o}function Oe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function je(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=Ne;return 0===(62914560&(Ne<<=1))&&(Ne=4194304),e}function _e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ae(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Me(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Ie(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Le(n))&(e.suspendedLanes|t))?0:n}function Le(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function De(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function ze(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:Eh(e.type)}function Fe(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}var Be=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Be,He="__reactProps$"+Be,We="__reactContainer$"+Be,Ge="__reactEvents$"+Be,Ve="__reactListeners$"+Be,qe="__reactHandles$"+Be,Ke="__reactResources$"+Be,$e="__reactMarker$"+Be;function Je(e){delete e[Ue],delete e[He],delete e[Ge],delete e[Ve],delete e[qe]}function Qe(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[We]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ld(e);null!==e;){if(n=e[Ue])return n;e=Ld(e)}return t}n=(e=n).parentNode}return null}function Ye(e){if(e=e[Ue]||e[We]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ze(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[$e]=!0}var tt=new Set,nt={};function rt(e,t){ot(e,t),ot(e+"Capture",t)}function ot(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},it={};function lt(e,t,n){if(o=t,re.call(it,o)||!re.call(st,o)&&(at.test(o)?it[o]=!0:(st[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var o=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,o,a,s,i){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?wt(e,s,dt(t)):null!=n?wt(e,s,dt(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=a&&(e.defaultChecked=!!a),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.name=""+dt(i):e.removeAttribute("name")}function bt(e,t,n,r,o,a,s,i){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,i||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:o)&&"symbol"!==typeof r&&!!r,e.checked=i?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s),ft(e)}function wt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(P(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function Ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Rt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&Et(e,o,r)}else for(var a in t)t.hasOwnProperty(a)&&Et(e,a,t[a])}function Ot(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _t(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function At(){}var Pt=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Lt=null;function Dt(e){var t=Ye(e);if(t&&(e=t.stateNode)){var n=e[He]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[He]||null;if(!o)throw Error(s(90));yt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var zt=!1;function Ft(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==It||null!==Lt)&&(Zc(),It&&(t=It,e=Lt,Lt=It=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[He]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ht=!1;if(Ut)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(Yh){Ht=!1}var Gt=null,Vt=null,qt=null;function Kt(){if(qt)return qt;var e,t,n=Vt,r=n.length,o="value"in Gt?Gt.value:Gt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===o[a-t];t++);return qt=o.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function Qt(){return!1}function Yt(e){function t(t,n,r,o,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Jt:Qt,this.isPropagationStopped=Qt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var Xt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Yt(tn),rn=f({},tn,{view:0,detail:0}),on=Yt(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Xt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Xt=0,en=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),sn=Yt(an),ln=Yt(f({},an,{dataTransfer:0})),cn=Yt(f({},rn,{relatedTarget:0})),un=Yt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Yt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Yt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return gn}var yn=Yt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Yt(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=Yt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),xn=Yt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=Yt(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Yt(f({},tn,{newState:0,oldState:0})),Cn=[9,13,27,32],Nn=Ut&&"CompositionEvent"in window,En=null;Ut&&"documentMode"in document&&(En=document.documentMode);var Rn=Ut&&"TextEvent"in window&&!En,On=Ut&&(!Nn||En&&8<En&&11>=En),jn=String.fromCharCode(32),Tn=!1;function _n(e,t){switch(e){case"keyup":return-1!==Cn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mn[e.type]:"textarea"===t}function Ln(e,t,n,r){It?Lt?Lt.push(r):Lt=[r]:It=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dn=null,zn=null;function Fn(e){Ju(e,0)}function Bn(e){if(pt(Xe(e)))return e}function Un(e,t){if("change"===e)return t}var Hn=!1;if(Ut){var Wn;if(Ut){var Gn="oninput"in document;if(!Gn){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),Gn="function"===typeof Vn.oninput}Wn=Gn}else Wn=!1;Hn=Wn&&(!document.documentMode||9<document.documentMode)}function qn(){Dn&&(Dn.detachEvent("onpropertychange",Kn),zn=Dn=null)}function Kn(e){if("value"===e.propertyName&&Bn(zn)){var t=[];Ln(t,zn,e,Mt(e)),Ft(Fn,t)}}function $n(e,t,n){"focusin"===e?(qn(),zn=n,(Dn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&qn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(zn)}function Qn(e,t){if("click"===e)return Bn(t)}function Yn(e,t){if("input"===e||"change"===e)return Bn(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!re.call(t,o)||!Xn(e[o],t[o]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ar=Ut&&"documentMode"in document&&11>=document.documentMode,sr=null,ir=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==sr||sr!==mt(r)||("selectionStart"in(r=sr)&&or(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=rd(ir,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sr)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}Ut&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=mr("animationend"),vr=mr("animationiteration"),yr=mr("animationstart"),br=mr("transitionrun"),wr=mr("transitionstart"),xr=mr("transitioncancel"),kr=mr("transitionend"),Sr=new Map,Cr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Sr.set(e,t),rt(t,[e])}Cr.push("scrollEnd");var Er="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Rr=[],Or=0,jr=0;function Tr(){for(var e=Or,t=jr=Or=0;t<e;){var n=Rr[t];Rr[t++]=null;var r=Rr[t];Rr[t++]=null;var o=Rr[t];Rr[t++]=null;var a=Rr[t];if(Rr[t++]=null,null!==r&&null!==o){var s=r.pending;null===s?o.next=o:(o.next=s.next,s.next=o),r.pending=o}0!==a&&Mr(n,o,a)}}function _r(e,t,n,r){Rr[Or++]=e,Rr[Or++]=t,Rr[Or++]=n,Rr[Or++]=r,jr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return _r(e,t,n,r),Ir(e)}function Pr(e,t){return _r(e,null,null,t),Ir(e)}function Mr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(o=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,o&&null!==t&&(o=31-we(n),null===(r=(e=a.hiddenUpdates)[o])?e[o]=[t]:r.push(t),t.lane=536870912|n),a):null}function Ir(e){if(50<Gc)throw Gc=0,Vc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(e,t,n,r){return new Dr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=zr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hr(e,t,n,r,o,a){var i=0;if(r=e,"function"===typeof e)Fr(e)&&(i=1);else if("string"===typeof e)i=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case R:return(e=zr(31,n,t,o)).elementType=R,e.lanes=a,e;case v:return Wr(n.children,o,a,t);case y:i=8,o|=24;break;case b:return(e=zr(12,n,t,2|o)).elementType=b,e.lanes=a,e;case S:return(e=zr(13,n,t,o)).elementType=S,e.lanes=a,e;case C:return(e=zr(19,n,t,o)).elementType=C,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:i=10;break e;case w:i=9;break e;case k:i=11;break e;case N:i=14;break e;case E:i=16,r=null;break e}i=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=zr(i,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Wr(e,t,n,r){return(e=zr(7,e,r,t)).lanes=n,e}function Gr(e,t,n){return(e=zr(6,e,null,t)).lanes=n,e}function Vr(e){var t=zr(18,null,null,0);return t.stateNode=e,t}function qr(e,t,n){return(t=zr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kr=new WeakMap;function $r(e,t){if("object"===typeof e&&null!==e){var n=Kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Kr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Jr=[],Qr=0,Yr=null,Xr=0,Zr=[],eo=0,to=null,no=1,ro="";function oo(e,t){Jr[Qr++]=Xr,Jr[Qr++]=Yr,Yr=e,Xr=t}function ao(e,t,n){Zr[eo++]=no,Zr[eo++]=ro,Zr[eo++]=to,to=e;var r=no;e=ro;var o=32-we(r)-1;r&=~(1<<o),n+=1;var a=32-we(t)+o;if(30<a){var s=o-o%5;a=(r&(1<<s)-1).toString(32),r>>=s,o-=s,no=1<<32-we(t)+o|n<<o|r,ro=a+e}else no=1<<a|n<<o|r,ro=e}function so(e){null!==e.return&&(oo(e,1),ao(e,1,0))}function io(e){for(;e===Yr;)Yr=Jr[--Qr],Jr[Qr]=null,Xr=Jr[--Qr],Jr[Qr]=null;for(;e===to;)to=Zr[--eo],Zr[eo]=null,ro=Zr[--eo],Zr[eo]=null,no=Zr[--eo],Zr[eo]=null}function lo(e,t){Zr[eo++]=no,Zr[eo++]=ro,Zr[eo++]=to,no=t.id,ro=t.overflow,to=e}var co=null,uo=null,ho=!1,fo=null,po=!1,mo=Error(s(519));function go(e){throw ko($r(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),mo}function vo(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ue]=e,t[He]=r,n){case"dialog":Qu("cancel",t),Qu("close",t);break;case"iframe":case"object":case"embed":Qu("load",t);break;case"video":case"audio":for(n=0;n<Ku.length;n++)Qu(Ku[n],t);break;case"source":Qu("error",t);break;case"img":case"image":case"link":Qu("error",t),Qu("load",t);break;case"details":Qu("toggle",t);break;case"input":Qu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Qu("invalid",t);break;case"textarea":Qu("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&(Qu("beforetoggle",t),Qu("toggle",t)),null!=r.onScroll&&Qu("scroll",t),null!=r.onScrollEnd&&Qu("scrollend",t),null!=r.onClick&&(t.onclick=At),t=!0):t=!1,t||go(e,!0)}function yo(e){for(co=e.return;co;)switch(co.tag){case 5:case 31:case 13:return void(po=!1);case 27:case 3:return void(po=!0);default:co=co.return}}function bo(e){if(e!==co)return!1;if(!ho)return yo(e),ho=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bd(e.type,e.memoizedProps)),t=!t),t&&uo&&go(e),yo(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));uo=Id(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));uo=Id(e)}else 27===n?(n=uo,Ed(e.type)?(e=Md,Md=null,uo=e):uo=n):uo=co?Pd(e.stateNode.nextSibling):null;return!0}function wo(){uo=co=null,ho=!1}function xo(){var e=fo;return null!==e&&(null===Tc?Tc=e:Tc.push.apply(Tc,e),fo=null),e}function ko(e){null===fo?fo=[e]:fo.push(e)}var So=F(null),Co=null,No=null;function Eo(e,t,n){U(So,t._currentValue),t._currentValue=n}function Ro(e){e._currentValue=So.current,B(So)}function Oo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function jo(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var a=o.dependencies;if(null!==a){var i=o.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=o;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Oo(a.return,n,e),r||(i=null);break e}a=l.next}}else if(18===o.tag){if(null===(i=o.return))throw Error(s(341));i.lanes|=n,null!==(a=i.alternate)&&(a.lanes|=n),Oo(i,n,e),i=null}else i=o.child;if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===e){i=null;break}if(null!==(o=i.sibling)){o.return=i.return,i=o;break}i=i.return}o=i}}function To(e,t,n,r){e=null;for(var o=t,a=!1;null!==o;){if(!a)if(0!==(524288&o.flags))a=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var i=o.alternate;if(null===i)throw Error(s(387));if(null!==(i=i.memoizedProps)){var l=o.type;Xn(o.pendingProps.value,i.value)||(null!==e?e.push(l):e=[l])}}else if(o===K.current){if(null===(i=o.alternate))throw Error(s(387));i.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}o=o.return}null!==e&&jo(t,e,n,r),t.flags|=262144}function _o(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ao(e){Co=e,No=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Po(e){return Io(Co,e)}function Mo(e,t){return null===Co&&Ao(e),Io(e,t)}function Io(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===No){if(null===e)throw Error(s(308));No=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else No=No.next=t;return n}var Lo="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Do=r.unstable_scheduleCallback,zo=r.unstable_NormalPriority,Fo={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bo(){return{controller:new Lo,data:new Map,refCount:0}}function Uo(e){e.refCount--,0===e.refCount&&Do(zo,function(){e.controller.abort()})}var Ho=null,Wo=0,Go=0,Vo=null;function qo(){if(0===--Wo&&null!==Ho){null!==Vo&&(Vo.status="fulfilled");var e=Ho;Ho=null,Go=0,Vo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ko=M.S;M.S=function(e,t){Pc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ho){var n=Ho=[];Wo=0,Go=Hu(),Vo={status:"pending",value:void 0,then:function(e){n.push(e)}}}Wo++,t.then(qo,qo)}(0,t),null!==Ko&&Ko(e,t)};var $o=F(null);function Jo(){var e=$o.current;return null!==e?e:pc.pooledCache}function Qo(e,t){U($o,null===t?$o.current:t.pool)}function Yo(){var e=Jo();return null===e?null:{parent:Fo._currentValue,pool:e}}var Xo=Error(s(460)),Zo=Error(s(474)),ea=Error(s(542)),ta={then:function(){}};function na(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ra(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(At,At),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ia(e=t.reason),e;default:if("string"===typeof t.status)t.then(At,At);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ia(e=t.reason),e}throw aa=t,Xo}}function oa(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw aa=t,Xo;throw t}}var aa=null;function sa(){if(null===aa)throw Error(s(459));var e=aa;return aa=null,e}function ia(e){if(e===Xo||e===ea)throw Error(s(483))}var la=null,ca=0;function ua(e){var t=ca;return ca+=1,null===la&&(la=[]),ra(la,e,t)}function da(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ha(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Gr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===v?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===E&&oa(a)===t.type)?(da(t=o(t,n.props),n),t.return=e,t):(da(t=Hr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Wr(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Gr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return da(n=Hr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=qr(t,e.mode,n)).return=e,t;case E:return h(e,t=oa(t),n)}if(P(t)||T(t))return(t=Wr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ua(t),n);if(t.$$typeof===x)return h(e,Mo(e,t),n);ha(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===o?c(e,t,n,r):null;case g:return n.key===o?u(e,t,n,r):null;case E:return f(e,t,n=oa(n),r)}if(P(n)||T(n))return null!==o?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ua(n),r);if(n.$$typeof===x)return f(e,t,Mo(e,n),r);ha(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case E:return p(e,t,n,r=oa(r),o)}if(P(r)||T(r))return d(t,e=e.get(n)||null,r,o,null);if("function"===typeof r.then)return p(e,t,n,ua(r),o);if(r.$$typeof===x)return p(e,t,n,Mo(t,r),o);ha(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===v&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===v){if(7===c.tag){n(l,c.sibling),(d=o(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===E&&oa(b)===c.type){n(l,c.sibling),da(d=o(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===v?((d=Wr(u.props.children,l.mode,d,u.key)).return=l,l=d):(da(d=Hr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return i(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=o(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qr(u,l.mode,d)).return=l,l=d}return i(l);case E:return y(l,c,u=oa(u),d)}if(P(u))return function(o,s,i,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<i.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(o,d,i[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(o,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===i.length)return n(o,d),ho&&oo(o,m),c;if(null===d){for(;m<i.length;m++)null!==(d=h(o,i[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return ho&&oo(o,m),c}for(d=r(d);m<i.length;m++)null!==(g=p(d,o,m,i[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(o,e)}),ho&&oo(o,m),c}(l,c,u,d);if(T(u)){if("function"!==typeof(b=T(u)))throw Error(s(150));return function(o,i,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,m=i,g=i=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(o,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(o,m),i=a(b,i,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(o,m),ho&&oo(o,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(o,y.value,c))&&(i=a(y,i,g),null===d?u=y:d.sibling=y,d=y);return ho&&oo(o,g),u}for(m=r(m);!y.done;g++,y=l.next())null!==(y=p(m,o,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),i=a(y,i,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(o,e)}),ho&&oo(o,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,ua(u),d);if(u.$$typeof===x)return y(l,c,Mo(l,u),d);ha(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=o(c,u)).return=l,l=d):(n(l,c),(d=Gr(u,l.mode,d)).return=l,l=d),i(l)):n(l,c)}return function(e,t,n,r){try{ca=0;var o=y(e,t,n,r);return la=null,o}catch(s){if(s===Xo||s===ea)throw s;var a=zr(29,s,null,e.mode);return a.lanes=r,a.return=e,a}}}var pa=fa(!0),ma=fa(!1),ga=!1;function va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fc)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Ir(e),Mr(e,null,n),t}return _r(e,r,t,n),Ir(e)}function xa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Me(e,n)}}function ka(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?o=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Sa=!1;function Ca(){if(Sa){if(null!==Vo)throw Vo}}function Na(e,t,n,r){Sa=!1;var o=e.updateQueue;ga=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,i=o.shared.pending;if(null!==i){o.shared.pending=null;var l=i,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((i=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===i?u.firstBaseUpdate=c:i.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=o.baseState;for(s=0,u=c=l=null,i=a;;){var h=-536870913&i.lane,p=h!==i.lane;if(p?(gc&h)===h:(r&h)===h){0!==h&&h===Go&&(Sa=!0),null!==u&&(u=u.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var m=e,g=i;h=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(v,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(v,d,h):m)||void 0===h)break e;d=f({},d,h);break e;case 2:ga=!0}}null!==(h=i.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=o.callbacks)?o.callbacks=[h]:p.push(h))}else p={lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(i=i.next)){if(null===(i=o.shared.pending))break;i=(p=i).next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null===a&&(o.shared.lanes=0),Cc|=s,e.lanes=s,e.memoizedState=d}}function Ea(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Ra(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ea(n[e],t)}var Oa=F(null),ja=F(0);function Ta(e,t){U(ja,e=kc),U(Oa,t),kc=e|t.baseLanes}function _a(){U(ja,kc),U(Oa,Oa.current)}function Aa(){kc=ja.current,B(Oa),B(ja)}var Pa=F(null),Ma=null;function Ia(e){var t=e.alternate;U(Ba,1&Ba.current),U(Pa,e),null===Ma&&(null===t||null!==Oa.current||null!==t.memoizedState)&&(Ma=e)}function La(e){U(Ba,Ba.current),U(Pa,e),null===Ma&&(Ma=e)}function Da(e){22===e.tag?(U(Ba,Ba.current),U(Pa,e),null===Ma&&(Ma=e)):za()}function za(){U(Ba,Ba.current),U(Pa,Pa.current)}function Fa(e){B(Pa),Ma===e&&(Ma=null),B(Ba)}var Ba=F(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||_d(n)||Ad(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ha=0,Wa=null,Ga=null,Va=null,qa=!1,Ka=!1,$a=!1,Ja=0,Qa=0,Ya=null,Xa=0;function Za(){throw Error(s(321))}function es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function ts(e,t,n,r,o,a){return Ha=a,Wa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=null===e||null===e.memoizedState?gi:vi,$a=!1,a=n(r,o),$a=!1,Ka&&(a=rs(t,n,r,o)),ns(e),a}function ns(e){M.H=mi;var t=null!==Ga&&null!==Ga.next;if(Ha=0,Va=Ga=Wa=null,qa=!1,Qa=0,Ya=null,t)throw Error(s(300));null===e||Pi||null!==(e=e.dependencies)&&_o(e)&&(Pi=!0)}function rs(e,t,n,r){Wa=e;var o=0;do{if(Ka&&(Ya=null),Qa=0,Ka=!1,25<=o)throw Error(s(301));if(o+=1,Va=Ga=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}M.H=yi,a=t(n,r)}while(Ka);return a}function os(){var e=M.H,t=e.useState()[0];return t="function"===typeof t.then?us(t):t,e=e.useState()[0],(null!==Ga?Ga.memoizedState:null)!==e&&(Wa.flags|=1024),t}function as(){var e=0!==Ja;return Ja=0,e}function ss(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function is(e){if(qa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}qa=!1}Ha=0,Va=Ga=Wa=null,Ka=!1,Qa=Ja=0,Ya=null}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Va?Wa.memoizedState=Va=e:Va=Va.next=e,Va}function cs(){if(null===Ga){var e=Wa.alternate;e=null!==e?e.memoizedState:null}else e=Ga.next;var t=null===Va?Wa.memoizedState:Va.next;if(null!==t)Va=t,Ga=e;else{if(null===e){if(null===Wa.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Ga=e).memoizedState,baseState:Ga.baseState,baseQueue:Ga.baseQueue,queue:Ga.queue,next:null},null===Va?Wa.memoizedState=Va=e:Va=Va.next=e}return Va}function us(e){var t=Qa;return Qa+=1,null===Ya&&(Ya=[]),e=ra(Ya,e,t),t=Wa,null===(null===Va?t.memoizedState:Va.next)&&(t=t.alternate,M.H=null===t||null===t.memoizedState?gi:vi),e}function ds(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return us(e);if(e.$$typeof===x)return Po(e)}throw Error(s(438,String(e)))}function hs(e){var t=null,n=Wa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Wa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=O;return t.index++,n}function fs(e,t){return"function"===typeof t?t(e):t}function ps(e){return ms(cs(),Ga,e)}function ms(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var o=e.baseQueue,a=r.pending;if(null!==a){if(null!==o){var i=o.next;o.next=a.next,a.next=i}t.baseQueue=o=a,r.pending=null}if(a=e.baseState,null===o)e.memoizedState=a;else{var l=i=null,c=null,u=t=o.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gc&h)===h:(Ha&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Go&&(d=!0);else{if((Ha&f)===f){u=u.next,f===Go&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,i=a):c=c.next=h,Wa.lanes|=f,Cc|=f}h=u.action,$a&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,i=a):c=c.next=f,Wa.lanes|=h,Cc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?i=a:c.next=l,!Xn(a,e.memoizedState)&&(Pi=!0,d&&null!==(n=Vo)))throw n;e.memoizedState=a,e.baseState=i,e.baseQueue=c,r.lastRenderedState=a}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function gs(e){var t=cs(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var i=o=o.next;do{a=e(a,i.action),i=i.next}while(i!==o);Xn(a,t.memoizedState)||(Pi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function vs(e,t,n){var r=Wa,o=cs(),a=ho;if(a){if(void 0===n)throw Error(s(407));n=n()}else n=t();var i=!Xn((Ga||o).memoizedState,n);if(i&&(o.memoizedState=n,Pi=!0),o=o.queue,Hs(ws.bind(null,r,o,e),[e]),o.getSnapshot!==t||i||null!==Va&&1&Va.memoizedState.tag){if(r.flags|=2048,Ds(9,{destroy:void 0},bs.bind(null,r,o,n,t),null),null===pc)throw Error(s(349));a||0!==(127&Ha)||ys(r,t,n)}return n}function ys(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Wa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bs(e,t,n,r){t.value=n,t.getSnapshot=r,xs(t)&&ks(e)}function ws(e,t,n){return n(function(){xs(t)&&ks(e)})}function xs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(r){return!0}}function ks(e){var t=Pr(e,2);null!==t&&$c(t,e,2)}function Ss(e){var t=ls();if("function"===typeof e){var n=e;if(e=n(),$a){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t}function Cs(e,t,n,r){return e.baseState=n,ms(e,Ga,"function"===typeof r?r:fs)}function Ns(e,t,n,r,o){if(hi(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==M.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,Es(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Es(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var a=M.T,s={};M.T=s;try{var i=n(o,r),l=M.S;null!==l&&l(s,i),Rs(e,t,i)}catch(c){js(e,t,c)}finally{null!==a&&null!==s.types&&(a.types=s.types),M.T=a}}else try{Rs(e,t,a=n(o,r))}catch(u){js(e,t,u)}}function Rs(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Os(e,t,n)},function(n){return js(e,t,n)}):Os(e,t,n)}function Os(e,t,n){t.status="fulfilled",t.value=n,Ts(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Es(e,n)))}function js(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ts(t),t=t.next}while(t!==r)}e.action=null}function Ts(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function _s(e,t){return t}function As(e,t){if(ho){var n=pc.formState;if(null!==n){e:{var r=Wa;if(ho){if(uo){t:{for(var o=uo,a=po;8!==o.nodeType;){if(!a){o=null;break t}if(null===(o=Pd(o.nextSibling))){o=null;break t}}o="F!"===(a=o.data)||"F"===a?o:null}if(o){uo=Pd(o.nextSibling),r="F!"===o.data;break e}}go(r)}r=!1}r&&(t=n[0])}}return(n=ls()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:t},n.queue=r,n=ci.bind(null,Wa,r),r.dispatch=n,r=Ss(!1),a=di.bind(null,Wa,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=ls()).queue=o,n=Ns.bind(null,Wa,o,a,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ps(e){return Ms(cs(),Ga,e)}function Ms(e,t,n){if(t=ms(e,t,_s)[0],e=ps(fs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=us(t)}catch(s){if(s===Xo)throw ea;throw s}else r=t;var o=(t=cs()).queue,a=o.dispatch;return n!==t.memoizedState&&(Wa.flags|=2048,Ds(9,{destroy:void 0},Is.bind(null,o,n),null)),[r,a,e]}function Is(e,t){e.action=t}function Ls(e){var t=cs(),n=Ga;if(null!==n)return Ms(t,n,e);cs(),t=t.memoizedState;var r=(n=cs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ds(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Wa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zs(){return cs().memoizedState}function Fs(e,t,n,r){var o=ls();Wa.flags|=e,o.memoizedState=Ds(1|t,{destroy:void 0},n,void 0===r?null:r)}function Bs(e,t,n,r){var o=cs();r=void 0===r?null:r;var a=o.memoizedState.inst;null!==Ga&&null!==r&&es(r,Ga.memoizedState.deps)?o.memoizedState=Ds(t,a,n,r):(Wa.flags|=e,o.memoizedState=Ds(1|t,a,n,r))}function Us(e,t){Fs(8390656,8,e,t)}function Hs(e,t){Bs(2048,8,e,t)}function Ws(e){var t=cs().memoizedState;return function(e){Wa.flags|=4;var t=Wa.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Gs(e,t){return Bs(4,2,e,t)}function Vs(e,t){return Bs(4,4,e,t)}function qs(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ks(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4,4,qs.bind(null,t,e),n)}function $s(){}function Js(e,t){var n=cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&es(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qs(e,t){var n=cs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&es(t,r[1]))return r[0];if(r=e(),$a){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Ys(e,t,n){return void 0===n||0!==(1073741824&Ha)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Kc(),Wa.lanes|=e,Cc|=e,n)}function Xs(e,t,n,r){return Xn(n,t)?n:null!==Oa.current?(e=Ys(e,n,r),Xn(e,t)||(Pi=!0),e):0===(42&Ha)||0!==(1073741824&Ha)&&0===(261930&gc)?(Pi=!0,e.memoizedState=n):(e=Kc(),Wa.lanes|=e,Cc|=e,t)}function Zs(e,t,n,r,o){var a=I.p;I.p=0!==a&&8>a?a:8;var s=M.T,i={};M.T=i,di(e,!1,t,n);try{var l=o(),c=M.S;if(null!==c&&c(i,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)ui(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),qc());else ui(e,t,r,qc())}catch(u){ui(e,t,{then:function(){},status:"rejected",reason:u},qc())}finally{I.p=a,null!==s&&null!==i.types&&(s.types=i.types),M.T=s}}function ei(){}function ti(e,t,n,r){if(5!==e.tag)throw Error(s(476));var o=ni(e).queue;Zs(e,o,t,L,null===n?ei:function(){return ri(e),n(r)})}function ni(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ri(e){var t=ni(e);null===t.next&&(t=e.alternate.memoizedState),ui(e,t.next.queue,{},qc())}function oi(){return Po(uh)}function ai(){return cs().memoizedState}function si(){return cs().memoizedState}function ii(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=qc(),r=wa(t,e=ba(n),n);return null!==r&&($c(r,t,n),xa(r,t,n)),t={cache:Bo()},void(e.payload=t)}t=t.return}}function li(e,t,n){var r=qc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hi(e)?fi(t,n):null!==(n=Ar(e,t,n,r))&&($c(n,e,r),pi(n,t,r))}function ci(e,t,n){ui(e,t,n,qc())}function ui(e,t,n,r){var o={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hi(e))fi(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,i=a(s,n);if(o.hasEagerState=!0,o.eagerState=i,Xn(i,s))return _r(e,t,o,0),null===pc&&Tr(),!1}catch(l){}if(null!==(n=Ar(e,t,o,r)))return $c(n,e,r),pi(n,t,r),!0}return!1}function di(e,t,n,r){if(r={lane:2,revertLane:Hu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},hi(e)){if(t)throw Error(s(479))}else null!==(t=Ar(e,n,r,2))&&$c(t,e,2)}function hi(e){var t=e.alternate;return e===Wa||null!==t&&t===Wa}function fi(e,t){Ka=qa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pi(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Me(e,n)}}var mi={readContext:Po,use:ds,useCallback:Za,useContext:Za,useEffect:Za,useImperativeHandle:Za,useLayoutEffect:Za,useInsertionEffect:Za,useMemo:Za,useReducer:Za,useRef:Za,useState:Za,useDebugValue:Za,useDeferredValue:Za,useTransition:Za,useSyncExternalStore:Za,useId:Za,useHostTransitionStatus:Za,useFormState:Za,useActionState:Za,useOptimistic:Za,useMemoCache:Za,useCacheRefresh:Za};mi.useEffectEvent=Za;var gi={readContext:Po,use:ds,useCallback:function(e,t){return ls().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Us,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fs(4194308,4,qs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){Fs(4,2,e,t)},useMemo:function(e,t){var n=ls();t=void 0===t?null:t;var r=e();if($a){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ls();if(void 0!==n){var o=n(t);if($a){be(!0);try{n(t)}finally{be(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=li.bind(null,Wa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ls().memoizedState=e},useState:function(e){var t=(e=Ss(e)).queue,n=ci.bind(null,Wa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:$s,useDeferredValue:function(e,t){return Ys(ls(),e,t)},useTransition:function(){var e=Ss(!1);return e=Zs.bind(null,Wa,e.queue,!0,!1),ls().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Wa,o=ls();if(ho){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===pc)throw Error(s(349));0!==(127&gc)||ys(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Us(ws.bind(null,r,a,e),[e]),r.flags|=2048,Ds(9,{destroy:void 0},bs.bind(null,r,a,n,t),null),n},useId:function(){var e=ls(),t=pc.identifierPrefix;if(ho){var n=ro;t="_"+t+"R_"+(n=(no&~(1<<32-we(no)-1)).toString(32)+n),0<(n=Ja++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Xa++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:oi,useFormState:As,useActionState:As,useOptimistic:function(e){var t=ls();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=di.bind(null,Wa,!0,n),n.dispatch=t,[e,t]},useMemoCache:hs,useCacheRefresh:function(){return ls().memoizedState=ii.bind(null,Wa)},useEffectEvent:function(e){var t=ls(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(s(440));return n.impl.apply(void 0,arguments)}}},vi={readContext:Po,use:ds,useCallback:Js,useContext:Po,useEffect:Hs,useImperativeHandle:Ks,useInsertionEffect:Gs,useLayoutEffect:Vs,useMemo:Qs,useReducer:ps,useRef:zs,useState:function(){return ps(fs)},useDebugValue:$s,useDeferredValue:function(e,t){return Xs(cs(),Ga.memoizedState,e,t)},useTransition:function(){var e=ps(fs)[0],t=cs().memoizedState;return["boolean"===typeof e?e:us(e),t]},useSyncExternalStore:vs,useId:ai,useHostTransitionStatus:oi,useFormState:Ps,useActionState:Ps,useOptimistic:function(e,t){return Cs(cs(),0,e,t)},useMemoCache:hs,useCacheRefresh:si};vi.useEffectEvent=Ws;var yi={readContext:Po,use:ds,useCallback:Js,useContext:Po,useEffect:Hs,useImperativeHandle:Ks,useInsertionEffect:Gs,useLayoutEffect:Vs,useMemo:Qs,useReducer:gs,useRef:zs,useState:function(){return gs(fs)},useDebugValue:$s,useDeferredValue:function(e,t){var n=cs();return null===Ga?Ys(n,e,t):Xs(n,Ga.memoizedState,e,t)},useTransition:function(){var e=gs(fs)[0],t=cs().memoizedState;return["boolean"===typeof e?e:us(e),t]},useSyncExternalStore:vs,useId:ai,useHostTransitionStatus:oi,useFormState:Ls,useActionState:Ls,useOptimistic:function(e,t){var n=cs();return null!==Ga?Cs(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:hs,useCacheRefresh:si};function bi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}yi.useEffectEvent=Ws;var wi={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qc(),o=ba(r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=wa(e,o,r))&&($c(t,e,r),xa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qc(),o=ba(r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=wa(e,o,r))&&($c(t,e,r),xa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qc(),r=ba(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=wa(e,r,n))&&($c(t,e,n),xa(t,e,n))}};function xi(e,t,n,r,o,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(o,a))}function ki(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wi.enqueueReplaceState(t,t.state,null)}function Si(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=f({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}function Ci(e){Er(e)}function Ni(e){console.error(e)}function Ei(e){Er(e)}function Ri(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Oi(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function ji(e,t,n){return(n=ba(n)).tag=3,n.payload={element:null},n.callback=function(){Ri(e,t)},n}function Ti(e){return(e=ba(e)).tag=3,e}function _i(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"===typeof o){var a=r.value;e.payload=function(){return o(a)},e.callback=function(){Oi(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Oi(t,n,r),"function"!==typeof o&&(null===Lc?Lc=new Set([this]):Lc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ai=Error(s(461)),Pi=!1;function Mi(e,t,n,r){t.child=null===e?ma(t,null,n,r):pa(t,e.child,n,r)}function Ii(e,t,n,r,o){n=n.render;var a=t.ref;if("ref"in r){var s={};for(var i in r)"ref"!==i&&(s[i]=r[i])}else s=r;return Ao(t),r=ts(e,t,n,s,a,o),i=as(),null===e||Pi?(ho&&i&&so(t),t.flags|=1,Mi(e,t,r,o),t.child):(ss(e,t,o),ol(e,t,o))}function Li(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Fr(a)||void 0!==a.defaultProps||null!==n.compare?((e=Hr(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Di(e,t,a,r,o))}if(a=e.child,!al(e,o)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(s,r)&&e.ref===t.ref)return ol(e,t,o)}return t.flags|=1,(e=Br(a,r)).ref=t.ref,e.return=t,t.child=e}function Di(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(Zn(a,r)&&e.ref===t.ref){if(Pi=!1,t.pendingProps=r=a,!al(e,o))return t.lanes=e.lanes,ol(e,t,o);0!==(131072&e.flags)&&(Pi=!0)}}return Gi(e,t,n,r,o)}function zi(e,t,n,r){var o=r.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(a=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,o=0;null!==r;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~a}else r=0,t.child=null;return Bi(e,t,a,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Bi(e,t,null!==a?a.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Qo(0,null!==a?a.cachePool:null),null!==a?Ta(t,a):_a(),Da(t)}else null!==a?(Qo(0,a.cachePool),Ta(t,a),za(),t.memoizedState=null):(null!==e&&Qo(0,null),_a(),za());return Mi(e,t,o,n),t.child}function Fi(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bi(e,t,n,r,o){var a=Jo();return a=null===a?null:{parent:Fo._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Qo(0,null),_a(),Da(t),null!==e&&To(e,t,r,!0),t.childLanes=o,null}function Ui(e,t){return(t=Zi({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Hi(e,t,n){return pa(t,e.child,null,n),(e=Ui(t,t.pendingProps)).flags|=2,Fa(t),t.memoizedState=null,e}function Wi(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Gi(e,t,n,r,o){return Ao(t),n=ts(e,t,n,r,void 0,o),r=as(),null===e||Pi?(ho&&r&&so(t),t.flags|=1,Mi(e,t,n,o),t.child):(ss(e,t,o),ol(e,t,o))}function Vi(e,t,n,r,o,a){return Ao(t),t.updateQueue=null,n=rs(t,r,n,o),ns(e),r=as(),null===e||Pi?(ho&&r&&so(t),t.flags|=1,Mi(e,t,n,a),t.child):(ss(e,t,a),ol(e,t,a))}function qi(e,t,n,r,o){if(Ao(t),null===t.stateNode){var a=Lr,s=n.contextType;"object"===typeof s&&null!==s&&(a=Po(s)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=wi,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},va(t),s=n.contextType,a.context="object"===typeof s&&null!==s?Po(s):Lr,a.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(bi(t,n,s,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(s=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&wi.enqueueReplaceState(a,a.state,null),Na(t,r,a,o),Ca(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var i=t.memoizedProps,l=Si(n,i);a.props=l;var c=a.context,u=n.contextType;s=Lr,"object"===typeof u&&null!==u&&(s=Po(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate,i=t.pendingProps!==i,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(i||c!==s)&&ki(t,a,r,s),ga=!1;var h=t.memoizedState;a.state=h,Na(t,r,a,o),Ca(),c=t.memoizedState,i||h!==c||ga?("function"===typeof d&&(bi(t,n,d,r),c=t.memoizedState),(l=ga||xi(t,n,l,r,h,c,s))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=s,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ya(e,t),u=Si(n,s=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=Lr,"object"===typeof c&&null!==c&&(l=Po(c)),(c="function"===typeof(i=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ki(t,a,r,l),ga=!1,h=t.memoizedState,a.state=h,Na(t,r,a,o),Ca();var f=t.memoizedState;s!==d||h!==f||ga||null!==e&&null!==e.dependencies&&_o(e.dependencies)?("function"===typeof i&&(bi(t,n,i,r),f=t.memoizedState),(u=ga||xi(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&_o(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Wi(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=pa(t,e.child,null,o),t.child=pa(t,null,n,o)):Mi(e,t,n,o),t.memoizedState=a.state,e=t.child):e=ol(e,t,o),e}function Ki(e,t,n,r){return wo(),t.flags|=256,Mi(e,t,n,r),t.child}var $i={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ji(e){return{baseLanes:e,cachePool:Yo()}}function Qi(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Rc),e}function Yi(e,t,n){var r,o=t.pendingProps,a=!1,i=0!==(128&t.flags);if((r=i)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Ba.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ho){if(a?Ia(t):za(),(e=uo)?null!==(e=null!==(e=Td(e,po))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},(n=Vr(e)).return=t,t.child=n,co=t,uo=null):e=null,null===e)throw go(t);return Ad(e)?t.lanes=32:t.lanes=536870912,null}var l=o.children;return o=o.fallback,a?(za(),l=Zi({mode:"hidden",children:l},a=t.mode),o=Wr(o,a,n,null),l.return=t,o.return=t,l.sibling=o,t.child=l,(o=t.child).memoizedState=Ji(n),o.childLanes=Qi(e,r,n),t.memoizedState=$i,Fi(null,o)):(Ia(t),Xi(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(i)256&t.flags?(Ia(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(za(),t.child=e.child,t.flags|=128,t=null):(za(),l=o.fallback,a=t.mode,o=Zi({mode:"visible",children:o.children},a),(l=Wr(l,a,n,null)).flags|=2,o.return=t,l.return=t,o.sibling=l,t.child=o,pa(t,e.child,null,n),(o=t.child).memoizedState=Ji(n),o.childLanes=Qi(e,r,n),t.memoizedState=$i,t=Fi(null,o));else if(Ia(t),Ad(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(o=Error(s(419))).stack="",o.digest=r,ko({value:o,source:null,stack:null}),t=el(e,t,n)}else if(Pi||To(e,t,n,!1),r=0!==(n&e.childLanes),Pi||r){if(null!==(r=pc)&&(0!==(o=Ie(r,n))&&o!==c.retryLane))throw c.retryLane=o,Pr(e,o),$c(r,e,o),Ai;_d(l)||su(),t=el(e,t,n)}else _d(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,uo=Pd(l.nextSibling),co=t,ho=!0,fo=null,po=!1,null!==e&&lo(t,e),(t=Xi(t,o.children)).flags|=4096);return t}return a?(za(),l=o.fallback,a=t.mode,u=(c=e.child).sibling,(o=Br(c,{mode:"hidden",children:o.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Br(u,l):(l=Wr(l,a,n,null)).flags|=2,l.return=t,o.return=t,o.sibling=l,t.child=o,Fi(null,o),o=t.child,null===(l=e.child.memoizedState)?l=Ji(n):(null!==(a=l.cachePool)?(c=Fo._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=Yo(),l={baseLanes:l.baseLanes|n,cachePool:a}),o.memoizedState=l,o.childLanes=Qi(e,r,n),t.memoizedState=$i,Fi(e.child,o)):(Ia(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Xi(e,t){return(t=Zi({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zi(e,t){return(e=zr(22,e,null,t)).lanes=0,e}function el(e,t,n){return pa(t,e.child,null,n),(e=Xi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Oo(e.return,t,n)}function nl(e,t,n,r,o,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,treeForkCount:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o,s.treeForkCount=a)}function rl(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;r=r.children;var s=Ba.current,i=0!==(2&s);if(i?(s=1&s|2,t.flags|=128):s&=1,U(Ba,s),Mi(e,t,r,n),r=ho?Xr:0,!i&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),nl(t,!1,o,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Ua(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}nl(t,!0,n,null,a,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ol(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Cc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(To(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function al(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!_o(e))}function sl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Pi=!0;else{if(!al(e,n)&&0===(128&t.flags))return Pi=!1,function(e,t,n){switch(t.tag){case 3:$(t,t.stateNode.containerInfo),Eo(0,Fo,e.memoizedState.cache),wo();break;case 27:case 5:Q(t);break;case 4:$(t,t.stateNode.containerInfo);break;case 10:Eo(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,La(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ia(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Yi(e,t,n):(Ia(t),null!==(e=ol(e,t,n))?e.sibling:null);Ia(t);break;case 19:var o=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(To(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return rl(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),U(Ba,Ba.current),r)break;return null;case 22:return t.lanes=0,zi(e,t,n,t.pendingProps);case 24:Eo(0,Fo,e.memoizedState.cache)}return ol(e,t,n)}(e,t,n);Pi=0!==(131072&e.flags)}else Pi=!1,ho&&0!==(1048576&t.flags)&&ao(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=oa(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var o=e.$$typeof;if(o===k){t.tag=11,t=Ii(null,t,e,r,n);break e}if(o===N){t.tag=14,t=Li(null,t,e,r,n);break e}}throw t=A(e)||e,Error(s(306,t,""))}Fr(e)?(r=Si(e,r),t.tag=1,t=qi(null,t,e,r,n)):(t.tag=0,t=Gi(null,t,e,r,n))}return t;case 0:return Gi(e,t,t.type,t.pendingProps,n);case 1:return qi(e,t,r=t.type,o=Si(r,t.pendingProps),n);case 3:e:{if($(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var a=t.memoizedState;o=a.element,ya(e,t),Na(t,r,null,n);var i=t.memoizedState;if(r=i.cache,Eo(0,Fo,r),r!==a.cache&&jo(t,[Fo],n,!0),Ca(),r=i.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ki(e,t,r,n);break e}if(r!==o){ko(o=$r(Error(s(424)),t)),t=Ki(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(uo=Pd(e.firstChild),co=t,ho=!0,fo=null,po=!0,n=ma(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(wo(),r===o){t=ol(e,t,n);break e}Mi(e,t,r,n)}t=t.child}return t;case 26:return Wi(e,t),null===e?(n=Vd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ho||(n=t.type,e=t.pendingProps,(r=gd(q.current).createElement(n))[Ue]=t,r[He]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Vd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&ho&&(r=t.stateNode=Dd(t.type,t.pendingProps,q.current),co=t,po=!0,o=uo,Ed(t.type)?(Md=o,uo=Pd(r.firstChild)):uo=o),Mi(e,t,t.pendingProps.children,n),Wi(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ho&&((o=r=uo)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[$e])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===a)return e}if(null===(e=Pd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,po))?(t.stateNode=r,co=t,uo=Pd(r.firstChild),po=!1,o=!0):o=!1),o||go(t)),Q(t),o=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,r=a.children,bd(o,a)?r=null:null!==i&&bd(o,i)&&(t.flags|=32),null!==t.memoizedState&&(o=ts(e,t,os,null,null,n),uh._currentValue=o),Wi(e,t),Mi(e,t,r,n),t.child;case 6:return null===e&&ho&&((e=n=uo)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Pd(e.nextSibling)))return null}return e}(n,t.pendingProps,po))?(t.stateNode=n,co=t,uo=null,e=!0):e=!1),e||go(t)),null;case 13:return Yi(e,t,n);case 4:return $(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pa(t,null,r,n):Mi(e,t,r,n),t.child;case 11:return Ii(e,t,t.type,t.pendingProps,n);case 7:return Mi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Mi(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Eo(0,t.type,r.value),Mi(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,Ao(t),r=r(o=Po(o)),t.flags|=1,Mi(e,t,r,n),t.child;case 14:return Li(e,t,t.type,t.pendingProps,n);case 15:return Di(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,o=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ho){if("hidden"===r.mode)return e=Ui(t,r),t.lanes=536870912,Fi(null,e);if(La(t),(e=uo)?null!==(e=null!==(e=Td(e,po))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},(n=Vr(e)).return=t,t.child=n,co=t,uo=null):e=null,null===e)throw go(t);return t.lanes=536870912,null}return Ui(t,r)}var a=e.memoizedState;if(null!==a){var i=a.dehydrated;if(La(t),o)if(256&t.flags)t.flags&=-257,t=Hi(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(Pi||To(e,t,n,!1),o=0!==(n&e.childLanes),Pi||o){if(null!==(r=pc)&&0!==(i=Ie(r,n))&&i!==a.retryLane)throw a.retryLane=i,Pr(e,i),$c(r,e,i),Ai;su(),t=Hi(e,t,n)}else e=a.treeContext,uo=Pd(i.nextSibling),co=t,ho=!0,fo=null,po=!1,null!==e&&lo(t,e),(t=Ui(t,r)).flags|=4096;return t}return(e=Br(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return zi(e,t,n,t.pendingProps);case 24:return Ao(t),r=Po(Fo),null===e?(null===(o=Jo())&&(o=pc,a=Bo(),o.pooledCache=a,a.refCount++,null!==a&&(o.pooledCacheLanes|=n),o=a),t.memoizedState={parent:r,cache:o},va(t),Eo(0,Fo,o)):(0!==(e.lanes&n)&&(ya(e,t),Na(t,null,null,n),Ca()),o=e.memoizedState,a=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),Eo(0,Fo,r)):(r=a.cache,Eo(0,Fo,r),r!==o.cache&&jo(t,[Fo],n,!0))),Mi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function il(e){e.flags|=4}function ll(e,t,n,r,o){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&o)===o)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw aa=ta,Zo;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!oh(t)){if(!ru())throw aa=ta,Zo;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Te():536870912,e.lanes|=t,Oc|=t)}function dl(e,t){if(!ho)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=65011712&o.subtreeFlags,r|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fl(e,t,n){var r=t.pendingProps;switch(io(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ro(Fo),J(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(bo(t)?il(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,xo())),hl(t),null;case 26:var o=t.type,a=t.memoizedState;return null===e?(il(t),null!==a?(hl(t),cl(t,a)):(hl(t),ll(t,o,0,0,n))):a?a!==e.memoizedState?(il(t),hl(t),cl(t,a)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&il(t),hl(t),ll(t,o,0,0,n)),null;case 27:if(Y(t),n=q.current,o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&il(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return hl(t),null}e=G.current,bo(t)?vo(t):(e=Dd(o,r,n),t.stateNode=e,il(t))}return hl(t),null;case 5:if(Y(t),o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&il(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return hl(t),null}if(a=G.current,bo(t))vo(t);else{var i=gd(q.current);switch(a){case 1:a=i.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:a=i.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":a=i.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":a=i.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":(a=i.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a="string"===typeof r.is?i.createElement(o,{is:r.is}):i.createElement(o)}}a[Ue]=t,a[He]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)a.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=a;e:switch(hd(a,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&il(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&il(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=q.current,bo(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=co))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||go(t,!0)}else(e=gd(e).createTextNode(r))[Ue]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=bo(t),null!==n){if(null===e){if(!r)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[Ue]=t}else wo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=xo(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Fa(t),t):(Fa(t),null);if(0!==(128&t.flags))throw Error(s(558))}return hl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=bo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[Ue]=t}else wo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),o=!1}else o=xo(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(Fa(t),t):(Fa(t),null)}return Fa(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool),a=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==o&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return J(),null===e&&Zu(t.stateNode.containerInfo),hl(t),null;case 10:return Ro(t.type),hl(t),null;case 19:if(B(Ba),null===(r=t.memoizedState))return hl(t),null;if(o=0!==(128&t.flags),null===(a=r.rendering))if(o)dl(r,!1);else{if(0!==Sc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=Ua(e))){for(t.flags|=128,dl(r,!1),e=a.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return U(Ba,1&Ba.current|2),ho&&oo(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Mc&&(t.flags|=128,o=!0,dl(r,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=Ua(a))){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!ho)return hl(t),null}else 2*le()-r.renderingStartTime>Mc&&536870912!==n&&(t.flags|=128,o=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Ba.current,U(Ba,o?1&n|2:1&n),ho&&oo(t,r.treeForkCount),e):(hl(t),null);case 22:case 23:return Fa(t),Aa(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B($o),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ro(Fo),hl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function pl(e,t){switch(io(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ro(Fo),J(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 31:if(null!==t.memoizedState){if(Fa(t),null===t.alternate)throw Error(s(340));wo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fa(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));wo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(Ba),null;case 4:return J(),null;case 10:return Ro(t.type),null;case 22:case 23:return Fa(t),Aa(),null!==e&&B($o),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ro(Fo),null;default:return null}}function ml(e,t){switch(io(t),t.tag){case 3:Ro(Fo),J();break;case 26:case 27:case 5:Y(t);break;case 4:J();break;case 31:null!==t.memoizedState&&Fa(t);break;case 13:Fa(t);break;case 19:B(Ba);break;case 10:Ro(t.type);break;case 22:case 23:Fa(t),Aa(),null!==e&&B($o);break;case 24:Ro(Fo)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var a=n.create,s=n.inst;r=a(),s.destroy=r}n=n.next}while(n!==o)}}catch(i){Su(t,t.return,i)}}function vl(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var a=o.next;r=a;do{if((r.tag&e)===e){var s=r.inst,i=s.destroy;if(void 0!==i){s.destroy=void 0,o=t;var l=n,c=i;try{c()}catch(u){Su(o,l,u)}}}r=r.next}while(r!==a)}}catch(u){Su(t,t.return,u)}}function yl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ra(t,n)}catch(r){Su(e,e.return,r)}}}function bl(e,t,n){n.props=Si(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Su(e,t,r)}}function wl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(o){Su(e,t,o)}}function xl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(o){Su(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){Su(e,t,a)}else n.current=null}function kl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){Su(e,e.return,o)}}function Sl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,a=null,i=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||ud(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":a=p;break;case"name":o=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":i=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&ud(e,t,f,p,r,h)}}return void yt(e,i,l,c,u,d,a,o);case"select":for(a in p=i=l=f=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(a)||ud(e,t,a,null,r,c)}for(o in r)if(a=r[o],c=n[o],r.hasOwnProperty(o)&&(null!=a||null!=c))switch(o){case"value":f=a;break;case"defaultValue":l=a;break;case"multiple":i=a;default:a!==c&&ud(e,t,o,a,r,c)}return t=l,n=i,r=p,void(null!=f?xt(e,!!n,f,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,r,o)}for(i in r)if(o=r[i],a=n[i],r.hasOwnProperty(i)&&(null!=o||null!=a))switch(i){case"value":f=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(s(91));break;default:o!==a&&ud(e,t,i,o,r,a)}return void kt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ud(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ud(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&ud(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:ud(e,t,u,f,r,p)}return;default:if(Ot(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&dd(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||dd(e,t,d,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&ud(e,t,y,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||ud(e,t,h,f,r,p)}(r,e.type,n,t),r[He]=t}catch(o){Su(e,e.return,o)}}function Cl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ed(e.type)||4===e.tag}function Nl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ed(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function El(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=At));else if(4!==r&&(27===r&&Ed(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(El(e,t,n),e=e.sibling;null!==e;)El(e,t,n),e=e.sibling}function Rl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ed(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Rl(e,t,n),e=e.sibling;null!==e;)Rl(e,t,n),e=e.sibling}function Ol(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);hd(t,r,n),t[Ue]=e,t[He]=n}catch(a){Su(e,e.return,a)}}var jl=!1,Tl=!1,_l=!1,Al="function"===typeof WeakSet?WeakSet:Set,Pl=null;function Ml(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:$l(e,n),4&r&&gl(5,n);break;case 1:if($l(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){Su(n,n.return,s)}else{var o=Si(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){Su(n,n.return,i)}}64&r&&yl(n),512&r&&wl(n,n.return);break;case 3:if($l(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ra(e,t)}catch(s){Su(n,n.return,s)}}break;case 27:null===t&&4&r&&Ol(n);case 26:case 5:$l(e,n),null===t&&4&r&&kl(n),512&r&&wl(n,n.return);break;case 12:$l(e,n);break;case 31:$l(e,n),4&r&&Bl(e,n);break;case 13:$l(e,n),4&r&&Ul(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Ru.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||jl)){t=null!==t&&null!==t.memoizedState||Tl,o=jl;var a=Tl;jl=r,(Tl=t)&&!a?Ql(e,n,0!==(8772&n.subtreeFlags)):$l(e,n),jl=o,Tl=a}break;case 30:break;default:$l(e,n)}}function Il(e){var t=e.alternate;null!==t&&(e.alternate=null,Il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ll=null,Dl=!1;function zl(e,t,n){for(n=n.child;null!==n;)Fl(e,t,n),n=n.sibling}function Fl(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(a){}switch(n.tag){case 26:Tl||xl(n,t),zl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Tl||xl(n,t);var r=Ll,o=Dl;Ed(n.type)&&(Ll=n.stateNode,Dl=!1),zl(e,t,n),zd(n.stateNode),Ll=r,Dl=o;break;case 5:Tl||xl(n,t);case 6:if(r=Ll,o=Dl,Ll=null,zl(e,t,n),Dl=o,null!==(Ll=r))if(Dl)try{(9===Ll.nodeType?Ll.body:"HTML"===Ll.nodeName?Ll.ownerDocument.body:Ll).removeChild(n.stateNode)}catch(s){Su(n,t,s)}else try{Ll.removeChild(n.stateNode)}catch(s){Su(n,t,s)}break;case 18:null!==Ll&&(Dl?(Rd(9===(e=Ll).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gh(e)):Rd(Ll,n.stateNode));break;case 4:r=Ll,o=Dl,Ll=n.stateNode.containerInfo,Dl=!0,zl(e,t,n),Ll=r,Dl=o;break;case 0:case 11:case 14:case 15:vl(2,n,t),Tl||vl(4,n,t),zl(e,t,n);break;case 1:Tl||(xl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bl(n,t,r)),zl(e,t,n);break;case 21:zl(e,t,n);break;case 22:Tl=(r=Tl)||null!==n.memoizedState,zl(e,t,n),Tl=r;break;default:zl(e,t,n)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gh(e)}catch(n){Su(t,t.return,n)}}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gh(e)}catch(n){Su(t,t.return,n)}}function Hl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Al),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Al),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Ou.bind(null,e,t);t.then(r,r)}})}function Wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],a=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 27:if(Ed(l.type)){Ll=l.stateNode,Dl=!1;break e}break;case 5:Ll=l.stateNode,Dl=!1;break e;case 3:case 4:Ll=l.stateNode.containerInfo,Dl=!0;break e}l=l.return}if(null===Ll)throw Error(s(160));Fl(a,i,o),Ll=null,Dl=!1,null!==(a=o.alternate)&&(a.return=null),o.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Vl(t,e),t=t.sibling}var Gl=null;function Vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wl(t,e),ql(e),4&r&&(vl(3,e,e.return),gl(3,e),vl(5,e,e.return));break;case 1:Wl(t,e),ql(e),512&r&&(Tl||null===n||xl(n,n.return)),64&r&&jl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=Gl;if(Wl(t,e),ql(e),512&r&&(Tl||null===n||xl(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(a=o.getElementsByTagName("title")[0])||a[$e]||a[Ue]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=o.createElement(r),o.head.insertBefore(a,o.querySelector("head > title"))),hd(a,r,n),a[Ue]=e,et(a),r=a;break e;case"link":var i=nh("link","href",o).get(r+(n.href||""));if(i)for(var l=0;l<i.length;l++)if((a=i[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){i.splice(l,1);break t}hd(a=o.createElement(r),r,n),o.head.appendChild(a);break;case"meta":if(i=nh("meta","content",o).get(r+(n.content||"")))for(l=0;l<i.length;l++)if((a=i[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){i.splice(l,1);break t}hd(a=o.createElement(r),r,n),o.head.appendChild(a);break;default:throw Error(s(468,r))}a[Ue]=e,et(a),r=a}e.stateNode=r}else rh(o,e.type,e.stateNode);else e.stateNode=Yd(o,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?rh(o,e.type,e.stateNode):Yd(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Sl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Wl(t,e),ql(e),512&r&&(Tl||null===n||xl(n,n.return)),null!==n&&4&r&&Sl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Wl(t,e),ql(e),512&r&&(Tl||null===n||xl(n,n.return)),32&e.flags){o=e.stateNode;try{Ct(o,"")}catch(m){Su(e,e.return,m)}}4&r&&null!=e.stateNode&&Sl(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(_l=!0);break;case 6:if(Wl(t,e),ql(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Su(e,e.return,m)}}break;case 3:if(th=null,o=Gl,Gl=Ud(t.containerInfo),Wl(t,e),Gl=o,ql(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gh(t.containerInfo)}catch(m){Su(e,e.return,m)}_l&&(_l=!1,Kl(e));break;case 4:r=Gl,Gl=Ud(e.stateNode.containerInfo),Wl(t,e),ql(e),Gl=r;break;case 12:default:Wl(t,e),ql(e);break;case 31:case 19:Wl(t,e),ql(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r)));break;case 13:Wl(t,e),ql(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Ac=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r)));break;case 22:o=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=jl,d=Tl;if(jl=u||o,Tl=d||c,Wl(t,e),Tl=d,jl=u,ql(e),8192&r)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||c||jl||Tl||Jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,o)"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){Su(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=o?"":c.memoizedProps}catch(m){Su(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;o?Od(p,!0):Od(c.stateNode,!1)}catch(m){Su(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Hl(e,n))));case 30:case 21:}}function ql(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Cl(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var o=n.stateNode;Rl(e,Nl(e),o);break;case 5:var a=n.stateNode;32&n.flags&&(Ct(a,""),n.flags&=-33),Rl(e,Nl(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;El(e,Nl(e),i);break;default:throw Error(s(161))}}catch(l){Su(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Kl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Kl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function $l(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ml(e,t.alternate,t),t=t.sibling}function Jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Jl(t);break;case 1:xl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bl(t,t.return,n),Jl(t);break;case 27:zd(t.stateNode);case 26:case 5:xl(t,t.return),Jl(t);break;case 22:null===t.memoizedState&&Jl(t);break;default:Jl(t)}e=e.sibling}}function Ql(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:Ql(o,a,n),gl(4,a);break;case 1:if(Ql(o,a,n),"function"===typeof(o=(r=a).stateNode).componentDidMount)try{o.componentDidMount()}catch(c){Su(r,r.return,c)}if(null!==(o=(r=a).updateQueue)){var i=r.stateNode;try{var l=o.shared.hiddenCallbacks;if(null!==l)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)Ea(l[o],i)}catch(c){Su(r,r.return,c)}}n&&64&s&&yl(a),wl(a,a.return);break;case 27:Ol(a);case 26:case 5:Ql(o,a,n),n&&null===r&&4&s&&kl(a),wl(a,a.return);break;case 12:Ql(o,a,n);break;case 31:Ql(o,a,n),n&&4&s&&Bl(o,a);break;case 13:Ql(o,a,n),n&&4&s&&Ul(o,a);break;case 22:null===a.memoizedState&&Ql(o,a,n),wl(a,a.return);break;case 30:break;default:Ql(o,a,n)}t=t.sibling}}function Yl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Uo(n))}function Xl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Uo(e))}function Zl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Zl(e,t,n,r),2048&o&&gl(9,t);break;case 1:case 31:case 13:default:Zl(e,t,n,r);break;case 3:Zl(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Uo(e)));break;case 12:if(2048&o){Zl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,i=a.onPostCommit;"function"===typeof i&&i(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Su(t,t.return,l)}}else Zl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,null!==t.memoizedState?2&a._visibility?Zl(e,t,n,r):nc(e,t):2&a._visibility?Zl(e,t,n,r):(a._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&o&&Yl(s,t);break;case 24:Zl(e,t,n,r),2048&o&&Xl(t.alternate,t)}}function tc(e,t,n,r,o){for(o=o&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,s=t,i=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:tc(a,s,i,l,o),gl(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?tc(a,s,i,l,o):nc(a,s):(u._visibility|=2,tc(a,s,i,l,o)),o&&2048&c&&Yl(s.alternate,s);break;case 24:tc(a,s,i,l,o),o&&2048&c&&Xl(s.alternate,s);break;default:tc(a,s,i,l,o)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:nc(n,r),2048&o&&Yl(r.alternate,r);break;case 24:nc(n,r),2048&o&&Xl(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function oc(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)ac(e,t,n),e=e.sibling}function ac(e,t,n){switch(e.tag){case 26:oc(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var o=qd(r.href),a=t.querySelector(Kd(o));if(a)return null!==(t=a._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=sh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,void et(a);a=t.ownerDocument||t,r=$d(r),(o=Fd.get(o))&&Zd(r,o),et(a=a.createElement("link"));var s=a;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),hd(a,"link",r),n.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=sh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Gl,e.memoizedState,e.memoizedProps);break;case 5:default:oc(e,t,n);break;case 3:case 4:var r=Gl;Gl=Ud(e.stateNode.containerInfo),oc(e,t,n),Gl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,oc(e,t,n),rc=r):oc(e,t,n))}}function sc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ic(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Pl=r,uc(r,e)}sc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:ic(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:ic(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):ic(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Pl=r,uc(r,e)}sc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Pl;){var n=Pl;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Uo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Pl=r;else e:for(n=e;null!==Pl;){var o=(r=Pl).sibling,a=r.return;if(Il(r),r===n){Pl=null;break e}if(null!==o){o.return=a,Pl=o;break e}Pl=a}}}var dc={getCacheForType:function(e){var t=Po(Fo),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Po(Fo).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,fc=0,pc=null,mc=null,gc=0,vc=0,yc=null,bc=!1,wc=!1,xc=!1,kc=0,Sc=0,Cc=0,Nc=0,Ec=0,Rc=0,Oc=0,jc=null,Tc=null,_c=!1,Ac=0,Pc=0,Mc=1/0,Ic=null,Lc=null,Dc=0,zc=null,Fc=null,Bc=0,Uc=0,Hc=null,Wc=null,Gc=0,Vc=null;function qc(){return 0!==(2&fc)&&0!==gc?gc&-gc:null!==M.T?Hu():ze()}function Kc(){if(0===Rc)if(0===(536870912&gc)||ho){var e=Ce;0===(3932160&(Ce<<=1))&&(Ce=262144),Rc=e}else Rc=536870912;return null!==(e=Pa.current)&&(e.flags|=32),Rc}function $c(e,t,n){(e!==pc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(tu(e,0),Xc(e,gc,Rc,!1)),Ae(e,n),0!==(2&fc)&&e===pc||(e===pc&&(0===(2&fc)&&(Nc|=n),4===Sc&&Xc(e,gc,Rc,!1)),Iu(e))}function Jc(e,t,n){if(0!==(6&fc))throw Error(s(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Oe(e,t),o=r?function(e,t){var n=fc;fc|=2;var r=ou(),o=au();pc!==e||gc!==t?(Ic=null,Mc=le()+500,tu(e,t)):wc=Oe(e,t);e:for(;;)try{if(0!==vc&&null!==mc){t=mc;var a=yc;t:switch(vc){case 1:vc=0,yc=null,hu(e,t,a,1);break;case 2:case 9:if(na(a)){vc=0,yc=null,du(t);break}t=function(){2!==vc&&9!==vc||pc!==e||(vc=7),Iu(e)},a.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:na(a)?(vc=0,yc=null,du(t)):(vc=0,yc=null,hu(e,t,a,7));break;case 5:var i=null;switch(mc.tag){case 26:i=mc.memoizedState;case 5:case 27:var l=mc;if(i?oh(i):l.stateNode.complete){vc=0,yc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,fu(u)):mc=null}break t}}vc=0,yc=null,hu(e,t,a,5);break;case 6:vc=0,yc=null,hu(e,t,a,6);break;case 8:eu(),Sc=6;break e;default:throw Error(s(462))}}cu();break}catch(d){nu(e,d)}return No=Co=null,M.H=r,M.A=o,fc=n,null!==mc?0:(pc=null,gc=0,Tr(),Sc)}(e,t):iu(e,t,!0),a=r;;){if(0===o){wc&&!r&&Xc(e,t,0,!1);break}if(n=e.current.alternate,!a||Yc(n)){if(2===o){if(a=t,e.errorRecoveryDisabledLanes&a)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var l=e;o=jc;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,i).flags|=256),2!==(i=iu(l,i,!1))){if(xc&&!c){l.errorRecoveryDisabledLanes|=a,Nc|=a,o=4;break e}a=Tc,Tc=o,null!==a&&(null===Tc?Tc=a:Tc.push.apply(Tc,a))}o=i}if(a=!1,2!==o)continue}}if(1===o){tu(e,0),Xc(e,t,0,!0);break}e:{switch(r=e,a=o){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Xc(r,t,Rc,!bc);break e;case 2:Tc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(o=Ac+300-le())){if(Xc(r,t,Rc,!bc),0!==Re(r,0,!0))break e;Bc=t,r.timeoutHandle=xd(Qc.bind(null,r,n,Tc,Ic,_c,t,Rc,Nc,Oc,bc,a,"Throttled",-0,0),o)}else Qc(r,n,Tc,Ic,_c,t,Rc,Nc,Oc,bc,a,null,-0,0)}break}o=iu(e,t,!1),a=!1}Iu(e)}function Qc(e,t,n,r,o,a,s,i,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ac(t,a,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:At});var p=(62914560&a)===a?Ac-le():(4194048&a)===a?Pc-le():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ah&&(ah=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var o=n[r],a=o.transferSize,s=o.initiatorType,i=o.duration;if(a&&i&&fd(s)){for(s=0,i=o.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>i)break;var u=l.transferSize,d=l.initiatorType;u&&fd(d)&&(s+=u*((l=l.responseEnd)<i?1:(i-c)/(l-c)))}if(--r,t+=8*(a+s)/(o.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var o=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ah?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}(d,p)))return Bc=a,e.cancelPendingCommit=p(mu.bind(null,e,t,a,n,r,o,s,i,l,u,d,null,h,f)),void Xc(e,a,s,!c)}mu(e,t,a,n,r,o,s,i,l)}function Yc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!Xn(a(),o))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xc(e,t,n,r){t&=~Ec,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var a=31-we(o),s=1<<a;r[a]=-1,o&=~s}0!==n&&Pe(e,n,t)}function Zc(){return 0!==(6&fc)||(Lu(0,!1),!1)}function eu(){if(null!==mc){if(0===vc)var e=mc.return;else No=Co=null,is(e=mc),la=null,ca=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,kd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc=0,eu(),pc=e,mc=n=Br(e.current,null),gc=t,vc=0,yc=null,bc=!1,wc=Oe(e,t),xc=!1,Oc=Rc=Ec=Nc=Cc=Sc=0,Tc=jc=null,_c=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-we(r),a=1<<o;t|=e[o],r&=~a}return kc=t,Tr(),n}function nu(e,t){Wa=null,M.H=mi,t===Xo||t===ea?(t=sa(),vc=3):t===Zo?(t=sa(),vc=4):vc=t===Ai?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,yc=t,null===mc&&(Sc=1,Ri(e,$r(t,e.current)))}function ru(){var e=Pa.current;return null===e||((4194048&gc)===gc?null===Ma:((62914560&gc)===gc||0!==(536870912&gc))&&e===Ma)}function ou(){var e=M.H;return M.H=mi,null===e?mi:e}function au(){var e=M.A;return M.A=dc,e}function su(){Sc=4,bc||(4194048&gc)!==gc&&null!==Pa.current||(wc=!0),0===(134217727&Cc)&&0===(134217727&Nc)||null===pc||Xc(pc,gc,Rc,!1)}function iu(e,t,n){var r=fc;fc|=2;var o=ou(),a=au();pc===e&&gc===t||(Ic=null,tu(e,t)),t=!1;var s=Sc;e:for(;;)try{if(0!==vc&&null!==mc){var i=mc,l=yc;switch(vc){case 8:eu(),s=6;break e;case 3:case 2:case 9:case 6:null===Pa.current&&(t=!0);var c=vc;if(vc=0,yc=null,hu(e,i,l,c),n&&wc){s=0;break e}break;default:c=vc,vc=0,yc=null,hu(e,i,l,c)}}lu(),s=Sc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,No=Co=null,fc=r,M.H=o,M.A=a,null===mc&&(pc=null,gc=0,Tr()),s}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!se();)uu(mc)}function uu(e){var t=sl(e.alternate,e,kc);e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Vi(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Vi(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:is(t);default:ml(n,t),t=sl(n,t=mc=Ur(t,kc),kc)}e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function hu(e,t,n,r){No=Co=null,is(t),la=null,ca=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&To(t,n,o,!0),null!==(n=Pa.current)){switch(n.tag){case 31:case 13:return null===Ma?su():null===n.alternate&&0===Sc&&(Sc=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===ta?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Cu(e,r,o)),!1;case 22:return n.flags|=65536,r===ta?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Cu(e,r,o)),!1}throw Error(s(435,n.tag))}return Cu(e,r,o),su(),!1}if(ho)return null!==(t=Pa.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==mo&&ko($r(e=Error(s(422),{cause:r}),n))):(r!==mo&&ko($r(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=$r(r,n),ka(e,o=ji(e.stateNode,r,o)),4!==Sc&&(Sc=2)),!1;var a=Error(s(520),{cause:r});if(a=$r(a,n),null===jc?jc=[a]:jc.push(a),4!==Sc&&(Sc=2),null===t)return!0;r=$r(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,ka(n,e=ji(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Lc||!Lc.has(a))))return n.flags|=65536,o&=-o,n.lanes|=o,_i(o=Ti(o),e,n,r),ka(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,gc))return Sc=1,Ri(e,$r(n,e.current)),void(mc=null)}catch(a){if(null!==o)throw mc=o,a;return Sc=1,Ri(e,$r(n,e.current)),void(mc=null)}32768&t.flags?(ho||1===r?e=!0:wc||0!==(536870912&gc)?e=!1:(bc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Pa.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,bc);e=t.return;var n=fl(t.alternate,t,kc);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===Sc&&(Sc=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);Sc=6,mc=null}function mu(e,t,n,r,o,a,i,l,c){e.cancelPendingCommit=null;do{wu()}while(0!==Dc);if(0!==(6&fc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,o,a){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var i=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-we(n),d=1<<u;i[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Pe(e,r,0),0!==a&&0===o&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,n,a|=jr,i,l,c),e===pc&&(mc=pc=null,gc=0),Fc=t,zc=e,Bc=n,Uc=a,Hc=o,Wc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,oe(he,function(){return xu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=M.T,M.T=null,o=I.p,I.p=2,i=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,pd=bh,or(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(l=i+o),h!==a||0!==r&&3!==h.nodeType||(c=i+r),3===h.nodeType&&(i+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===o&&(l=i),f===a&&++d===r&&(c=i),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},bh=!1,Pl=t;null!==Pl;)if(e=(t=Pl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Pl=e;else for(;null!==Pl;){switch(a=(t=Pl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(o=e[n]).ref.impl=o.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,o=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var m=Si(n.type,o);e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){Su(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))jd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Pl=e;break}Pl=t.return}}(e,t)}finally{fc=i,I.p=o,M.T=r}}Dc=1,gu(),vu(),yu()}}function gu(){if(1===Dc){Dc=0;var e=zc,t=Fc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=M.T,M.T=null;var r=I.p;I.p=2;var o=fc;fc|=4;try{Vl(t,e);var a=md,s=rr(e.containerInfo),i=a.focusedElem,l=a.selectionRange;if(s!==i&&i&&i.ownerDocument&&nr(i.ownerDocument.documentElement,i)){if(null!==l&&or(i)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in i)i.selectionStart=c,i.selectionEnd=Math.min(u,i.value.length);else{var d=i.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=i.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(s=g,g=m,m=s);var v=tr(i,m),y=tr(i,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=i;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<d.length;i++){var w=d[i];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}bh=!!pd,md=pd=null}finally{fc=o,I.p=r,M.T=n}}e.current=t,Dc=2}}function vu(){if(2===Dc){Dc=0;var e=zc,t=Fc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=M.T,M.T=null;var r=I.p;I.p=2;var o=fc;fc|=4;try{Ml(e,t.alternate,t)}finally{fc=o,I.p=r,M.T=n}}Dc=3}}function yu(){if(4===Dc||3===Dc){Dc=0,ie();var e=zc,t=Fc,n=Bc,r=Wc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Dc=5:(Dc=0,Fc=zc=null,bu(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(Lc=null),De(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=M.T,o=I.p,I.p=2,M.T=null;try{for(var a=e.onRecoverableError,s=0;s<r.length;s++){var i=r[s];a(i.value,{componentStack:i.stack})}}finally{M.T=t,I.p=o}}0!==(3&Bc)&&wu(),Iu(e),o=e.pendingLanes,0!==(261930&n)&&0!==(42&o)?e===Vc?Gc++:(Gc=0,Vc=e):Gc=0,Lu(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Uo(t)))}function wu(){return gu(),vu(),yu(),xu()}function xu(){if(5!==Dc)return!1;var e=zc,t=Uc;Uc=0;var n=De(Bc),r=M.T,o=I.p;try{I.p=32>n?32:n,M.T=null,n=Hc,Hc=null;var a=zc,i=Bc;if(Dc=0,Fc=zc=null,Bc=0,0!==(6&fc))throw Error(s(331));var l=fc;if(fc|=4,lc(a.current),ec(a,a.current,i,n),fc=l,Lu(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,a)}catch(c){}return!0}finally{I.p=o,M.T=r,bu(e,t)}}function ku(e,t,n){t=$r(n,t),null!==(e=wa(e,t=ji(e.stateNode,t,2),2))&&(Ae(e,2),Iu(e))}function Su(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Lc||!Lc.has(r))){e=$r(n,e),null!==(r=wa(t,n=Ti(2),2))&&(_i(n,r,t,e),Ae(r,2),Iu(r));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(xc=!0,o.add(n),e=Nu.bind(null,e,t,n),t.then(e,e))}function Nu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(gc&n)===n&&(4===Sc||3===Sc&&(62914560&gc)===gc&&300>le()-Ac?0===(2&fc)&&tu(e,0):Ec|=n,Oc===gc&&(Oc=0)),Iu(e)}function Eu(e,t){0===t&&(t=Te()),null!==(e=Pr(e,t))&&(Ae(e,t),Iu(e))}function Ru(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Eu(e,n)}function Ou(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),Eu(e,n)}var ju=null,Tu=null,_u=!1,Au=!1,Pu=!1,Mu=0;function Iu(e){e!==Tu&&null===e.next&&(null===Tu?ju=Tu=e:Tu=Tu.next=e),Au=!0,_u||(_u=!0,Cd(function(){0!==(6&fc)?oe(ue,Du):zu()}))}function Lu(e,t){if(!Pu&&Au){Pu=!0;do{for(var n=!1,r=ju;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var a=0;else{var s=r.suspendedLanes,i=r.pingedLanes;a=(1<<31-we(42|e)+1)-1,a=201326741&(a&=o&~(s&~i))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Uu(r,a))}else a=gc,0===(3&(a=Re(r,r===pc?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Oe(r,a)||(n=!0,Uu(r,a));r=r.next}}while(n);Pu=!1}}function Du(){zu()}function zu(){Au=_u=!1;var e=0;0!==Mu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wd&&(wd=e,!0);return wd=null,!1}()&&(e=Mu);for(var t=le(),n=null,r=ju;null!==r;){var o=r.next,a=Fu(r,t);0===a?(r.next=null,null===n?ju=o:n.next=o,null===o&&(Tu=n)):(n=r,(0!==e||0!==(3&a))&&(Au=!0)),r=o}0!==Dc&&5!==Dc||Lu(e,!1),0!==Mu&&(Mu=0)}function Fu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-we(a),i=1<<s,l=o[s];-1===l?0!==(i&n)&&0===(i&r)||(o[s]=je(i,t)):l<=t&&(e.expiredLanes|=i),a&=~i}if(n=gc,n=Re(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ae(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Oe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ae(r),De(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=Bu.bind(null,e),n=oe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ae(r),e.callbackPriority=2,e.callbackNode=null,2}function Bu(e,t){if(0!==Dc&&5!==Dc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=Re(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,r,t),Fu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Bu.bind(null,e):null)}function Uu(e,t){if(wu())return null;Jc(e,t,!0)}function Hu(){if(0===Mu){var e=Go;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Mu=e}return Mu}function Wu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:_t(""+e)}function Gu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Vu=0;Vu<Cr.length;Vu++){var qu=Cr[Vu];Nr(qu.toLowerCase(),"on"+(qu[0].toUpperCase()+qu.slice(1)))}Nr(gr,"onAnimationEnd"),Nr(vr,"onAnimationIteration"),Nr(yr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(br,"onTransitionRun"),Nr(wr,"onTransitionStart"),Nr(xr,"onTransitionCancel"),Nr(kr,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$u=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Ju(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var i=r[s],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==a&&o.isPropagationStopped())break e;a=i,o.currentTarget=c;try{a(o)}catch(u){Er(u)}o.currentTarget=null,a=l}else for(s=0;s<r.length;s++){if(l=(i=r[s]).instance,c=i.currentTarget,i=i.listener,l!==a&&o.isPropagationStopped())break e;a=i,o.currentTarget=c;try{a(o)}catch(u){Er(u)}o.currentTarget=null,a=l}}}}function Qu(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Yu(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[Xu]){e[Xu]=!0,tt.forEach(function(t){"selectionchange"!==t&&($u.has(t)||Yu(t,!1,e),Yu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xu]||(t[Xu]=!0,Yu("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Eh(t)){case 2:var o=wh;break;case 8:o=xh;break;default:o=kh}n=o.bind(null,t,n,e),o=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function td(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var i=r.stateNode.containerInfo;if(i===o)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===o)return;s=s.return}for(;null!==i;){if(null===(s=Qe(i)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=a=s;continue e}i=i.parentNode}}r=r.return}Ft(function(){var r=a,o=Mt(n),s=[];e:{var i=Sr.get(e);if(void 0!==i){var c=nn,u=e;switch(e){case"keypress":if(0===$t(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=wn;break;case gr:case vr:case yr:c=un;break;case kr:c=xn;break;case"scroll":case"scrollend":c=on;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=Sn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==i?i+"Capture":null:i;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Bt(m,f))&&d.push(nd(m,g,p)),h)break;m=m.return}0<d.length&&(i=new c(i,u,null,n,o),s.push({event:i,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||n===Pt||!(u=n.relatedTarget||n.fromElement)||!Qe(u)&&!u[We])&&(c||i)&&(i=o.window===o?o:(i=o.ownerDocument)?i.defaultView||i.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Qe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=sn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?i:Xe(c),p=null==u?i:Xe(u),(i=new d(g,m+"leave",c,n,o)).target=h,i.relatedTarget=p,g=null,Qe(o)===r&&((d=new d(f,m+"enter",u,n,o)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=od,m=u,p=0,g=f=c;g;g=d(g))p++;g=0;for(var v=m;v;v=d(v))g++;for(;0<p-g;)f=d(f),p--;for(;0<g-p;)m=d(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){d=f;break e}f=d(f),m=d(m)}d=null}else d=null;null!==c&&ad(s,i,c,d,!1),null!==u&&null!==h&&ad(s,h,u,d,!0)}if("select"===(c=(i=r?Xe(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===c&&"file"===i.type)var y=Un;else if(In(i))if(Hn)y=Yn;else{y=Jn;var b=$n}else!(c=i.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type?r&&Ot(r.elementType)&&(y=Un):y=Qn;switch(y&&(y=y(e,r))?Ln(s,y,n,o):(b&&b(e,i,r),"focusout"===e&&r&&"number"===i.type&&null!=r.memoizedProps.value&&wt(i,"number",i.value)),b=r?Xe(r):window,e){case"focusin":(In(b)||"true"===b.contentEditable)&&(sr=b,ir=r,lr=null);break;case"focusout":lr=ir=sr=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(s,n,o);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":ur(s,n,o)}var w;if(Nn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Pn?_n(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(On&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Pn&&(w=Kt()):(Vt="value"in(Gt=o)?Gt.value:Gt.textContent,Pn=!0)),0<(b=rd(r,x)).length&&(x=new hn(x,e,null,n,o),s.push({event:x,listeners:b}),w?x.data=w:null!==(w=An(n))&&(x.data=w))),(w=Rn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(Tn=!0,jn);case"textInput":return(e=t.data)===jn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!Nn&&_n(e,t)?(e=Kt(),qt=Vt=Gt=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=rd(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,o),s.push({event:b,listeners:x}),b.data=w)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var a=Wu((o[He]||null).action),s=r.submitter;s&&null!==(t=(t=s[He]||null)?Wu(t.formAction):s.getAttribute("formAction"))&&(a=t,s=null);var i=new nn("action","action",null,r,o);e.push({event:i,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Mu){var e=s?Gu(o,s):new FormData(o);ti(n,{pending:!0,data:e,method:o.method,action:a},null,e)}}else"function"===typeof a&&(i.preventDefault(),e=s?Gu(o,s):new FormData(o),ti(n,{pending:!0,data:e,method:o.method,action:a},a,e))},currentTarget:o}]})}}(s,e,r,n,o)}Ju(s,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===a||(null!=(o=Bt(e,n))&&r.unshift(nd(e,o,a)),null!=(o=Bt(e,t))&&r.push(nd(e,o,a))),3===e.tag)return r;e=e.return}return[]}function od(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ad(e,t,n,r,o){for(var a=t._reactName,s=[];null!==n&&n!==r;){var i=n,l=i.alternate,c=i.stateNode;if(i=i.tag,null!==l&&l===r)break;5!==i&&26!==i&&27!==i||null===c||(l=c,o?null!=(c=Bt(n,a))&&s.unshift(nd(n,c,l)):o||null!=(c=Bt(n,a))&&s.push(nd(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var sd=/\r\n?/g,id=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(sd,"\n").replace(id,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,r,o,a){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Ct(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Ct(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Rt(e,r,a);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=_t(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&ud(e,t,"name",o.name,o,null),ud(e,t,"formEncType",o.formEncType,o,null),ud(e,t,"formMethod",o.formMethod,o,null),ud(e,t,"formTarget",o.formTarget,o,null)):(ud(e,t,"encType",o.encType,o,null),ud(e,t,"method",o.method,o,null),ud(e,t,"target",o.target,o,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=_t(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=At);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=_t(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Qu("beforetoggle",e),Qu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=jt.get(n)||n,r)}}function dd(e,t,n,r,o,a){switch(n){case"style":Rt(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Ct(e,r):("number"===typeof r||"bigint"===typeof r)&&Ct(e,""+r);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=At);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"===typeof(a=null!=(a=e[He]||null)?a[n]:null)&&e.removeEventListener(t,a,o),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qu("error",e),Qu("load",e);var r,o=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var i=n[r];if(null!=i)switch(r){case"src":o=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ud(e,t,r,i,n,null)}}return a&&ud(e,t,"srcSet",n.srcSet,n,null),void(o&&ud(e,t,"src",n.src,n,null));case"input":Qu("invalid",e);var l=r=i=a=null,c=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":a=d;break;case"type":i=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:ud(e,t,o,d,n,null)}}return void bt(e,r,l,c,u,i,a,!1);case"select":for(a in Qu("invalid",e),o=i=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":i=l;break;case"multiple":o=l;default:ud(e,t,a,l,n,null)}return t=r,n=i,e.multiple=!!o,void(null!=t?xt(e,!!o,t,!1):null!=n&&xt(e,!!o,n,!0));case"textarea":for(i in Qu("invalid",e),r=a=o=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":o=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:ud(e,t,i,l,n,null)}return void St(e,o,a,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))if("selected"===c)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else ud(e,t,c,o,n,null);return;case"dialog":Qu("beforetoggle",e),Qu("toggle",e),Qu("cancel",e),Qu("close",e);break;case"iframe":case"object":Qu("load",e);break;case"video":case"audio":for(o=0;o<Ku.length;o++)Qu(Ku[o],e);break;case"image":Qu("error",e),Qu("load",e);break;case"details":Qu("toggle",e);break;case"embed":case"source":case"link":Qu("error",e),Qu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ud(e,t,u,o,n,null)}return;default:if(Ot(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&dd(e,t,d,o,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(o=n[l])&&ud(e,t,l,o,n,null))}function fd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,md=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function vd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wd=null;var xd="function"===typeof setTimeout?setTimeout:void 0,kd="function"===typeof clearTimeout?clearTimeout:void 0,Sd="function"===typeof Promise?Promise:void 0,Cd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Sd?function(e){return Sd.resolve(null).then(e).catch(Nd)}:xd;function Nd(e){setTimeout(function(){throw e})}function Ed(e){return"head"===e}function Rd(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)||"/&"===n){if(0===r)return e.removeChild(o),void Gh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)zd(e.ownerDocument.documentElement);else if("head"===n){zd(n=e.ownerDocument.head);for(var a=n.firstChild;a;){var s=a.nextSibling,i=a.nodeName;a[$e]||"SCRIPT"===i||"STYLE"===i||"LINK"===i&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}else"body"===n&&zd(e.ownerDocument.body);n=o}while(n);Gh(t)}function Od(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function jd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":jd(n),Je(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Td(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Pd(e.nextSibling)))return null}return e}function _d(e){return"$?"===e.data||"$~"===e.data}function Ad(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Pd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Md=null;function Id(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Pd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Dd(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function zd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Je(e)}var Fd=new Map,Bd=new Set;function Ud(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Hd=I.d;I.d={f:function(){var e=Hd.f(),t=Zc();return e||t},r:function(e){var t=Ye(e);null!==t&&5===t.tag&&"form"===t.type?ri(t):Hd.r(e)},D:function(e){Hd.D(e),Gd("dns-prefetch",e,null)},C:function(e,t){Hd.C(e,t),Gd("preconnect",e,t)},L:function(e,t,n){Hd.L(e,t,n);var r=Wd;if(r&&e&&t){var o='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(o+='[imagesizes="'+vt(n.imageSizes)+'"]')):o+='[href="'+vt(e)+'"]';var a=o;switch(t){case"style":a=qd(e);break;case"script":a=Jd(e)}Fd.has(a)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Fd.set(a,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(Kd(a))||"script"===t&&r.querySelector(Qd(a))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Hd.m(e,t);var n=Wd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',a=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Jd(e)}if(!Fd.has(a)&&(e=f({rel:"modulepreload",href:e},t),Fd.set(a,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qd(a)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Hd.X(e,t);var n=Wd;if(n&&e){var r=Ze(n).hoistableScripts,o=Jd(e),a=r.get(o);a||((a=n.querySelector(Qd(o)))||(e=f({src:e,async:!0},t),(t=Fd.get(o))&&eh(e,t),et(a=n.createElement("script")),hd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(o,a))}},S:function(e,t,n){Hd.S(e,t,n);var r=Wd;if(r&&e){var o=Ze(r).hoistableStyles,a=qd(e);t=t||"default";var s=o.get(a);if(!s){var i={loading:0,preload:null};if(s=r.querySelector(Kd(a)))i.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Fd.get(a))&&Zd(e,n);var l=s=r.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){i.loading|=1}),l.addEventListener("error",function(){i.loading|=2}),i.loading|=4,Xd(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:i},o.set(a,s)}}},M:function(e,t){Hd.M(e,t);var n=Wd;if(n&&e){var r=Ze(n).hoistableScripts,o=Jd(e),a=r.get(o);a||((a=n.querySelector(Qd(o)))||(e=f({src:e,async:!0,type:"module"},t),(t=Fd.get(o))&&eh(e,t),et(a=n.createElement("script")),hd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(o,a))}}};var Wd="undefined"===typeof document?null:document;function Gd(e,t,n){var r=Wd;if(r&&"string"===typeof t&&t){var o=vt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof n&&(o+='[crossorigin="'+n+'"]'),Bd.has(o)||(Bd.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Vd(e,t,n,r){var o,a,i,l,c=(c=q.current)?Ud(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=qd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=qd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Kd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Fd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fd.set(e,n),u||(o=c,a=e,i=n,l=d.state,o.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=o.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),hd(a,"link",i),et(a),o.head.appendChild(a))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Jd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function qd(e){return'href="'+vt(e)+'"'}function Kd(e){return'link[rel="stylesheet"]['+e+"]"}function $d(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Jd(e){return'[src="'+vt(e)+'"]'}function Qd(e){return"script[async]"+e}function Yd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var o=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",o),Xd(r,n.precedence,e),t.instance=r;case"stylesheet":o=qd(n.href);var a=e.querySelector(Kd(o));if(a)return t.state.loading|=4,t.instance=a,et(a),a;r=$d(n),(o=Fd.get(o))&&Zd(r,o),et(a=(e.ownerDocument||e).createElement("link"));var i=a;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),hd(a,"link",r),t.state.loading|=4,Xd(a,n.precedence,e),t.instance=a;case"script":return a=Jd(n.src),(o=e.querySelector(Qd(a)))?(t.instance=o,et(o),o):(r=n,(o=Fd.get(a))&&eh(r=f({},n),o),et(o=(e=e.ownerDocument||e).createElement("script")),hd(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Xd(r,n.precedence,e));return t.instance}function Xd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,a=o,s=0;s<r.length;s++){var i=r[s];if(i.dataset.precedence===t)a=i;else if(a!==o)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Zd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,o=th=new Map;o.set(n,r)}else(r=(o=th).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var a=n[o];if(!(a[$e]||a[Ue]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var s=a.getAttribute(t)||"";s=e+s;var i=r.get(s);i?i.push(a):r.set(s,[a])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function oh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ah=0;function sh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ih=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ih=new Map,t.forEach(ch,e),ih=null,sh.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=ih.get(e);if(n)var r=n.get(null);else{n=new Map,ih.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<o.length;a++){var s=o[a];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(o=t.instance).getAttribute("data-precedence"),(a=n.get(s)||r)===r&&n.set(null,o),n.set(s,o),this.count++,r=sh.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),a?a.parentNode.insertBefore(o,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var uh={$$typeof:x,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function dh(e,t,n,r,o,a,s,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,r,o,a,s,i,l,c,u,d){return e=new dh(e,t,n,s,l,c,u,d,i),t=1,!0===a&&(t|=24),a=zr(3,null,null,t),e.current=a,a.stateNode=e,(t=Bo()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},va(a),e}function fh(e){return e?e=Lr:Lr}function ph(e,t,n,r,o,a){o=fh(o),null===r.context?r.context=o:r.pendingContext=o,(r=ba(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=wa(e,r,t))&&($c(n,0,t),xa(n,e,t))}function mh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){mh(e,t),(e=e.alternate)&&mh(e,t)}function vh(e){if(13===e.tag||31===e.tag){var t=Pr(e,67108864);null!==t&&$c(t,0,67108864),gh(e,67108864)}}function yh(e){if(13===e.tag||31===e.tag){var t=qc(),n=Pr(e,t=Le(t));null!==n&&$c(n,0,t),gh(e,t)}}var bh=!0;function wh(e,t,n,r){var o=M.T;M.T=null;var a=I.p;try{I.p=2,kh(e,t,n,r)}finally{I.p=a,M.T=o}}function xh(e,t,n,r){var o=M.T;M.T=null;var a=I.p;try{I.p=8,kh(e,t,n,r)}finally{I.p=a,M.T=o}}function kh(e,t,n,r){if(bh){var o=Sh(r);if(null===o)td(e,t,r,Ch,n),Ih(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Oh=Lh(Oh,e,t,n,r,o),!0;case"dragenter":return jh=Lh(jh,e,t,n,r,o),!0;case"mouseover":return Th=Lh(Th,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return _h.set(a,Lh(_h.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Ah.set(a,Lh(Ah.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Ih(e,r),4&t&&-1<Mh.indexOf(e)){for(;null!==o;){var a=Ye(o);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var s=Ee(a.pendingLanes);if(0!==s){var i=a;for(i.pendingLanes|=2,i.entangledLanes|=2;s;){var l=1<<31-we(s);i.entanglements[1]|=l,s&=~l}Iu(a),0===(6&fc)&&(Mc=le()+500,Lu(0,!1))}}break;case 31:case 13:null!==(i=Pr(a,2))&&$c(i,0,2),Zc(),gh(a,2)}if(null===(a=Sh(r))&&td(e,t,r,Ch,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else td(e,t,r,null,n)}}function Sh(e){return Nh(e=Mt(e))}var Ch=null;function Nh(e){if(Ch=null,null!==(e=Qe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ch=e,null}function Eh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Rh=!1,Oh=null,jh=null,Th=null,_h=new Map,Ah=new Map,Ph=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ih(e,t){switch(e){case"focusin":case"focusout":Oh=null;break;case"dragenter":case"dragleave":jh=null;break;case"mouseover":case"mouseout":Th=null;break;case"pointerover":case"pointerout":_h.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ah.delete(t.pointerId)}}function Lh(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=Ye(t))&&vh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Dh(e){var t=Qe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Fe(e.priority,function(){yh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Fe(e.priority,function(){yh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sh(e.nativeEvent);if(null!==n)return null!==(t=Ye(n))&&vh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Pt=r,n.target.dispatchEvent(r),Pt=null,t.shift()}return!0}function Fh(e,t,n){zh(e)&&n.delete(t)}function Bh(){Rh=!1,null!==Oh&&zh(Oh)&&(Oh=null),null!==jh&&zh(jh)&&(jh=null),null!==Th&&zh(Th)&&(Th=null),_h.forEach(Fh),Ah.forEach(Fh)}function Uh(e,t){e.blockedOn===t&&(e.blockedOn=null,Rh||(Rh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bh)))}var Hh=null;function Wh(e){Hh!==e&&(Hh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hh===e&&(Hh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!==typeof r){if(null===Nh(r||n))continue;break}var a=Ye(n);null!==a&&(e.splice(t,3),t-=3,ti(a,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function Gh(e){function t(t){return Uh(t,e)}null!==Oh&&Uh(Oh,e),null!==jh&&Uh(jh,e),null!==Th&&Uh(Th,e),_h.forEach(t),Ah.forEach(t);for(var n=0;n<Ph.length;n++){var r=Ph[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Ph.length&&null===(n=Ph[0]).blockedOn;)Dh(n),null===n.blockedOn&&Ph.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],a=n[r+1],s=o[He]||null;if("function"===typeof a)s||Wh(n);else if(s){var i=null;if(a&&a.hasAttribute("formAction")){if(o=a,s=a[He]||null)i=s.formAction;else if(null!==Nh(o))continue}else i=s.action;"function"===typeof i?n[r+1]=i:(n.splice(r,3),r-=3),Wh(n)}}}function Vh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return o=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==o&&(o(),o=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==o&&(o(),o=null)}}}function qh(e){this._internalRoot=e}function Kh(e){this._internalRoot=e}Kh.prototype.render=qh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));ph(t.current,qc(),e,t,null,null)},Kh.prototype.unmount=qh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),Zc(),t[We]=null}},Kh.prototype.unstable_scheduleHydration=function(e){if(e){var t=ze();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ph.length&&0!==t&&t<Ph[n].priority;n++);Ph.splice(n,0,e),0===n&&Dh(e)}};var $h=o.version;if("19.2.4"!==$h)throw Error(s(527,$h,"19.2.4"));I.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return d(o),e;if(a===r)return d(o),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=o,r=a;else{for(var i=!1,c=o.child;c;){if(c===n){i=!0,n=o,r=a;break}if(c===r){i=!0,r=o,n=a;break}c=c.sibling}if(!i){for(c=a.child;c;){if(c===n){i=!0,n=a,r=o;break}if(c===r){i=!0,r=a,n=o;break}c=c.sibling}if(!i)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Jh={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{ve=Qh.inject(Jh),ye=Qh}catch(Xh){}}t.createRoot=function(e,t){if(!i(e))throw Error(s(299));var n=!1,r="",o=Ci,a=Ni,l=Ei;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,o,a,l,Vh),e[We]=t.current,Zu(e),new qh(t)},t.hydrateRoot=function(e,t,n){if(!i(e))throw Error(s(299));var r=!1,o="",a=Ci,l=Ni,c=Ei,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,o,u,a,l,c,Vh)).context=fh(null),n=t.current,(o=ba(r=Le(r=qc()))).callback=null,wa(n,o,r),n=r,t.current.lanes=n,Ae(t,n),Iu(t),e[We]=t.current,Zu(e),new Kh(t)},t.version="19.2.4"},672(e,t,n){"use strict";var r=n(43);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(o(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},i=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:a}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.4"},391(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},799(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=o,t.jsxs=o},288(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var x=w.prototype=new b;x.constructor=w,g(x,y.prototype),x.isPureReactComponent=!0;var k=Array.isArray;function S(){}var C={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function E(e,t,r){var o=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==o?o:null,props:r}}function R(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var O=/\/+/g;function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,o,a,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(i){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return T((u=e._init)(e._payload),t,o,a,s)}}if(u)return s=s(e),u=""===a?"."+j(e,0):a,k(s)?(o="",null!=u&&(o=u.replace(O,"$&/")+"/"),T(s,t,o,"",function(e){return e})):null!=s&&(R(s)&&(l=s,c=o+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+u,s=E(l.type,c,l.props)),t.push(s)),1;u=0;var d,f=""===a?".":a+":";if(k(e))for(var m=0;m<e.length;m++)u+=T(a=e[m],t,o,i=f+j(a,m),s);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(a=e.next()).done;)u+=T(a=a.value,t,o,i=f+j(a,m++),s);else if("object"===i){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,a,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function _(e,t,n){if(null==e)return e;var r=[],o=0;return T(e,r,"","",function(e){return t.call(n,e,o++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},M={map:_,forEach:function(e,t,n){_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _(e,function(){t++}),t},toArray:function(e){return _(e,function(e){return e})||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=M,t.Component=y,t.Fragment=o,t.Profiler=s,t.PureComponent=w,t.StrictMode=a,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key;if(null!=t)for(a in void 0!==t.key&&(o=""+t.key),t)!N.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var s=Array(a),i=0;i<a;i++)s[i]=arguments[i+2];r.children=s}return E(e.type,o,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:i,_context:e},e},t.createElement=function(e,t,n){var r,o={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)N.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var i=Array(s),l=0;l<s;l++)i[l]=arguments[l+2];o.children=i}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return E(e,a,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=C.T,n={};C.T=n;try{var r=e(),o=C.S;null!==o&&o(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(S,P)}catch(a){P(a)}finally{null!==t&&null!==n.types&&(t.types=n.types),C.T=t}},t.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},t.use=function(e){return C.H.use(e)},t.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},t.useCallback=function(e,t){return C.H.useCallback(e,t)},t.useContext=function(e){return C.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return C.H.useEffect(e,t)},t.useEffectEvent=function(e){return C.H.useEffectEvent(e)},t.useId=function(){return C.H.useId()},t.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.H.useMemo(e,t)},t.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},t.useRef=function(e){return C.H.useRef(e)},t.useState=function(e){return C.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return C.H.useTransition()},t.version="19.2.4"},43(e,t,n){"use strict";e.exports=n(288)},579(e,t,n){"use strict";e.exports=n(799)},896(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var i=2*(r+1)-1,l=e[i],c=i+1,u=e[c];if(0>a(l,n))c<o&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[i]=n,r=i);else{if(!(c<o&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,C||(C=!0,S());else{var t=r(u);null!==t&&A(k,t.startTime-e)}}var S,C=!1,N=-1,E=5,R=-1;function O(){return!!v||!(t.unstable_now()-R<E)}function j(){if(v=!1,C){var e=t.unstable_now();R=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(N),N=-1),p=!0;var a=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&O());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var i=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof i){h.callback=i,x(e),n=!0;break t}h===r(c)&&o(c),x(e)}else o(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&A(k,l.startTime-e),n=!1}}break e}finally{h=null,f=a,p=!1}n=void 0}}finally{n?S():C=!1}}}if("function"===typeof w)S=function(){w(j)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,_=T.port2;T.port1.onmessage=j,S=function(){_.postMessage(null)}}else S=function(){y(j,0)};function A(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:i=a+i,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(b(N),N=-1):g=!0,A(k,a-s))):(e.sortIndex=i,n(c,e),m||p||(m=!0,C||(C=!0,S()))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853(e,t,n){"use strict";e.exports=n(896)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&r;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(a,s),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{"use strict";var e=n(43),t=n.t(e,2),r=n(391);function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=["sri"],d=["page"],h=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],p=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],m=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var g="popstate";function v(){return C(function(e,t){let{pathname:n,search:r,hash:o}=e.location;return x("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:k(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function y(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function S(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function C(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:o=document.defaultView,v5Compat:a=!1}=r,s=o.history,i="POP",l=null,u=d();function d(){return(s.state||{idx:null}).idx}function h(){i="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:i,location:p.location,delta:t})}function f(e){return N(e)}null==u&&(u=0,s.replaceState(c(c({},s.state),{},{idx:u}),""));let p={get action(){return i},get location(){return e(o,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(g,h),l=e,()=>{o.removeEventListener(g,h),l=null}},createHref:e=>t(o,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){i="PUSH";let r=x(p.location,e,t);n&&n(r,e),u=d()+1;let c=w(r,u),h=p.createHref(r);try{s.pushState(c,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;o.location.assign(h)}a&&l&&l({action:i,location:p.location,delta:1})},replace:function(e,t){i="REPLACE";let r=x(p.location,e,t);n&&n(r,e),u=d();let o=w(r,u),c=p.createHref(r);s.replaceState(o,"",c),a&&l&&l({action:i,location:p.location,delta:0})},go:e=>s.go(e)};return p}function N(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),y(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:k(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function E(e,t){return R(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function R(e,t,n,r){let o=H(("string"===typeof t?S(t):t).pathname||"/",n);if(null==o)return null;let a=O(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let s=null;for(let i=0;null==s&&i<a.length;++i){let e=U(o);s=z(a[i],e,r)}return s}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,i=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&s)return;y(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=J([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(y(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),O(e.children,t,u,c,s)),(null!=e.path||e.index)&&t.push({path:c,score:D(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of j(e.path))a(e,t,!0,r);else a(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return o?[a,""]:[a];let s=j(r.join("/")),i=[];return i.push(...s.map(e=>""===e?a:[a,e].join("/"))),o&&i.push(...s),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var T=/^:[\w-]+$/,_=3,A=2,P=1,M=10,I=-2,L=e=>"*"===e;function D(e,t){let n=e.split("/"),r=n.length;return n.some(L)&&(r+=I),t&&(r+=A),n.filter(e=>!L(e)).reduce((e,t)=>e+(T.test(t)?_:""===t?P:M),r)}function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,o={},a="/",s=[];for(let i=0;i<r.length;++i){let e=r[i],l=i===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),s.push({params:o,pathname:J([a,u.pathname]),pathnameBase:Q(J([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=J([a,u.pathnameBase]))}return s}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=B(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],s=a.replace(/(.)\/+$/,"$1"),i=o.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=i[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=i[n];return e[r]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:a,pathnameBase:s,pattern:e}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var W=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function G(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function V(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function q(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function K(e){let t=q(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function $(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=S(e):(r=c({},e),y(!r.pathname||!r.pathname.includes("?"),V("?","pathname","search",r)),y(!r.pathname||!r.pathname.includes("#"),V("#","pathname","hash",r)),y(!r.search||!r.search.includes("#"),V("#","search","hash",r)));let a,s=""===e||""===r.pathname,i=s?"/":r.pathname;if(null==i)a=n;else{let e=t.length-1;if(!o&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:o="",hash:a=""}="string"===typeof e?S(e):e;return r?(r=r.replace(/\/\/+/g,"/"),t=r.startsWith("/")?G(r.substring(1),"/"):G(r,n)):t=n,{pathname:t,search:Y(o),hash:X(a)}}(r,a),u=i&&"/"!==i&&i.endsWith("/"),d=(s||"."===i)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var J=e=>e.join("/").replace(/\/\/+/g,"/"),Q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var Z=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function ee(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function te(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ne="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function re(e,t){let n=e;if("string"!==typeof n||!W.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,o=!1;if(ne)try{let e=new URL(window.location.href),r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),a=H(r.pathname,t);r.origin===e.origin&&null!=a?n=a+r.search+r.hash:o=!0}catch(a){b(!1,'<Link to="'.concat(n,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:r,isExternal:o,to:n}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oe=["POST","PUT","PATCH","DELETE"],ae=(new Set(oe),["GET",...oe]);new Set(ae),Symbol("ResetLoaderData");var se=e.createContext(null);se.displayName="DataRouter";var ie=e.createContext(null);ie.displayName="DataRouterState";var le=e.createContext(!1);function ce(){return e.useContext(le)}var ue=e.createContext({isTransitioning:!1});ue.displayName="ViewTransition";var de=e.createContext(new Map);de.displayName="Fetchers";var he=e.createContext(null);he.displayName="Await";var fe=e.createContext(null);fe.displayName="Navigation";var pe=e.createContext(null);pe.displayName="Location";var me=e.createContext({outlet:null,matches:[],isDataRoute:!1});me.displayName="Route";var ge=e.createContext(null);ge.displayName="RouteError";var ve="REACT_ROUTER_ERROR";function ye(){return null!=e.useContext(pe)}function be(){return y(ye(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(pe).location}var we="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xe(t){e.useContext(fe).static||e.useLayoutEffect(t)}function ke(){let{isDataRoute:t}=e.useContext(me);return t?function(){let{router:t}=Pe("useNavigate"),n=Ie("useNavigate"),r=e.useRef(!1);xe(()=>{r.current=!0});let o=e.useCallback(async function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(r.current,we),r.current&&("number"===typeof e?await t.navigate(e):await t.navigate(e,c({fromRouteId:n},o)))},[t,n]);return o}():function(){y(ye(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(se),{basename:n,navigator:r}=e.useContext(fe),{matches:o}=e.useContext(me),{pathname:a}=be(),s=JSON.stringify(K(o)),i=e.useRef(!1);xe(()=>{i.current=!0});let l=e.useCallback(function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(i.current,we),!i.current)return;if("number"===typeof e)return void r.go(e);let l=$(e,JSON.parse(s),a,"path"===o.relative);null==t&&"/"!==n&&(l.pathname="/"===l.pathname?n:J([n,l.pathname])),(o.replace?r.replace:r.push)(l,o.state,o)},[n,r,s,a,t]);return l}()}e.createContext(null);function Se(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(me),{pathname:o}=be(),a=JSON.stringify(K(r));return e.useMemo(()=>$(t,JSON.parse(a),o,"path"===n),[t,a,o,n])}function Ce(t,n,r,o,a){y(ye(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=e.useContext(fe),{matches:i}=e.useContext(me),l=i[i.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";ze(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=be();if(n){var g;let e="string"===typeof n?S(n):n;y("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let v=p.pathname||"/",w=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=E(t,{pathname:w});b(f||null!=x,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),b(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let k=_e(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:J([h,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:J([h,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),i,r,o,a);return n&&k?e.createElement(pe.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},k):k}function Ne(){let t=Le(),n=ee(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o},s={padding:"2px 4px",backgroundColor:o},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:s},"ErrorBoundary")," or"," ",e.createElement("code",{style:s},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,i)}var Ee=e.createElement(Ne,null),Re=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let t=this.state.error;if(this.context&&"object"===typeof t&&t&&"digest"in t&&"string"===typeof t.digest){const e=function(e){if(e.startsWith("".concat(ve,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new Z(t.status,t.statusText,t.data)}catch(t){}}(t.digest);e&&(t=e)}let n=void 0!==t?e.createElement(me.Provider,{value:this.props.routeContext},e.createElement(ge.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?e.createElement(je,{error:t},n):n}};Re.contextType=le;var Oe=new WeakMap;function je(t){let{children:n,error:r}=t,{basename:o}=e.useContext(fe);if("object"===typeof r&&r&&"digest"in r&&"string"===typeof r.digest){let t=function(e){if(e.startsWith("".concat(ve,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(r.digest);if(t){let n=Oe.get(r);if(n)throw n;let a=re(t.location,o);if(ne&&!Oe.get(r)){if(!a.isExternal&&!t.reloadDocument){const e=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:t.replace}));throw Oe.set(r,e),e}window.location.href=a.absoluteURL||a.to}return e.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(a.absoluteURL||a.to)})}}return n}function Te(t){let{routeContext:n,match:r,children:o}=t,a=e.useContext(se);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(me.Provider,{value:n},o)}function _e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let a=t,s=null===r||void 0===r?void 0:r.errors;if(null!=s){let e=a.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));y(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let i=!1,l=-1;if(r)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,o=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||o){i=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}let c=r&&o?(e,t)=>{var n,a;o(e,{location:r.location,params:null!==(n=null===(a=r.matches)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.params)&&void 0!==n?n:{},unstable_pattern:te(r.matches),errorInfo:t})}:void 0;return a.reduceRight((t,o,u)=>{let d,h=!1,f=null,p=null;r&&(d=s&&o.route.id?s[o.route.id]:void 0,f=o.route.errorElement||Ee,i&&(l<0&&0===u?(ze("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===u&&(h=!0,p=o.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,u+1)),g=()=>{let n;return n=d?f:h?p:o.route.Component?e.createElement(o.route.Component,null):o.route.element?o.route.element:t,e.createElement(Te,{match:o,routeContext:{outlet:t,matches:m,isDataRoute:null!=r},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===u)?e.createElement(Re,{location:r.location,revalidation:r.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}function Ae(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Pe(t){let n=e.useContext(se);return y(n,Ae(t)),n}function Me(t){let n=e.useContext(ie);return y(n,Ae(t)),n}function Ie(t){let n=function(t){let n=e.useContext(me);return y(n,Ae(t)),n}(t),r=n.matches[n.matches.length-1];return y(r.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),r.route.id}function Le(){var t;let n=e.useContext(ge),r=Me("useRouteError"),o=Ie("useRouteError");return void 0!==n?n:null===(t=r.errors)||void 0===t?void 0:t[o]}var De={};function ze(e,t,n){t||De[e]||(De[e]=!0,b(!1,n))}var Fe={};function Be(e,t){e||Fe[t]||(Fe[t]=!0,console.warn(t))}t.useOptimistic;e.memo(function(e){let{routes:t,future:n,state:r,onError:o}=e;return Ce(t,void 0,r,o,n)});function Ue(e){y(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function He(t){let{basename:n="/",children:r=null,location:o,navigationType:a="POP",navigator:s,static:i=!1,unstable_useTransitions:l}=t;y(!ye(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=e.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:l,future:{}}),[c,s,i,l]);"string"===typeof o&&(o=S(o));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=o,g=e.useMemo(()=>{let e=H(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:p,key:m},navigationType:a}},[c,d,h,f,p,m,a]);return b(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:e.createElement(fe.Provider,{value:u},e.createElement(pe.Provider,{children:r,value:g}))}function We(e){let{children:t,location:n}=e;return Ce(Ge(t),n)}e.Component;function Ge(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,(t,o)=>{if(!e.isValidElement(t))return;let a=[...n,o];if(t.type===e.Fragment)return void r.push.apply(r,Ge(t.props.children,a));y(t.type===Ue,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),y(!t.props.index||!t.props.children,"An index route cannot have child routes.");let s={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(s.children=Ge(t.props.children,a)),r.push(s)}),r}var Ve="get",qe="application/x-www-form-urlencoded";function Ke(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}function $e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var Je=null;var Qe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ye(e){return null==e||Qe.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(qe,'"')),null)}function Xe(e,t){let n,r,o,a,s;if(Ke(i=e)&&"form"===i.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?H(s,t):null,n=e.getAttribute("method")||Ve,o=Ye(e.getAttribute("enctype"))||qe,a=new FormData(e)}else if(function(e){return Ke(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ke(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||s.getAttribute("action");if(r=i?H(i,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Ve,o=Ye(e.getAttribute("formenctype"))||Ye(s.getAttribute("enctype"))||qe,a=new FormData(s,e),!function(){if(null===Je)try{new FormData(document.createElement("form"),0),Je=!1}catch(e){Je=!0}return Je}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";a.append("".concat(e,"x"),"0"),a.append("".concat(e,"y"),"0")}else t&&a.append(t,r)}}else{if(Ke(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ve,r=null,o=qe,s=e}var i;return a&&"text/plain"===o&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ze(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function et(e,t,n,r){let o="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return n?o.pathname.endsWith("/")?o.pathname="".concat(o.pathname,"_.").concat(r):o.pathname="".concat(o.pathname,".").concat(r):"/"===o.pathname?o.pathname="_root.".concat(r):t&&"/"===H(o.pathname,t)?o.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(r):o.pathname="".concat(o.pathname.replace(/\/$/,""),".").concat(r),o}async function tt(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nt(e){return null!=e&&"string"===typeof e.page}function rt(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function ot(e,t,n,r,o,a){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,i=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>s(e,t)||i(e,t)):"data"===a?t.filter((t,a)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,a)||i(t,a))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function at(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1),[...new Set(r)];var r}function st(e,t){let n=new Set,r=new Set(t);return e.reduce((e,o)=>{if(t&&!nt(o)&&"script"===o.as&&o.href&&r.has(o.href))return e;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(o));return n.has(a)||(n.add(a),e.push({key:a,link:o})),e},[])}function it(e,t){return"lazy"===e.mode&&!0===t}function lt(){let t=e.useContext(se);return Ze(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ct(){let t=e.useContext(ie);return Ze(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ut=e.createContext(void 0);function dt(){let t=e.useContext(ut);return Ze(t,"You must render this element inside a <HydratedRouter> element"),t}function ht(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ft(e,t,n){if(n&&!vt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}ut.displayName="FrameworkContext";function pt(t){let{page:n}=t,r=o(t,d),{router:a}=lt(),s=e.useMemo(()=>E(a.routes,n,a.basename),[a.routes,n,a.basename]);return s?e.createElement(gt,c({page:n,matches:s},r)):null}function mt(t){let{manifest:n,routeModules:r}=dt(),[o,a]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return st((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await tt(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(rt).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(t,n,r).then(t=>{e||a(t)}),()=>{e=!0}},[t,n,r]),o}function gt(t){let{page:n,matches:r}=t,a=o(t,h),s=be(),{future:i,manifest:l,routeModules:u}=dt(),{basename:d}=lt(),{loaderData:f,matches:p}=ct(),m=e.useMemo(()=>ot(n,r,p,l,s,"data"),[n,r,p,l,s]),g=e.useMemo(()=>ot(n,r,p,l,s,"assets"),[n,r,p,l,s]),v=e.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{var r;let o=l.routes[n.route.id];o&&o.hasLoader&&(!m.some(e=>e.route.id===n.route.id)&&n.route.id in f&&null!==(r=u[n.route.id])&&void 0!==r&&r.shouldRevalidate||o.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let o=et(n,d,i.unstable_trailingSlashAwareDataRequests,"data");return t&&e.size>0&&o.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[o.pathname+o.search]},[d,i.unstable_trailingSlashAwareDataRequests,f,s,l,m,r,n,u]),y=e.useMemo(()=>at(g,l),[g,l]),b=mt(g);return e.createElement(e.Fragment,null,v.map(t=>e.createElement("link",c({key:t,rel:"prefetch",as:"fetch",href:t},a))),y.map(t=>e.createElement("link",c({key:t,rel:"modulepreload",href:t},a))),b.map(t=>{var n;let{key:r,link:o}=t;return e.createElement("link",c(c({key:r,nonce:a.nonce},o),{},{crossOrigin:null!==(n=o.crossOrigin)&&void 0!==n?n:a.crossOrigin}))}))}var vt=!1;function yt(t){let{manifest:n,serverHandoffString:r,isSpaMode:a,renderMeta:s,routeDiscovery:i,ssr:l}=dt(),{router:d,static:h,staticContext:f}=lt(),{matches:p}=ct(),m=ce(),g=it(i,l);s&&(s.didRenderScripts=!0);let v=ft(p,null,a);e.useEffect(()=>{0},[]);let y=e.useMemo(()=>{var a;if(m)return null;let s=f?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",i=h?"".concat(null!==n.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(v.map((e,t)=>{let r="route".concat(t),o=n.routes[e.route.id];Ze(o,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:a,clientLoaderModule:s,clientMiddlewareModule:i,hydrateFallbackModule:l,module:c}=o,u=[...a?[{module:a,varName:"".concat(r,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(r,"_clientLoader")}]:[],...i?[{module:i,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=o(e,u),a=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(s.pop();s.length>0;)i.push("/".concat(s.join("/"))),s.pop();i.forEach(e=>{let n=E(t.routes,e,t.basename);n&&n.forEach(e=>a.add(e.route.id))});let l=[...a].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:l,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",c(c({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:void 0})),e.createElement("script",c(c({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:"module",async:!0})))},[]),b=vt||m?[]:(n.entry.imports.concat(at(v,n,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let x="object"===typeof n.sri?n.sri:{};return Be(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),vt||m?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",c(c({},t),{},{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}})):null,g?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:x[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:x[n.entry.module],suppressHydrationWarning:!0}),b.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:x[n],suppressHydrationWarning:!0})),y)}function bt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}e.Component;function wt(t){let{error:n,isOutsideRemixApp:r}=t;console.error(n);let o,a=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ee(n))return e.createElement(xt,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),a);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(xt,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},o.stack),a)}function xt(t){var n;let{title:r,renderScripts:o,isOutsideRemixApp:a,children:s}=t,{routeModules:i}=dt();return null!==i.root&&void 0!==n&&n.Layout&&!a?s:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,o?e.createElement(yt,null):null)))}var kt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{kt&&(window.__reactRouterVersion="7.13.0")}catch(ig){}function St(t){let{basename:n,children:r,unstable_useTransitions:o,window:a}=t,s=e.useRef();null==s.current&&(s.current=v({window:a,v5Compat:!0}));let i=s.current,[l,c]=e.useState({action:i.action,location:i.location}),u=e.useCallback(t=>{!1===o?c(t):e.startTransition(()=>c(t))},[o]);return e.useLayoutEffect(()=>i.listen(u),[i,u]),e.createElement(He,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:i,unstable_useTransitions:o})}var Ct=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nt=e.forwardRef(function(t,n){let{onClick:r,discover:a="render",prefetch:s="none",relative:i,reloadDocument:l,replace:u,state:d,target:h,to:p,preventScrollReset:m,viewTransition:g,unstable_defaultShouldRevalidate:v}=t,b=o(t,f),{basename:w,unstable_useTransitions:x}=e.useContext(fe),S="string"===typeof p&&Ct.test(p),C=re(p,w);p=C.to;let N=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(ye(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:o}=e.useContext(fe),{hash:a,pathname:s,search:i}=Se(t,{relative:n}),l=s;return"/"!==r&&(l="/"===s?r:J([r,s])),o.createHref({pathname:l,search:i,hash:a})}(p,{relative:i}),[E,R,O]=function(t,n){let r=e.useContext(ut),[o,a]=e.useState(!1),[s,i]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&i(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(o){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[o]);let p=()=>{a(!0)},m=()=>{a(!1),i(!1)};return r?"intent"!==t?[s,f,{}]:[s,f,{onFocus:ht(l,p),onBlur:ht(c,m),onMouseEnter:ht(u,p),onMouseLeave:ht(d,m),onTouchStart:ht(h,p)}]:[!1,f,{}]}(s,b),j=function(t){let{target:n,replace:r,state:o,preventScrollReset:a,relative:s,viewTransition:i,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=ke(),d=be(),h=Se(t,{relative:s});return e.useCallback(f=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(f,n)){f.preventDefault();let n=void 0!==r?r:k(d)===k(h),p=()=>u(t,{replace:n,state:o,preventScrollReset:a,relative:s,viewTransition:i,unstable_defaultShouldRevalidate:l});c?e.startTransition(()=>p()):p()}},[d,u,h,r,o,n,t,a,s,i,l,c])}(p,{replace:u,state:d,target:h,preventScrollReset:m,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:x});let T=e.createElement("a",c(c(c({},b),O),{},{href:C.absoluteURL||N,onClick:C.isExternal||l?r:function(e){r&&r(e),e.defaultPrevented||j(e)},ref:bt(n,R),target:h,"data-discover":S||"render"!==a?void 0:"true"}));return E&&!S?e.createElement(e.Fragment,null,T,e.createElement(pt,{page:N})):T});Nt.displayName="Link";var Et=e.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:s="",end:i=!1,style:l,to:u,viewTransition:d,children:h}=t,f=o(t,p),m=Se(u,{relative:f.relative}),g=be(),v=e.useContext(ie),{navigator:b,basename:w}=e.useContext(fe),x=null!=v&&function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(ue);y(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=jt("useViewTransitionState"),a=Se(t,{relative:n});if(!r.isTransitioning)return!1;let s=H(r.currentLocation.pathname,o)||r.currentLocation.pathname,i=H(r.nextLocation.pathname,o)||r.nextLocation.pathname;return null!=F(a.pathname,i)||null!=F(a.pathname,s)}(m)&&!0===d,k=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,S=g.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(S=S.toLowerCase(),C=C?C.toLowerCase():null,k=k.toLowerCase()),C&&w&&(C=H(C,w)||C);const N="/"!==k&&k.endsWith("/")?k.length-1:k.length;let E,R=S===k||!i&&S.startsWith(k)&&"/"===S.charAt(N),O=null!=C&&(C===k||!i&&C.startsWith(k)&&"/"===C.charAt(k.length)),j={isActive:R,isPending:O,isTransitioning:x},T=R?r:void 0;E="function"===typeof s?s(j):[s,R?"active":null,O?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let _="function"===typeof l?l(j):l;return e.createElement(Nt,c(c({},f),{},{"aria-current":T,className:E,ref:n,style:_,to:u,viewTransition:d}),"function"===typeof h?h(j):h)});Et.displayName="NavLink";var Rt=e.forwardRef((t,n)=>{let{discover:r="render",fetcherKey:a,navigate:s,reloadDocument:i,replace:l,state:u,method:d=Ve,action:h,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:b}=t,w=o(t,m),{unstable_useTransitions:x}=e.useContext(fe),S=Pt(),C=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(fe),o=e.useContext(me);y(o,"useFormAction must be used inside a RouteContext");let[a]=o.matches.slice(-1),s=c({},Se(t||".",{relative:n})),i=be();if(null==t){s.search=i.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}t&&"."!==t||!a.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(s.pathname="/"===s.pathname?r:J([r,s.pathname]));return k(s)}(h,{relative:p}),N="get"===d.toLowerCase()?"get":"post",E="string"===typeof h&&Ct.test(h);return e.createElement("form",c(c({ref:n,method:N,action:C,onSubmit:i?f:t=>{if(f&&f(t),t.defaultPrevented)return;t.preventDefault();let n=t.nativeEvent.submitter,r=(null===n||void 0===n?void 0:n.getAttribute("formmethod"))||d,o=()=>S(n||t.currentTarget,{fetcherKey:a,method:r,navigate:s,replace:l,state:u,relative:p,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:b});x&&!1!==s?e.startTransition(()=>o()):o()}},w),{},{"data-discover":E||"render"!==r?void 0:"true"}))});function Ot(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function jt(t){let n=e.useContext(se);return y(n,Ot(t)),n}function Tt(t){b("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=e.useRef($e(t)),r=e.useRef(!1),o=be(),a=e.useMemo(()=>function(e,t){let n=$e(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(o.search,r.current?null:n.current),[o.search]),s=ke(),i=e.useCallback((e,t)=>{const n=$e("function"===typeof e?e(new URLSearchParams(a)):e);r.current=!0,s("?"+n,t)},[s,a]);return[a,i]}Rt.displayName="Form";var _t=0,At=()=>"__".concat(String(++_t),"__");function Pt(){let{router:t}=jt("useSubmit"),{basename:n}=e.useContext(fe),r=Ie("useRouteId"),o=t.fetch,a=t.navigate;return e.useCallback(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:i,encType:l,formData:c,body:u}=Xe(e,n);if(!1===t.navigate){let e=t.fetcherKey||At();await o(e,r,t.action||s,{unstable_defaultShouldRevalidate:t.unstable_defaultShouldRevalidate,preventScrollReset:t.preventScrollReset,formData:c,body:u,formMethod:t.method||i,formEncType:t.encType||l,flushSync:t.flushSync})}else await a(t.action||s,{unstable_defaultShouldRevalidate:t.unstable_defaultShouldRevalidate,preventScrollReset:t.preventScrollReset,formData:c,body:u,formMethod:t.method||i,formEncType:t.encType||l,replace:t.replace,state:t.state,fromRouteId:r,flushSync:t.flushSync,viewTransition:t.viewTransition})},[o,a,n,r])}var Mt=n(259),It=n.n(Mt);const Lt="Ably",Dt=e=>{if(!e||!e.includes("-"))return{valid:!1,channelId:null};const[t,...n]=e.split("-"),r=n.join("-");return"1"!==t?{valid:!1,channelId:null}:{valid:!0,channelId:r}};class zt{constructor(){this.client=null,this.channel=null,this.channelId=null,this.onMessageCallback=null,this.onStatusCallback=null,this.isConnected=!1,this.connectionState="disconnected"}async connect(e,t,n){const{valid:r,channelId:o}=Dt(e);if(!r||!o)throw new Error("Invalid channel key format");this.channelId=o,this.onMessageCallback=t,this.onStatusCallback=n;const a="yiabww.8C7e-g:Z8kQloqZVQBRW5TeFvF1fRNwsy_bCE63Sfg9EkjB41Q";try{this.updateStatus("connecting"),this.client=new(It().Realtime)({key:a,recover:(e,t)=>{t(!0)}}),await new Promise((e,t)=>{const n=setTimeout(()=>{t(new Error("Connection timeout"))},15e3);this.client.connection.on("connected",()=>{clearTimeout(n),e()}),this.client.connection.on("failed",e=>{var r;clearTimeout(n),t(new Error((null===(r=e.reason)||void 0===r?void 0:r.message)||"Connection failed"))})}),this.channel=this.client.channels.get("rally-".concat(o)),await this.channel.subscribe("update",e=>{var t;console.log("[WebSocket] Received update:",e.data),null===(t=this.onMessageCallback)||void 0===t||t.call(this,e.data)}),this.client.connection.on("disconnected",()=>{this.updateStatus("disconnected")}),this.client.connection.on("connected",()=>{this.updateStatus("connected")}),this.client.connection.on("suspended",()=>{this.updateStatus("suspended")}),this.client.connection.on("failed",()=>{this.updateStatus("failed")}),this.updateStatus("connected"),console.log("[WebSocket] Connected to channel: rally-".concat(o))}catch(s){throw this.updateStatus("error",s.message),s}}updateStatus(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.connectionState=e,this.isConnected="connected"===e,null===(t=this.onStatusCallback)||void 0===t||t.call(this,e,Lt,n)}async publish(e){if(!this.isConnected||!this.channel)return console.warn("[WebSocket] Not connected, cannot publish"),!1;try{return await this.channel.publish("update",e),console.log("[WebSocket] Published update"),!0}catch(t){return console.error("[WebSocket] Publish error:",t),!1}}disconnect(){this.client&&(this.client.close(),this.client=null,this.channel=null),this.updateStatus("disconnected"),console.log("[WebSocket] Disconnected")}getStatus(){return{isConnected:this.isConnected,connectionState:this.connectionState,provider:Lt,channelId:this.channelId}}}let Ft=null;var Bt=n(579);const Ut=(0,e.createContext)(),Ht=()=>{const t=(0,e.useContext)(Ut);if(!t)throw new Error("useRally must be used within RallyProvider");return t},Wt=(e,t)=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error("Error loading ".concat(e," from localStorage:"),n),t}},Gt=t=>{let{children:n}=t;const[r,o]=(0,e.useState)(()=>Wt("rally_pilots",[])),[a,s]=(0,e.useState)(()=>Wt("rally_categories",[])),[i,l]=(0,e.useState)(()=>Wt("rally_stages",[])),[u,d]=(0,e.useState)(()=>Wt("rally_times",{})),[h,f]=(0,e.useState)(()=>Wt("rally_arrival_times",{})),[p,m]=(0,e.useState)(()=>Wt("rally_start_times",{})),[g,v]=(0,e.useState)(()=>Wt("rally_current_stage",null)),[y,b]=(0,e.useState)(()=>Wt("rally_chroma_key","#000000")),[w,x]=(0,e.useState)(()=>Wt("rally_map_url","")),[k,S]=(0,e.useState)(()=>Wt("rally_stream_configs",{})),[C,N]=(0,e.useState)(()=>Wt("rally_global_audio",{volume:100,muted:!1})),[E,R]=(0,e.useState)(1),[O,j]=(0,e.useState)(()=>{const e=Wt("rally_data_version",Date.now());return"number"===typeof e?e:Date.now()}),[T,_]=(0,e.useState)(()=>Wt("rally_ws_enabled",!1)),[A,P]=(0,e.useState)(()=>Wt("rally_ws_channel_key","")),[M,I]=(0,e.useState)("disconnected"),[L,D]=(0,e.useState)(null),z=(0,e.useRef)(null),F=(0,e.useRef)(!1),B=(0,e.useCallback)(()=>{o(Wt("rally_pilots",[])),s(Wt("rally_categories",[])),l(Wt("rally_stages",[])),d(Wt("rally_times",{})),f(Wt("rally_arrival_times",{})),m(Wt("rally_start_times",{})),v(Wt("rally_current_stage",null)),b(Wt("rally_chroma_key","#000000")),x(Wt("rally_map_url","")),S(Wt("rally_stream_configs",{})),N(Wt("rally_global_audio",{volume:100,muted:!1}));const e=Wt("rally_data_version",Date.now());j("number"===typeof e?e:Date.now())},[]),U=(0,e.useCallback)(e=>{e&&(console.log("[RallyContext] Applying WebSocket data"),F.current=!0,e.pilots&&o(e.pilots),e.categories&&s(e.categories),e.stages&&l(e.stages),e.times&&d(e.times),e.arrivalTimes&&f(e.arrivalTimes),e.startTimes&&m(e.startTimes),void 0!==e.currentStageId&&v(e.currentStageId),e.chromaKey&&b(e.chromaKey),void 0!==e.mapUrl&&x(e.mapUrl),e.streamConfigs&&S(e.streamConfigs),e.globalAudio&&N(e.globalAudio),setTimeout(()=>{F.current=!1},100))},[]);(0,e.useEffect)(()=>{const e=()=>{B()};return window.addEventListener("rally-reload-data",e),()=>window.removeEventListener("rally-reload-data",e)},[B]);const H=(0,e.useCallback)(async()=>{var e;if(!T||null===(e=z.current)||void 0===e||!e.isConnected||F.current)return;const t={pilots:r,categories:a,stages:i,times:u,arrivalTimes:h,startTimes:p,currentStageId:g,chromaKey:y,mapUrl:w,streamConfigs:k,globalAudio:C,timestamp:Date.now()};await z.current.publish(t)},[T,r,a,i,u,h,p,g,y,w,k,C]),W=(0,e.useCallback)(async e=>{const{valid:t}=Dt(e);if(!t)return D("Invalid channel key format"),!1;try{return I("connecting"),D(null),z.current=(Ft||(Ft=new zt),Ft),await z.current.connect(e,e=>{U(e)},(e,t,n)=>{I(e),n&&D(n)}),P(e),localStorage.setItem("rally_ws_channel_key",JSON.stringify(e)),_(!0),localStorage.setItem("rally_ws_enabled",JSON.stringify(!0)),!0}catch(n){return I("error"),D(n.message),!1}},[U]),G=(0,e.useCallback)(()=>{z.current&&(z.current.disconnect(),z.current=null),I("disconnected"),_(!1),localStorage.setItem("rally_ws_enabled",JSON.stringify(!1))},[]),V=(0,e.useCallback)(()=>(()=>{const e=Math.random().toString(36).substring(2,10).toUpperCase();return"".concat("1","-").concat(e)})(),[]),q=(0,e.useCallback)(()=>{const e=Date.now();j(e),localStorage.setItem("rally_data_version",JSON.stringify(e))},[]);(0,e.useEffect)(()=>{var e;T&&null!==(e=z.current)&&void 0!==e&&e.isConnected&&H()},[O,T,H]),(0,e.useEffect)(()=>{localStorage.setItem("rally_pilots",JSON.stringify(r)),q()},[r]),(0,e.useEffect)(()=>{localStorage.setItem("rally_categories",JSON.stringify(a)),q()},[a]),(0,e.useEffect)(()=>{localStorage.setItem("rally_stages",JSON.stringify(i)),q()},[i]),(0,e.useEffect)(()=>{localStorage.setItem("rally_times",JSON.stringify(u)),q()},[u]),(0,e.useEffect)(()=>{localStorage.setItem("rally_arrival_times",JSON.stringify(h)),q()},[h]),(0,e.useEffect)(()=>{localStorage.setItem("rally_start_times",JSON.stringify(p)),q()},[p]),(0,e.useEffect)(()=>{localStorage.setItem("rally_current_stage",JSON.stringify(g)),q()},[g]),(0,e.useEffect)(()=>{localStorage.setItem("rally_chroma_key",JSON.stringify(y))},[y]),(0,e.useEffect)(()=>{localStorage.setItem("rally_map_url",JSON.stringify(w)),q()},[w]),(0,e.useEffect)(()=>{localStorage.setItem("rally_stream_configs",JSON.stringify(k)),q()},[k]),(0,e.useEffect)(()=>{localStorage.setItem("rally_global_audio",JSON.stringify(C)),q()},[C]);const K=e=>k[e]||{volume:100,muted:!1,solo:!1,saturation:100,contrast:100,brightness:100},$={pilots:r,categories:a,stages:i,times:u,arrivalTimes:h,startTimes:p,streamConfigs:k,globalAudio:C,currentStageId:g,chromaKey:y,mapUrl:w,currentScene:E,dataVersion:O,wsEnabled:T,wsChannelKey:A,wsConnectionStatus:M,wsError:L,setCurrentScene:R,setChromaKey:b,setMapUrl:x,setCurrentStageId:v,setGlobalAudio:N,addPilot:e=>{const t=c({id:Date.now().toString(),name:e.name,picture:e.picture||"",streamUrl:e.streamUrl||"",categoryId:e.categoryId||null,startOrder:e.startOrder||999,isActive:!1},e);o(e=>[...e,t])},updatePilot:(e,t)=>{o(n=>n.map(n=>n.id===e?c(c({},n),t):n))},deletePilot:e=>{o(t=>t.filter(t=>t.id!==e)),d(t=>{const n=c({},t);return delete n[e],n}),m(t=>{const n=c({},t);return delete n[e],n})},togglePilotActive:e=>{o(t=>t.map(t=>t.id===e?c(c({},t),{},{isActive:!t.isActive}):t))},addCategory:e=>{const t=c({id:Date.now().toString(),name:e.name,color:e.color||"#FF4500"},e);s(e=>[...e,t])},updateCategory:(e,t)=>{s(n=>n.map(n=>n.id===e?c(c({},n),t):n))},deleteCategory:e=>{s(t=>t.filter(t=>t.id!==e)),o(t=>t.map(t=>t.categoryId===e?c(c({},t),{},{categoryId:null}):t))},addStage:e=>{const t=c({id:Date.now().toString(),name:e.name,type:e.type||"SS",ssNumber:e.ssNumber||"",startTime:e.startTime||""},e);l(e=>[...e,t])},updateStage:(e,t)=>{l(n=>n.map(n=>n.id===e?c(c({},n),t):n))},deleteStage:e=>{l(t=>t.filter(t=>t.id!==e)),d(t=>{const n=c({},t);return Object.keys(n).forEach(t=>{n[t]&&delete n[t][e]}),n}),m(t=>{const n=c({},t);return Object.keys(n).forEach(t=>{n[t]&&delete n[t][e]}),n})},setTime:(e,t,n)=>{d(r=>c(c({},r),{},{[e]:c(c({},r[e]||{}),{},{[t]:n})}))},getTime:(e,t)=>{var n;return(null===(n=u[e])||void 0===n?void 0:n[t])||""},setArrivalTime:(e,t,n)=>{f(r=>c(c({},r),{},{[e]:c(c({},r[e]||{}),{},{[t]:n})}))},getArrivalTime:(e,t)=>{var n;return(null===(n=h[e])||void 0===n?void 0:n[t])||""},setStartTime:(e,t,n)=>{m(r=>c(c({},r),{},{[e]:c(c({},r[e]||{}),{},{[t]:n})}))},getStartTime:(e,t)=>{var n;return(null===(n=p[e])||void 0===n?void 0:n[t])||""},getStreamConfig:K,setStreamConfig:(e,t)=>{S(n=>c(c({},n),{},{[e]:c(c({},K(e)),t)}))},setSoloStream:e=>{const t=K(e);t.solo?S(n=>c(c({},n),{},{[e]:c(c({},t),{},{solo:!1})})):S(t=>{const n=c({},t);return Object.keys(n).forEach(e=>{n[e]&&(n[e]=c(c({},n[e]),{},{solo:!1}))}),n[e]=c(c({},K(e)),{},{solo:!0}),n})},exportData:()=>{const e={pilots:r,categories:a,stages:i,times:u,arrivalTimes:h,startTimes:p,streamConfigs:k,globalAudio:C,currentStageId:g,chromaKey:y,mapUrl:w,dataVersion:O,exportDate:(new Date).toISOString()};return JSON.stringify(e,null,2)},importData:e=>{try{const t=JSON.parse(e);return t.pilots&&o(t.pilots),t.categories&&s(t.categories),t.stages&&l(t.stages),t.times&&d(t.times),t.arrivalTimes&&f(t.arrivalTimes),t.startTimes&&m(t.startTimes),t.streamConfigs&&S(t.streamConfigs),t.globalAudio&&N(t.globalAudio),void 0!==t.currentStageId&&v(t.currentStageId),t.chromaKey&&b(t.chromaKey),void 0!==t.mapUrl&&x(t.mapUrl),q(),!0}catch(t){return console.error("Error importing data:",t),!1}},clearAllData:()=>{o([]),s([]),l([]),d({}),f({}),m({}),S({}),N({volume:100,muted:!1}),v(null),b("#000000"),x(""),q()},reloadData:B,connectWebSocket:W,disconnectWebSocket:G,generateNewChannelKey:V};return(0,Bt.jsx)(Ut.Provider,{value:$,children:n})};function Vt(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function qt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=Vt(t,e);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():Vt(t[e],null)}}}}function Kt(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useCallback(qt(...n),n)}const $t=["children"],Jt=["children"];var Qt=Symbol.for("react.lazy"),Yt=t[" use ".trim().toString()];function Xt(e){return null!=e&&"object"===typeof e&&"$$typeof"in e&&e.$$typeof===Qt&&"_payload"in e&&("object"===typeof(t=e._payload)&&null!==t&&"then"in t);var t}function Zt(t){const n=tn(t),r=e.forwardRef((t,r)=>{let{children:a}=t,s=o(t,$t);Xt(a)&&"function"===typeof Yt&&(a=Yt(a._payload));const i=e.Children.toArray(a),l=i.find(rn);if(l){const t=l.props.children,o=i.map(n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,o):null}))}return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}var en=Zt("Slot");function tn(t){const n=e.forwardRef((t,n)=>{let{children:r}=t,a=o(t,Jt);if(Xt(r)&&"function"===typeof Yt&&(r=Yt(r._payload)),e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=c({},t);for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){const e=a(...arguments);return o(...arguments),e}:o&&(n[r]=o):"style"===r?n[r]=c(c({},o),a):"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return c(c({},e),n)}(a,r.props);return r.type!==e.Fragment&&(o.ref=n?qt(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var nn=Symbol("radix.slottable");function rn(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===nn}function on(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=on(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function an(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=on(e))&&(r&&(r+=" "),r+=t);return r}const sn=["class","className"],ln=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,cn=an,un=(e,t)=>n=>{var r;if(null==(null===t||void 0===t?void 0:t.variants))return cn(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:a,defaultVariants:s}=t,i=Object.keys(a).map(e=>{const t=null===n||void 0===n?void 0:n[e],r=null===s||void 0===s?void 0:s[e];if(null===t)return null;const o=ln(t)||ln(r);return a[e][o]}),l=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),u=null===t||void 0===t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r}=t,a=o(t,sn);return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes(c(c({},s),l)[t]):c(c({},s),l)[t]===n})?[...e,n,r]:e},[]);return cn(e,i,u,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)},dn=function(){return{nextPart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,validators:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,classGroupId:arguments.length>2?arguments[2]:void 0}},hn="-",fn=[],pn=e=>{const t=vn(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return gn(e);const n=e.split(hn),r=""===n[0]&&n.length>1?1:0;return mn(n,r,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=r[e],o=n[e];return t?o?((e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n})(o,t):t:o||fn}return n[e]||fn}}},mn=(e,t,n)=>{if(0===e.length-t)return n.classGroupId;const r=e[t],o=n.nextPart.get(r);if(o){const n=mn(e,t+1,o);if(n)return n}const a=n.validators;if(null===a)return;const s=0===t?e.join(hn):e.slice(t).join(hn),i=a.length;for(let l=0;l<i;l++){const e=a[l];if(e.validator(s))return e.classGroupId}},gn=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?"arbitrary.."+r:void 0})(),vn=e=>{const{theme:t,classGroups:n}=e;return yn(n,t)},yn=(e,t)=>{const n=dn();for(const r in e){const o=e[r];bn(o,n,r,t)}return n},bn=(e,t,n,r)=>{const o=e.length;for(let a=0;a<o;a++){const o=e[a];wn(o,t,n,r)}},wn=(e,t,n,r)=>{"string"!==typeof e?"function"!==typeof e?Sn(e,t,n,r):kn(e,t,n,r):xn(e,t,n)},xn=(e,t,n)=>{(""===e?t:Cn(t,e)).classGroupId=n},kn=(e,t,n,r)=>{Nn(e)?bn(e(r),t,n,r):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(n,e)))},Sn=(e,t,n,r)=>{const o=Object.entries(e),a=o.length;for(let s=0;s<a;s++){const[e,a]=o[s];bn(a,Cn(t,e),n,r)}},Cn=(e,t)=>{let n=e;const r=t.split(hn),o=r.length;for(let a=0;a<o;a++){const e=r[a];let t=n.nextPart.get(e);t||(t=dn(),n.nextPart.set(e,t)),n=t}return n},Nn=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,En=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const o=(o,a)=>{n[o]=a,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(e){let t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(o(e,t),t):void 0},set(e,t){e in n?n[e]=t:o(e,t)}}},Rn=[],On=(e,t,n,r,o)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:o}),jn=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,o=0,a=0;const s=e.length;for(let u=0;u<s;u++){const s=e[u];if(0===r&&0===o){if(":"===s){t.push(e.slice(a,u)),a=u+1;continue}if("/"===s){n=u;continue}}"["===s?r++:"]"===s?r--:"("===s?o++:")"===s&&o--}const i=0===t.length?e:e.slice(a);let l=i,c=!1;i.endsWith("!")?(l=i.slice(0,-1),c=!0):i.startsWith("!")&&(l=i.slice(1),c=!0);return On(t,c,l,n&&n>a?n-a:void 0)};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.slice(e.length)):On(Rn,!1,t,void 0,!0)}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},Tn=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let r=[];for(let o=0;o<e.length;o++){const a=e[o],s="["===a[0],i=t.has(a);s||i?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(a)):r.push(a)}return r.length>0&&(r.sort(),n.push(...r)),n}},_n=/\s+/,An=e=>{if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=An(e[r]))&&(n&&(n+=" "),n+=t);return n},Pn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let o,a,s,i;const l=e=>{const t=a(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:a}=t,s=[],i=e.trim().split(_n);let l="";for(let c=i.length-1;c>=0;c-=1){const e=i[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let p=!!f,m=r(p?h.substring(0,f):h);if(!m){if(!p){l=e+(l.length>0?" "+l:l);continue}if(m=r(h),!m){l=e+(l.length>0?" "+l:l);continue}p=!1}const g=0===u.length?"":1===u.length?u[0]:a(u).join(":"),v=d?g+"!":g,y=v+m;if(s.indexOf(y)>-1)continue;s.push(y);const b=o(m,p);for(let n=0;n<b.length;++n){const e=b[n];s.push(v+e)}l=e+(l.length>0?" "+l:l)}return l})(e,o);return s(e,n),n};return i=t=>{const r=n.reduce((e,t)=>t(e),e());return o=(e=>c({cache:En(e.cacheSize),parseClassName:jn(e),sortModifiers:Tn(e)},pn(e)))(r),a=o.cache.get,s=o.cache.set,i=l,l(t)},function(){return i(function(){let e,t,n=0,r="";for(;n<arguments.length;){var o;(e=(o=n++)<0||arguments.length<=o?void 0:arguments[o])&&(t=An(e))&&(r&&(r+=" "),r+=t)}return r}(...arguments))}},Mn=[],In=e=>{const t=t=>t[e]||Mn;return t.isThemeGetter=!0,t},Ln=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Dn=/^\((?:(\w[\w-]*):)?(.+)\)$/i,zn=/^\d+\/\d+$/,Fn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Bn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Un=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Hn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Wn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gn=e=>zn.test(e),Vn=e=>!!e&&!Number.isNaN(Number(e)),qn=e=>!!e&&Number.isInteger(Number(e)),Kn=e=>e.endsWith("%")&&Vn(e.slice(0,-1)),$n=e=>Fn.test(e),Jn=()=>!0,Qn=e=>Bn.test(e)&&!Un.test(e),Yn=()=>!1,Xn=e=>Hn.test(e),Zn=e=>Wn.test(e),er=e=>!nr(e)&&!lr(e),tr=e=>mr(e,br,Yn),nr=e=>Ln.test(e),rr=e=>mr(e,wr,Qn),or=e=>mr(e,xr,Vn),ar=e=>mr(e,vr,Yn),sr=e=>mr(e,yr,Zn),ir=e=>mr(e,Sr,Xn),lr=e=>Dn.test(e),cr=e=>gr(e,wr),ur=e=>gr(e,kr),dr=e=>gr(e,vr),hr=e=>gr(e,br),fr=e=>gr(e,yr),pr=e=>gr(e,Sr,!0),mr=(e,t,n)=>{const r=Ln.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},gr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Dn.exec(e);return!!r&&(r[1]?t(r[1]):n)},vr=e=>"position"===e||"percentage"===e,yr=e=>"image"===e||"url"===e,br=e=>"length"===e||"size"===e||"bg-size"===e,wr=e=>"length"===e,xr=e=>"number"===e,kr=e=>"family-name"===e,Sr=e=>"shadow"===e,Cr=(Symbol.toStringTag,()=>{const e=In("color"),t=In("font"),n=In("text"),r=In("font-weight"),o=In("tracking"),a=In("leading"),s=In("breakpoint"),i=In("container"),l=In("spacing"),c=In("radius"),u=In("shadow"),d=In("inset-shadow"),h=In("text-shadow"),f=In("drop-shadow"),p=In("blur"),m=In("perspective"),g=In("aspect"),v=In("ease"),y=In("animate"),b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",lr,nr],w=()=>[lr,nr,l],x=()=>[Gn,"full","auto",...w()],k=()=>[qn,"none","subgrid",lr,nr],S=()=>["auto",{span:["full",qn,lr,nr]},qn,lr,nr],C=()=>[qn,"auto",lr,nr],N=()=>["auto","min","max","fr",lr,nr],E=()=>["auto",...w()],R=()=>[Gn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...w()],O=()=>[e,lr,nr],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",dr,ar,{position:[lr,nr]}],T=()=>["auto","cover","contain",hr,tr,{size:[lr,nr]}],_=()=>[Kn,cr,rr],A=()=>["","none","full",c,lr,nr],P=()=>["",Vn,cr,rr],M=()=>[Vn,Kn,dr,ar],I=()=>["","none",p,lr,nr],L=()=>["none",Vn,lr,nr],D=()=>["none",Vn,lr,nr],z=()=>[Vn,lr,nr],F=()=>[Gn,"full",...w()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[$n],breakpoint:[$n],color:[Jn],container:[$n],"drop-shadow":[$n],ease:["in","out","in-out"],font:[er],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[$n],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[$n],shadow:[$n],spacing:["px",Vn],text:[$n],"text-shadow":[$n],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Gn,nr,lr,g]}],container:["container"],columns:[{columns:[Vn,nr,lr,i]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:x()}],"inset-x":[{"inset-x":x()}],"inset-y":[{"inset-y":x()}],start:[{start:x()}],end:[{end:x()}],top:[{top:x()}],right:[{right:x()}],bottom:[{bottom:x()}],left:[{left:x()}],visibility:["visible","invisible","collapse"],z:[{z:[qn,"auto",lr,nr]}],basis:[{basis:[Gn,"full","auto",i,...w()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Vn,Gn,"auto","initial","none",nr]}],grow:[{grow:["",Vn,lr,nr]}],shrink:[{shrink:["",Vn,lr,nr]}],order:[{order:[qn,"first","last","none",lr,nr]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:S()}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:S()}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:E()}],mx:[{mx:E()}],my:[{my:E()}],ms:[{ms:E()}],me:[{me:E()}],mt:[{mt:E()}],mr:[{mr:E()}],mb:[{mb:E()}],ml:[{ml:E()}],"space-x":[{"space-x":w()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":w()}],"space-y-reverse":["space-y-reverse"],size:[{size:R()}],w:[{w:[i,"screen",...R()]}],"min-w":[{"min-w":[i,"screen","none",...R()]}],"max-w":[{"max-w":[i,"screen","none","prose",{screen:[s]},...R()]}],h:[{h:["screen","lh",...R()]}],"min-h":[{"min-h":["screen","lh","none",...R()]}],"max-h":[{"max-h":["screen","lh",...R()]}],"font-size":[{text:["base",n,cr,rr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,lr,or]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Kn,nr]}],"font-family":[{font:[ur,nr,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,lr,nr]}],"line-clamp":[{"line-clamp":[Vn,"none",lr,or]}],leading:[{leading:[a,...w()]}],"list-image":[{"list-image":["none",lr,nr]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",lr,nr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[Vn,"from-font","auto",lr,rr]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[Vn,"auto",lr,nr]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",lr,nr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",lr,nr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:j()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:T()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},qn,lr,nr],radial:["",lr,nr],conic:[qn,lr,nr]},fr,sr]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:_()}],"gradient-via-pos":[{via:_()}],"gradient-to-pos":[{to:_()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:A()}],"rounded-s":[{"rounded-s":A()}],"rounded-e":[{"rounded-e":A()}],"rounded-t":[{"rounded-t":A()}],"rounded-r":[{"rounded-r":A()}],"rounded-b":[{"rounded-b":A()}],"rounded-l":[{"rounded-l":A()}],"rounded-ss":[{"rounded-ss":A()}],"rounded-se":[{"rounded-se":A()}],"rounded-ee":[{"rounded-ee":A()}],"rounded-es":[{"rounded-es":A()}],"rounded-tl":[{"rounded-tl":A()}],"rounded-tr":[{"rounded-tr":A()}],"rounded-br":[{"rounded-br":A()}],"rounded-bl":[{"rounded-bl":A()}],"border-w":[{border:P()}],"border-w-x":[{"border-x":P()}],"border-w-y":[{"border-y":P()}],"border-w-s":[{"border-s":P()}],"border-w-e":[{"border-e":P()}],"border-w-t":[{"border-t":P()}],"border-w-r":[{"border-r":P()}],"border-w-b":[{"border-b":P()}],"border-w-l":[{"border-l":P()}],"divide-x":[{"divide-x":P()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":P()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[Vn,lr,nr]}],"outline-w":[{outline:["",Vn,cr,rr]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",u,pr,ir]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",d,pr,ir]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[Vn,rr]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":P()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",h,pr,ir]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[Vn,lr,nr]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Vn]}],"mask-image-linear-from-pos":[{"mask-linear-from":M()}],"mask-image-linear-to-pos":[{"mask-linear-to":M()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":M()}],"mask-image-t-to-pos":[{"mask-t-to":M()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":M()}],"mask-image-r-to-pos":[{"mask-r-to":M()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":M()}],"mask-image-b-to-pos":[{"mask-b-to":M()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":M()}],"mask-image-l-to-pos":[{"mask-l-to":M()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":M()}],"mask-image-x-to-pos":[{"mask-x-to":M()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":M()}],"mask-image-y-to-pos":[{"mask-y-to":M()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[lr,nr]}],"mask-image-radial-from-pos":[{"mask-radial-from":M()}],"mask-image-radial-to-pos":[{"mask-radial-to":M()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[Vn]}],"mask-image-conic-from-pos":[{"mask-conic-from":M()}],"mask-image-conic-to-pos":[{"mask-conic-to":M()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:j()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:T()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",lr,nr]}],filter:[{filter:["","none",lr,nr]}],blur:[{blur:I()}],brightness:[{brightness:[Vn,lr,nr]}],contrast:[{contrast:[Vn,lr,nr]}],"drop-shadow":[{"drop-shadow":["","none",f,pr,ir]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",Vn,lr,nr]}],"hue-rotate":[{"hue-rotate":[Vn,lr,nr]}],invert:[{invert:["",Vn,lr,nr]}],saturate:[{saturate:[Vn,lr,nr]}],sepia:[{sepia:["",Vn,lr,nr]}],"backdrop-filter":[{"backdrop-filter":["","none",lr,nr]}],"backdrop-blur":[{"backdrop-blur":I()}],"backdrop-brightness":[{"backdrop-brightness":[Vn,lr,nr]}],"backdrop-contrast":[{"backdrop-contrast":[Vn,lr,nr]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Vn,lr,nr]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Vn,lr,nr]}],"backdrop-invert":[{"backdrop-invert":["",Vn,lr,nr]}],"backdrop-opacity":[{"backdrop-opacity":[Vn,lr,nr]}],"backdrop-saturate":[{"backdrop-saturate":[Vn,lr,nr]}],"backdrop-sepia":[{"backdrop-sepia":["",Vn,lr,nr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",lr,nr]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Vn,"initial",lr,nr]}],ease:[{ease:["linear","initial",v,lr,nr]}],delay:[{delay:[Vn,lr,nr]}],animate:[{animate:["none",y,lr,nr]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,lr,nr]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:L()}],"rotate-x":[{"rotate-x":L()}],"rotate-y":[{"rotate-y":L()}],"rotate-z":[{"rotate-z":L()}],scale:[{scale:D()}],"scale-x":[{"scale-x":D()}],"scale-y":[{"scale-y":D()}],"scale-z":[{"scale-z":D()}],"scale-3d":["scale-3d"],skew:[{skew:z()}],"skew-x":[{"skew-x":z()}],"skew-y":[{"skew-y":z()}],transform:[{transform:[lr,nr,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:F()}],"translate-x":[{"translate-x":F()}],"translate-y":[{"translate-y":F()}],"translate-z":[{"translate-z":F()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",lr,nr]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",lr,nr]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[Vn,cr,rr,or]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),Nr=Pn(Cr);function Er(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Nr(an(t))}const Rr=["className","variant","size","asChild"],Or=un("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),jr=e.forwardRef((e,t)=>{let{className:n,variant:r,size:a,asChild:s=!1}=e,i=o(e,Rr);const l=s?en:"button";return(0,Bt.jsx)(l,c({className:Er(Or({variant:r,size:a,className:n})),ref:t},i))});jr.displayName="Button";const Tr=["className","type"],_r=e.forwardRef((e,t)=>{let{className:n,type:r}=e,a=o(e,Tr);return(0,Bt.jsx)("input",c({type:r,className:Er("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t},a))});_r.displayName="Input";const Ar=["className"],Pr=["className"],Mr=["className"],Ir=["className"],Lr=["className"],Dr=["className"],zr=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Ar);return(0,Bt.jsx)("div",c({ref:t,className:Er("rounded-xl border bg-card text-card-foreground shadow",n)},r))});zr.displayName="Card";const Fr=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Pr);return(0,Bt.jsx)("div",c({ref:t,className:Er("flex flex-col space-y-1.5 p-6",n)},r))});Fr.displayName="CardHeader";const Br=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Mr);return(0,Bt.jsx)("div",c({ref:t,className:Er("font-semibold leading-none tracking-tight",n)},r))});Br.displayName="CardTitle";const Ur=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Ir);return(0,Bt.jsx)("div",c({ref:t,className:Er("text-sm text-muted-foreground",n)},r))});Ur.displayName="CardDescription";const Hr=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Lr);return(0,Bt.jsx)("div",c({ref:t,className:Er("p-6 pt-0",n)},r))});Hr.displayName="CardContent";e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Dr);return(0,Bt.jsx)("div",c({ref:t,className:Er("flex items-center p-6 pt-0",n)},r))}).displayName="CardFooter";"undefined"===typeof window||!window.document||window.document.createElement;function Wr(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(null===e||void 0===e||e(r),!1===n||!r.defaultPrevented)return null===t||void 0===t?void 0:t(r)}}const Gr=["children"],Vr=["scope","children"];function qr(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];const a=()=>{const n=r.map(t=>e.createContext(t));return function(r){const o=(null===r||void 0===r?void 0:r[t])||n;return e.useMemo(()=>({["__scope".concat(t)]:c(c({},r),{},{[t]:o})}),[r,o])}};return a.scopeName=t,[function(n,a){const s=e.createContext(a),i=r.length;r=[...r,a];const l=n=>{var r;const{scope:a,children:l}=n,c=o(n,Vr),u=(null===a||void 0===a||null===(r=a[t])||void 0===r?void 0:r[i])||s,d=e.useMemo(()=>c,Object.values(c));return(0,Bt.jsx)(u.Provider,{value:d,children:l})};return l.displayName=n+"Provider",[l,function(r,o){var l;const c=(null===o||void 0===o||null===(l=o[t])||void 0===l?void 0:l[i])||s,u=e.useContext(c);if(u)return u;if(void 0!==a)return a;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},Kr(a,...n)]}function Kr(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n[0];if(1===n.length)return o;const a=()=>{const t=n.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(n){const r=t.reduce((e,t)=>{let{useScope:r,scopeName:o}=t;const a=r(n)["__scope".concat(o)];return c(c({},e),a)},{});return e.useMemo(()=>({["__scope".concat(o.scopeName)]:r}),[r])}};return a.scopeName=o.scopeName,a}function $r(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function Jr(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Qr(e,t){return e.get(Jr(e,t))}function Yr(e,t,n){return e.set(Jr(e,t),n),n}const Xr=["children"],Zr=["children"];function eo(t){const n=to(t),r=e.forwardRef((t,r)=>{const{children:a}=t,s=o(t,Xr),i=e.Children.toArray(a),l=i.find(oo);if(l){const t=l.props.children,o=i.map(n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,o):null}))}return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}function to(t){const n=e.forwardRef((t,n)=>{const{children:r}=t,a=o(t,Zr);if(e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=c({},t);for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){const e=a(...arguments);return o(...arguments),e}:o&&(n[r]=o):"style"===r?n[r]=c(c({},o),a):"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return c(c({},e),n)}(a,r.props);return r.type!==e.Fragment&&(o.ref=n?qt(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var no=Symbol("radix.slottable");var ro;function oo(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===no}const ao=["scope","children"];function so(t){const n=t+"CollectionProvider",[r,a]=qr(n),[s,i]=r(n,{collectionRef:{current:null},itemMap:new Map}),l=t=>{const{scope:n,children:r}=t,o=e.useRef(null),a=e.useRef(new Map).current;return(0,Bt.jsx)(s,{scope:n,itemMap:a,collectionRef:o,children:r})};l.displayName=n;const u=t+"CollectionSlot",d=eo(u),h=e.forwardRef((e,t)=>{const{scope:n,children:r}=e,o=Kt(t,i(u,n).collectionRef);return(0,Bt.jsx)(d,{ref:o,children:r})});h.displayName=u;const f=t+"CollectionItemSlot",p="data-radix-collection-item",m=eo(f),g=e.forwardRef((t,n)=>{const{scope:r,children:a}=t,s=o(t,ao),l=e.useRef(null),u=Kt(n,l),d=i(f,r);return e.useEffect(()=>(d.itemMap.set(l,c({ref:l},s)),()=>{d.itemMap.delete(l)})),(0,Bt.jsx)(m,c(c({},{[p]:""}),{},{ref:u,children:a}))});return g.displayName=f,[{Provider:l,Slot:h,ItemSlot:g},function(n){const r=i(t+"CollectionConsumer",n),o=e.useCallback(()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(p,"]"))),n=Array.from(r.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return n},[r.collectionRef,r.itemMap]);return o},a]}var io=new WeakMap;ro=new WeakMap,Map;function lo(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const n=function(e,t){const n=e.length,r=co(t),o=r>=0?r:n+r;return o<0||o>=n?-1:o}(e,t);return-1===n?void 0:e[n]}function co(e){return e!==e||0===e?0:Math.trunc(e)}var uo=null!==globalThis&&void 0!==globalThis&&globalThis.document?e.useLayoutEffect:()=>{},ho=t[" useId ".trim().toString()]||(()=>{}),fo=0;function po(t){const[n,r]=e.useState(ho());return uo(()=>{t||r(e=>null!==e&&void 0!==e?e:String(fo++))},[t]),t||(n?"radix-".concat(n):"")}var mo=n(950);const go=["children"],vo=["children"];function yo(t){const n=bo(t),r=e.forwardRef((t,r)=>{const{children:a}=t,s=o(t,go),i=e.Children.toArray(a),l=i.find(xo);if(l){const t=l.props.children,o=i.map(n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,o):null}))}return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}function bo(t){const n=e.forwardRef((t,n)=>{const{children:r}=t,a=o(t,vo);if(e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=c({},t);for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){const e=a(...arguments);return o(...arguments),e}:o&&(n[r]=o):"style"===r?n[r]=c(c({},o),a):"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return c(c({},e),n)}(a,r.props);return r.type!==e.Fragment&&(o.ref=n?qt(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var wo=Symbol("radix.slottable");function xo(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===wo}const ko=["asChild"];var So=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,n)=>{const r=yo("Primitive.".concat(n)),a=e.forwardRef((e,t)=>{const{asChild:a}=e,s=o(e,ko),i=a?r:n;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,Bt.jsx)(i,c(c({},s),{},{ref:t}))});return a.displayName="Primitive.".concat(n),c(c({},t),{},{[n]:a})},{});function Co(t){const n=e.useRef(t);return e.useEffect(()=>{n.current=t}),e.useMemo(()=>function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return null===(e=n.current)||void 0===e?void 0:e.call(n,...r)},[])}var No=t[" useInsertionEffect ".trim().toString()]||uo;function Eo(t){let{prop:n,defaultProp:r,onChange:o=()=>{},caller:a}=t;const[s,i,l]=function(t){let{defaultProp:n,onChange:r}=t;const[o,a]=e.useState(n),s=e.useRef(o),i=e.useRef(r);return No(()=>{i.current=r},[r]),e.useEffect(()=>{var e;s.current!==o&&(null===(e=i.current)||void 0===e||e.call(i,o),s.current=o)},[o,s]),[o,a,i]}({defaultProp:r,onChange:o}),c=void 0!==n,u=c?n:s;{const t=e.useRef(void 0!==n);e.useEffect(()=>{const e=t.current;if(e!==c){const t=e?"controlled":"uncontrolled",n=c?"controlled":"uncontrolled";console.warn("".concat(a," is changing from ").concat(t," to ").concat(n,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}t.current=c},[c,a])}const d=e.useCallback(e=>{if(c){const r=function(e){return"function"===typeof e}(e)?e(n):e;var t;if(r!==n)null===(t=l.current)||void 0===t||t.call(l,r)}else i(e)},[c,n,i,l]);return[u,d]}Symbol("RADIX:SYNC_STATE");var Ro=e.createContext(void 0);function Oo(t){const n=e.useContext(Ro);return t||n||"ltr"}const jo=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"],To=["__scopeRovingFocusGroup","focusable","active","tabStopId","children"];var _o="rovingFocusGroup.onEntryFocus",Ao={bubbles:!1,cancelable:!0},Po="RovingFocusGroup",[Mo,Io,Lo]=so(Po),[Do,zo]=qr(Po,[Lo]),[Fo,Bo]=Do(Po),Uo=e.forwardRef((e,t)=>(0,Bt.jsx)(Mo.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,Bt.jsx)(Mo.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,Bt.jsx)(Ho,c(c({},e),{},{ref:t}))})}));Uo.displayName=Po;var Ho=e.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:s=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1}=t,p=o(t,jo),m=e.useRef(null),g=Kt(n,m),v=Oo(i),[y,b]=Eo({prop:l,defaultProp:null!==u&&void 0!==u?u:null,onChange:d,caller:Po}),[w,x]=e.useState(!1),k=Co(h),S=Io(r),C=e.useRef(!1),[N,E]=e.useState(0);return e.useEffect(()=>{const e=m.current;if(e)return e.addEventListener(_o,k),()=>e.removeEventListener(_o,k)},[k]),(0,Bt.jsx)(Fo,{scope:r,orientation:a,dir:v,loop:s,currentTabStopId:y,onItemFocus:e.useCallback(e=>b(e),[b]),onItemShiftTab:e.useCallback(()=>x(!0),[]),onFocusableItemAdd:e.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:e.useCallback(()=>E(e=>e-1),[]),children:(0,Bt.jsx)(So.div,c(c({tabIndex:w||0===N?-1:0,"data-orientation":a},p),{},{ref:g,style:c({outline:"none"},t.style),onMouseDown:Wr(t.onMouseDown,()=>{C.current=!0}),onFocus:Wr(t.onFocus,e=>{const t=!C.current;if(e.target===e.currentTarget&&t&&!w){const t=new CustomEvent(_o,Ao);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=S().filter(e=>e.focusable);qo([e.find(e=>e.active),e.find(e=>e.id===y),...e].filter(Boolean).map(e=>e.ref.current),f)}}C.current=!1}),onBlur:Wr(t.onBlur,()=>x(!1))}))})}),Wo="RovingFocusGroupItem",Go=e.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:s=!1,tabStopId:i,children:l}=t,u=o(t,To),d=po(),h=i||d,f=Bo(Wo,r),p=f.currentTabStopId===h,m=Io(r),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:y}=f;return e.useEffect(()=>{if(a)return g(),()=>v()},[a,g,v]),(0,Bt.jsx)(Mo.ItemSlot,{scope:r,id:h,focusable:a,active:s,children:(0,Bt.jsx)(So.span,c(c({tabIndex:p?0:-1,"data-orientation":f.orientation},u),{},{ref:n,onMouseDown:Wr(t.onMouseDown,e=>{a?f.onItemFocus(h):e.preventDefault()}),onFocus:Wr(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:Wr(t.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Vo[r]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let o=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)o.reverse();else if("prev"===t||"next"===t){"prev"===t&&o.reverse();const a=o.indexOf(e.currentTarget);o=f.loop?(r=a+1,(n=o).map((e,t)=>n[(r+t)%n.length])):o.slice(a+1)}setTimeout(()=>qo(o))}var n,r}),children:"function"===typeof l?l({isCurrentTabStop:p,hasTabStop:null!=y}):l}))})});Go.displayName=Wo;var Vo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var Ko=Uo,$o=Go;var Jo=t=>{const{present:n,children:r}=t,o=function(t){const[n,r]=e.useState(),o=e.useRef(null),a=e.useRef(t),s=e.useRef("none"),i=t?"mounted":"unmounted",[l,c]=function(t,n){return e.useReducer((e,t)=>{const r=n[e][t];return null!==r&&void 0!==r?r:e},t)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return e.useEffect(()=>{const e=Qo(o.current);s.current="mounted"===l?e:"none"},[l]),uo(()=>{const e=o.current,n=a.current;if(n!==t){const r=s.current,o=Qo(e);if(t)c("MOUNT");else if("none"===o||"none"===(null===e||void 0===e?void 0:e.display))c("UNMOUNT");else{c(n&&r!==o?"ANIMATION_OUT":"UNMOUNT")}a.current=t}},[t,c]),uo(()=>{if(n){var e;let t;const r=null!==(e=n.ownerDocument.defaultView)&&void 0!==e?e:window,i=e=>{const s=Qo(o.current).includes(CSS.escape(e.animationName));if(e.target===n&&s&&(c("ANIMATION_END"),!a.current)){const e=n.style.animationFillMode;n.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=e)})}},l=e=>{e.target===n&&(s.current=Qo(o.current))};return n.addEventListener("animationstart",l),n.addEventListener("animationcancel",i),n.addEventListener("animationend",i),()=>{r.clearTimeout(t),n.removeEventListener("animationstart",l),n.removeEventListener("animationcancel",i),n.removeEventListener("animationend",i)}}c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:e.useCallback(e=>{o.current=e?getComputedStyle(e):null,r(e)},[])}}(n),a="function"===typeof r?r({present:o.isPresent}):e.Children.only(r),s=Kt(o.ref,function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(a));return"function"===typeof r||o.isPresent?e.cloneElement(a,{ref:s}):null};function Qo(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}Jo.displayName="Presence";const Yo=["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"],Xo=["__scopeTabs","loop"],Zo=["__scopeTabs","value","disabled"],ea=["__scopeTabs","value","forceMount","children"];var ta="Tabs",[na,ra]=qr(ta,[zo]),oa=zo(),[aa,sa]=na(ta),ia=e.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:i="horizontal",dir:l,activationMode:u="automatic"}=e,d=o(e,Yo),h=Oo(l),[f,p]=Eo({prop:r,onChange:a,defaultProp:null!==s&&void 0!==s?s:"",caller:ta});return(0,Bt.jsx)(aa,{scope:n,baseId:po(),value:f,onValueChange:p,orientation:i,dir:h,activationMode:u,children:(0,Bt.jsx)(So.div,c(c({dir:h,"data-orientation":i},d),{},{ref:t}))})});ia.displayName=ta;var la="TabsList",ca=e.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0}=e,a=o(e,Xo),s=sa(la,n),i=oa(n);return(0,Bt.jsx)(Ko,c(c({asChild:!0},i),{},{orientation:s.orientation,dir:s.dir,loop:r,children:(0,Bt.jsx)(So.div,c(c({role:"tablist","aria-orientation":s.orientation},a),{},{ref:t}))}))});ca.displayName=la;var ua="TabsTrigger",da=e.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1}=e,s=o(e,Zo),i=sa(ua,n),l=oa(n),u=pa(i.baseId,r),d=ma(i.baseId,r),h=r===i.value;return(0,Bt.jsx)($o,c(c({asChild:!0},l),{},{focusable:!a,active:h,children:(0,Bt.jsx)(So.button,c(c({type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u},s),{},{ref:t,onMouseDown:Wr(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(r)}),onKeyDown:Wr(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(r)}),onFocus:Wr(e.onFocus,()=>{const e="manual"!==i.activationMode;h||a||!e||i.onValueChange(r)})}))}))});da.displayName=ua;var ha="TabsContent",fa=e.forwardRef((t,n)=>{const{__scopeTabs:r,value:a,forceMount:s,children:i}=t,l=o(t,ea),u=sa(ha,r),d=pa(u.baseId,a),h=ma(u.baseId,a),f=a===u.value,p=e.useRef(f);return e.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,Bt.jsx)(Jo,{present:s||f,children:e=>{let{present:r}=e;return(0,Bt.jsx)(So.div,c(c({"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!r,id:h,tabIndex:0},l),{},{ref:n,style:c(c({},t.style),{},{animationDuration:p.current?"0s":void 0}),children:r&&i}))}})});function pa(e,t){return"".concat(e,"-trigger-").concat(t)}function ma(e,t){return"".concat(e,"-content-").concat(t)}fa.displayName=ha;var ga=ca,va=da,ya=fa;const ba=["className"],wa=["className"],xa=["className"],ka=ia,Sa=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,ba);return(0,Bt.jsx)(ga,c({ref:t,className:Er("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n)},r))});Sa.displayName=ga.displayName;const Ca=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,wa);return(0,Bt.jsx)(va,c({ref:t,className:Er("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n)},r))});Ca.displayName=va.displayName;const Na=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,xa);return(0,Bt.jsx)(ya,c({ref:t,className:Er("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},r))});Na.displayName=ya.displayName;const Ea=["message"];const Ra=Array(12).fill(0),Oa=t=>{let{visible:n,className:r}=t;return e.createElement("div",{className:["sonner-loading-wrapper",r].filter(Boolean).join(" "),"data-visible":n},e.createElement("div",{className:"sonner-spinner"},Ra.map((t,n)=>e.createElement("div",{className:"sonner-loading-bar",key:"spinner-bar-".concat(n)}))))},ja=e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Ta=e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_a=e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Aa=e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Pa=e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let Ma=1;const Ia=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n}=e,r=o(e,Ea),a="number"===typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Ma++,s=this.toasts.find(e=>e.id===a),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(t=>t.id===a?(this.publish(c(c(c({},t),e),{},{id:a,title:n})),c(c(c({},t),e),{},{id:a,dismissible:i,title:n})):t):this.addToast(c(c({title:n},r),{},{dismissible:i,id:a})),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create(c(c({},t),{},{message:e})),this.error=(e,t)=>this.create(c(c({},t),{},{message:e,type:"error"})),this.success=(e,t)=>this.create(c(c({},t),{},{type:"success",message:e})),this.info=(e,t)=>this.create(c(c({},t),{},{type:"info",message:e})),this.warning=(e,t)=>this.create(c(c({},t),{},{type:"warning",message:e})),this.loading=(e,t)=>this.create(c(c({},t),{},{type:"loading",message:e})),this.promise=(t,n)=>{if(!n)return;let r;void 0!==n.loading&&(r=this.create(c(c({},n),{},{promise:t,type:"loading",message:n.loading,description:"function"!==typeof n.description?n.description:void 0})));const o=Promise.resolve(t instanceof Function?t():t);let a,s=void 0!==r;const i=o.then(async t=>{a=["resolve",t];if(e.isValidElement(t))s=!1,this.create({id:r,type:"default",message:t});else if(La(t)&&!t.ok){s=!1;const o="function"===typeof n.error?await n.error("HTTP error! status: ".concat(t.status)):n.error,a="function"===typeof n.description?await n.description("HTTP error! status: ".concat(t.status)):n.description,i="object"===typeof o&&!e.isValidElement(o)?o:{message:o};this.create(c({id:r,type:"error",description:a},i))}else if(t instanceof Error){s=!1;const o="function"===typeof n.error?await n.error(t):n.error,a="function"===typeof n.description?await n.description(t):n.description,i="object"===typeof o&&!e.isValidElement(o)?o:{message:o};this.create(c({id:r,type:"error",description:a},i))}else if(void 0!==n.success){s=!1;const o="function"===typeof n.success?await n.success(t):n.success,a="function"===typeof n.description?await n.description(t):n.description,i="object"===typeof o&&!e.isValidElement(o)?o:{message:o};this.create(c({id:r,type:"success",description:a},i))}}).catch(async t=>{if(a=["reject",t],void 0!==n.error){s=!1;const o="function"===typeof n.error?await n.error(t):n.error,a="function"===typeof n.description?await n.description(t):n.description,i="object"===typeof o&&!e.isValidElement(o)?o:{message:o};this.create(c({id:r,type:"error",description:a},i))}}).finally(()=>{s&&(this.dismiss(r),r=void 0),null==n.finally||n.finally.call(n)}),l=()=>new Promise((e,t)=>i.then(()=>"reject"===a[0]?t(a[1]):e(a[1])).catch(t));return"string"!==typeof r&&"number"!==typeof r?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||Ma++;return this.create(c({jsx:e(n),id:n},t)),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},La=e=>e&&"object"===typeof e&&"ok"in e&&"boolean"===typeof e.ok&&"status"in e&&"number"===typeof e.status,Da=(e,t)=>{const n=(null==t?void 0:t.id)||Ma++;return Ia.addToast(c(c({title:e},t),{},{id:n})),n},za=Object.assign(Da,{success:Ia.success,info:Ia.info,warning:Ia.warning,error:Ia.error,custom:Ia.custom,message:Ia.message,promise:Ia.promise,dismiss:Ia.dismiss,loading:Ia.loading},{getHistory:()=>Ia.toasts,getToasts:()=>Ia.getActiveToasts()});function Fa(e){return void 0!==e.label}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Ba=3,Ua=14;function Ha(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}const Wa=t=>{var n,r,o,a,s,i,l,u,d;const{invert:h,toast:f,unstyled:p,interacting:m,setHeights:g,visibleToasts:v,heights:y,index:b,toasts:w,expanded:x,removeToast:k,defaultRichColors:S,closeButton:C,style:N,cancelButtonStyle:E,actionButtonStyle:R,className:O="",descriptionClassName:j="",duration:T,position:_,gap:A,expandByDefault:P,classNames:M,icons:I,closeButtonAriaLabel:L="Close toast"}=t,[D,z]=e.useState(null),[F,B]=e.useState(null),[U,H]=e.useState(!1),[W,G]=e.useState(!1),[V,q]=e.useState(!1),[K,$]=e.useState(!1),[J,Q]=e.useState(!1),[Y,X]=e.useState(0),[Z,ee]=e.useState(0),te=e.useRef(f.duration||T||4e3),ne=e.useRef(null),re=e.useRef(null),oe=0===b,ae=b+1<=v,se=f.type,ie=!1!==f.dismissible,le=f.className||"",ce=f.descriptionClassName||"",ue=e.useMemo(()=>y.findIndex(e=>e.toastId===f.id)||0,[y,f.id]),de=e.useMemo(()=>{var e;return null!=(e=f.closeButton)?e:C},[f.closeButton,C]),he=e.useMemo(()=>f.duration||T||4e3,[f.duration,T]),fe=e.useRef(0),pe=e.useRef(0),me=e.useRef(0),ge=e.useRef(null),[ve,ye]=_.split("-"),be=e.useMemo(()=>y.reduce((e,t,n)=>n>=ue?e:e+t.height,0),[y,ue]),we=(()=>{const[t,n]=e.useState(document.hidden);return e.useEffect(()=>{const e=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),t})(),xe=f.invert||h,ke="loading"===se;pe.current=e.useMemo(()=>ue*A+be,[ue,be]),e.useEffect(()=>{te.current=he},[he]),e.useEffect(()=>{H(!0)},[]),e.useEffect(()=>{const e=re.current;if(e){const t=e.getBoundingClientRect().height;return ee(t),g(e=>[{toastId:f.id,height:t,position:f.position},...e]),()=>g(e=>e.filter(e=>e.toastId!==f.id))}},[g,f.id]),e.useLayoutEffect(()=>{if(!U)return;const e=re.current,t=e.style.height;e.style.height="auto";const n=e.getBoundingClientRect().height;e.style.height=t,ee(n),g(e=>e.find(e=>e.toastId===f.id)?e.map(e=>e.toastId===f.id?c(c({},e),{},{height:n}):e):[{toastId:f.id,height:n,position:f.position},...e])},[U,f.title,f.description,g,f.id,f.jsx,f.action,f.cancel]);const Se=e.useCallback(()=>{G(!0),X(pe.current),g(e=>e.filter(e=>e.toastId!==f.id)),setTimeout(()=>{k(f)},200)},[f,k,g,pe]);e.useEffect(()=>{if(f.promise&&"loading"===se||f.duration===1/0||"loading"===f.type)return;let e;return x||m||we?(()=>{if(me.current<fe.current){const e=(new Date).getTime()-fe.current;te.current=te.current-e}me.current=(new Date).getTime()})():te.current!==1/0&&(fe.current=(new Date).getTime(),e=setTimeout(()=>{null==f.onAutoClose||f.onAutoClose.call(f,f),Se()},te.current)),()=>clearTimeout(e)},[x,m,f,se,we,Se]),e.useEffect(()=>{f.delete&&(Se(),null==f.onDismiss||f.onDismiss.call(f,f))},[Se,f.delete]);const Ce=f.icon||(null==I?void 0:I[se])||(e=>{switch(e){case"success":return ja;case"info":return _a;case"warning":return Ta;case"error":return Aa;default:return null}})(se);var Ne,Ee;return e.createElement("li",{tabIndex:0,ref:re,className:Ha(O,le,null==M?void 0:M.toast,null==f||null==(n=f.classNames)?void 0:n.toast,null==M?void 0:M.default,null==M?void 0:M[se],null==f||null==(r=f.classNames)?void 0:r[se]),"data-sonner-toast":"","data-rich-colors":null!=(Ne=f.richColors)?Ne:S,"data-styled":!Boolean(f.jsx||f.unstyled||p),"data-mounted":U,"data-promise":Boolean(f.promise),"data-swiped":J,"data-removed":W,"data-visible":ae,"data-y-position":ve,"data-x-position":ye,"data-index":b,"data-front":oe,"data-swiping":V,"data-dismissible":ie,"data-type":se,"data-invert":xe,"data-swipe-out":K,"data-swipe-direction":F,"data-expanded":Boolean(x||P&&U),"data-testid":f.testId,style:c(c({"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":"".concat(W?Y:pe.current,"px"),"--initial-height":P?"auto":"".concat(Z,"px")},N),f.style),onDragEnd:()=>{q(!1),z(null),ge.current=null},onPointerDown:e=>{2!==e.button&&!ke&&ie&&(ne.current=new Date,X(pe.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(q(!0),ge.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n;if(K||!ie)return;ge.current=null;const r=Number((null==(e=re.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),o=Number((null==(t=re.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),a=(new Date).getTime()-(null==(n=ne.current)?void 0:n.getTime()),s="x"===D?r:o,i=Math.abs(s)/a;if(Math.abs(s)>=45||i>.11)return X(pe.current),null==f.onDismiss||f.onDismiss.call(f,f),B("x"===D?r>0?"right":"left":o>0?"down":"up"),Se(),void $(!0);var l,c;null==(l=re.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=re.current)||c.style.setProperty("--swipe-amount-y","0px"),Q(!1),q(!1),z(null)},onPointerMove:e=>{var n,r,o;if(!ge.current||!ie)return;if((null==(n=window.getSelection())?void 0:n.toString().length)>0)return;const a=e.clientY-ge.current.y,s=e.clientX-ge.current.x;var i;const l=null!=(i=t.swipeDirections)?i:function(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(_);!D&&(Math.abs(s)>1||Math.abs(a)>1)&&z(Math.abs(s)>Math.abs(a)?"x":"y");let c={x:0,y:0};const u=e=>1/(1.5+Math.abs(e)/20);if("y"===D){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&a<0||l.includes("bottom")&&a>0)c.y=a;else{const e=a*u(a);c.y=Math.abs(e)<Math.abs(a)?e:a}}else if("x"===D&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&s<0||l.includes("right")&&s>0)c.x=s;else{const e=s*u(s);c.x=Math.abs(e)<Math.abs(s)?e:s}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&Q(!0),null==(r=re.current)||r.style.setProperty("--swipe-amount-x","".concat(c.x,"px")),null==(o=re.current)||o.style.setProperty("--swipe-amount-y","".concat(c.y,"px"))}},de&&!f.jsx&&"loading"!==se?e.createElement("button",{"aria-label":L,"data-disabled":ke,"data-close-button":!0,onClick:ke||!ie?()=>{}:()=>{Se(),null==f.onDismiss||f.onDismiss.call(f,f)},className:Ha(null==M?void 0:M.closeButton,null==f||null==(o=f.classNames)?void 0:o.closeButton)},null!=(Ee=null==I?void 0:I.close)?Ee:Pa):null,(se||f.icon||f.promise)&&null!==f.icon&&(null!==(null==I?void 0:I[se])||f.icon)?e.createElement("div",{"data-icon":"",className:Ha(null==M?void 0:M.icon,null==f||null==(a=f.classNames)?void 0:a.icon)},f.promise||"loading"===f.type&&!f.icon?f.icon||function(){var t,n;return(null==I?void 0:I.loading)?e.createElement("div",{className:Ha(null==M?void 0:M.loader,null==f||null==(n=f.classNames)?void 0:n.loader,"sonner-loader"),"data-visible":"loading"===se},I.loading):e.createElement(Oa,{className:Ha(null==M?void 0:M.loader,null==f||null==(t=f.classNames)?void 0:t.loader),visible:"loading"===se})}():null,"loading"!==f.type?Ce:null):null,e.createElement("div",{"data-content":"",className:Ha(null==M?void 0:M.content,null==f||null==(s=f.classNames)?void 0:s.content)},e.createElement("div",{"data-title":"",className:Ha(null==M?void 0:M.title,null==f||null==(i=f.classNames)?void 0:i.title)},f.jsx?f.jsx:"function"===typeof f.title?f.title():f.title),f.description?e.createElement("div",{"data-description":"",className:Ha(j,ce,null==M?void 0:M.description,null==f||null==(l=f.classNames)?void 0:l.description)},"function"===typeof f.description?f.description():f.description):null),e.isValidElement(f.cancel)?f.cancel:f.cancel&&Fa(f.cancel)?e.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||E,onClick:e=>{Fa(f.cancel)&&ie&&(null==f.cancel.onClick||f.cancel.onClick.call(f.cancel,e),Se())},className:Ha(null==M?void 0:M.cancelButton,null==f||null==(u=f.classNames)?void 0:u.cancelButton)},f.cancel.label):null,e.isValidElement(f.action)?f.action:f.action&&Fa(f.action)?e.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||R,onClick:e=>{Fa(f.action)&&(null==f.action.onClick||f.action.onClick.call(f.action,e),e.defaultPrevented||Se())},className:Ha(null==M?void 0:M.actionButton,null==f||null==(d=f.classNames)?void 0:d.actionButton)},f.action.label):null)};function Ga(){if("undefined"===typeof window)return"ltr";if("undefined"===typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function Va(e,t){const n={};return[e,t].forEach((e,t)=>{const r=1===t,o=r?"--mobile-offset":"--offset",a=r?"16px":"24px";function s(e){["top","right","bottom","left"].forEach(t=>{n["".concat(o,"-").concat(t)]="number"===typeof e?"".concat(e,"px"):e})}"number"===typeof e||"string"===typeof e?s(e):"object"===typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?n["".concat(o,"-").concat(t)]=a:n["".concat(o,"-").concat(t)]="number"===typeof e[t]?"".concat(e[t],"px"):e[t]}):s(a)}),n}const qa=e.forwardRef(function(t,n){const{id:r,invert:o,position:a="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:l,className:u,offset:d,mobileOffset:h,theme:f="light",richColors:p,duration:m,style:g,visibleToasts:v=Ba,toastOptions:y,dir:b=Ga(),gap:w=Ua,icons:x,containerAriaLabel:k="Notifications"}=t,[S,C]=e.useState([]),N=e.useMemo(()=>r?S.filter(e=>e.toasterId===r):S.filter(e=>!e.toasterId),[S,r]),E=e.useMemo(()=>Array.from(new Set([a].concat(N.filter(e=>e.position).map(e=>e.position)))),[N,a]),[R,O]=e.useState([]),[j,T]=e.useState(!1),[_,A]=e.useState(!1),[P,M]=e.useState("system"!==f?f:"undefined"!==typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=e.useRef(null),L=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=e.useRef(null),z=e.useRef(!1),F=e.useCallback(e=>{C(t=>{var n;return(null==(n=t.find(t=>t.id===e.id))?void 0:n.delete)||Ia.dismiss(e.id),t.filter(t=>{let{id:n}=t;return n!==e.id})})},[]);return e.useEffect(()=>Ia.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{C(t=>t.map(t=>t.id===e.id?c(c({},t),{},{delete:!0}):t))}):setTimeout(()=>{mo.flushSync(()=>{C(t=>{const n=t.findIndex(t=>t.id===e.id);return-1!==n?[...t.slice(0,n),c(c({},t[n]),e),...t.slice(n+1)]:[e,...t]})})})}),[S]),e.useEffect(()=>{if("system"!==f)return void M(f);if("system"===f&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?M("dark"):M("light")),"undefined"===typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",e=>{let{matches:t}=e;M(t?"dark":"light")})}catch(t){e.addListener(e=>{let{matches:t}=e;try{M(t?"dark":"light")}catch(ig){console.error(ig)}})}},[f]),e.useEffect(()=>{S.length<=1&&T(!1)},[S]),e.useEffect(()=>{const e=e=>{var t;var n;s.every(t=>e[t]||e.code===t)&&(T(!0),null==(n=I.current)||n.focus());"Escape"!==e.code||document.activeElement!==I.current&&!(null==(t=I.current)?void 0:t.contains(document.activeElement))||T(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),e.useEffect(()=>{if(I.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,z.current=!1)}},[I.current]),e.createElement("section",{ref:n,"aria-label":"".concat(k," ").concat(L),tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((n,r)=>{var a;const[s,f]=n.split("-");return N.length?e.createElement("ol",{key:n,dir:"auto"===b?Ga():b,tabIndex:-1,ref:I,className:u,"data-sonner-toaster":!0,"data-sonner-theme":P,"data-y-position":s,"data-x-position":f,style:c(c({"--front-toast-height":"".concat((null==(a=R[0])?void 0:a.height)||0,"px"),"--width":"".concat(356,"px"),"--gap":"".concat(w,"px")},g),Va(d,h)),onBlur:e=>{z.current&&!e.currentTarget.contains(e.relatedTarget)&&(z.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||z.current||(z.current=!0,D.current=e.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{_||T(!1)},onDragEnd:()=>T(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||A(!0)},onPointerUp:()=>A(!1)},N.filter(e=>!e.position&&0===r||e.position===n).map((r,a)=>{var s,c;return e.createElement(Wa,{key:r.id,icons:x,index:a,toast:r,defaultRichColors:p,duration:null!=(s=null==y?void 0:y.duration)?s:m,className:null==y?void 0:y.className,descriptionClassName:null==y?void 0:y.descriptionClassName,invert:o,visibleToasts:v,closeButton:null!=(c=null==y?void 0:y.closeButton)?c:l,interacting:_,position:n,style:null==y?void 0:y.style,unstyled:null==y?void 0:y.unstyled,classNames:null==y?void 0:y.classNames,cancelButtonStyle:null==y?void 0:y.cancelButtonStyle,actionButtonStyle:null==y?void 0:y.actionButtonStyle,closeButtonAriaLabel:null==y?void 0:y.closeButtonAriaLabel,removeToast:F,toasts:N.filter(e=>e.position==r.position),heights:R.filter(e=>e.position==r.position),setHeights:O,expandByDefault:i,gap:w,expanded:j,swipeDirections:t.swipeDirections})})):null}))}),Ka=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},$a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var Ja={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Qa=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Ya=(0,e.forwardRef)((t,n)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:l="",children:u,iconNode:d}=t,h=o(t,Qa);return(0,e.createElement)("svg",c(c(c({ref:n},Ja),{},{width:a,height:a,stroke:r,strokeWidth:i?24*Number(s)/Number(a):s,className:$a("lucide",l)},!u&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...Array.isArray(u)?u:[u]])}),Xa=["className"],Za=(t,n)=>{const r=(0,e.forwardRef)((r,a)=>{let{className:s}=r,i=o(r,Xa);return(0,e.createElement)(Ya,c({ref:a,iconNode:n,className:$a("lucide-".concat((l=Ka(t),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(t),s)},i));var l});return r.displayName=Ka(t),r},es=Za("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),ts=Za("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);const ns=["asChild"];var rs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,n)=>{const r=Zt("Primitive.".concat(n)),a=e.forwardRef((e,t)=>{const{asChild:a}=e,s=o(e,ns),i=a?r:n;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,Bt.jsx)(i,c(c({},s),{},{ref:t}))});return a.displayName="Primitive.".concat(n),c(c({},t),{},{[n]:a})},{});var os=e.forwardRef((e,t)=>(0,Bt.jsx)(rs.label,c(c({},e),{},{ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));os.displayName="Label";var as=os;const ss=["className"],is=un("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ls=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,ss);return(0,Bt.jsx)(as,c({ref:t,className:Er(is(),n)},r))});function cs(e,t){let[n,r]=t;return Math.min(r,Math.max(n,e))}ls.displayName=as.displayName;const us=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"];var ds,hs="dismissableLayer.update",fs="dismissableLayer.pointerDownOutside",ps="dismissableLayer.focusOutside",ms=e.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gs=e.forwardRef((t,n)=>{var r;const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:l,onInteractOutside:u,onDismiss:d}=t,h=o(t,us),f=e.useContext(ms),[p,m]=e.useState(null),g=null!==(r=null===p||void 0===p?void 0:p.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,v]=e.useState({}),y=Kt(n,e=>m(e)),b=Array.from(f.layers),[w]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(w),k=p?b.indexOf(p):-1,S=f.layersWithOutsidePointerEventsDisabled.size>0,C=k>=x,N=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=Co(t),o=e.useRef(!1),a=e.useRef(()=>{});return e.useEffect(()=>{const e=e=>{if(e.target&&!o.current){let t=function(){bs(fs,r,o,{discrete:!0})};const o={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",a.current),a.current=t,n.addEventListener("click",a.current,{once:!0})):t()}else n.removeEventListener("click",a.current);o.current=!1},t=window.setTimeout(()=>{n.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",a.current)}},[n,r]),{onPointerDownCapture:()=>o.current=!0}}(e=>{const t=e.target,n=[...f.branches].some(e=>e.contains(t));C&&!n&&(null===i||void 0===i||i(e),null===u||void 0===u||u(e),e.defaultPrevented||null===d||void 0===d||d())},g),E=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=Co(t),o=e.useRef(!1);return e.useEffect(()=>{const e=e=>{if(e.target&&!o.current){bs(ps,r,{originalEvent:e},{discrete:!1})}};return n.addEventListener("focusin",e),()=>n.removeEventListener("focusin",e)},[n,r]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}(e=>{const t=e.target;[...f.branches].some(e=>e.contains(t))||(null===l||void 0===l||l(e),null===u||void 0===u||u(e),e.defaultPrevented||null===d||void 0===d||d())},g);return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=Co(t);e.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e,{capture:!0}),()=>n.removeEventListener("keydown",e,{capture:!0})},[r,n])}(e=>{k===f.layers.size-1&&(null===s||void 0===s||s(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))},g),e.useEffect(()=>{if(p)return a&&(0===f.layersWithOutsidePointerEventsDisabled.size&&(ds=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),ys(),()=>{a&&1===f.layersWithOutsidePointerEventsDisabled.size&&(g.body.style.pointerEvents=ds)}},[p,g,a,f]),e.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),ys())},[p,f]),e.useEffect(()=>{const e=()=>v({});return document.addEventListener(hs,e),()=>document.removeEventListener(hs,e)},[]),(0,Bt.jsx)(So.div,c(c({},h),{},{ref:y,style:c({pointerEvents:S?C?"auto":"none":void 0},t.style),onFocusCapture:Wr(t.onFocusCapture,E.onFocusCapture),onBlurCapture:Wr(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Wr(t.onPointerDownCapture,N.onPointerDownCapture)}))});gs.displayName="DismissableLayer";var vs=e.forwardRef((t,n)=>{const r=e.useContext(ms),o=e.useRef(null),a=Kt(n,o);return e.useEffect(()=>{const e=o.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,Bt.jsx)(So.div,c(c({},t),{},{ref:a}))});function ys(){const e=new CustomEvent(hs);document.dispatchEvent(e)}function bs(e,t,n,r){let{discrete:o}=r;const a=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),o?function(e,t){e&&mo.flushSync(()=>e.dispatchEvent(t))}(a,s):a.dispatchEvent(s)}vs.displayName="DismissableLayerBranch";var ws=0;function xs(){e.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:ks()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:ks()),ws++,()=>{1===ws&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ws--}},[])}function ks(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}const Ss=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"];var Cs="focusScope.autoFocusOnMount",Ns="focusScope.autoFocusOnUnmount",Es={bubbles:!1,cancelable:!0},Rs=e.forwardRef((t,n)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:i}=t,l=o(t,Ss),[u,d]=e.useState(null),h=Co(s),f=Co(i),p=e.useRef(null),m=Kt(n,e=>d(e)),g=e.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;e.useEffect(()=>{if(a){let e=function(e){if(g.paused||!u)return;const t=e.target;u.contains(t)?p.current=t:_s(p.current,{select:!0})},t=function(e){if(g.paused||!u)return;const t=e.relatedTarget;null!==t&&(u.contains(t)||_s(p.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&_s(u)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return u&&r.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[a,u,g.paused]),e.useEffect(()=>{if(u){As.add(g);const t=document.activeElement;if(!u.contains(t)){const n=new CustomEvent(Cs,Es);u.addEventListener(Cs,h),u.dispatchEvent(n),n.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.activeElement;for(const r of e)if(_s(r,{select:t}),document.activeElement!==n)return}((e=Os(u),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&_s(u))}return()=>{u.removeEventListener(Cs,h),setTimeout(()=>{const e=new CustomEvent(Ns,Es);u.addEventListener(Ns,f),u.dispatchEvent(e),e.defaultPrevented||_s(null!==t&&void 0!==t?t:document.body,{select:!0}),u.removeEventListener(Ns,f),As.remove(g)},0)}}var e},[u,h,f,g]);const v=e.useCallback(e=>{if(!r&&!a)return;if(g.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[o,a]=function(e){const t=Os(e),n=js(t,e),r=js(t.reverse(),e);return[n,r]}(t);o&&a?e.shiftKey||n!==a?e.shiftKey&&n===o&&(e.preventDefault(),r&&_s(a,{select:!0})):(e.preventDefault(),r&&_s(o,{select:!0})):n===t&&e.preventDefault()}},[r,a,g.paused]);return(0,Bt.jsx)(So.div,c(c({tabIndex:-1},l),{},{ref:m,onKeyDown:v}))});function Os(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function js(e,t){for(const n of e)if(!Ts(n,{upTo:t}))return n}function Ts(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function _s(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Rs.displayName="FocusScope";var As=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null===n||void 0===n||n.pause()),e=Ps(e,t),e.unshift(t)},remove(t){var n;e=Ps(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function Ps(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}const Ms=["top","right","bottom","left"],Is=Math.min,Ls=Math.max,Ds=Math.round,zs=Math.floor,Fs=e=>({x:e,y:e}),Bs={left:"right",right:"left",bottom:"top",top:"bottom"},Us={start:"end",end:"start"};function Hs(e,t,n){return Ls(e,Is(t,n))}function Ws(e,t){return"function"===typeof e?e(t):e}function Gs(e){return e.split("-")[0]}function Vs(e){return e.split("-")[1]}function qs(e){return"x"===e?"y":"x"}function Ks(e){return"y"===e?"height":"width"}const $s=new Set(["top","bottom"]);function Js(e){return $s.has(Gs(e))?"y":"x"}function Qs(e){return qs(Js(e))}function Ys(e){return e.replace(/start|end/g,e=>Us[e])}const Xs=["left","right"],Zs=["right","left"],ei=["top","bottom"],ti=["bottom","top"];function ni(e,t,n,r){const o=Vs(e);let a=function(e,t,n){switch(e){case"top":case"bottom":return n?t?Zs:Xs:t?Xs:Zs;case"left":case"right":return t?ei:ti;default:return[]}}(Gs(e),"start"===n,r);return o&&(a=a.map(e=>e+"-"+o),t&&(a=a.concat(a.map(Ys)))),a}function ri(e){return e.replace(/left|right|bottom|top/g,e=>Bs[e])}function oi(e){return"number"!==typeof e?function(e){return c({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function ai(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}const si=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],ii=["strategy"],li=["mainAxis","crossAxis","limiter"],ci=["apply"];function ui(e,t,n){let{reference:r,floating:o}=e;const a=Js(t),s=Qs(t),i=Ks(s),l=Gs(t),c="y"===a,u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,h=r[i]/2-o[i]/2;let f;switch(l){case"top":f={x:u,y:r.y-o.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-o.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Vs(t)){case"start":f[s]-=h*(n&&c?-1:1);break;case"end":f[s]+=h*(n&&c?-1:1)}return f}async function di(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:a,rects:s,elements:i,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Ws(t,e),p=oi(f),m=i[h?"floating"===d?"reference":"floating":d],g=ai(await a.getClippingRect({element:null==(n=await(null==a.isElement?void 0:a.isElement(m)))||n?m:m.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(i.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,y=await(null==a.getOffsetParent?void 0:a.getOffsetParent(i.floating)),b=await(null==a.isElement?void 0:a.isElement(y))&&await(null==a.getScale?void 0:a.getScale(y))||{x:1,y:1},w=ai(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-w.top+p.top)/b.y,bottom:(w.bottom-g.bottom+p.bottom)/b.y,left:(g.left-w.left+p.left)/b.x,right:(w.right-g.right+p.right)/b.x}}function hi(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function fi(e){return Ms.some(t=>e[t]>=0)}const pi=new Set(["left","top"]);function mi(){return"undefined"!==typeof window}function gi(e){return bi(e)?(e.nodeName||"").toLowerCase():"#document"}function vi(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function yi(e){var t;return null==(t=(bi(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function bi(e){return!!mi()&&(e instanceof Node||e instanceof vi(e).Node)}function wi(e){return!!mi()&&(e instanceof Element||e instanceof vi(e).Element)}function xi(e){return!!mi()&&(e instanceof HTMLElement||e instanceof vi(e).HTMLElement)}function ki(e){return!(!mi()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof vi(e).ShadowRoot)}const Si=new Set(["inline","contents"]);function Ci(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=Li(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Si.has(o)}const Ni=new Set(["table","td","th"]);function Ei(e){return Ni.has(gi(e))}const Ri=[":popover-open",":modal"];function Oi(e){return Ri.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const ji=["transform","translate","scale","rotate","perspective"],Ti=["transform","translate","scale","rotate","perspective","filter"],_i=["paint","layout","strict","content"];function Ai(e){const t=Pi(),n=wi(e)?Li(e):e;return ji.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||Ti.some(e=>(n.willChange||"").includes(e))||_i.some(e=>(n.contain||"").includes(e))}function Pi(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Mi=new Set(["html","body","#document"]);function Ii(e){return Mi.has(gi(e))}function Li(e){return vi(e).getComputedStyle(e)}function Di(e){return wi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zi(e){if("html"===gi(e))return e;const t=e.assignedSlot||e.parentNode||ki(e)&&e.host||yi(e);return ki(t)?t.host:t}function Fi(e){const t=zi(e);return Ii(t)?e.ownerDocument?e.ownerDocument.body:e.body:xi(t)&&Ci(t)?t:Fi(t)}function Bi(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=Fi(e),a=o===(null==(r=e.ownerDocument)?void 0:r.body),s=vi(o);if(a){const e=Ui(s);return t.concat(s,s.visualViewport||[],Ci(o)?o:[],e&&n?Bi(e):[])}return t.concat(o,Bi(o,[],n))}function Ui(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Hi(e){const t=Li(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=xi(e),a=o?e.offsetWidth:n,s=o?e.offsetHeight:r,i=Ds(n)!==a||Ds(r)!==s;return i&&(n=a,r=s),{width:n,height:r,$:i}}function Wi(e){return wi(e)?e:e.contextElement}function Gi(e){const t=Wi(e);if(!xi(t))return Fs(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=Hi(t);let s=(a?Ds(n.width):n.width)/r,i=(a?Ds(n.height):n.height)/o;return s&&Number.isFinite(s)||(s=1),i&&Number.isFinite(i)||(i=1),{x:s,y:i}}const Vi=Fs(0);function qi(e){const t=vi(e);return Pi()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Vi}function Ki(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),a=Wi(e);let s=Fs(1);t&&(r?wi(r)&&(s=Gi(r)):s=Gi(e));const i=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==vi(e))&&t}(a,n,r)?qi(a):Fs(0);let l=(o.left+i.x)/s.x,c=(o.top+i.y)/s.y,u=o.width/s.x,d=o.height/s.y;if(a){const e=vi(a),t=r&&wi(r)?vi(r):r;let n=e,o=Ui(n);for(;o&&r&&t!==n;){const e=Gi(o),t=o.getBoundingClientRect(),r=Li(o),a=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=a,c+=s,n=vi(o),o=Ui(n)}}return ai({width:u,height:d,x:l,y:c})}function $i(e,t){const n=Di(e).scrollLeft;return t?t.left+n:Ki(yi(e)).left+n}function Ji(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-$i(e,n),y:n.top+t.scrollTop}}const Qi=new Set(["absolute","fixed"]);function Yi(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=vi(e),r=yi(e),o=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,i=0,l=0;if(o){a=o.width,s=o.height;const e=Pi();(!e||e&&"fixed"===t)&&(i=o.offsetLeft,l=o.offsetTop)}const c=$i(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),o="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,s=Math.abs(r.clientWidth-t.clientWidth-o);s<=25&&(a-=s)}else c<=25&&(a+=c);return{width:a,height:s,x:i,y:l}}(e,n);else if("document"===t)r=function(e){const t=yi(e),n=Di(e),r=e.ownerDocument.body,o=Ls(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Ls(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+$i(e);const i=-n.scrollTop;return"rtl"===Li(r).direction&&(s+=Ls(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:s,y:i}}(yi(e));else if(wi(t))r=function(e,t){const n=Ki(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=xi(e)?Gi(e):Fs(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:o*a.x,y:r*a.y}}(t,n);else{const n=qi(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return ai(r)}function Xi(e,t){const n=zi(e);return!(n===t||!wi(n)||Ii(n))&&("fixed"===Li(n).position||Xi(n,t))}function Zi(e,t,n){const r=xi(t),o=yi(t),a="fixed"===n,s=Ki(e,!0,a,t);let i={scrollLeft:0,scrollTop:0};const l=Fs(0);function c(){l.x=$i(o)}if(r||!r&&!a)if(("body"!==gi(t)||Ci(o))&&(i=Di(t)),r){const e=Ki(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else o&&c();a&&!r&&o&&c();const u=!o||r||a?Fs(0):Ji(o,i);return{x:s.left+i.scrollLeft-l.x-u.x,y:s.top+i.scrollTop-l.y-u.y,width:s.width,height:s.height}}function el(e){return"static"===Li(e).position}function tl(e,t){if(!xi(e)||"fixed"===Li(e).position)return null;if(t)return t(e);let n=e.offsetParent;return yi(e)===n&&(n=n.ownerDocument.body),n}function nl(e,t){const n=vi(e);if(Oi(e))return n;if(!xi(e)){let t=zi(e);for(;t&&!Ii(t);){if(wi(t)&&!el(t))return t;t=zi(t)}return n}let r=tl(e,t);for(;r&&Ei(r)&&el(r);)r=tl(r,t);return r&&Ii(r)&&el(r)&&!Ai(r)?n:r||function(e){let t=zi(e);for(;xi(t)&&!Ii(t);){if(Ai(t))return t;if(Oi(t))return null;t=zi(t)}return null}(e)||n}const rl={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a="fixed"===o,s=yi(r),i=!!t&&Oi(t.floating);if(r===s||i&&a)return n;let l={scrollLeft:0,scrollTop:0},c=Fs(1);const u=Fs(0),d=xi(r);if((d||!d&&!a)&&(("body"!==gi(r)||Ci(s))&&(l=Di(r)),xi(r))){const e=Ki(r);c=Gi(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!s||d||a?Fs(0):Ji(s,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:yi,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[..."clippingAncestors"===n?Oi(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=Bi(e,[],!1).filter(e=>wi(e)&&"body"!==gi(e)),o=null;const a="fixed"===Li(e).position;let s=a?zi(e):e;for(;wi(s)&&!Ii(s);){const t=Li(s),n=Ai(s);n||"fixed"!==t.position||(o=null),(a?!n&&!o:!n&&"static"===t.position&&o&&Qi.has(o.position)||Ci(s)&&!n&&Xi(e,s))?r=r.filter(e=>e!==s):o=t,s=zi(s)}return t.set(e,r),r}(t,this._c):[].concat(n),r],s=a[0],i=a.reduce((e,n)=>{const r=Yi(t,n,o);return e.top=Ls(r.top,e.top),e.right=Is(r.right,e.right),e.bottom=Is(r.bottom,e.bottom),e.left=Ls(r.left,e.left),e},Yi(t,s,o));return{width:i.right-i.left,height:i.bottom-i.top,x:i.left,y:i.top}},getOffsetParent:nl,getElementRects:async function(e){const t=this.getOffsetParent||nl,n=this.getDimensions,r=await n(e.floating);return{reference:Zi(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Hi(e);return{width:t,height:n}},getScale:Gi,isElement:wi,isRTL:function(e){return"rtl"===Li(e).direction}};function ol(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function al(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:i="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,u=Wi(e),d=o||a?[...u?Bi(u):[],...Bi(t)]:[];d.forEach(e=>{o&&e.addEventListener("scroll",n,{passive:!0}),a&&e.addEventListener("resize",n)});const h=u&&i?function(e,t){let n,r=null;const o=yi(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(i,l){void 0===i&&(i=!1),void 0===l&&(l=1),a();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(i||t(),!f||!p)return;const m={rootMargin:-zs(h)+"px "+-zs(o.clientWidth-(d+f))+"px "+-zs(o.clientHeight-(h+p))+"px "+-zs(d)+"px",threshold:Ls(0,Is(1,l))||1};let g=!0;function v(t){const r=t[0].intersectionRatio;if(r!==l){if(!g)return s();r?s(!1,r):n=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==r||ol(u,e.getBoundingClientRect())||s(),g=!1}try{r=new IntersectionObserver(v,c(c({},m),{},{root:o.ownerDocument}))}catch(y){r=new IntersectionObserver(v,m)}r.observe(e)}(!0),a}(u,n):null;let f,p=-1,m=null;s&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),u&&!l&&m.observe(u),m.observe(t));let g=l?Ki(e):null;return l&&function t(){const r=Ki(e);g&&!ol(g,r)&&n();g=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{o&&e.removeEventListener("scroll",n),a&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=m)||e.disconnect(),m=null,l&&cancelAnimationFrame(f)}}const sl=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:s,middlewareData:i}=t,l=await async function(e,t){const{placement:n,platform:r,elements:o}=e,a=await(null==r.isRTL?void 0:r.isRTL(o.floating)),s=Gs(n),i=Vs(n),l="y"===Js(n),c=pi.has(s)?-1:1,u=a&&l?-1:1,d=Ws(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return i&&"number"===typeof p&&(f="end"===i?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return s===(null==(n=i.offset)?void 0:n.placement)&&null!=(r=i.arrow)&&r.alignmentOffset?{}:{x:o+l.x,y:a+l.y,data:c(c({},l),{},{placement:s})}}}},il=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a,platform:s}=t,i=Ws(e,t),{mainAxis:l=!0,crossAxis:u=!1,limiter:d={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=i,h=o(i,li),f={x:n,y:r},p=await s.detectOverflow(t,h),m=Js(Gs(a)),g=qs(m);let v=f[g],y=f[m];if(l){const e="y"===g?"bottom":"right";v=Hs(v+p["y"===g?"top":"left"],v,v-p[e])}if(u){const e="y"===m?"bottom":"right";y=Hs(y+p["y"===m?"top":"left"],y,y-p[e])}const b=d.fn(c(c({},t),{},{[g]:v,[m]:y}));return c(c({},b),{},{data:{x:b.x-n,y:b.y-r,enabled:{[g]:l,[m]:u}}})}}},ll=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:s,rects:i,initialPlacement:l,platform:c,elements:u}=t,d=Ws(e,t),{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0}=d,y=o(d,si);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const b=Gs(a),w=Js(l),x=Gs(l)===l,k=await(null==c.isRTL?void 0:c.isRTL(u.floating)),S=p||(x||!v?[ri(l)]:function(e){const t=ri(e);return[Ys(e),t,Ys(t)]}(l)),C="none"!==g;!p&&C&&S.push(...ni(l,v,g,k));const N=[l,...S],E=await c.detectOverflow(t,y),R=[];let O=(null==(r=s.flip)?void 0:r.overflows)||[];if(h&&R.push(E[b]),f){const e=function(e,t,n){void 0===n&&(n=!1);const r=Vs(e),o=Qs(e),a=Ks(o);let s="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(s=ri(s)),[s,ri(s)]}(a,i,k);R.push(E[e[0]],E[e[1]])}if(O=[...O,{placement:a,overflows:R}],!R.every(e=>e<=0)){var j,T;const e=((null==(j=s.flip)?void 0:j.index)||0)+1,t=N[e];if(t){if(!("alignment"===f&&w!==Js(t))||O.every(e=>Js(e.placement)!==w||e.overflows[0]>0))return{data:{index:e,overflows:O},reset:{placement:t}}}let n=null==(T=O.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:T.placement;if(!n)switch(m){case"bestFit":{var _;const e=null==(_=O.filter(e=>{if(C){const t=Js(e.placement);return t===w||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:_[0];e&&(n=e);break}case"initialPlacement":n=l}if(a!==n)return{reset:{placement:n}}}return{}}}},cl=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:s,platform:i,elements:l}=t,u=Ws(e,t),{apply:d=()=>{}}=u,h=o(u,ci),f=await i.detectOverflow(t,h),p=Gs(a),m=Vs(a),g="y"===Js(a),{width:v,height:y}=s.floating;let b,w;"top"===p||"bottom"===p?(b=p,w=m===(await(null==i.isRTL?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(w=p,b="end"===m?"top":"bottom");const x=y-f.top-f.bottom,k=v-f.left-f.right,S=Is(y-f[b],x),C=Is(v-f[w],k),N=!t.middlewareData.shift;let E=S,R=C;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(R=k),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(E=x),N&&!m){const e=Ls(f.left,0),t=Ls(f.right,0),n=Ls(f.top,0),r=Ls(f.bottom,0);g?R=v-2*(0!==e||0!==t?e+t:Ls(f.left,f.right)):E=y-2*(0!==n||0!==r?n+r:Ls(f.top,f.bottom))}await d(c(c({},t),{},{availableWidth:R,availableHeight:E}));const O=await i.getDimensions(l.floating);return v!==O.width||y!==O.height?{reset:{rects:!0}}:{}}}},ul=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,a=Ws(e,t),{strategy:s="referenceHidden"}=a,i=o(a,ii);switch(s){case"referenceHidden":{const e=hi(await r.detectOverflow(t,c(c({},i),{},{elementContext:"reference"})),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:fi(e)}}}case"escaped":{const e=hi(await r.detectOverflow(t,c(c({},i),{},{altBoundary:!0})),n.floating);return{data:{escapedOffsets:e,escaped:fi(e)}}}default:return{}}}}},dl=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:s,elements:i,middlewareData:l}=t,{element:u,padding:d=0}=Ws(e,t)||{};if(null==u)return{};const h=oi(d),f={x:n,y:r},p=Qs(o),m=Ks(p),g=await s.getDimensions(u),v="y"===p,y=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",x=a.reference[m]+a.reference[p]-f[p]-a.floating[m],k=f[p]-a.reference[p],S=await(null==s.getOffsetParent?void 0:s.getOffsetParent(u));let C=S?S[w]:0;C&&await(null==s.isElement?void 0:s.isElement(S))||(C=i.floating[w]||a.floating[m]);const N=x/2-k/2,E=C/2-g[m]/2-1,R=Is(h[y],E),O=Is(h[b],E),j=R,T=C-g[m]-O,_=C/2-g[m]/2+N,A=Hs(j,_,T),P=!l.arrow&&null!=Vs(o)&&_!==A&&a.reference[m]/2-(_<j?R:O)-g[m]/2<0,M=P?_<j?_-j:_-T:0;return{[p]:f[p]+M,data:c({[p]:A,centerOffset:_-A-M},P&&{alignmentOffset:M}),reset:P}}}),hl=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:s}=t,{offset:i=0,mainAxis:l=!0,crossAxis:u=!0}=Ws(e,t),d={x:n,y:r},h=Js(o),f=qs(h);let p=d[f],m=d[h];const g=Ws(i,t),v="number"===typeof g?{mainAxis:g,crossAxis:0}:c({mainAxis:0,crossAxis:0},g);if(l){const e="y"===f?"height":"width",t=a.reference[f]-a.floating[e]+v.mainAxis,n=a.reference[f]+a.reference[e]-v.mainAxis;p<t?p=t:p>n&&(p=n)}if(u){var y,b;const e="y"===f?"width":"height",t=pi.has(Gs(o)),n=a.reference[h]-a.floating[e]+(t&&(null==(y=s.offset)?void 0:y[h])||0)+(t?0:v.crossAxis),r=a.reference[h]+a.reference[e]+(t?0:(null==(b=s.offset)?void 0:b[h])||0)-(t?v.crossAxis:0);m<n?m=n:m>r&&(m=r)}return{[f]:p,[h]:m}}}},fl=(e,t,n)=>{const r=new Map,o=c({platform:rl},n),a=c(c({},o.platform),{},{_c:r});return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:s}=n,i=a.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:d,y:h}=ui(u,r,l),f=r,p={},m=0;for(let v=0;v<i.length;v++){var g;const{name:n,fn:a}=i[v],{x:y,y:b,data:w,reset:x}=await a({x:d,y:h,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:u,platform:c(c({},s),{},{detectOverflow:null!=(g=s.detectOverflow)?g:di}),elements:{reference:e,floating:t}});d=null!=y?y:d,h=null!=b?b:h,p=c(c({},p),{},{[n]:c(c({},p[n]),w)}),x&&m<=50&&(m++,"object"===typeof x&&(x.placement&&(f=x.placement),x.rects&&(u=!0===x.rects?await s.getElementRects({reference:e,floating:t,strategy:o}):x.rects),({x:d,y:h}=ui(u,f,l))),v=-1)}return{x:d,y:h,placement:f,strategy:o,middlewareData:p}})(e,t,c(c({},o),{},{platform:a}))};var pl="undefined"!==typeof document?e.useLayoutEffect:function(){};function ml(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!ml(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!==r--;){const n=o[r];if(("_owner"!==n||!e.$$typeof)&&!ml(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function gl(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function vl(e,t){const n=gl(e);return Math.round(t*n)/n}function yl(t){const n=e.useRef(t);return pl(()=>{n.current=t}),n}const bl=(e,t)=>c(c({},sl(e)),{},{options:[e,t]}),wl=(e,t)=>c(c({},il(e)),{},{options:[e,t]}),xl=(e,t)=>c(c({},hl(e)),{},{options:[e,t]}),kl=(e,t)=>c(c({},ll(e)),{},{options:[e,t]}),Sl=(e,t)=>c(c({},cl(e)),{},{options:[e,t]}),Cl=(e,t)=>c(c({},ul(e)),{},{options:[e,t]}),Nl=(e,t)=>c(c({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&(o=n,{}.hasOwnProperty.call(o,"current"))?null!=n.current?dl({element:n.current,padding:r}).fn(t):{}:n?dl({element:n,padding:r}).fn(t):{};var o}}))(e)),{},{options:[e,t]}),El=["children","width","height"];var Rl=e.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5}=e,s=o(e,El);return(0,Bt.jsx)(So.svg,c(c({},s),{},{ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,Bt.jsx)("polygon",{points:"0,0 30,0 15,10"})}))});Rl.displayName="Arrow";var Ol=Rl;function jl(t){const[n,r]=e.useState(void 0);return uo(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const e=new ResizeObserver(e=>{if(!Array.isArray(e))return;if(!e.length)return;const n=e[0];let o,a;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;o=t.inlineSize,a=t.blockSize}else o=t.offsetWidth,a=t.offsetHeight;r({width:o,height:a})});return e.observe(t,{box:"border-box"}),()=>e.unobserve(t)}r(void 0)},[t]),n}const Tl=["__scopePopper","virtualRef"],_l=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"],Al=["__scopePopper"];var Pl="Popper",[Ml,Il]=qr(Pl),[Ll,Dl]=Ml(Pl),zl=t=>{const{__scopePopper:n,children:r}=t,[o,a]=e.useState(null);return(0,Bt.jsx)(Ll,{scope:n,anchor:o,onAnchorChange:a,children:r})};zl.displayName=Pl;var Fl="PopperAnchor",Bl=e.forwardRef((t,n)=>{const{__scopePopper:r,virtualRef:a}=t,s=o(t,Tl),i=Dl(Fl,r),l=e.useRef(null),u=Kt(n,l),d=e.useRef(null);return e.useEffect(()=>{const e=d.current;d.current=(null===a||void 0===a?void 0:a.current)||l.current,e!==d.current&&i.onAnchorChange(d.current)}),a?null:(0,Bt.jsx)(So.div,c(c({},s),{},{ref:u}))});Bl.displayName=Fl;var Ul="PopperContent",[Hl,Wl]=Ml(Ul),Gl=e.forwardRef((t,n)=>{var r,a,s,i,l,u,d,h;const{__scopePopper:f,side:p="bottom",sideOffset:m=0,align:g="center",alignOffset:v=0,arrowPadding:y=0,avoidCollisions:b=!0,collisionBoundary:w=[],collisionPadding:x=0,sticky:k="partial",hideWhenDetached:S=!1,updatePositionStrategy:C="optimized",onPlaced:N}=t,E=o(t,_l),R=Dl(Ul,f),[O,j]=e.useState(null),T=Kt(n,e=>j(e)),[_,A]=e.useState(null),P=jl(_),M=null!==(r=null===P||void 0===P?void 0:P.width)&&void 0!==r?r:0,I=null!==(a=null===P||void 0===P?void 0:P.height)&&void 0!==a?a:0,L=p+("center"!==g?"-"+g:""),D="number"===typeof x?x:c({top:0,right:0,bottom:0,left:0},x),z=Array.isArray(w)?w:[w],F=z.length>0,B={padding:D,boundary:z.filter($l),altBoundary:F},{refs:U,floatingStyles:H,placement:W,isPositioned:G,middlewareData:V}=function(t){void 0===t&&(t={});const{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:a,elements:{reference:s,floating:i}={},transform:l=!0,whileElementsMounted:u,open:d}=t,[h,f]=e.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[p,m]=e.useState(o);ml(p,o)||m(o);const[g,v]=e.useState(null),[y,b]=e.useState(null),w=e.useCallback(e=>{e!==C.current&&(C.current=e,v(e))},[]),x=e.useCallback(e=>{e!==N.current&&(N.current=e,b(e))},[]),k=s||g,S=i||y,C=e.useRef(null),N=e.useRef(null),E=e.useRef(h),R=null!=u,O=yl(u),j=yl(a),T=yl(d),_=e.useCallback(()=>{if(!C.current||!N.current)return;const e={placement:n,strategy:r,middleware:p};j.current&&(e.platform=j.current),fl(C.current,N.current,e).then(e=>{const t=c(c({},e),{},{isPositioned:!1!==T.current});A.current&&!ml(E.current,t)&&(E.current=t,mo.flushSync(()=>{f(t)}))})},[p,n,r,j,T]);pl(()=>{!1===d&&E.current.isPositioned&&(E.current.isPositioned=!1,f(e=>c(c({},e),{},{isPositioned:!1})))},[d]);const A=e.useRef(!1);pl(()=>(A.current=!0,()=>{A.current=!1}),[]),pl(()=>{if(k&&(C.current=k),S&&(N.current=S),k&&S){if(O.current)return O.current(k,S,_);_()}},[k,S,_,O,R]);const P=e.useMemo(()=>({reference:C,floating:N,setReference:w,setFloating:x}),[w,x]),M=e.useMemo(()=>({reference:k,floating:S}),[k,S]),I=e.useMemo(()=>{const e={position:r,left:0,top:0};if(!M.floating)return e;const t=vl(M.floating,h.x),n=vl(M.floating,h.y);return l?c(c({},e),{},{transform:"translate("+t+"px, "+n+"px)"},gl(M.floating)>=1.5&&{willChange:"transform"}):{position:r,left:t,top:n}},[r,l,M.floating,h.x,h.y]);return e.useMemo(()=>c(c({},h),{},{update:_,refs:P,elements:M,floatingStyles:I}),[h,_,P,M,I])}({strategy:"fixed",placement:L,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return al(...t,{animationFrame:"always"===C})},elements:{reference:R.anchor},middleware:[bl({mainAxis:m+I,alignmentAxis:v}),b&&wl(c({mainAxis:!0,crossAxis:!1,limiter:"partial"===k?xl():void 0},B)),b&&kl(c({},B)),Sl(c(c({},B),{},{apply:e=>{let{elements:t,rects:n,availableWidth:r,availableHeight:o}=e;const{width:a,height:s}=n.reference,i=t.floating.style;i.setProperty("--radix-popper-available-width","".concat(r,"px")),i.setProperty("--radix-popper-available-height","".concat(o,"px")),i.setProperty("--radix-popper-anchor-width","".concat(a,"px")),i.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}})),_&&Nl({element:_,padding:y}),Jl({arrowWidth:M,arrowHeight:I}),S&&Cl(c({strategy:"referenceHidden"},B))]}),[q,K]=Ql(W),$=Co(N);uo(()=>{G&&(null===$||void 0===$||$())},[G,$]);const J=null===(s=V.arrow)||void 0===s?void 0:s.x,Q=null===(i=V.arrow)||void 0===i?void 0:i.y,Y=0!==(null===(l=V.arrow)||void 0===l?void 0:l.centerOffset),[X,Z]=e.useState();return uo(()=>{O&&Z(window.getComputedStyle(O).zIndex)},[O]),(0,Bt.jsx)("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:c(c({},H),{},{transform:G?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[null===(u=V.transformOrigin)||void 0===u?void 0:u.x,null===(d=V.transformOrigin)||void 0===d?void 0:d.y].join(" ")},(null===(h=V.hide)||void 0===h?void 0:h.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:(0,Bt.jsx)(Hl,{scope:f,placedSide:q,onArrowChange:A,arrowX:J,arrowY:Q,shouldHideArrow:Y,children:(0,Bt.jsx)(So.div,c(c({"data-side":q,"data-align":K},E),{},{ref:T,style:c(c({},E.style),{},{animation:G?void 0:"none"})}))})})});Gl.displayName=Ul;var Vl="PopperArrow",ql={top:"bottom",right:"left",bottom:"top",left:"right"},Kl=e.forwardRef(function(e,t){const{__scopePopper:n}=e,r=o(e,Al),a=Wl(Vl,n),s=ql[a.placedSide];return(0,Bt.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,Bt.jsx)(Ol,c(c({},r),{},{ref:t,style:c(c({},r.style),{},{display:"block"})}))})});function $l(e){return null!==e}Kl.displayName=Vl;var Jl=e=>({name:"transformOrigin",options:e,fn(t){var n,r,o,a,s;const{placement:i,rects:l,middlewareData:c}=t,u=0!==(null===(n=c.arrow)||void 0===n?void 0:n.centerOffset),d=u?0:e.arrowWidth,h=u?0:e.arrowHeight,[f,p]=Ql(i),m={start:"0%",center:"50%",end:"100%"}[p],g=(null!==(r=null===(o=c.arrow)||void 0===o?void 0:o.x)&&void 0!==r?r:0)+d/2,v=(null!==(a=null===(s=c.arrow)||void 0===s?void 0:s.y)&&void 0!==a?a:0)+h/2;let y="",b="";return"bottom"===f?(y=u?m:"".concat(g,"px"),b="".concat(-h,"px")):"top"===f?(y=u?m:"".concat(g,"px"),b="".concat(l.floating.height+h,"px")):"right"===f?(y="".concat(-h,"px"),b=u?m:"".concat(v,"px")):"left"===f&&(y="".concat(l.floating.width+h,"px"),b=u?m:"".concat(v,"px")),{data:{x:y,y:b}}}});function Ql(e){const[t,n="center"]=e.split("-");return[t,n]}var Yl=zl,Xl=Bl,Zl=Gl,ec=Kl;const tc=["container"];var nc=e.forwardRef((t,n)=>{var r;const{container:a}=t,s=o(t,tc),[i,l]=e.useState(!1);uo(()=>l(!0),[]);const u=a||i&&(null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body);return u?mo.createPortal((0,Bt.jsx)(So.div,c(c({},s),{},{ref:n})),u):null});nc.displayName="Portal";const rc=["children"],oc=["children"];function ac(t){const n=sc(t),r=e.forwardRef((t,r)=>{const{children:a}=t,s=o(t,rc),i=e.Children.toArray(a),l=i.find(lc);if(l){const t=l.props.children,o=i.map(n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,o):null}))}return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}function sc(t){const n=e.forwardRef((t,n)=>{const{children:r}=t,a=o(t,oc);if(e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=c({},t);for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){const e=a(...arguments);return o(...arguments),e}:o&&(n[r]=o):"style"===r?n[r]=c(c({},o),a):"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return c(c({},e),n)}(a,r.props);return r.type!==e.Fragment&&(o.ref=n?qt(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var ic=Symbol("radix.slottable");function lc(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===ic}function cc(t){const n=e.useRef({value:t,previous:t});return e.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var uc=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),dc=e.forwardRef((e,t)=>(0,Bt.jsx)(So.span,c(c({},e),{},{ref:t,style:c(c({},uc),e.style)})));dc.displayName="VisuallyHidden";var hc=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},fc=new WeakMap,pc=new WeakMap,mc={},gc=0,vc=function(e){return e&&(e.host||vc(e.parentNode))},yc=function(e,t,n,r){var o=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=vc(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);mc[n]||(mc[n]=new WeakMap);var a=mc[n],s=[],i=new Set,l=new Set(o),c=function(e){e&&!i.has(e)&&(i.add(e),c(e.parentNode))};o.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(i.has(e))u(e);else try{var t=e.getAttribute(r),o=null!==t&&"false"!==t,l=(fc.get(e)||0)+1,c=(a.get(e)||0)+1;fc.set(e,l),a.set(e,c),s.push(e),1===l&&o&&pc.set(e,!0),1===c&&e.setAttribute(n,"true"),o||e.setAttribute(r,"true")}catch(ig){console.error("aria-hidden: cannot operate on ",e,ig)}})};return u(t),i.clear(),gc++,function(){s.forEach(function(e){var t=fc.get(e)-1,o=a.get(e)-1;fc.set(e,t),a.set(e,o),t||(pc.has(e)||e.removeAttribute(r),pc.delete(e)),o||e.removeAttribute(n)}),--gc||(fc=new WeakMap,fc=new WeakMap,pc=new WeakMap,mc={})}},bc=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=t||hc(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),yc(r,o,n,"aria-hidden")):function(){return null}};var wc=function(){return wc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wc.apply(this,arguments)};function xc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;function kc(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Sc="right-scroll-bar-position",Cc="width-before-scroll-bar";function Nc(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var Ec="undefined"!==typeof window?e.useLayoutEffect:e.useEffect,Rc=new WeakMap;function Oc(t,n){var r=function(t,n){var r=(0,e.useState)(function(){return{value:t,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}})[0];return r.callback=n,r.facade}(n||null,function(e){return t.forEach(function(t){return Nc(t,e)})});return Ec(function(){var e=Rc.get(r);if(e){var n=new Set(e),o=new Set(t),a=r.current;n.forEach(function(e){o.has(e)||Nc(e,null)}),o.forEach(function(e){n.has(e)||Nc(e,a)})}Rc.set(r,t)},[t]),r}function jc(e){return e}function Tc(e,t){void 0===t&&(t=jc);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var o=t(e,r);return n.push(o),function(){n=n.filter(function(e){return e!==o})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var o=n;n=[],o.forEach(e),t=n}var a=function(){var n=t;t=[],n.forEach(e)},s=function(){return Promise.resolve().then(a)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}};return o}var _c=function(e){void 0===e&&(e={});var t=Tc(null);return t.options=wc({async:!0,ssr:!1},e),t}(),Ac=function(){},Pc=e.forwardRef(function(t,n){var r=e.useRef(null),o=e.useState({onScrollCapture:Ac,onWheelCapture:Ac,onTouchMoveCapture:Ac}),a=o[0],s=o[1],i=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,y=t.as,b=void 0===y?"div":y,w=t.gapMode,x=xc(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,S=Oc([r,n]),C=wc(wc({},x),a);return e.createElement(e.Fragment,null,d&&e.createElement(k,{sideCar:_c,removeScrollBar:u,shards:h,noRelative:p,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:r,gapMode:w}),i?e.cloneElement(e.Children.only(l),wc(wc({},C),{ref:S})):e.createElement(b,wc({},C,{className:c,ref:S}),l))});Pc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Pc.classNames={fullWidth:Cc,zeroRight:Sc};var Mc,Ic=function(t){var n=t.sideCar,r=xc(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=n.read();if(!o)throw new Error("Sidecar medium not found");return e.createElement(o,wc({},r))};Ic.isSideCarExport=!0;function Lc(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Mc||n.nc;return t&&e.setAttribute("nonce",t),e}var Dc=function(){var e=0,t=null;return{add:function(n){var r,o;0==e&&(t=Lc())&&(o=n,(r=t).styleSheet?r.styleSheet.cssText=o:r.appendChild(document.createTextNode(o)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},zc=function(){var t=function(){var t=Dc();return function(n,r){e.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&r])}}();return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},Fc={left:0,top:0,right:0,gap:0},Bc=function(e){return parseInt(e||"",10)||0},Uc=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return Fc;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],o=t["padding"===e?"paddingRight":"marginRight"];return[Bc(n),Bc(r),Bc(o)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Hc=zc(),Wc="data-scroll-locked",Gc=function(e,t,n,r){var o=e.left,a=e.top,s=e.right,i=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(i,"px ").concat(r,";\n  }\n  body[").concat(Wc,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(o,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(i,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Sc," {\n    right: ").concat(i,"px ").concat(r,";\n  }\n  \n  .").concat(Cc," {\n    margin-right: ").concat(i,"px ").concat(r,";\n  }\n  \n  .").concat(Sc," .").concat(Sc," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(Cc," .").concat(Cc," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(Wc,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(i,"px;\n  }\n")},Vc=function(){var e=parseInt(document.body.getAttribute(Wc)||"0",10);return isFinite(e)?e:0},qc=function(t){var n=t.noRelative,r=t.noImportant,o=t.gapMode,a=void 0===o?"margin":o;e.useEffect(function(){return document.body.setAttribute(Wc,(Vc()+1).toString()),function(){var e=Vc()-1;e<=0?document.body.removeAttribute(Wc):document.body.setAttribute(Wc,e.toString())}},[]);var s=e.useMemo(function(){return Uc(a)},[a]);return e.createElement(Hc,{styles:Gc(s,!n,a,r?"":"!important")})},Kc=!1;if("undefined"!==typeof window)try{var $c=Object.defineProperty({},"passive",{get:function(){return Kc=!0,!0}});window.addEventListener("test",$c,$c),window.removeEventListener("test",$c,$c)}catch(lg){Kc=!1}var Jc=!!Kc&&{passive:!1},Qc=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Yc=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Xc(e,r)){var o=Zc(e,r);if(o[1]>o[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Xc=function(e,t){return"v"===e?function(e){return Qc(e,"overflowY")}(t):function(e){return Qc(e,"overflowX")}(t)},Zc=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},eu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tu=function(e){return[e.deltaX,e.deltaY]},nu=function(e){return e&&"current"in e?e.current:e},ru=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},ou=0,au=[];function su(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const iu=(lu=function(t){var n=e.useRef([]),r=e.useRef([0,0]),o=e.useRef(),a=e.useState(ou++)[0],s=e.useState(zc)[0],i=e.useRef(t);e.useEffect(function(){i.current=t},[t]),e.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var e=kc([t.lockRef.current],(t.shards||[]).map(nu),!0).filter(Boolean);return e.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),e.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var l=e.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var n,a=eu(e),s=r.current,l="deltaX"in e?e.deltaX:s[0]-a[0],c="deltaY"in e?e.deltaY:s[1]-a[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=window.getSelection(),f=h&&h.anchorNode;if(f&&(f===u||f.contains(u)))return!1;var p=Yc(d,u);if(!p)return!0;if(p?n=d:(n="v"===d?"h":"v",p=Yc(d,u)),!p)return!1;if(!o.current&&"changedTouches"in e&&(l||c)&&(o.current=n),!n)return!0;var m=o.current||n;return function(e,t,n,r,o){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=a*r,i=n.target,l=t.contains(i),c=!1,u=s>0,d=0,h=0;do{if(!i)break;var f=Zc(e,i),p=f[0],m=f[1]-f[2]-a*p;(p||m)&&Xc(e,i)&&(d+=m,h+=p);var g=i.parentNode;i=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!l&&i!==document.body||l&&(t.contains(i)||t===i));return(u&&(o&&Math.abs(d)<1||!o&&s>d)||!u&&(o&&Math.abs(h)<1||!o&&-s>h))&&(c=!0),c}(m,t,e,"h"===m?l:c,!0)},[]),c=e.useCallback(function(e){var t=e;if(au.length&&au[au.length-1]===s){var r="deltaY"in t?tu(t):eu(t),o=n.current.filter(function(e){return e.name===t.type&&(e.target===t.target||t.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,r)})[0];if(o&&o.should)t.cancelable&&t.preventDefault();else if(!o){var a=(i.current.shards||[]).map(nu).filter(Boolean).filter(function(e){return e.contains(t.target)});(a.length>0?l(t,a[0]):!i.current.noIsolation)&&t.cancelable&&t.preventDefault()}}},[]),u=e.useCallback(function(e,t,r,o){var a={name:e,delta:t,target:r,should:o,shadowParent:su(r)};n.current.push(a),setTimeout(function(){n.current=n.current.filter(function(e){return e!==a})},1)},[]),d=e.useCallback(function(e){r.current=eu(e),o.current=void 0},[]),h=e.useCallback(function(e){u(e.type,tu(e),e.target,l(e,t.lockRef.current))},[]),f=e.useCallback(function(e){u(e.type,eu(e),e.target,l(e,t.lockRef.current))},[]);e.useEffect(function(){return au.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Jc),document.addEventListener("touchmove",c,Jc),document.addEventListener("touchstart",d,Jc),function(){au=au.filter(function(e){return e!==s}),document.removeEventListener("wheel",c,Jc),document.removeEventListener("touchmove",c,Jc),document.removeEventListener("touchstart",d,Jc)}},[]);var p=t.removeScrollBar,m=t.inert;return e.createElement(e.Fragment,null,m?e.createElement(s,{styles:ru(a)}):null,p?e.createElement(qc,{noRelative:t.noRelative,gapMode:t.gapMode}):null)},_c.useMedium(lu),Ic);var lu,cu=e.forwardRef(function(t,n){return e.createElement(Pc,wc({},t,{ref:n,sideCar:iu}))});cu.classNames=Pc.classNames;const uu=cu,du=["__scopeSelect","disabled"],hu=["__scopeSelect","className","style","children","placeholder"],fu=["__scopeSelect","children"],pu=["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"],mu=["__scopeSelect","onPlaced"],gu=["__scopeSelect","align","collisionPadding"],vu=["__scopeSelect","nonce"],yu=["__scopeSelect"],bu=["__scopeSelect"],wu=["__scopeSelect","value","disabled","textValue"],xu=["__scopeSelect","className","style"],ku=["__scopeSelect"],Su=["__scopeSelect","onAutoScroll"],Cu=["__scopeSelect"],Nu=["__scopeSelect"],Eu=["__scopeSelect","value"];var Ru=[" ","Enter","ArrowUp","ArrowDown"],Ou=[" ","Enter"],ju="Select",[Tu,_u,Au]=so(ju),[Pu,Mu]=qr(ju,[Au,Il]),Iu=Il(),[Lu,Du]=Pu(ju),[zu,Fu]=Pu(ju),Bu=t=>{const{__scopeSelect:n,children:r,open:o,defaultOpen:a,onOpenChange:s,value:i,defaultValue:l,onValueChange:u,dir:d,name:h,autoComplete:f,disabled:p,required:m,form:g}=t,v=Iu(n),[y,b]=e.useState(null),[w,x]=e.useState(null),[k,S]=e.useState(!1),C=Oo(d),[N,E]=Eo({prop:o,defaultProp:null!==a&&void 0!==a&&a,onChange:s,caller:ju}),[R,O]=Eo({prop:i,defaultProp:l,onChange:u,caller:ju}),j=e.useRef(null),T=!y||(g||!!y.closest("form")),[_,A]=e.useState(new Set),P=Array.from(_).map(e=>e.props.value).join(";");return(0,Bt.jsx)(Yl,c(c({},v),{},{children:(0,Bt.jsxs)(Lu,{required:m,scope:n,trigger:y,onTriggerChange:b,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:k,onValueNodeHasChildrenChange:S,contentId:po(),value:R,onValueChange:O,open:N,onOpenChange:E,dir:C,triggerPointerDownPosRef:j,disabled:p,children:[(0,Bt.jsx)(Tu.Provider,{scope:n,children:(0,Bt.jsx)(zu,{scope:t.__scopeSelect,onNativeOptionAdd:e.useCallback(e=>{A(t=>new Set(t).add(e))},[]),onNativeOptionRemove:e.useCallback(e=>{A(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:r})}),T?(0,Bt.jsxs)(Od,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:R,onChange:e=>O(e.target.value),disabled:p,form:g,children:[void 0===R?(0,Bt.jsx)("option",{value:""}):null,Array.from(_)]},P):null]})}))};Bu.displayName=ju;var Uu="SelectTrigger",Hu=e.forwardRef((t,n)=>{const{__scopeSelect:r,disabled:a=!1}=t,s=o(t,du),i=Iu(r),l=Du(Uu,r),u=l.disabled||a,d=Kt(n,l.onTriggerChange),h=_u(r),f=e.useRef("touch"),[p,m,g]=Td(e=>{const t=h().filter(e=>!e.disabled),n=t.find(e=>e.value===l.value),r=_d(t,e,n);void 0!==r&&l.onValueChange(r.value)}),v=e=>{u||(l.onOpenChange(!0),g()),e&&(l.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,Bt.jsx)(Xl,c(c({asChild:!0},i),{},{children:(0,Bt.jsx)(So.button,c(c({type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":jd(l.value)?"":void 0},s),{},{ref:d,onClick:Wr(s.onClick,e=>{e.currentTarget.focus(),"mouse"!==f.current&&v(e)}),onPointerDown:Wr(s.onPointerDown,e=>{f.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(v(e),e.preventDefault())}),onKeyDown:Wr(s.onKeyDown,e=>{const t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||m(e.key),t&&" "===e.key||Ru.includes(e.key)&&(v(),e.preventDefault())})}))}))});Hu.displayName=Uu;var Wu="SelectValue",Gu=e.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:s,placeholder:i=""}=e,l=o(e,hu),u=Du(Wu,n),{onValueNodeHasChildrenChange:d}=u,h=void 0!==s,f=Kt(t,u.onValueNodeChange);return uo(()=>{d(h)},[d,h]),(0,Bt.jsx)(So.span,c(c({},l),{},{ref:f,style:{pointerEvents:"none"},children:jd(u.value)?(0,Bt.jsx)(Bt.Fragment,{children:i}):s}))});Gu.displayName=Wu;var Vu=e.forwardRef((e,t)=>{const{__scopeSelect:n,children:r}=e,a=o(e,fu);return(0,Bt.jsx)(So.span,c(c({"aria-hidden":!0},a),{},{ref:t,children:r||"\u25bc"}))});Vu.displayName="SelectIcon";var qu=e=>(0,Bt.jsx)(nc,c({asChild:!0},e));qu.displayName="SelectPortal";var Ku="SelectContent",$u=e.forwardRef((t,n)=>{const r=Du(Ku,t.__scopeSelect),[o,a]=e.useState();if(uo(()=>{a(new DocumentFragment)},[]),!r.open){const e=o;return e?mo.createPortal((0,Bt.jsx)(Qu,{scope:t.__scopeSelect,children:(0,Bt.jsx)(Tu.Slot,{scope:t.__scopeSelect,children:(0,Bt.jsx)("div",{children:t.children})})}),e):null}return(0,Bt.jsx)(Zu,c(c({},t),{},{ref:n}))});$u.displayName=Ku;var Ju=10,[Qu,Yu]=Pu(Ku),Xu=ac("SelectContent.RemoveScroll"),Zu=e.forwardRef((t,n)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:l,side:u,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:b}=t,w=o(t,pu),x=Du(Ku,r),[k,S]=e.useState(null),[C,N]=e.useState(null),E=Kt(n,e=>S(e)),[R,O]=e.useState(null),[j,T]=e.useState(null),_=_u(r),[A,P]=e.useState(!1),M=e.useRef(!1);e.useEffect(()=>{if(k)return bc(k)},[k]),xs();const I=e.useCallback(e=>{const[t,...n]=_().map(e=>e.ref.current),[r]=n.slice(-1),o=document.activeElement;for(const a of e){if(a===o)return;if(null===a||void 0===a||a.scrollIntoView({block:"nearest"}),a===t&&C&&(C.scrollTop=0),a===r&&C&&(C.scrollTop=C.scrollHeight),null===a||void 0===a||a.focus(),document.activeElement!==o)return}},[_,C]),L=e.useCallback(()=>I([R,k]),[I,R,k]);e.useEffect(()=>{A&&L()},[A,L]);const{onOpenChange:D,triggerPointerDownPosRef:z}=x;e.useEffect(()=>{if(k){let e={x:0,y:0};const t=t=>{var n,r,o,a;e={x:Math.abs(Math.round(t.pageX)-(null!==(n=null===(r=z.current)||void 0===r?void 0:r.x)&&void 0!==n?n:0)),y:Math.abs(Math.round(t.pageY)-(null!==(o=null===(a=z.current)||void 0===a?void 0:a.y)&&void 0!==o?o:0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():k.contains(n.target)||D(!1),document.removeEventListener("pointermove",t),z.current=null};return null!==z.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[k,D,z]),e.useEffect(()=>{const e=()=>D(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[D]);const[F,B]=Td(e=>{const t=_().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=_d(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),U=e.useCallback((e,t,n)=>{const r=!M.current&&!n;(void 0!==x.value&&x.value===t||r)&&(O(e),r&&(M.current=!0))},[x.value]),H=e.useCallback(()=>null===k||void 0===k?void 0:k.focus(),[k]),W=e.useCallback((e,t,n)=>{const r=!M.current&&!n;(void 0!==x.value&&x.value===t||r)&&T(e)},[x.value]),G="popper"===a?td:ed,V=G===td?{side:u,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:b}:{};return(0,Bt.jsx)(Qu,{scope:r,content:k,viewport:C,onViewportChange:N,itemRefCallback:U,selectedItem:R,onItemLeave:H,itemTextRefCallback:W,focusSelectedItem:L,selectedItemText:j,position:a,isPositioned:A,searchRef:F,children:(0,Bt.jsx)(uu,{as:Xu,allowPinchZoom:!0,children:(0,Bt.jsx)(Rs,{asChild:!0,trapped:x.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Wr(s,e=>{var t;null===(t=x.trigger)||void 0===t||t.focus({preventScroll:!0}),e.preventDefault()}),children:(0,Bt.jsx)(gs,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:(0,Bt.jsx)(G,c(c(c({role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:e=>e.preventDefault()},w),V),{},{onPlaced:()=>P(!0),ref:E,style:c({display:"flex",flexDirection:"column",outline:"none"},w.style),onKeyDown:Wr(w.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||B(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=_().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>I(t)),e.preventDefault()}})}))})})})})});Zu.displayName="SelectContentImpl";var ed=e.forwardRef((t,n)=>{const{__scopeSelect:r,onPlaced:a}=t,s=o(t,mu),i=Du(Ku,r),l=Yu(Ku,r),[u,d]=e.useState(null),[h,f]=e.useState(null),p=Kt(n,e=>f(e)),m=_u(r),g=e.useRef(!1),v=e.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:w,focusSelectedItem:x}=l,k=e.useCallback(()=>{if(i.trigger&&i.valueNode&&u&&h&&y&&b&&w){const e=i.trigger.getBoundingClientRect(),t=h.getBoundingClientRect(),n=i.valueNode.getBoundingClientRect(),r=w.getBoundingClientRect();if("rtl"!==i.dir){const o=r.left-t.left,a=n.left-o,s=e.left-a,i=e.width+s,l=Math.max(i,t.width),c=window.innerWidth-Ju,d=cs(a,[Ju,Math.max(Ju,c-l)]);u.style.minWidth=i+"px",u.style.left=d+"px"}else{const o=t.right-r.right,a=window.innerWidth-n.right-o,s=window.innerWidth-e.right-a,i=e.width+s,l=Math.max(i,t.width),c=window.innerWidth-Ju,d=cs(a,[Ju,Math.max(Ju,c-l)]);u.style.minWidth=i+"px",u.style.right=d+"px"}const o=m(),s=window.innerHeight-2*Ju,l=y.scrollHeight,c=window.getComputedStyle(h),d=parseInt(c.borderTopWidth,10),f=parseInt(c.paddingTop,10),p=parseInt(c.borderBottomWidth,10),v=d+f+l+parseInt(c.paddingBottom,10)+p,x=Math.min(5*b.offsetHeight,v),k=window.getComputedStyle(y),S=parseInt(k.paddingTop,10),C=parseInt(k.paddingBottom,10),N=e.top+e.height/2-Ju,E=s-N,R=b.offsetHeight/2,O=d+f+(b.offsetTop+R),j=v-O;if(O<=N){const e=o.length>0&&b===o[o.length-1].ref.current;u.style.bottom="0px";const t=h.clientHeight-y.offsetTop-y.offsetHeight,n=O+Math.max(E,R+(e?C:0)+t+p);u.style.height=n+"px"}else{const e=o.length>0&&b===o[0].ref.current;u.style.top="0px";const t=Math.max(N,d+y.offsetTop+(e?S:0)+R)+j;u.style.height=t+"px",y.scrollTop=O-N+y.offsetTop}u.style.margin="".concat(Ju,"px 0"),u.style.minHeight=x+"px",u.style.maxHeight=s+"px",null===a||void 0===a||a(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,u,h,y,b,w,i.dir,a]);uo(()=>k(),[k]);const[S,C]=e.useState();uo(()=>{h&&C(window.getComputedStyle(h).zIndex)},[h]);const N=e.useCallback(e=>{e&&!0===v.current&&(k(),null===x||void 0===x||x(),v.current=!1)},[k,x]);return(0,Bt.jsx)(nd,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:g,onScrollButtonChange:N,children:(0,Bt.jsx)("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:(0,Bt.jsx)(So.div,c(c({},s),{},{ref:p,style:c({boxSizing:"border-box",maxHeight:"100%"},s.style)}))})})});ed.displayName="SelectItemAlignedPosition";var td=e.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Ju}=e,s=o(e,gu),i=Iu(n);return(0,Bt.jsx)(Zl,c(c(c({},i),s),{},{ref:t,align:r,collisionPadding:a,style:c(c({boxSizing:"border-box"},s.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});td.displayName="SelectPopperPosition";var[nd,rd]=Pu(Ku,{}),od="SelectViewport",ad=e.forwardRef((t,n)=>{const{__scopeSelect:r,nonce:a}=t,s=o(t,vu),i=Yu(od,r),l=rd(od,r),u=Kt(n,i.onViewportChange),d=e.useRef(0);return(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,Bt.jsx)(Tu.Slot,{scope:r,children:(0,Bt.jsx)(So.div,c(c({"data-radix-select-viewport":"",role:"presentation"},s),{},{ref:u,style:c({position:"relative",flex:1,overflow:"hidden auto"},s.style),onScroll:Wr(s.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=l;if(null!==r&&void 0!==r&&r.current&&n){const e=Math.abs(d.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*Ju,o=parseFloat(n.style.minHeight),a=parseFloat(n.style.height),s=Math.max(o,a);if(s<r){const o=s+e,a=Math.min(r,o),i=o-a;n.style.height=a+"px","0px"===n.style.bottom&&(t.scrollTop=i>0?i:0,n.style.justifyContent="flex-end")}}}d.current=t.scrollTop})}))})]})});ad.displayName=od;var sd="SelectGroup",[id,ld]=Pu(sd),cd=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=o(e,yu),a=po();return(0,Bt.jsx)(id,{scope:n,id:a,children:(0,Bt.jsx)(So.div,c(c({role:"group","aria-labelledby":a},r),{},{ref:t}))})});cd.displayName=sd;var ud="SelectLabel",dd=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=o(e,bu),a=ld(ud,n);return(0,Bt.jsx)(So.div,c(c({id:a.id},r),{},{ref:t}))});dd.displayName=ud;var hd="SelectItem",[fd,pd]=Pu(hd),md=e.forwardRef((t,n)=>{const{__scopeSelect:r,value:a,disabled:s=!1,textValue:i}=t,l=o(t,wu),u=Du(hd,r),d=Yu(hd,r),h=u.value===a,[f,p]=e.useState(null!==i&&void 0!==i?i:""),[m,g]=e.useState(!1),v=Kt(n,e=>{var t;return null===(t=d.itemRefCallback)||void 0===t?void 0:t.call(d,e,a,s)}),y=po(),b=e.useRef("touch"),w=()=>{s||(u.onValueChange(a),u.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,Bt.jsx)(fd,{scope:r,value:a,disabled:s,textId:y,isSelected:h,onItemTextChange:e.useCallback(e=>{p(t=>{var n;return t||(null!==(n=null===e||void 0===e?void 0:e.textContent)&&void 0!==n?n:"").trim()})},[]),children:(0,Bt.jsx)(Tu.ItemSlot,{scope:r,value:a,disabled:s,textValue:f,children:(0,Bt.jsx)(So.div,c(c({role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":h&&m,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},l),{},{ref:v,onFocus:Wr(l.onFocus,()=>g(!0)),onBlur:Wr(l.onBlur,()=>g(!1)),onClick:Wr(l.onClick,()=>{"mouse"!==b.current&&w()}),onPointerUp:Wr(l.onPointerUp,()=>{"mouse"===b.current&&w()}),onPointerDown:Wr(l.onPointerDown,e=>{b.current=e.pointerType}),onPointerMove:Wr(l.onPointerMove,e=>{var t;(b.current=e.pointerType,s)?null===(t=d.onItemLeave)||void 0===t||t.call(d):"mouse"===b.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Wr(l.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null===(t=d.onItemLeave)||void 0===t||t.call(d))}),onKeyDown:Wr(l.onKeyDown,e=>{var t;""!==(null===(t=d.searchRef)||void 0===t?void 0:t.current)&&" "===e.key||(Ou.includes(e.key)&&w()," "===e.key&&e.preventDefault())})}))})})});md.displayName=hd;var gd="SelectItemText",vd=e.forwardRef((t,n)=>{const{__scopeSelect:r,className:a,style:s}=t,i=o(t,xu),l=Du(gd,r),u=Yu(gd,r),d=pd(gd,r),h=Fu(gd,r),[f,p]=e.useState(null),m=Kt(n,e=>p(e),d.onItemTextChange,e=>{var t;return null===(t=u.itemTextRefCallback)||void 0===t?void 0:t.call(u,e,d.value,d.disabled)}),g=null===f||void 0===f?void 0:f.textContent,v=e.useMemo(()=>(0,Bt.jsx)("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=h;return uo(()=>(y(v),()=>b(v)),[y,b,v]),(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(So.span,c(c({id:d.textId},i),{},{ref:m})),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?mo.createPortal(i.children,l.valueNode):null]})});vd.displayName=gd;var yd="SelectItemIndicator",bd=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=o(e,ku);return pd(yd,n).isSelected?(0,Bt.jsx)(So.span,c(c({"aria-hidden":!0},r),{},{ref:t})):null});bd.displayName=yd;var wd="SelectScrollUpButton",xd=e.forwardRef((t,n)=>{const r=Yu(wd,t.__scopeSelect),o=rd(wd,t.__scopeSelect),[a,s]=e.useState(!1),i=Kt(n,o.onScrollButtonChange);return uo(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?(0,Bt.jsx)(Cd,c(c({},t),{},{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});xd.displayName=wd;var kd="SelectScrollDownButton",Sd=e.forwardRef((t,n)=>{const r=Yu(kd,t.__scopeSelect),o=rd(kd,t.__scopeSelect),[a,s]=e.useState(!1),i=Kt(n,o.onScrollButtonChange);return uo(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;s(n)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?(0,Bt.jsx)(Cd,c(c({},t),{},{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});Sd.displayName=kd;var Cd=e.forwardRef((t,n)=>{const{__scopeSelect:r,onAutoScroll:a}=t,s=o(t,Su),i=Yu("SelectScrollButton",r),l=e.useRef(null),u=_u(r),d=e.useCallback(()=>{null!==l.current&&(window.clearInterval(l.current),l.current=null)},[]);return e.useEffect(()=>()=>d(),[d]),uo(()=>{var e;const t=u().find(e=>e.ref.current===document.activeElement);null===t||void 0===t||null===(e=t.ref.current)||void 0===e||e.scrollIntoView({block:"nearest"})},[u]),(0,Bt.jsx)(So.div,c(c({"aria-hidden":!0},s),{},{ref:n,style:c({flexShrink:0},s.style),onPointerDown:Wr(s.onPointerDown,()=>{null===l.current&&(l.current=window.setInterval(a,50))}),onPointerMove:Wr(s.onPointerMove,()=>{var e;null===(e=i.onItemLeave)||void 0===e||e.call(i),null===l.current&&(l.current=window.setInterval(a,50))}),onPointerLeave:Wr(s.onPointerLeave,()=>{d()})}))}),Nd=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=o(e,Cu);return(0,Bt.jsx)(So.div,c(c({"aria-hidden":!0},r),{},{ref:t}))});Nd.displayName="SelectSeparator";var Ed="SelectArrow",Rd=e.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=o(e,Nu),a=Iu(n),s=Du(Ed,n),i=Yu(Ed,n);return s.open&&"popper"===i.position?(0,Bt.jsx)(ec,c(c(c({},a),r),{},{ref:t})):null});Rd.displayName=Ed;var Od=e.forwardRef((t,n)=>{let{__scopeSelect:r,value:a}=t,s=o(t,Eu);const i=e.useRef(null),l=Kt(n,i),u=cc(a);return e.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(u!==a&&n){const t=new Event("change",{bubbles:!0});n.call(e,a),e.dispatchEvent(t)}},[u,a]),(0,Bt.jsx)(So.select,c(c({},s),{},{style:c(c({},uc),s.style),ref:l,defaultValue:a}))});function jd(e){return""===e||void 0===e}function Td(t){const n=Co(t),r=e.useRef(""),o=e.useRef(0),a=e.useCallback(e=>{const t=r.current+e;n(t),function e(t){r.current=t,window.clearTimeout(o.current),""!==t&&(o.current=window.setTimeout(()=>e(""),1e3))}(t)},[n]),s=e.useCallback(()=>{r.current="",window.clearTimeout(o.current)},[]);return e.useEffect(()=>()=>window.clearTimeout(o.current),[]),[r,a,s]}function _d(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=(s=e,i=Math.max(o,0),s.map((e,t)=>s[(i+t)%s.length]));var s,i;1===r.length&&(a=a.filter(e=>e!==n));const l=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}Od.displayName="SelectBubbleInput";var Ad=Bu,Pd=Hu,Md=Gu,Id=Vu,Ld=qu,Dd=$u,zd=ad,Fd=dd,Bd=md,Ud=vd,Hd=bd,Wd=xd,Gd=Sd,Vd=Nd;const qd=Za("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Kd=Za("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),$d=Za("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Jd=["className","children"],Qd=["className"],Yd=["className"],Xd=["className","children","position"],Zd=["className"],eh=["className","children"],th=["className"],nh=Ad,rh=Md,oh=e.forwardRef((e,t)=>{let{className:n,children:r}=e,a=o(e,Jd);return(0,Bt.jsxs)(Pd,c(c({ref:t,className:Er("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n)},a),{},{children:[r,(0,Bt.jsx)(Id,{asChild:!0,children:(0,Bt.jsx)(qd,{className:"h-4 w-4 opacity-50"})})]}))});oh.displayName=Pd.displayName;const ah=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Qd);return(0,Bt.jsx)(Wd,c(c({ref:t,className:Er("flex cursor-default items-center justify-center py-1",n)},r),{},{children:(0,Bt.jsx)(Kd,{className:"h-4 w-4"})}))});ah.displayName=Wd.displayName;const sh=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Yd);return(0,Bt.jsx)(Gd,c(c({ref:t,className:Er("flex cursor-default items-center justify-center py-1",n)},r),{},{children:(0,Bt.jsx)(qd,{className:"h-4 w-4"})}))});sh.displayName=Gd.displayName;const ih=e.forwardRef((e,t)=>{let{className:n,children:r,position:a="popper"}=e,s=o(e,Xd);return(0,Bt.jsx)(Ld,{children:(0,Bt.jsxs)(Dd,c(c({ref:t,className:Er("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:a},s),{},{children:[(0,Bt.jsx)(ah,{}),(0,Bt.jsx)(zd,{className:Er("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,Bt.jsx)(sh,{})]}))})});ih.displayName=Dd.displayName;e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Zd);return(0,Bt.jsx)(Fd,c({ref:t,className:Er("px-2 py-1.5 text-sm font-semibold",n)},r))}).displayName=Fd.displayName;const lh=e.forwardRef((e,t)=>{let{className:n,children:r}=e,a=o(e,eh);return(0,Bt.jsxs)(Bd,c(c({ref:t,className:Er("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n)},a),{},{children:[(0,Bt.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,Bt.jsx)(Hd,{children:(0,Bt.jsx)($d,{className:"h-4 w-4"})})}),(0,Bt.jsx)(Ud,{children:r})]}))});lh.displayName=Bd.displayName;e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,th);return(0,Bt.jsx)(Vd,c({ref:t,className:Er("-mx-1 my-1 h-px bg-muted",n)},r))}).displayName=Vd.displayName;const ch=["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"],uh=["__scopeSwitch"],dh=["__scopeSwitch","control","checked","bubbles"];var hh="Switch",[fh,ph]=qr(hh),[mh,gh]=fh(hh),vh=e.forwardRef((t,n)=>{const{__scopeSwitch:r,name:a,checked:s,defaultChecked:i,required:l,disabled:u,value:d="on",onCheckedChange:h,form:f}=t,p=o(t,ch),[m,g]=e.useState(null),v=Kt(n,e=>g(e)),y=e.useRef(!1),b=!m||(f||!!m.closest("form")),[w,x]=Eo({prop:s,defaultProp:null!==i&&void 0!==i&&i,onChange:h,caller:hh});return(0,Bt.jsxs)(mh,{scope:r,checked:w,disabled:u,children:[(0,Bt.jsx)(So.button,c(c({type:"button",role:"switch","aria-checked":w,"aria-required":l,"data-state":xh(w),"data-disabled":u?"":void 0,disabled:u,value:d},p),{},{ref:v,onClick:Wr(t.onClick,e=>{x(e=>!e),b&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})),b&&(0,Bt.jsx)(wh,{control:m,bubbles:!y.current,name:a,value:d,checked:w,required:l,disabled:u,form:f,style:{transform:"translateX(-100%)"}})]})});vh.displayName=hh;var yh="SwitchThumb",bh=e.forwardRef((e,t)=>{const{__scopeSwitch:n}=e,r=o(e,uh),a=gh(yh,n);return(0,Bt.jsx)(So.span,c(c({"data-state":xh(a.checked),"data-disabled":a.disabled?"":void 0},r),{},{ref:t}))});bh.displayName=yh;var wh=e.forwardRef((t,n)=>{let{__scopeSwitch:r,control:a,checked:s,bubbles:i=!0}=t,l=o(t,dh);const u=e.useRef(null),d=Kt(u,n),h=cc(s),f=jl(a);return e.useEffect(()=>{const e=u.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(h!==s&&n){const t=new Event("click",{bubbles:i});n.call(e,s),e.dispatchEvent(t)}},[h,s,i]),(0,Bt.jsx)("input",c(c({type:"checkbox","aria-hidden":!0,defaultChecked:s},l),{},{tabIndex:-1,ref:d,style:c(c(c({},l.style),f),{},{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});function xh(e){return e?"checked":"unchecked"}wh.displayName="SwitchBubbleInput";var kh=vh,Sh=bh;const Ch=["className"],Nh=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Ch);return(0,Bt.jsx)(kh,c(c({className:Er("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n)},r),{},{ref:t,children:(0,Bt.jsx)(Sh,{className:Er("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}))});Nh.displayName=kh.displayName;const Eh=["children"],Rh=["children"];function Oh(t){const n=jh(t),r=e.forwardRef((t,r)=>{const{children:a}=t,s=o(t,Eh),i=e.Children.toArray(a),l=i.find(_h);if(l){const t=l.props.children,o=i.map(n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n);return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,o):null}))}return(0,Bt.jsx)(n,c(c({},s),{},{ref:r,children:a}))});return r.displayName="".concat(t,".Slot"),r}function jh(t){const n=e.forwardRef((t,n)=>{const{children:r}=t,a=o(t,Rh);if(e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=c({},t);for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){const e=a(...arguments);return o(...arguments),e}:o&&(n[r]=o):"style"===r?n[r]=c(c({},o),a):"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return c(c({},e),n)}(a,r.props);return r.type!==e.Fragment&&(o.ref=n?qt(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName="".concat(t,".SlotClone"),n}var Th=Symbol("radix.slottable");function _h(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===Th}const Ah=["__scopeDialog"],Ph=["forceMount"],Mh=["__scopeDialog"],Ih=["forceMount"],Lh=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],Dh=["__scopeDialog"],zh=["__scopeDialog"],Fh=["__scopeDialog"];var Bh="Dialog",[Uh,Hh]=qr(Bh),[Wh,Gh]=Uh(Bh),Vh=t=>{const{__scopeDialog:n,children:r,open:o,defaultOpen:a,onOpenChange:s,modal:i=!0}=t,l=e.useRef(null),c=e.useRef(null),[u,d]=Eo({prop:o,defaultProp:null!==a&&void 0!==a&&a,onChange:s,caller:Bh});return(0,Bt.jsx)(Wh,{scope:n,triggerRef:l,contentRef:c,contentId:po(),titleId:po(),descriptionId:po(),open:u,onOpenChange:d,onOpenToggle:e.useCallback(()=>d(e=>!e),[d]),modal:i,children:r})};Vh.displayName=Bh;var qh="DialogTrigger",Kh=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=o(e,Ah),a=Gh(qh,n),s=Kt(t,a.triggerRef);return(0,Bt.jsx)(So.button,c(c({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":pf(a.open)},r),{},{ref:s,onClick:Wr(e.onClick,a.onOpenToggle)}))});Kh.displayName=qh;var $h="DialogPortal",[Jh,Qh]=Uh($h,{forceMount:void 0}),Yh=t=>{const{__scopeDialog:n,forceMount:r,children:o,container:a}=t,s=Gh($h,n);return(0,Bt.jsx)(Jh,{scope:n,forceMount:r,children:e.Children.map(o,e=>(0,Bt.jsx)(Jo,{present:r||s.open,children:(0,Bt.jsx)(nc,{asChild:!0,container:a,children:e})}))})};Yh.displayName=$h;var Xh="DialogOverlay",Zh=e.forwardRef((e,t)=>{const n=Qh(Xh,e.__scopeDialog),{forceMount:r=n.forceMount}=e,a=o(e,Ph),s=Gh(Xh,e.__scopeDialog);return s.modal?(0,Bt.jsx)(Jo,{present:r||s.open,children:(0,Bt.jsx)(tf,c(c({},a),{},{ref:t}))}):null});Zh.displayName=Xh;var ef=Oh("DialogOverlay.RemoveScroll"),tf=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=o(e,Mh),a=Gh(Xh,n);return(0,Bt.jsx)(uu,{as:ef,allowPinchZoom:!0,shards:[a.contentRef],children:(0,Bt.jsx)(So.div,c(c({"data-state":pf(a.open)},r),{},{ref:t,style:c({pointerEvents:"auto"},r.style)}))})}),nf="DialogContent",rf=e.forwardRef((e,t)=>{const n=Qh(nf,e.__scopeDialog),{forceMount:r=n.forceMount}=e,a=o(e,Ih),s=Gh(nf,e.__scopeDialog);return(0,Bt.jsx)(Jo,{present:r||s.open,children:s.modal?(0,Bt.jsx)(of,c(c({},a),{},{ref:t})):(0,Bt.jsx)(af,c(c({},a),{},{ref:t}))})});rf.displayName=nf;var of=e.forwardRef((t,n)=>{const r=Gh(nf,t.__scopeDialog),o=e.useRef(null),a=Kt(n,r.contentRef,o);return e.useEffect(()=>{const e=o.current;if(e)return bc(e)},[]),(0,Bt.jsx)(sf,c(c({},t),{},{ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wr(t.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:Wr(t.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:Wr(t.onFocusOutside,e=>e.preventDefault())}))}),af=e.forwardRef((t,n)=>{const r=Gh(nf,t.__scopeDialog),o=e.useRef(!1),a=e.useRef(!1);return(0,Bt.jsx)(sf,c(c({},t),{},{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var n,s;(null===(n=t.onCloseAutoFocus)||void 0===n||n.call(t,e),e.defaultPrevented)||(o.current||null===(s=r.triggerRef.current)||void 0===s||s.focus(),e.preventDefault());o.current=!1,a.current=!1},onInteractOutside:e=>{var n,s;null===(n=t.onInteractOutside)||void 0===n||n.call(t,e),e.defaultPrevented||(o.current=!0,"pointerdown"===e.detail.originalEvent.type&&(a.current=!0));const i=e.target;(null===(s=r.triggerRef.current)||void 0===s?void 0:s.contains(i))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&a.current&&e.preventDefault()}}))}),sf=e.forwardRef((t,n)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:i}=t,l=o(t,Lh),u=Gh(nf,r),d=e.useRef(null),h=Kt(n,d);return xs(),(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Rs,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:i,children:(0,Bt.jsx)(gs,c(c({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":pf(u.open)},l),{},{ref:h,onDismiss:()=>u.onOpenChange(!1)}))}),(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(yf,{titleId:u.titleId}),(0,Bt.jsx)(bf,{contentRef:d,descriptionId:u.descriptionId})]})]})}),lf="DialogTitle",cf=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=o(e,Dh),a=Gh(lf,n);return(0,Bt.jsx)(So.h2,c(c({id:a.titleId},r),{},{ref:t}))});cf.displayName=lf;var uf="DialogDescription",df=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=o(e,zh),a=Gh(uf,n);return(0,Bt.jsx)(So.p,c(c({id:a.descriptionId},r),{},{ref:t}))});df.displayName=uf;var hf="DialogClose",ff=e.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=o(e,Fh),a=Gh(hf,n);return(0,Bt.jsx)(So.button,c(c({type:"button"},r),{},{ref:t,onClick:Wr(e.onClick,()=>a.onOpenChange(!1))}))});function pf(e){return e?"open":"closed"}ff.displayName=hf;var mf="DialogTitleWarning",[gf,vf]=function(t,n){const r=e.createContext(n),a=t=>{const{children:n}=t,a=o(t,Gr),s=e.useMemo(()=>a,Object.values(a));return(0,Bt.jsx)(r.Provider,{value:s,children:n})};return a.displayName=t+"Provider",[a,function(o){const a=e.useContext(r);if(a)return a;if(void 0!==n)return n;throw new Error("`".concat(o,"` must be used within `").concat(t,"`"))}]}(mf,{contentName:nf,titleName:lf,docsSlug:"dialog"}),yf=t=>{let{titleId:n}=t;const r=vf(mf),o="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return e.useEffect(()=>{if(n){document.getElementById(n)||console.error(o)}},[o,n]),null},bf=t=>{let{contentRef:n,descriptionId:r}=t;const o=vf("DialogDescriptionWarning"),a="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(o.contentName,"}.");return e.useEffect(()=>{var e;const t=null===(e=n.current)||void 0===e?void 0:e.getAttribute("aria-describedby");if(r&&t){document.getElementById(r)||console.warn(a)}},[a,n,r]),null},wf=Vh,xf=Kh,kf=Yh,Sf=Zh,Cf=rf,Nf=cf,Ef=df,Rf=ff;const Of=Za("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jf=["className"],Tf=["className","children"],_f=["className"],Af=["className"],Pf=["className"],Mf=["className"],If=wf,Lf=xf,Df=kf,zf=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,jf);return(0,Bt.jsx)(Sf,c({ref:t,className:Er("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},r))});zf.displayName=Sf.displayName;const Ff=e.forwardRef((e,t)=>{let{className:n,children:r}=e,a=o(e,Tf);return(0,Bt.jsxs)(Df,{children:[(0,Bt.jsx)(zf,{}),(0,Bt.jsxs)(Cf,c(c({ref:t,className:Er("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},a),{},{children:[r,(0,Bt.jsxs)(Rf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,Bt.jsx)(Of,{className:"h-4 w-4"}),(0,Bt.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});Ff.displayName=Cf.displayName;const Bf=e=>{let{className:t}=e,n=o(e,_f);return(0,Bt.jsx)("div",c({className:Er("flex flex-col space-y-1.5 text-center sm:text-left",t)},n))};Bf.displayName="DialogHeader";const Uf=e=>{let{className:t}=e,n=o(e,Af);return(0,Bt.jsx)("div",c({className:Er("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};Uf.displayName="DialogFooter";const Hf=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Pf);return(0,Bt.jsx)(Nf,c({ref:t,className:Er("text-lg font-semibold leading-none tracking-tight",n)},r))});Hf.displayName=Nf.displayName;e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Mf);return(0,Bt.jsx)(Ef,c({ref:t,className:Er("text-sm text-muted-foreground",n)},r))}).displayName=Ef.displayName;const Wf=e=>{let{streamUrl:t,name:n,className:r="",showAlways:o=!1,isActive:a=!1}=e;return t&&(o||a)?(0,Bt.jsx)("div",{className:"bg-black relative overflow-hidden ".concat(r),children:(0,Bt.jsx)("iframe",{src:t,className:"w-full h-full",frameBorder:"0",allow:"autoplay",title:n,style:{pointerEvents:"none"}})}):(0,Bt.jsx)("div",{className:"bg-zinc-800 flex items-center justify-center ".concat(r),children:(0,Bt.jsx)("span",{className:"text-lg font-bold text-zinc-600",children:(null===n||void 0===n?void 0:n.charAt(0))||"?"})})};const Gf=e=>{let{categoryId:t}=e;const{categories:n}=Ht(),r=n.find(e=>e.id===t);return r?(0,Bt.jsx)("div",{className:"w-1 h-full absolute left-0 top-0",style:{backgroundColor:r.color}}):null},Vf=Za("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),qf=Za("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Kf=Za("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function $f(){const{pilots:t,categories:n,addPilot:r,updatePilot:o,deletePilot:a,togglePilotActive:s}=Ht(),[i,l]=(0,e.useState)({name:"",picture:"",streamUrl:"",categoryId:null,startOrder:""}),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(!1),p=()=>{if(!u.name.trim())return void za.error("Pilot name is required");const e=c(c({},u),{},{startOrder:parseInt(u.startOrder)||999});o(u.id,e),d(null),f(!1),za.success("Pilot updated successfully")},m=[...t].sort((e,t)=>(e.startOrder||999)-(t.startOrder||999));return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsx)(Fr,{children:(0,Bt.jsx)(Br,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Add New Pilot"})}),(0,Bt.jsx)(Hr,{children:(0,Bt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{htmlFor:"pilot-name",className:"text-white",children:"Pilot Name *"}),(0,Bt.jsx)(_r,{id:"pilot-name",value:i.name,onChange:e=>l(c(c({},i),{},{name:e.target.value})),placeholder:"John Doe",className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-pilot-name"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{htmlFor:"pilot-order",className:"text-white",children:"Start Order"}),(0,Bt.jsx)(_r,{id:"pilot-order",type:"number",value:i.startOrder,onChange:e=>l(c(c({},i),{},{startOrder:e.target.value})),placeholder:"1",className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-pilot-order"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{htmlFor:"pilot-category",className:"text-white",children:"Category"}),(0,Bt.jsxs)(nh,{value:i.categoryId||"none",onValueChange:e=>l(c(c({},i),{},{categoryId:"none"===e?null:e})),children:[(0,Bt.jsx)(oh,{className:"bg-[#09090B] border-zinc-700 text-white",id:"pilot-category",children:(0,Bt.jsx)(rh,{placeholder:"Select category"})}),(0,Bt.jsxs)(ih,{children:[(0,Bt.jsx)(lh,{value:"none",children:"None"}),n.map(e=>(0,Bt.jsx)(lh,{value:e.id,children:e.name},e.id))]})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{htmlFor:"pilot-picture",className:"text-white",children:"Picture URL"}),(0,Bt.jsx)(_r,{id:"pilot-picture",value:i.picture,onChange:e=>l(c(c({},i),{},{picture:e.target.value})),placeholder:"https://...",className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-pilot-picture"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{htmlFor:"pilot-stream",className:"text-white",children:"Stream URL"}),(0,Bt.jsx)(_r,{id:"pilot-stream",value:i.streamUrl,onChange:e=>l(c(c({},i),{},{streamUrl:e.target.value})),placeholder:"https://ninja.vdo/...",className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-pilot-stream"})]}),(0,Bt.jsx)("div",{className:"flex items-end",children:(0,Bt.jsxs)(jr,{onClick:()=>{if(!i.name.trim())return void za.error("Pilot name is required");const e=c(c({},i),{},{startOrder:parseInt(i.startOrder)||999});r(e),l({name:"",picture:"",streamUrl:"",categoryId:null,startOrder:""}),za.success("Pilot added successfully")},className:"w-full bg-[#FF4500] hover:bg-[#FF4500]/90","data-testid":"button-add-pilot",children:[(0,Bt.jsx)(Vf,{className:"w-4 h-4 mr-2"}),"Add Pilot"]})})]})})]}),(0,Bt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800 relative","data-testid":"pilot-card-".concat(e.id),children:[(0,Bt.jsx)(Gf,{categoryId:e.categoryId}),(0,Bt.jsx)(Hr,{className:"pt-6",children:(0,Bt.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Bt.jsx)(Wf,{streamUrl:e.streamUrl,name:e.name,showAlways:!0,className:"w-20 h-20 rounded flex-shrink-0"}),(0,Bt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsxs)("span",{className:"text-zinc-500 text-sm",children:["#",e.startOrder||"?"]}),(0,Bt.jsx)("h3",{className:"font-bold text-lg uppercase truncate text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e.name})]}),e.streamUrl&&(0,Bt.jsx)("p",{className:"text-xs text-zinc-500 truncate font-mono mt-1",children:e.streamUrl}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,Bt.jsx)(Nh,{checked:e.isActive,onCheckedChange:()=>s(e.id),className:"data-[state=checked]:bg-[#22C55E]","data-testid":"switch-pilot-active-".concat(e.id)}),(0,Bt.jsx)("span",{className:"text-sm text-white",children:e.isActive?"Stream Active":"Stream Inactive"})]})]}),(0,Bt.jsxs)("div",{className:"flex gap-1",children:[(0,Bt.jsxs)(If,{open:h&&(null===u||void 0===u?void 0:u.id)===e.id,onOpenChange:e=>{f(e),e||d(null)},children:[(0,Bt.jsx)(Lf,{asChild:!0,children:(0,Bt.jsx)(jr,{variant:"ghost",size:"icon",onClick:()=>d(c({},e)),className:"text-blue-500 hover:text-blue-400 hover:bg-blue-500/10","data-testid":"button-edit-pilot-".concat(e.id),children:(0,Bt.jsx)(qf,{className:"w-4 h-4"})})}),(0,Bt.jsxs)(Ff,{className:"bg-[#18181B] border-zinc-800 text-white",children:[(0,Bt.jsx)(Bf,{children:(0,Bt.jsx)(Hf,{className:"text-white",children:"Edit Pilot"})}),u&&(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Pilot Name *"}),(0,Bt.jsx)(_r,{value:u.name,onChange:e=>d(c(c({},u),{},{name:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Start Order"}),(0,Bt.jsx)(_r,{type:"number",value:u.startOrder||"",onChange:e=>d(c(c({},u),{},{startOrder:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Category"}),(0,Bt.jsxs)(nh,{value:u.categoryId||"none",onValueChange:e=>d(c(c({},u),{},{categoryId:"none"===e?null:e})),children:[(0,Bt.jsx)(oh,{className:"bg-[#09090B] border-zinc-700 text-white",children:(0,Bt.jsx)(rh,{placeholder:"Select category"})}),(0,Bt.jsxs)(ih,{children:[(0,Bt.jsx)(lh,{value:"none",children:"None"}),n.map(e=>(0,Bt.jsx)(lh,{value:e.id,children:e.name},e.id))]})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Picture URL"}),(0,Bt.jsx)(_r,{value:u.picture,onChange:e=>d(c(c({},u),{},{picture:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Stream URL"}),(0,Bt.jsx)(_r,{value:u.streamUrl,onChange:e=>d(c(c({},u),{},{streamUrl:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]})]}),(0,Bt.jsx)(Uf,{children:(0,Bt.jsx)(jr,{onClick:p,className:"bg-[#FF4500] hover:bg-[#FF4500]/90",children:"Update Pilot"})})]})]}),(0,Bt.jsx)(jr,{variant:"ghost",size:"icon",onClick:()=>{window.confirm("Delete this pilot?")&&(a(e.id),za.success("Pilot deleted"))},className:"text-red-500 hover:text-red-400 hover:bg-red-500/10","data-testid":"button-delete-pilot-".concat(e.id),children:(0,Bt.jsx)(Kf,{className:"w-4 h-4"})})]})]})})]},e.id))}),0===m.length&&(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:"No pilots registered. Add your first pilot above."})]})}function Jf(){const{categories:t,addCategory:n,updateCategory:r,deleteCategory:o}=Ht(),[a,s]=(0,e.useState)({name:"",color:"#FF4500"}),[i,l]=(0,e.useState)(null),[u,d]=(0,e.useState)(!1),h=()=>{i.name.trim()?(r(i.id,i),l(null),d(!1),za.success("Category updated successfully")):za.error("Category name is required")};return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsx)(Fr,{children:(0,Bt.jsx)(Br,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Add New Category"})}),(0,Bt.jsx)(Hr,{children:(0,Bt.jsxs)("div",{className:"flex gap-4",children:[(0,Bt.jsxs)("div",{className:"flex-1",children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Category Name *"}),(0,Bt.jsx)(_r,{value:a.name,onChange:e=>s(c(c({},a),{},{name:e.target.value})),placeholder:"Group A",className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-category-name"})]}),(0,Bt.jsxs)("div",{className:"w-32",children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Color"}),(0,Bt.jsx)(_r,{type:"color",value:a.color,onChange:e=>s(c(c({},a),{},{color:e.target.value})),className:"h-10 cursor-pointer","data-testid":"input-category-color"})]}),(0,Bt.jsx)("div",{className:"flex items-end",children:(0,Bt.jsxs)(jr,{onClick:()=>{a.name.trim()?(n(a),s({name:"",color:"#FF4500"}),za.success("Category added successfully")):za.error("Category name is required")},className:"bg-[#FF4500] hover:bg-[#FF4500]/90","data-testid":"button-add-category",children:[(0,Bt.jsx)(Vf,{className:"w-4 h-4 mr-2"}),"Add"]})})]})})]}),(0,Bt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map(e=>(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800 relative","data-testid":"category-card-".concat(e.id),children:[(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-2",style:{backgroundColor:e.color}}),(0,Bt.jsx)(Hr,{className:"pt-6 pl-6",children:(0,Bt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Bt.jsxs)("div",{className:"flex-1",children:[(0,Bt.jsx)("h3",{className:"font-bold text-xl uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif",color:e.color},children:e.name}),(0,Bt.jsx)("p",{className:"text-xs text-zinc-500 mt-1",children:e.color})]}),(0,Bt.jsxs)("div",{className:"flex gap-1",children:[(0,Bt.jsxs)(If,{open:u&&(null===i||void 0===i?void 0:i.id)===e.id,onOpenChange:e=>{d(e),e||l(null)},children:[(0,Bt.jsx)(Lf,{asChild:!0,children:(0,Bt.jsx)(jr,{variant:"ghost",size:"icon",onClick:()=>l(c({},e)),className:"text-blue-500 hover:text-blue-400 hover:bg-blue-500/10","data-testid":"button-edit-category-".concat(e.id),children:(0,Bt.jsx)(qf,{className:"w-4 h-4"})})}),(0,Bt.jsxs)(Ff,{className:"bg-[#18181B] border-zinc-800 text-white",children:[(0,Bt.jsx)(Bf,{children:(0,Bt.jsx)(Hf,{className:"text-white",children:"Edit Category"})}),i&&(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Category Name *"}),(0,Bt.jsx)(_r,{value:i.name,onChange:e=>l(c(c({},i),{},{name:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Color"}),(0,Bt.jsx)(_r,{type:"color",value:i.color,onChange:e=>l(c(c({},i),{},{color:e.target.value})),className:"h-10 cursor-pointer"})]})]}),(0,Bt.jsx)(Uf,{children:(0,Bt.jsx)(jr,{onClick:h,className:"bg-[#FF4500] hover:bg-[#FF4500]/90",children:"Update Category"})})]})]}),(0,Bt.jsx)(jr,{variant:"ghost",size:"icon",onClick:()=>{window.confirm("Delete this category?")&&(o(e.id),za.success("Category deleted"))},className:"text-red-500 hover:text-red-400 hover:bg-red-500/10","data-testid":"button-delete-category-".concat(e.id),children:(0,Bt.jsx)(Kf,{className:"w-4 h-4"})})]})]})})]},e.id))}),0===t.length&&(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:"No categories created. Add your first category above."})]})}const Qf=["SS","Liaison","Service Park","Other"];function Yf(){const{stages:t,currentStageId:n,setCurrentStageId:r,addStage:o,updateStage:a,deleteStage:s}=Ht(),[i,l]=(0,e.useState)({name:"",type:"SS",ssNumber:"",startTime:""}),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(!1),p=()=>{u.name.trim()?(a(u.id,u),d(null),f(!1),za.success("Stage updated successfully")):za.error("Stage name is required")},m=[...t].sort((e,t)=>e.startTime?t.startTime?e.startTime.localeCompare(t.startTime):-1:1),g=t.find(e=>e.id===n);return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsx)(Fr,{children:(0,Bt.jsx)(Br,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Add New Stage"})}),(0,Bt.jsx)(Hr,{children:(0,Bt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,Bt.jsxs)("div",{className:"md:col-span-2",children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Stage Name *"}),(0,Bt.jsx)(_r,{value:i.name,onChange:e=>l(c(c({},i),{},{name:e.target.value})),placeholder:"SS1 - Mountain Pass",className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"input-stage-name"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Type"}),(0,Bt.jsxs)(nh,{value:i.type,onValueChange:e=>l(c(c({},i),{},{type:e})),children:[(0,Bt.jsx)(oh,{className:"bg-[#09090B] border-zinc-700 text-white",children:(0,Bt.jsx)(rh,{})}),(0,Bt.jsx)(ih,{children:Qf.map(e=>(0,Bt.jsx)(lh,{value:e,children:e},e))})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"SS Number"}),(0,Bt.jsx)(_r,{value:i.ssNumber,onChange:e=>l(c(c({},i),{},{ssNumber:e.target.value})),placeholder:"1",className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Start Time (HH:MM)"}),(0,Bt.jsx)(_r,{value:i.startTime,onChange:e=>l(c(c({},i),{},{startTime:e.target.value})),placeholder:"09:00",className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsx)("div",{className:"flex items-end",children:(0,Bt.jsxs)(jr,{onClick:()=>{i.name.trim()?(o(i),l({name:"",type:"SS",ssNumber:"",startTime:""}),za.success("Stage added successfully")):za.error("Stage name is required")},className:"w-full bg-[#FF4500] hover:bg-[#FF4500]/90","data-testid":"button-add-stage",children:[(0,Bt.jsx)(Vf,{className:"w-4 h-4 mr-2"}),"Add"]})})]})})]}),(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(Fr,{children:[(0,Bt.jsx)(Br,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Current Stage"}),(0,Bt.jsx)(Ur,{className:"text-zinc-400",children:"Select the stage currently being raced"})]}),(0,Bt.jsxs)(Hr,{children:[(0,Bt.jsxs)(nh,{value:n||"",onValueChange:r,children:[(0,Bt.jsx)(oh,{className:"bg-[#09090B] border-zinc-700 text-white","data-testid":"select-current-stage",children:(0,Bt.jsx)(rh,{placeholder:"Select current stage"})}),(0,Bt.jsx)(ih,{children:m.map(e=>(0,Bt.jsxs)(lh,{value:e.id,children:[e.ssNumber?"SS".concat(e.ssNumber," - "):"",e.name]},e.id))})]}),g&&(0,Bt.jsxs)("p",{className:"mt-2 text-[#FACC15] font-bold",style:{fontFamily:"JetBrains Mono, monospace"},children:["LIVE: ",g.ssNumber?"SS".concat(g.ssNumber," - "):"",g.name]})]})]}),(0,Bt.jsx)("div",{className:"space-y-2",children:m.map(e=>(0,Bt.jsx)(zr,{className:"bg-[#18181B] border-zinc-800","data-testid":"stage-card-".concat(e.id),children:(0,Bt.jsx)(Hr,{className:"pt-6",children:(0,Bt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Bt.jsxs)("div",{className:"flex-1",children:[(0,Bt.jsxs)("h3",{className:"font-bold text-xl uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[e.ssNumber&&(0,Bt.jsxs)("span",{className:"text-[#FF4500]",children:["SS",e.ssNumber]})," ",e.name]}),(0,Bt.jsxs)("div",{className:"flex gap-4 mt-1 text-sm text-zinc-400",children:[(0,Bt.jsxs)("span",{children:["Type: ",e.type]}),e.startTime&&(0,Bt.jsxs)("span",{children:["Start: ",e.startTime]})]})]}),(0,Bt.jsxs)("div",{className:"flex gap-1",children:[(0,Bt.jsxs)(If,{open:h&&(null===u||void 0===u?void 0:u.id)===e.id,onOpenChange:e=>{f(e),e||d(null)},children:[(0,Bt.jsx)(Lf,{asChild:!0,children:(0,Bt.jsx)(jr,{variant:"ghost",size:"icon",onClick:()=>d(c({},e)),className:"text-blue-500 hover:text-blue-400 hover:bg-blue-500/10","data-testid":"button-edit-stage-".concat(e.id),children:(0,Bt.jsx)(qf,{className:"w-4 h-4"})})}),(0,Bt.jsxs)(Ff,{className:"bg-[#18181B] border-zinc-800 text-white",children:[(0,Bt.jsx)(Bf,{children:(0,Bt.jsx)(Hf,{className:"text-white",children:"Edit Stage"})}),u&&(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Stage Name *"}),(0,Bt.jsx)(_r,{value:u.name,onChange:e=>d(c(c({},u),{},{name:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Type"}),(0,Bt.jsxs)(nh,{value:u.type,onValueChange:e=>d(c(c({},u),{},{type:e})),children:[(0,Bt.jsx)(oh,{className:"bg-[#09090B] border-zinc-700 text-white",children:(0,Bt.jsx)(rh,{})}),(0,Bt.jsx)(ih,{children:Qf.map(e=>(0,Bt.jsx)(lh,{value:e,children:e},e))})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"SS Number"}),(0,Bt.jsx)(_r,{value:u.ssNumber,onChange:e=>d(c(c({},u),{},{ssNumber:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Start Time (HH:MM)"}),(0,Bt.jsx)(_r,{value:u.startTime,onChange:e=>d(c(c({},u),{},{startTime:e.target.value})),className:"bg-[#09090B] border-zinc-700 text-white"})]})]}),(0,Bt.jsx)(Uf,{children:(0,Bt.jsx)(jr,{onClick:p,className:"bg-[#FF4500] hover:bg-[#FF4500]/90",children:"Update Stage"})})]})]}),(0,Bt.jsx)(jr,{variant:"ghost",size:"icon",onClick:()=>{window.confirm("Delete this stage?")&&(s(e.id),za.success("Stage deleted"))},className:"text-red-500 hover:text-red-400 hover:bg-red-500/10","data-testid":"button-delete-stage-".concat(e.id),children:(0,Bt.jsx)(Kf,{className:"w-4 h-4"})})]})]})})},e.id))}),0===t.length&&(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:"No stages registered. Add your first stage above."})]})}const Xf=["className"],Zf=["className"],ep=["className"],tp=["className"],np=["className"],rp=["className"],op=["className"],ap=["className"],sp=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Xf);return(0,Bt.jsx)("div",{className:"relative w-full overflow-auto",children:(0,Bt.jsx)("table",c({ref:t,className:Er("w-full caption-bottom text-sm",n)},r))})});sp.displayName="Table";const ip=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Zf);return(0,Bt.jsx)("thead",c({ref:t,className:Er("[&_tr]:border-b",n)},r))});ip.displayName="TableHeader";const lp=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,ep);return(0,Bt.jsx)("tbody",c({ref:t,className:Er("[&_tr:last-child]:border-0",n)},r))});lp.displayName="TableBody";e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,tp);return(0,Bt.jsx)("tfoot",c({ref:t,className:Er("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n)},r))}).displayName="TableFooter";const cp=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,np);return(0,Bt.jsx)("tr",c({ref:t,className:Er("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n)},r))});cp.displayName="TableRow";const up=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,rp);return(0,Bt.jsx)("th",c({ref:t,className:Er("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n)},r))});up.displayName="TableHead";const dp=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,op);return(0,Bt.jsx)("td",c({ref:t,className:Er("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n)},r))});dp.displayName="TableCell";e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,ap);return(0,Bt.jsx)("caption",c({ref:t,className:Er("mt-4 text-sm text-muted-foreground",n)},r))}).displayName="TableCaption";const hp=["value","onChange","placeholder","format"],fp=e=>{let{value:t,onChange:n,placeholder:r="MM:SS.000",format:a="total"}=e,s=o(e,hp);return(0,Bt.jsx)(_r,c({value:t,onChange:e=>{let t=e.target.value;t=t.replace(/[^0-9:.]/g,""),n(t)},placeholder:r},s))};function pp(){const{pilots:e,stages:t,times:n,setTime:r,getTime:o,setArrivalTime:a,getArrivalTime:s,setStartTime:i,getStartTime:l}=Ht(),c=[...e].sort((e,t)=>(e.startOrder||999)-(t.startOrder||999)),u=[...t].sort((e,t)=>e.startTime?t.startTime?e.startTime.localeCompare(t.startTime):-1:1),d=(e,t,n)=>{a(e,t,n);const o=l(e,t);if(o&&n){const a=((e,t)=>{if(!e||!t)return"";try{const[n,r]=t.split(":").map(Number),o=e.split(":"),a=parseInt(o[0]),s=parseInt(o[1]);let i=3600*a+60*s+parseFloat(o[2]||0)-(3600*n+60*r);i<0&&(i+=86400);const l=Math.floor(i/60),c=(i%60).toFixed(3).padStart(6,"0");return"".concat(l,":").concat(c)}catch(ig){return""}})(n,o);a&&r(e,t,a)}},h=(e,t,n)=>{r(e,t,n);const o=l(e,t);if(o&&n){const r=((e,t)=>{if(!e||!t)return"";try{const[n,r]=t.split(":").map(Number),o=e.split(":"),a=parseInt(o[0]),s=3600*n+60*r+(60*a+parseFloat(o[1]||0)),i=Math.floor(s/3600)%24,l=Math.floor(s%3600/60),c=(s%60).toFixed(3).padStart(6,"0");return"".concat(String(i).padStart(2,"0"),":").concat(String(l).padStart(2,"0"),":").concat(c)}catch(ig){return""}})(n,o);r&&a(e,t,r)}};return(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(Fr,{children:[(0,Bt.jsx)(Br,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Time Matrix"}),(0,Bt.jsx)(Ur,{className:"text-zinc-400",children:"Register start times and finish times for each pilot in each stage"})]}),(0,Bt.jsx)(Hr,{children:0===c.length||0===u.length?(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:"Add pilots and stages first to register times."}):(0,Bt.jsx)("div",{className:"overflow-x-auto",children:(0,Bt.jsxs)(sp,{children:[(0,Bt.jsx)(ip,{children:(0,Bt.jsxs)(cp,{className:"border-zinc-700",children:[(0,Bt.jsx)(up,{className:"bg-[#18181B] text-white uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Pilot"}),u.map(e=>(0,Bt.jsxs)(up,{className:"bg-[#18181B] text-white uppercase font-bold text-center",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)("div",{children:e.ssNumber?"SS".concat(e.ssNumber):e.name}),(0,Bt.jsx)("div",{className:"text-xs text-zinc-400 font-normal",children:"Start / Arrival / Total"})]},e.id))]})}),(0,Bt.jsx)(lp,{children:c.map(e=>(0,Bt.jsxs)(cp,{className:"border-zinc-700 hover:bg-white/5",children:[(0,Bt.jsx)(dp,{className:"font-bold text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsxs)("span",{className:"text-zinc-500 text-xs",children:["#",e.startOrder||"?"]}),e.name]})}),u.map(t=>(0,Bt.jsx)(dp,{children:(0,Bt.jsxs)("div",{className:"space-y-1",children:[(0,Bt.jsx)("div",{className:"flex items-center gap-1",children:(0,Bt.jsx)(_r,{value:l(e.id,t.id),onChange:n=>i(e.id,t.id,n.target.value),placeholder:"HH:MM",className:"bg-[#09090B] border-zinc-700 text-center font-mono text-xs text-white h-7","data-testid":"input-start-".concat(e.id,"-").concat(t.id)})}),(0,Bt.jsx)("div",{className:"flex items-center gap-1",children:(0,Bt.jsxs)("div",{className:"flex gap-1 flex-1",children:[(0,Bt.jsx)(fp,{value:s(e.id,t.id),onChange:n=>d(e.id,t.id,n),placeholder:"HH:MM:SS.000",className:"bg-[#09090B] border-zinc-700 text-center font-mono text-xs text-white h-7 flex-1","data-testid":"input-arrival-".concat(e.id,"-").concat(t.id)}),(0,Bt.jsx)(fp,{value:o(e.id,t.id),onChange:n=>h(e.id,t.id,n),placeholder:"MM:SS.000",className:"bg-[#09090B] border-zinc-700 text-center font-mono text-xs text-white h-7 flex-1","data-testid":"input-time-".concat(e.id,"-").concat(t.id)})]})})]})},t.id))]},e.id))})]})})})]})}const mp=["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"],gp=["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],vp=["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],yp=["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"],bp=["__scopeSlider"],wp=["__scopeSlider"],xp=["__scopeSlider","index","name"],kp=["__scopeSlider","value"];var Sp=["PageUp","PageDown"],Cp=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Np={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ep="Slider",[Rp,Op,jp]=so(Ep),[Tp,_p]=qr(Ep,[jp]),[Ap,Pp]=Tp(Ep),Mp=e.forwardRef((t,n)=>{const{name:r,min:a=0,max:s=100,step:i=1,orientation:l="horizontal",disabled:u=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[a],value:f,onValueChange:p=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v}=t,y=o(t,mp),b=e.useRef(new Set),w=e.useRef(0),x="horizontal"===l?Dp:zp,[k=[],S]=Eo({prop:f,defaultProp:h,onChange:e=>{var t;null===(t=[...b.current][w.current])||void 0===t||t.focus(),p(e)}}),C=e.useRef(k);function N(e,t){let{commit:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1};const r=function(e){return(String(e).split(".")[1]||"").length}(i),o=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-a)/i)*i+a,r),l=cs(o,[a,s]);S(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}(e,l,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(r,d*i)){w.current=r.indexOf(l);const t=String(r)!==String(e);return t&&n&&m(r),t?r:e}return e})}return(0,Bt.jsx)(Ap,{scope:t.__scopeSlider,name:r,disabled:u,min:a,max:s,valueIndexToChangeRef:w,thumbs:b.current,values:k,orientation:l,form:v,children:(0,Bt.jsx)(Rp.Provider,{scope:t.__scopeSlider,children:(0,Bt.jsx)(Rp.Slot,{scope:t.__scopeSlider,children:(0,Bt.jsx)(x,c(c({"aria-disabled":u,"data-disabled":u?"":void 0},y),{},{ref:n,onPointerDown:Wr(y.onPointerDown,()=>{u||(C.current=k)}),min:a,max:s,inverted:g,onSlideStart:u?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}(k,e);N(e,t)},onSlideMove:u?void 0:function(e){N(e,w.current)},onSlideEnd:u?void 0:function(){const e=C.current[w.current];k[w.current]!==e&&m(k)},onHomeKeyDown:()=>!u&&N(a,0,{commit:!0}),onEndKeyDown:()=>!u&&N(s,k.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:t,direction:n}=e;if(!u){const e=Sp.includes(t.key)||t.shiftKey&&Cp.includes(t.key)?10:1,r=w.current;N(k[r]+i*e*n,r,{commit:!0})}}}))})})})});Mp.displayName=Ep;var[Ip,Lp]=Tp(Ep,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Dp=e.forwardRef((t,n)=>{const{min:r,max:a,dir:s,inverted:i,onSlideStart:l,onSlideMove:u,onSlideEnd:d,onStepKeyDown:h}=t,f=o(t,gp),[p,m]=e.useState(null),g=Kt(n,e=>m(e)),v=e.useRef(void 0),y=Oo(s),b="ltr"===y,w=b&&!i||!b&&i;function x(e){const t=v.current||p.getBoundingClientRect(),n=Jp([0,t.width],w?[r,a]:[a,r]);return v.current=t,n(e-t.left)}return(0,Bt.jsx)(Ip,{scope:t.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:(0,Bt.jsx)(Fp,c(c({dir:y,"data-orientation":"horizontal"},f),{},{ref:g,style:c(c({},f.style),{},{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:e=>{const t=x(e.clientX);null===l||void 0===l||l(t)},onSlideMove:e=>{const t=x(e.clientX);null===u||void 0===u||u(t)},onSlideEnd:()=>{v.current=void 0,null===d||void 0===d||d()},onStepKeyDown:e=>{const t=Np[w?"from-left":"from-right"].includes(e.key);null===h||void 0===h||h({event:e,direction:t?-1:1})}}))})}),zp=e.forwardRef((t,n)=>{const{min:r,max:a,inverted:s,onSlideStart:i,onSlideMove:l,onSlideEnd:u,onStepKeyDown:d}=t,h=o(t,vp),f=e.useRef(null),p=Kt(n,f),m=e.useRef(void 0),g=!s;function v(e){const t=m.current||f.current.getBoundingClientRect(),n=Jp([0,t.height],g?[a,r]:[r,a]);return m.current=t,n(e-t.top)}return(0,Bt.jsx)(Ip,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:(0,Bt.jsx)(Fp,c(c({"data-orientation":"vertical"},h),{},{ref:p,style:c(c({},h.style),{},{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:e=>{const t=v(e.clientY);null===i||void 0===i||i(t)},onSlideMove:e=>{const t=v(e.clientY);null===l||void 0===l||l(t)},onSlideEnd:()=>{m.current=void 0,null===u||void 0===u||u()},onStepKeyDown:e=>{const t=Np[g?"from-bottom":"from-top"].includes(e.key);null===d||void 0===d||d({event:e,direction:t?-1:1})}}))})}),Fp=e.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:s,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:u}=e,d=o(e,yp),h=Pp(Ep,n);return(0,Bt.jsx)(So.span,c(c({},d),{},{ref:t,onKeyDown:Wr(e.onKeyDown,e=>{"Home"===e.key?(i(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):Sp.concat(Cp).includes(e.key)&&(u(e),e.preventDefault())}),onPointerDown:Wr(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),h.thumbs.has(t)?t.focus():r(e)}),onPointerMove:Wr(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&a(e)}),onPointerUp:Wr(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))})}))}),Bp="SliderTrack",Up=e.forwardRef((e,t)=>{const{__scopeSlider:n}=e,r=o(e,bp),a=Pp(Bp,n);return(0,Bt.jsx)(So.span,c(c({"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation},r),{},{ref:t}))});Up.displayName=Bp;var Hp="SliderRange",Wp=e.forwardRef((t,n)=>{const{__scopeSlider:r}=t,a=o(t,wp),s=Pp(Hp,r),i=Lp(Hp,r),l=Kt(n,e.useRef(null)),u=s.values.length,d=s.values.map(e=>$p(e,s.min,s.max)),h=u>1?Math.min(...d):0,f=100-Math.max(...d);return(0,Bt.jsx)(So.span,c(c({"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0},a),{},{ref:l,style:c(c({},t.style),{},{[i.startEdge]:h+"%",[i.endEdge]:f+"%"})}))});Wp.displayName=Hp;var Gp="SliderThumb",Vp=e.forwardRef((t,n)=>{const r=Op(t.__scopeSlider),[o,a]=e.useState(null),s=Kt(n,e=>a(e)),i=e.useMemo(()=>o?r().findIndex(e=>e.ref.current===o):-1,[r,o]);return(0,Bt.jsx)(qp,c(c({},t),{},{ref:s,index:i}))}),qp=e.forwardRef((t,n)=>{const{__scopeSlider:r,index:a,name:s}=t,i=o(t,xp),l=Pp(Gp,r),u=Lp(Gp,r),[d,h]=e.useState(null),f=Kt(n,e=>h(e)),p=!d||(l.form||!!d.closest("form")),m=jl(d),g=l.values[a],v=void 0===g?0:$p(g,l.min,l.max),y=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(a,l.values.length),b=null===m||void 0===m?void 0:m[u.size],w=b?function(e,t,n){const r=e/2,o=Jp([0,50],[0,r]);return(r-o(t)*n)*n}(b,v,u.direction):0;return e.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),(0,Bt.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:"calc(".concat(v,"% + ").concat(w,"px)")},children:[(0,Bt.jsx)(Rp.ItemSlot,{scope:t.__scopeSlider,children:(0,Bt.jsx)(So.span,c(c({role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":l.min,"aria-valuenow":g,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0},i),{},{ref:f,style:void 0===g?{display:"none"}:t.style,onFocus:Wr(t.onFocus,()=>{l.valueIndexToChangeRef.current=a})}))}),p&&(0,Bt.jsx)(Kp,{name:null!==s&&void 0!==s?s:l.name?l.name+(l.values.length>1?"[]":""):void 0,form:l.form,value:g},a)]})});Vp.displayName=Gp;var Kp=e.forwardRef((t,n)=>{let{__scopeSlider:r,value:a}=t,s=o(t,kp);const i=e.useRef(null),l=Kt(i,n),u=cc(a);return e.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(u!==a&&n){const t=new Event("input",{bubbles:!0});n.call(e,a),e.dispatchEvent(t)}},[u,a]),(0,Bt.jsx)(So.input,c(c({style:{display:"none"}},s),{},{ref:l,defaultValue:a}))});function $p(e,t,n){return cs(100/(n-t)*(e-t),[0,100])}function Jp(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}Kp.displayName="RadioBubbleInput";var Qp=Mp,Yp=Up,Xp=Wp,Zp=Vp;const em=["className"],tm=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,em);return(0,Bt.jsxs)(Qp,c(c({ref:t,className:Er("relative flex w-full touch-none select-none items-center",n)},r),{},{children:[(0,Bt.jsx)(Yp,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,Bt.jsx)(Xp,{className:"absolute h-full bg-primary"})}),(0,Bt.jsx)(Zp,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}))});tm.displayName=Qp.displayName;const nm=t=>{let{pilotId:n,streamUrl:r,name:o,className:a="",showControls:s=!1,showMeter:i=!1,showMuteIndicator:l=!0,forceUnmute:c=!1,forceMute:u=!1,size:d="normal"}=t;const{getStreamConfig:h,streamConfigs:f,globalAudio:p}=Ht(),m=(0,e.useRef)(null),g=h(n),v=Object.values(f).some(e=>null===e||void 0===e?void 0:e.solo);let y=g.muted||p.muted||v&&!g.solo;c&&(y=!1),u&&(y=!0);const b=Math.round(g.volume/100*(p.volume/100)*100),w={filter:"saturate(".concat(g.saturation,"%) contrast(").concat(g.contrast,"%) brightness(").concat(g.brightness,"%)")};if(!r)return(0,Bt.jsx)("div",{className:"bg-zinc-800 flex items-center justify-center ".concat(a),children:(0,Bt.jsx)("span",{className:"text-lg font-bold text-zinc-600",children:(null===o||void 0===o?void 0:o.charAt(0))||"?"})});let x;try{x=new URL(r)}catch(k){x={toString:()=>r,searchParams:{set:()=>{}}}}return y?(x.searchParams.set("muted","1"),x.searchParams.set("volume","0")):x.searchParams.set("volume",b.toString()),i&&x.searchParams.set("meter","1"),(0,Bt.jsxs)("div",{className:"bg-black relative overflow-hidden ".concat(a),style:w,children:[(0,Bt.jsx)("iframe",{ref:m,src:x.toString(),className:"w-full h-full",frameBorder:"0",allow:"autoplay",title:o,style:{pointerEvents:s?"auto":"none"}}),y&&l&&(0,Bt.jsx)("div",{className:"absolute bottom-1 right-1 bg-black/70 px-1 rounded text-xs text-red-500 font-bold",children:"\ud83d\udd07"})]})},rm=t=>{let{isActive:n=!0,isMuted:r=!1,volume:o=100,height:a=150,width:s=10,className:i="",showLabels:l=!1}=t;const[c,u]=(0,e.useState)({left:0,right:0}),d=(0,e.useRef)(null);(0,e.useEffect)(()=>{if(!n||r)return void u({left:0,right:0});const e=setInterval(()=>{const e=o/100*.6,t=.3*Math.random(),n=Math.min(1,e+t+(Math.random()>.9?.2:0)),r=Math.min(1,e+t+(Math.random()>.9?.2:0));u({left:n,right:r})},100);return()=>{clearInterval(e),d.current&&cancelAnimationFrame(d.current)}},[n,r,o]);const h=(e,t)=>{const n=Math.floor(20*e);return(0,Bt.jsx)("div",{className:"flex flex-col-reverse gap-[1px]",style:{width:"".concat(s/2-1,"px"),height:"".concat(a,"px")},children:Array.from({length:20}).map((e,r)=>{let o="bg-zinc-800";if(r<n){const e=r/20*100;o=e<60?"bg-green-500":e<80?"bg-yellow-500":"bg-red-500"}return(0,Bt.jsx)("div",{className:"w-full transition-colors duration-75 ".concat(o),style:{height:"".concat(a/20-1,"px")}},"".concat(t,"-").concat(r))})})};return(0,Bt.jsxs)("div",{className:"flex flex-col items-center ".concat(i),children:[(0,Bt.jsxs)("div",{className:"flex gap-[2px] bg-black p-1 rounded",children:[h(c.left,"left"),h(c.right,"right")]}),l&&(0,Bt.jsxs)("div",{className:"flex justify-between w-full text-[8px] text-zinc-500 mt-1 px-1",children:[(0,Bt.jsx)("span",{children:"L"}),(0,Bt.jsx)("span",{children:"R"})]})]})},om=t=>{let{streamConfigs:n={},globalVolume:r=100,globalMuted:o=!1,height:a=200,width:s=20,className:i=""}=t;const[l,c]=(0,e.useState)(0);(0,e.useEffect)(()=>{if(o)return void c(0);const e=Object.values(n).filter(e=>e&&!e.muted);if(!(e.length>0))return void c(0);const t=setInterval(()=>{const t=r/100*.5,n=Math.min(.1*e.length,.3),o=.2*Math.random(),a=Math.min(1,t+n+o);c(a)},100);return()=>clearInterval(t)},[n,r,o]);const u=Math.floor(30*l);return(0,Bt.jsxs)("div",{className:"flex flex-col items-center ".concat(i),children:[(0,Bt.jsx)("div",{className:"flex flex-col-reverse gap-[1px] bg-black p-1 rounded",style:{width:"".concat(s,"px"),height:"".concat(a,"px")},children:Array.from({length:30}).map((e,t)=>{let n="bg-zinc-800";if(t<u){const e=t/30*100;n=e<60?"bg-green-500":e<80?"bg-yellow-500":"bg-red-500"}return(0,Bt.jsx)("div",{className:"w-full transition-colors duration-75 ".concat(n),style:{height:"".concat(a/30-1,"px")}},t)})}),(0,Bt.jsx)("span",{className:"text-[9px] text-zinc-500 mt-1",children:"MASTER"})]})},am=Za("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),sm=Za("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),im=Za("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);function lm(){const{pilots:e,categories:t,streamConfigs:n,globalAudio:r,setGlobalAudio:o,getStreamConfig:a,setStreamConfig:s,setSoloStream:i}=Ht(),l=[...e].sort((e,t)=>(e.startOrder||999)-(t.startOrder||999));return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsx)(Fr,{className:"pb-2",children:(0,Bt.jsx)(Br,{className:"uppercase text-white text-lg",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Master Audio"})}),(0,Bt.jsx)(Hr,{children:(0,Bt.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Bt.jsx)(om,{streamConfigs:n,globalVolume:r.volume,globalMuted:r.muted,height:100,width:16}),(0,Bt.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Bt.jsx)(ls,{className:"text-sm text-white",children:"Master Volume"}),(0,Bt.jsxs)("span",{className:"text-sm text-zinc-400 font-mono",children:[r.volume,"%"]})]}),(0,Bt.jsx)(tm,{value:[r.volume],onValueChange:e=>{let[t]=e;return o(c(c({},r),{},{volume:t}))},max:100,min:0,step:5,className:"w-full","data-testid":"global-volume-slider"})]}),(0,Bt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Bt.jsxs)(jr,{variant:r.muted?"destructive":"outline",size:"sm",onClick:()=>o(c(c({},r),{},{muted:!r.muted})),className:r.muted?"":"border-zinc-700 text-white","data-testid":"global-mute-button",children:[r.muted?(0,Bt.jsx)(am,{className:"w-4 h-4 mr-2"}):(0,Bt.jsx)(sm,{className:"w-4 h-4 mr-2"}),r.muted?"Unmute All":"Mute All"]}),r.muted&&(0,Bt.jsx)("span",{className:"text-red-500 text-sm font-bold animate-pulse",children:"ALL AUDIO MUTED"})]})]})]})})]}),(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(Fr,{children:[(0,Bt.jsx)(Br,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Individual Stream Controls"}),(0,Bt.jsx)(Ur,{className:"text-zinc-400",children:"Configure audio and video settings for each pilot's stream. Changes apply live to the overlay."})]}),(0,Bt.jsx)(Hr,{children:0===l.filter(e=>e.streamUrl).length?(0,Bt.jsx)("div",{className:"text-center py-12 text-zinc-500",children:"No pilots with stream URLs. Add stream URLs in the Pilots tab first."}):(0,Bt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.filter(e=>e.streamUrl).map(e=>{const o=a(e.id),l=t.find(t=>t.id===e.categoryId),c=Object.values(n).some(e=>null===e||void 0===e?void 0:e.solo),u=o.muted||r.muted||c&&!o.solo;return(0,Bt.jsxs)(zr,{className:"bg-[#09090B] border-zinc-700 relative overflow-hidden ".concat(o.solo?"ring-2 ring-[#FACC15]":""),"data-testid":"stream-config-card-".concat(e.id),children:[l&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1",style:{backgroundColor:l.color}}),(0,Bt.jsxs)(Hr,{className:"pt-4 pl-4",children:[(0,Bt.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,Bt.jsx)("div",{className:"flex-1 aspect-video bg-black rounded overflow-hidden",style:{maxHeight:"150px"},children:(0,Bt.jsx)(nm,{pilotId:e.id,streamUrl:e.streamUrl,name:e.name,className:"w-full h-full",showControls:!1,showMeter:!0})}),(0,Bt.jsx)(rm,{isActive:e.isActive,isMuted:u,volume:Math.round(o.volume/100*(r.volume/100)*100),height:85,width:10})]}),(0,Bt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Bt.jsxs)("h3",{className:"font-bold text-sm uppercase text-white truncate",style:{fontFamily:"Barlow Condensed, sans-serif"},children:["#",e.startOrder||"?"," ",e.name]}),(0,Bt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Bt.jsx)(jr,{variant:"ghost",size:"icon",onClick:()=>i(e.id),className:"h-7 w-7 ".concat(o.solo?"bg-[#FACC15] text-black hover:bg-[#FACC15]/80":"text-zinc-400 hover:text-white hover:bg-zinc-800"),title:"Solo (mute all others)","data-testid":"stream-solo-".concat(e.id),children:(0,Bt.jsx)(im,{className:"w-4 h-4"})}),(0,Bt.jsx)(jr,{variant:"ghost",size:"icon",onClick:()=>s(e.id,{muted:!o.muted}),className:"h-7 w-7 ".concat(o.muted?"bg-red-500/20 text-red-500 hover:bg-red-500/30":"text-zinc-400 hover:text-white hover:bg-zinc-800"),title:"Mute","data-testid":"stream-mute-".concat(e.id),children:o.muted?(0,Bt.jsx)(am,{className:"w-4 h-4"}):(0,Bt.jsx)(sm,{className:"w-4 h-4"})})]})]}),(0,Bt.jsxs)("div",{className:"space-y-3",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Bt.jsx)(ls,{className:"text-xs text-zinc-400",children:"Volume"}),(0,Bt.jsxs)("span",{className:"text-xs text-zinc-500 font-mono",children:[o.volume,"%"]})]}),(0,Bt.jsx)(tm,{value:[o.volume],onValueChange:t=>{let[n]=t;return s(e.id,{volume:n})},max:100,min:0,step:5,className:"w-full","data-testid":"stream-volume-".concat(e.id)})]}),(0,Bt.jsxs)("div",{className:"pt-2 border-t border-zinc-700",children:[(0,Bt.jsx)(ls,{className:"text-xs text-zinc-400 block mb-2",children:"Video Adjustments"}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Bt.jsx)("span",{className:"text-xs text-zinc-500 w-20",children:"Saturation"}),(0,Bt.jsx)(tm,{value:[o.saturation],onValueChange:t=>{let[n]=t;return s(e.id,{saturation:n})},max:200,min:0,step:10,className:"flex-1","data-testid":"stream-saturation-".concat(e.id)}),(0,Bt.jsxs)("span",{className:"text-xs text-zinc-500 font-mono w-10 text-right",children:[o.saturation,"%"]})]}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Bt.jsx)("span",{className:"text-xs text-zinc-500 w-20",children:"Contrast"}),(0,Bt.jsx)(tm,{value:[o.contrast],onValueChange:t=>{let[n]=t;return s(e.id,{contrast:n})},max:200,min:0,step:10,className:"flex-1","data-testid":"stream-contrast-".concat(e.id)}),(0,Bt.jsxs)("span",{className:"text-xs text-zinc-500 font-mono w-10 text-right",children:[o.contrast,"%"]})]}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)("span",{className:"text-xs text-zinc-500 w-20",children:"Brightness"}),(0,Bt.jsx)(tm,{value:[o.brightness],onValueChange:t=>{let[n]=t;return s(e.id,{brightness:n})},max:200,min:0,step:10,className:"flex-1","data-testid":"stream-brightness-".concat(e.id)}),(0,Bt.jsxs)("span",{className:"text-xs text-zinc-500 font-mono w-10 text-right",children:[o.brightness,"%"]})]})]}),(0,Bt.jsx)(jr,{variant:"ghost",size:"sm",onClick:()=>s(e.id,{volume:100,muted:!1,saturation:100,contrast:100,brightness:100}),className:"w-full text-xs text-zinc-400 hover:text-white mt-2","data-testid":"stream-reset-".concat(e.id),children:"Reset to Defaults"})]})]})]},e.id)})})})]}),(0,Bt.jsx)("div",{className:"text-xs text-zinc-600 text-center px-4",children:"Note: Audio meters show simulated levels based on volume settings. For real audio monitoring, VDO.Ninja streams include built-in meters via the &meter=1 parameter."})]})}const cm=Za("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),um=Za("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),dm=Za("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),hm=Za("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),fm=Za("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),pm=Za("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function mm(){const{pilots:t,categories:n,stages:r,mapUrl:o,setMapUrl:a,exportData:s,importData:i,clearAllData:l,wsEnabled:c,wsChannelKey:u,wsConnectionStatus:d,wsError:h,connectWebSocket:f,disconnectWebSocket:p,generateNewChannelKey:m}=Ht(),g=(0,e.useRef)(null),[v,y]=(0,e.useState)(!1),[b,w]=(0,e.useState)(""),x=t.filter(e=>e.isActive);return(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(Fr,{children:[(0,Bt.jsxs)(Br,{className:"uppercase text-white flex items-center gap-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)(cm,{className:"w-5 h-5"}),"Google Maps Integration"]}),(0,Bt.jsx)(Ur,{className:"text-zinc-400",children:"Add a Google Maps embed URL to display in Scene 1 grid"})]}),(0,Bt.jsx)(Hr,{children:(0,Bt.jsxs)("div",{className:"space-y-2",children:[(0,Bt.jsx)(ls,{className:"text-white",children:"Google Maps Embed URL"}),(0,Bt.jsx)(_r,{value:o||"",onChange:e=>a(e.target.value),placeholder:"https://www.google.com/maps/embed?pb=...",className:"bg-[#09090B] border-zinc-700 text-white font-mono text-sm","data-testid":"input-map-url"}),(0,Bt.jsx)("p",{className:"text-xs text-zinc-500",children:"Tip: Go to Google Maps \u2192 Share \u2192 Embed a map \u2192 Copy the src URL from the iframe code"})]})})]}),(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(Fr,{children:[(0,Bt.jsxs)(Br,{className:"uppercase text-white flex items-center gap-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:["connected"===d?(0,Bt.jsx)(um,{className:"w-5 h-5 text-green-500"}):(0,Bt.jsx)(dm,{className:"w-5 h-5 text-zinc-500"}),"Live Sync (WebSocket)"]}),(0,Bt.jsx)(Ur,{className:"text-zinc-400",children:"Real-time sync between Setup and Overlay pages across devices"})]}),(0,Bt.jsxs)(Hr,{className:"space-y-4",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("connected"===d?"bg-green-500":"connecting"===d?"bg-yellow-500 animate-pulse":"error"===d?"bg-red-500":"bg-zinc-500")}),(0,Bt.jsx)("span",{className:"text-white capitalize",children:d}),h&&(0,Bt.jsxs)("span",{className:"text-red-400 text-sm",children:["(",h,")"]})]}),"connected"===d?(0,Bt.jsxs)("div",{className:"space-y-3",children:[(0,Bt.jsxs)("div",{className:"bg-[#09090B] p-3 rounded border border-zinc-700",children:[(0,Bt.jsx)(ls,{className:"text-xs text-zinc-400 block mb-1",children:"Connected Channel Key"}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)("code",{className:"text-[#FACC15] font-mono flex-1 truncate",children:u}),(0,Bt.jsx)(jr,{variant:"ghost",size:"icon",onClick:()=>{const e=u||b;e&&(navigator.clipboard.writeText(e),y(!0),za.success("Channel key copied to clipboard"),setTimeout(()=>y(!1),2e3))},className:"h-8 w-8",children:v?(0,Bt.jsx)($d,{className:"w-4 h-4 text-green-500"}):(0,Bt.jsx)(hm,{className:"w-4 h-4 text-zinc-400"})})]})]}),(0,Bt.jsxs)(jr,{onClick:()=>{const e=u||b,t="".concat(window.location.origin).concat("/Nero-Rally-Show-Overlay","/overlay?ws=").concat(encodeURIComponent(e));navigator.clipboard.writeText(t),za.success("Overlay URL with key copied!")},variant:"outline",className:"w-full border-zinc-700 text-white",children:[(0,Bt.jsx)(hm,{className:"w-4 h-4 mr-2"}),"Copy Overlay URL with Key"]}),(0,Bt.jsx)(jr,{onClick:p,variant:"destructive",className:"w-full",children:"Disconnect"})]}):(0,Bt.jsxs)("div",{className:"space-y-3",children:[(0,Bt.jsxs)("div",{className:"flex gap-2",children:[(0,Bt.jsx)(_r,{value:b,onChange:e=>w(e.target.value),placeholder:"Enter or generate a channel key",className:"bg-[#09090B] border-zinc-700 text-white font-mono"}),(0,Bt.jsx)(jr,{onClick:()=>{const e=m();w(e),za.success("New channel key generated")},variant:"outline",className:"border-zinc-700 text-white shrink-0",children:"Generate"})]}),(0,Bt.jsx)(jr,{onClick:async()=>{if(!b.trim())return void za.error("Please generate or enter a channel key");await f(b)?za.success("Connected to WebSocket channel"):za.error("Failed to connect: "+(h||"Unknown error"))},disabled:!b.trim()||"connecting"===d,className:"w-full bg-[#FF4500] hover:bg-[#FF4500]/90",children:"connecting"===d?"Connecting...":"Connect"})]})]})]}),(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(Fr,{children:[(0,Bt.jsx)(Br,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Keyboard Shortcuts"}),(0,Bt.jsx)(Ur,{className:"text-zinc-400",children:"Quick access to scenes on overlay page"})]}),(0,Bt.jsx)(Hr,{children:(0,Bt.jsxs)("div",{className:"space-y-2",style:{fontFamily:"JetBrains Mono, monospace"},children:[(0,Bt.jsxs)("div",{className:"flex justify-between p-2 bg-[#09090B] rounded text-white",children:[(0,Bt.jsxs)("span",{children:[(0,Bt.jsx)("kbd",{className:"px-2 py-1 bg-zinc-800 rounded",children:"1"})," Scene 1"]}),(0,Bt.jsx)("span",{className:"text-zinc-500",children:"Live Stage + Streams"})]}),(0,Bt.jsxs)("div",{className:"flex justify-between p-2 bg-[#09090B] rounded text-white",children:[(0,Bt.jsxs)("span",{children:[(0,Bt.jsx)("kbd",{className:"px-2 py-1 bg-zinc-800 rounded",children:"2"})," Scene 2"]}),(0,Bt.jsx)("span",{className:"text-zinc-500",children:"Timing Tower"})]}),(0,Bt.jsxs)("div",{className:"flex justify-between p-2 bg-[#09090B] rounded text-white",children:[(0,Bt.jsxs)("span",{children:[(0,Bt.jsx)("kbd",{className:"px-2 py-1 bg-zinc-800 rounded",children:"3"})," Scene 3"]}),(0,Bt.jsx)("span",{className:"text-zinc-500",children:"Leaderboard"})]}),(0,Bt.jsxs)("div",{className:"flex justify-between p-2 bg-[#09090B] rounded text-white",children:[(0,Bt.jsxs)("span",{children:[(0,Bt.jsx)("kbd",{className:"px-2 py-1 bg-zinc-800 rounded",children:"4"})," Scene 4"]}),(0,Bt.jsx)("span",{className:"text-zinc-500",children:"Pilot Focus"})]}),(0,Bt.jsxs)("div",{className:"flex justify-between p-2 bg-[#09090B] rounded text-white",children:[(0,Bt.jsxs)("span",{children:[(0,Bt.jsx)("kbd",{className:"px-2 py-1 bg-zinc-800 rounded",children:"5"})," Scene 5"]}),(0,Bt.jsx)("span",{className:"text-zinc-500",children:"SS Comparison"})]})]})})]}),(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(Fr,{children:[(0,Bt.jsx)(Br,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Data Management"}),(0,Bt.jsx)(Ur,{className:"text-zinc-400",children:"Export or import your configuration"})]}),(0,Bt.jsxs)(Hr,{className:"space-y-4",children:[(0,Bt.jsxs)("div",{className:"flex gap-4",children:[(0,Bt.jsxs)(jr,{onClick:()=>{const e=s(),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="rally-config-".concat((new Date).toISOString().slice(0,10),".json"),r.click(),URL.revokeObjectURL(n),za.success("Configuration exported")},variant:"outline",className:"flex-1 border-zinc-700 text-white","data-testid":"button-export-config",children:[(0,Bt.jsx)(fm,{className:"w-4 h-4 mr-2"}),"Export Configuration"]}),(0,Bt.jsxs)(jr,{onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},variant:"outline",className:"flex-1 border-zinc-700 text-white","data-testid":"button-import-config",children:[(0,Bt.jsx)(pm,{className:"w-4 h-4 mr-2"}),"Import Configuration"]}),(0,Bt.jsx)("input",{ref:g,type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=e=>{i(e.target.result)?za.success("Configuration imported successfully"):za.error("Failed to import configuration")},n.readAsText(t)},className:"hidden"})]}),(0,Bt.jsx)("div",{className:"pt-4 border-t border-zinc-700",children:(0,Bt.jsx)(jr,{onClick:()=>{window.confirm("Are you sure you want to clear all data? This cannot be undone.")&&(l(),za.success("All data cleared"))},variant:"destructive",className:"w-full","data-testid":"button-clear-all",children:"Clear All Data"})})]})]}),(0,Bt.jsxs)(zr,{className:"bg-[#18181B] border-zinc-800",children:[(0,Bt.jsx)(Fr,{children:(0,Bt.jsx)(Br,{className:"uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Current Summary"})}),(0,Bt.jsx)(Hr,{children:(0,Bt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,Bt.jsxs)("div",{className:"bg-[#09090B] p-4 rounded",children:[(0,Bt.jsx)("div",{className:"text-3xl font-bold text-[#FF4500]",children:t.length}),(0,Bt.jsx)("div",{className:"text-sm text-zinc-400",children:"Pilots"})]}),(0,Bt.jsxs)("div",{className:"bg-[#09090B] p-4 rounded",children:[(0,Bt.jsx)("div",{className:"text-3xl font-bold text-[#FF4500]",children:n.length}),(0,Bt.jsx)("div",{className:"text-sm text-zinc-400",children:"Categories"})]}),(0,Bt.jsxs)("div",{className:"bg-[#09090B] p-4 rounded",children:[(0,Bt.jsx)("div",{className:"text-3xl font-bold text-[#FF4500]",children:r.length}),(0,Bt.jsx)("div",{className:"text-sm text-zinc-400",children:"Stages"})]}),(0,Bt.jsxs)("div",{className:"bg-[#09090B] p-4 rounded",children:[(0,Bt.jsx)("div",{className:"text-3xl font-bold text-[#22C55E]",children:x.length}),(0,Bt.jsx)("div",{className:"text-sm text-zinc-400",children:"Active Streams"})]})]})})]})]})}const gm=[{name:"Black",value:"#000000",label:"K"},{name:"Green Screen",value:"#00B140",label:"G"},{name:"Blue Screen",value:"#0047BB",label:"B"}];function vm(){const{chromaKey:t,setChromaKey:n}=Ht(),[r,o]=e.useState("#000000");return(0,Bt.jsx)("div",{className:"min-h-screen bg-[#09090B] text-white p-6",children:(0,Bt.jsxs)("div",{className:"max-w-[1600px] mx-auto",children:[(0,Bt.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)("h1",{className:"text-5xl font-bold uppercase tracking-tighter text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Rally Dashboard"}),(0,Bt.jsx)("p",{className:"text-zinc-400 mt-2",children:"Setup & Configuration"})]}),(0,Bt.jsx)("div",{className:"flex gap-3",children:(0,Bt.jsxs)(jr,{onClick:()=>{window.open("".concat("/Nero-Rally-Show-Overlay","/overlay"),"_blank"),za.success("Overlay page opened in new tab")},className:"bg-[#FF4500] hover:bg-[#FF4500]/90 text-white uppercase font-bold","data-testid":"go-to-overlay-button",children:[(0,Bt.jsx)(es,{className:"w-4 h-4 mr-2"}),"Go Live"]})})]}),(0,Bt.jsxs)(zr,{className:"mb-6 bg-[#18181B] border-zinc-800",children:[(0,Bt.jsxs)(Fr,{children:[(0,Bt.jsxs)(Br,{className:"flex items-center gap-2 uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)(ts,{className:"w-5 h-5"}),"Background Color (Chroma Key)"]}),(0,Bt.jsx)(Ur,{className:"text-zinc-400",children:"Select background color for video overlay"})]}),(0,Bt.jsx)(Hr,{children:(0,Bt.jsxs)("div",{className:"flex flex-wrap gap-3",children:[gm.map(e=>(0,Bt.jsx)("button",{onClick:()=>n(e.value),className:"px-4 py-2 rounded border-2 transition-all hover:scale-105 ".concat(t===e.value?"border-[#FF4500]":"border-zinc-700"),style:{backgroundColor:e.value},"data-testid":"chroma-".concat(e.label.toLowerCase(),"-button"),children:(0,Bt.jsx)("span",{className:"text-white font-bold",style:{textShadow:"0 0 4px rgba(0,0,0,0.8)"},children:e.name})},e.value)),(0,Bt.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,Bt.jsx)(_r,{type:"color",value:r,onChange:e=>o(e.target.value),className:"w-16 h-10 cursor-pointer","data-testid":"custom-chroma-picker"}),(0,Bt.jsx)(jr,{onClick:()=>n(r),variant:"outline",className:"border-zinc-700 text-white","data-testid":"apply-custom-chroma-button",children:"Apply Custom"})]})]})})]}),(0,Bt.jsxs)(ka,{defaultValue:"pilots",className:"space-y-6",children:[(0,Bt.jsxs)(Sa,{className:"bg-[#18181B] border border-zinc-800",children:[(0,Bt.jsx)(Ca,{value:"pilots",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-pilots",children:"Pilots"}),(0,Bt.jsx)(Ca,{value:"categories",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-categories",children:"Categories"}),(0,Bt.jsx)(Ca,{value:"stages",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-stages",children:"Stages"}),(0,Bt.jsx)(Ca,{value:"times",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-times",children:"Times"}),(0,Bt.jsx)(Ca,{value:"streams",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-streams",children:"Streams"}),(0,Bt.jsx)(Ca,{value:"config",className:"text-white data-[state=active]:bg-[#FF4500]","data-testid":"tab-config",children:"Config"})]}),(0,Bt.jsx)(Na,{value:"pilots",children:(0,Bt.jsx)($f,{})}),(0,Bt.jsx)(Na,{value:"categories",children:(0,Bt.jsx)(Jf,{})}),(0,Bt.jsx)(Na,{value:"stages",children:(0,Bt.jsx)(Yf,{})}),(0,Bt.jsx)(Na,{value:"times",children:(0,Bt.jsx)(pp,{})}),(0,Bt.jsx)(Na,{value:"streams",children:(0,Bt.jsx)(lm,{})}),(0,Bt.jsx)(Na,{value:"config",children:(0,Bt.jsx)(mm,{})})]})]})})}const ym=e=>{let{children:t}=e;const n=document.getElementById("left-controls");return n?mo.createPortal(t,n):null},bm=["__scopeCheckbox","onKeyDown","onClick"],wm=["__scopeCheckbox","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"],xm=["__scopeCheckbox","forceMount"],km=["__scopeCheckbox"];var Sm="Checkbox",[Cm,Nm]=qr(Sm),[Em,Rm]=Cm(Sm);function Om(t){const{__scopeCheckbox:n,checked:r,children:o,defaultChecked:a,disabled:s,form:i,name:l,onCheckedChange:u,required:d,value:h="on",internal_do_not_use_render:f}=t,[p,m]=Eo({prop:r,defaultProp:null!==a&&void 0!==a&&a,onChange:u,caller:Sm}),[g,v]=e.useState(null),[y,b]=e.useState(null),w=e.useRef(!1),x=!g||(!!i||!!g.closest("form")),k={checked:p,disabled:s,setChecked:m,control:g,setControl:v,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:w,required:d,defaultChecked:!Dm(a)&&a,isFormControl:x,bubbleInput:y,setBubbleInput:b};return(0,Bt.jsx)(Em,c(c({scope:n},k),{},{children:Lm(f)?f(k):o}))}var jm="CheckboxTrigger",Tm=e.forwardRef((t,n)=>{let{__scopeCheckbox:r,onKeyDown:a,onClick:s}=t,i=o(t,bm);const{control:l,value:u,disabled:d,checked:h,required:f,setControl:p,setChecked:m,hasConsumerStoppedPropagationRef:g,isFormControl:v,bubbleInput:y}=Rm(jm,r),b=Kt(n,p),w=e.useRef(h);return e.useEffect(()=>{const e=null===l||void 0===l?void 0:l.form;if(e){const t=()=>m(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,m]),(0,Bt.jsx)(So.button,c(c({type:"button",role:"checkbox","aria-checked":Dm(h)?"mixed":h,"aria-required":f,"data-state":zm(h),"data-disabled":d?"":void 0,disabled:d,value:u},i),{},{ref:b,onKeyDown:Wr(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:Wr(s,e=>{m(e=>!!Dm(e)||!e),y&&v&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}))});Tm.displayName=jm;var _m=e.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:s,required:i,disabled:l,value:u,onCheckedChange:d,form:h}=e,f=o(e,wm);return(0,Bt.jsx)(Om,{__scopeCheckbox:n,checked:a,defaultChecked:s,disabled:l,required:i,onCheckedChange:d,name:r,form:h,value:u,internal_do_not_use_render:e=>{let{isFormControl:r}=e;return(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Tm,c(c({},f),{},{ref:t,__scopeCheckbox:n})),r&&(0,Bt.jsx)(Im,{__scopeCheckbox:n})]})}})});_m.displayName=Sm;var Am="CheckboxIndicator",Pm=e.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r}=e,a=o(e,xm),s=Rm(Am,n);return(0,Bt.jsx)(Jo,{present:r||Dm(s.checked)||!0===s.checked,children:(0,Bt.jsx)(So.span,c(c({"data-state":zm(s.checked),"data-disabled":s.disabled?"":void 0},a),{},{ref:t,style:c({pointerEvents:"none"},e.style)}))})});Pm.displayName=Am;var Mm="CheckboxBubbleInput",Im=e.forwardRef((t,n)=>{let{__scopeCheckbox:r}=t,a=o(t,km);const{control:s,hasConsumerStoppedPropagationRef:i,checked:l,defaultChecked:u,required:d,disabled:h,name:f,value:p,form:m,bubbleInput:g,setBubbleInput:v}=Rm(Mm,r),y=Kt(n,v),b=cc(l),w=jl(s);e.useEffect(()=>{const e=g;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set,r=!i.current;if(b!==l&&n){const t=new Event("click",{bubbles:r});e.indeterminate=Dm(l),n.call(e,!Dm(l)&&l),e.dispatchEvent(t)}},[g,b,l,i]);const x=e.useRef(!Dm(l)&&l);return(0,Bt.jsx)(So.input,c(c({type:"checkbox","aria-hidden":!0,defaultChecked:null!==u&&void 0!==u?u:x.current,required:d,disabled:h,name:f,value:p,form:m},a),{},{tabIndex:-1,ref:y,style:c(c(c({},a.style),w),{},{position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"})}))});function Lm(e){return"function"===typeof e}function Dm(e){return"indeterminate"===e}function zm(e){return Dm(e)?"indeterminate":e?"checked":"unchecked"}Im.displayName=Mm;const Fm=["className"],Bm=e.forwardRef((e,t)=>{let{className:n}=e,r=o(e,Fm);return(0,Bt.jsx)(_m,c(c({ref:t,className:Er("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n)},r),{},{children:(0,Bt.jsx)(Pm,{className:Er("flex items-center justify-center text-current"),children:(0,Bt.jsx)($d,{className:"h-4 w-4"})})}))});Bm.displayName=_m.displayName;const Um=(e,t,n,r)=>{var o,a;const s=null===(o=n[e])||void 0===o?void 0:o[t];if(null===(a=r[e])||void 0===a?void 0:a[t])return"finished";if(!s)return"not_started";const i=new Date,[l,c]=s.split(":").map(Number),u=new Date;return u.setHours(l,c,0,0),i>=u?"racing":"not_started"},Hm=e=>{if(!e)return"00:00.000";try{const t=new Date,[n,r]=e.split(":").map(Number),o=new Date;if(o.setHours(n,r,0,0),t<o)return"00:00.000";const a=t-o,s=Math.floor(a/1e3),i=Math.floor(s/60),l=s%60,c=Math.floor(a%1e3);return"".concat(String(i).padStart(2,"0"),":").concat(String(l).padStart(2,"0"),".").concat(String(c).padStart(3,"0"))}catch(ig){return"00:00.000"}},Wm=e=>{if(!e)return 0;try{const t=e.split(":");if(t.length>=2){const e=parseInt(t[0])||0;return 60*e+(parseFloat(t[1])||0)}return parseFloat(e)||0}catch(ig){return 0}},Gm=(e,t,n,r)=>{const o={racing:0,finished:1,not_started:2};return[...e].sort((e,a)=>{const s=Um(e.id,t,n,r),i=Um(a.id,t,n,r);if(o[s]!==o[i])return o[s]-o[i];if("finished"===s){var l,c;return Wm(null===(l=r[e.id])||void 0===l?void 0:l[t])-Wm(null===(c=r[a.id])||void 0===c?void 0:c[t])}return 0})},Vm=Za("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),qm=Za("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Km=[{id:"1",name:"1 Stream",cols:1,rows:1,slots:1},{id:"1x2",name:"1x2 Vertical",cols:1,rows:2,slots:2},{id:"2x1",name:"2x1 Horizontal",cols:2,rows:1,slots:2},{id:"2x2",name:"2x2 Grid",cols:2,rows:2,slots:4},{id:"3x2",name:"3x2 Grid",cols:3,rows:2,slots:6}],$m="__google_maps__";function Jm(t){let{hideStreams:n=!1}=t;const{pilots:r,stages:o,currentStageId:a,startTimes:s,times:i,categories:l,chromaKey:u,mapUrl:d}=Ht(),[h,f]=(0,e.useState)(new Date),[p,m]=(0,e.useState)("2x2"),[g,v]=(0,e.useState)([]),[y,b]=(0,e.useState)(0),[w,x]=(0,e.useState)(0),k=(0,e.useRef)(null),S=o.find(e=>e.id===a);(0,e.useEffect)(()=>{const e=setInterval(()=>f(new Date),100);return()=>clearInterval(e)},[]);const C=Km.find(e=>e.id===p)||Km[3],N=r.filter(e=>e.isActive&&e.streamUrl),E=a?Gm(r,a,s,i):r;(0,e.useEffect)(()=>{if(k.current){const e=k.current,t=e.scrollWidth,n=e.clientWidth;x(Math.max(0,t-n))}},[E]),(0,e.useEffect)(()=>{0===g.length&&N.length>0&&v(N.slice(0,C.slots).map(e=>e.id))},[N,C.slots,g.length]);const R=e=>{v(t=>t.includes(e)?t.filter(t=>t!==e):t.length<C.slots?[...t,e]:t)},O=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},j=g.map(e=>(e=>{if(e===$m)return{type:"map",id:$m};const t=r.find(t=>t.id===e);return t?c({type:"pilot"},t):null})(e)).filter(Boolean);return(0,Bt.jsxs)("div",{className:"relative w-full h-full p-8","data-testid":"scene-1-live-stage",children:[(0,Bt.jsx)(ym,{children:(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white text-xs uppercase mb-2 block",children:"Layout"}),(0,Bt.jsxs)(nh,{value:p,onValueChange:m,children:[(0,Bt.jsx)(oh,{className:"bg-[#18181B] border-zinc-700 text-white text-sm",children:(0,Bt.jsx)(rh,{})}),(0,Bt.jsx)(ih,{children:Km.map(e=>(0,Bt.jsx)(lh,{value:e.id,children:e.name},e.id))})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)(ls,{className:"text-white text-xs uppercase mb-2 block",children:["Select Items (",g.length,"/",C.slots,")"]}),(0,Bt.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[d&&(0,Bt.jsxs)("div",{className:"flex items-center space-x-2 pb-2 border-b border-zinc-700 mb-2",children:[(0,Bt.jsx)(Bm,{id:"slot-map",checked:g.includes($m),onCheckedChange:()=>R($m),disabled:!g.includes($m)&&g.length>=C.slots}),(0,Bt.jsxs)("label",{htmlFor:"slot-map",className:"text-white text-sm cursor-pointer flex items-center gap-2",children:[(0,Bt.jsx)(cm,{className:"w-4 h-4 text-[#FF4500]"}),"Google Maps"]})]}),N.map(e=>(0,Bt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Bt.jsx)(Bm,{id:"pilot-".concat(e.id),checked:g.includes(e.id),onCheckedChange:()=>R(e.id),disabled:!g.includes(e.id)&&g.length>=C.slots}),(0,Bt.jsx)("label",{htmlFor:"pilot-".concat(e.id),className:"text-white text-sm cursor-pointer",children:e.name})]},e.id))]})]}),g.length>0&&(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white text-xs uppercase mb-2 block",children:"Reorder (Drag & Drop)"}),(0,Bt.jsx)("div",{className:"space-y-1",children:g.map((e,t)=>{const n=e===$m,o=n?null:r.find(t=>t.id===e),a=n?"Google Maps":null===o||void 0===o?void 0:o.name;return a?(0,Bt.jsx)("div",{draggable:!0,onDragStart:e=>((e,t)=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.toString())})(e,t),onDragOver:O,onDrop:e=>((e,t)=>{e.preventDefault();const n=parseInt(e.dataTransfer.getData("text/plain"));n!==t&&v(e=>{const r=[...e],[o]=r.splice(n,1);return r.splice(t,0,o),r})})(e,t),className:"bg-[#18181B] border border-zinc-700 p-2 rounded cursor-move hover:bg-zinc-800 transition-colors",children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsxs)("span",{className:"text-zinc-500 text-xs",children:[t+1,"."]}),n&&(0,Bt.jsx)(cm,{className:"w-3 h-3 text-[#FF4500]"}),(0,Bt.jsx)("span",{className:"text-white text-sm",children:a})]})},e):null})})]})]})}),(0,Bt.jsx)("div",{className:"grid ".concat("grid-cols-".concat(C.cols," grid-rows-").concat(C.rows)," gap-4 h-[calc(100%-200px)]"),children:0===j.length?(0,Bt.jsx)("div",{className:"flex items-center justify-center h-full col-span-full",children:(0,Bt.jsxs)("div",{className:"text-center",children:[(0,Bt.jsx)("p",{className:"text-white text-2xl font-bold uppercase",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"No Items Selected"}),(0,Bt.jsx)("p",{className:"text-zinc-400 mt-2",children:"Select pilots or Google Maps from the left panel"})]})}):j.map(e=>{var t,r;if("map"===e.type)return(0,Bt.jsxs)("div",{className:"relative rounded overflow-hidden border-2 border-[#FF4500]",style:{backgroundColor:u},children:[(0,Bt.jsx)("iframe",{src:d,className:"w-full h-full border-0",allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Rally Map"}),(0,Bt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/95 to-transparent p-3",children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)(cm,{className:"w-5 h-5 text-[#FF4500]"}),(0,Bt.jsx)("p",{className:"text-white font-bold text-lg uppercase",style:{fontFamily:"Barlow Condensed, sans-serif",textShadow:"0 0 8px rgba(0,0,0,1)"},children:"Rally Map"})]})})]},$m);const o=e,c=a?Um(o.id,a,s,i):"not_started",h=a?null===(t=s[o.id])||void 0===t?void 0:t[a]:null,f=a?null===(r=i[o.id])||void 0===r?void 0:r[a]:null,p=l.find(e=>e.id===o.categoryId);let m="",g="text-zinc-400";return"racing"===c&&h?(m=Hm(h),g="text-[#FF8C00]"):"finished"===c&&f?(m=f,g="text-[#1a5f1a]"):h&&(m="Start: ".concat(h),g="text-zinc-500"),(0,Bt.jsxs)("div",{className:"relative rounded overflow-hidden border-2 border-[#FF4500]",style:{backgroundColor:n?u:"black"},children:[p&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 z-10",style:{backgroundColor:p.color}}),!n&&(0,Bt.jsx)(nm,{pilotId:o.id,streamUrl:o.streamUrl,name:o.name,className:"w-full h-full"}),(0,Bt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/95 to-transparent p-3",children:(0,Bt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Bt.jsxs)("p",{className:"text-white font-bold text-lg uppercase",style:{fontFamily:"Barlow Condensed, sans-serif",textShadow:"0 0 8px rgba(0,0,0,1), 2px 2px 4px rgba(0,0,0,1), -1px -1px 2px rgba(0,0,0,1)"},children:[(0,Bt.jsxs)("span",{className:"text-zinc-400 text-base mr-2",style:{textShadow:"0 0 6px rgba(0,0,0,1)"},children:["#",o.startOrder||"?"]}),o.name]}),m&&(0,Bt.jsx)("p",{className:"font-mono text-lg font-bold ".concat(g),style:{fontFamily:"JetBrains Mono, monospace",textShadow:"0 0 10px rgba(0,0,0,1), 2px 2px 6px rgba(0,0,0,1), -1px -1px 3px rgba(0,0,0,1)"},children:m})]})})]},o.id)})}),S&&a&&(0,Bt.jsxs)("div",{className:"absolute bottom-8 left-8 right-8",children:[(0,Bt.jsx)("div",{className:"bg-black/95 backdrop-blur-sm border-l-4 border-[#FF4500] overflow-hidden mb-4",children:(0,Bt.jsxs)("div",{className:"p-4",children:[(0,Bt.jsx)("p",{className:"text-zinc-400 text-sm uppercase",style:{fontFamily:"Inter, sans-serif"},children:"Current Stage"}),(0,Bt.jsxs)("p",{className:"text-white text-3xl font-bold uppercase mt-1",style:{fontFamily:"Barlow Condensed, sans-serif"},children:[S.ssNumber?"SS".concat(S.ssNumber):""," ",S.name]})]})}),(0,Bt.jsxs)("div",{className:"relative bg-black/95 backdrop-blur-sm border-t-2 border-[#FF4500]",children:[y>0&&(0,Bt.jsx)("button",{onClick:()=>b(Math.max(0,y-200)),className:"absolute left-0 top-0 bottom-0 z-10 bg-black/90 hover:bg-black px-2 text-white",children:(0,Bt.jsx)(Vm,{className:"w-6 h-6"})}),(0,Bt.jsx)("div",{className:"overflow-hidden px-10",ref:k,children:(0,Bt.jsx)("div",{className:"flex gap-2 py-2 transition-transform duration-300",style:{transform:"translateX(-".concat(y,"px)")},children:E.map(e=>{var t,n;const r=a?Um(e.id,a,s,i):"not_started",o=a?null===(t=s[e.id])||void 0===t?void 0:t[a]:null,c=a?null===(n=i[e.id])||void 0===n?void 0:n[a]:null,u=l.find(t=>t.id===e.categoryId);let d="border-zinc-700",h="",f="text-zinc-500";return"finished"===r&&c?(d="border-[#1a5f1a]",h=c,f="text-[#1a5f1a]"):"racing"===r&&o?(d="border-[#FF8C00]",h=Hm(o),f="text-[#FF8C00]"):o&&(h="Start: ".concat(o),f="text-zinc-500"),(0,Bt.jsxs)("div",{className:"relative flex-shrink-0 bg-white/5 border-2 ".concat(d," px-4 py-2 min-w-[150px]"),children:[u&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1",style:{backgroundColor:u.color}}),(0,Bt.jsxs)("div",{className:"pl-2",children:[(0,Bt.jsx)("p",{className:"text-white text-sm font-bold uppercase truncate",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e.name}),h&&(0,Bt.jsx)("p",{className:"font-mono text-xs ".concat(f),style:{fontFamily:"JetBrains Mono, monospace"},children:h})]})]},e.id)})})}),y<w&&w>0&&(0,Bt.jsx)("button",{onClick:()=>b(Math.min(w,y+200)),className:"absolute right-0 top-0 bottom-0 z-10 bg-black/90 hover:bg-black px-2 text-white",children:(0,Bt.jsx)(qm,{className:"w-6 h-6"})})]})]})]})}const Qm=Za("radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);function Ym(t){var n,r,o;let{hideStreams:a=!1}=t;const{pilots:s,categories:i,stages:l,times:c,startTimes:u,currentStageId:d,chromaKey:h}=Ht(),[f,p]=(0,e.useState)(new Date),[m,g]=(0,e.useState)(null),[v,y]=(0,e.useState)(null),b=l.find(e=>e.id===d);if((0,e.useEffect)(()=>{const e=setInterval(()=>p(new Date),100);return()=>clearInterval(e)},[]),(0,e.useEffect)(()=>{if(!m){const e=s.find(e=>e.isActive&&e.streamUrl);e&&g(e.id)}},[s,m]),!d)return(0,Bt.jsx)("div",{className:"relative w-full h-full flex items-center justify-center","data-testid":"scene-2-timing-tower",children:(0,Bt.jsx)("p",{className:"text-white text-2xl",children:"No current stage selected"})});const w=Gm(s,d,u,c),x=w.filter(e=>"racing"===Um(e.id,d,u,c)),k=w.filter(e=>"finished"===Um(e.id,d,u,c)),S=w.filter(e=>"not_started"===Um(e.id,d,u,c)),C=k[0],N=e=>[...k,...x,...S].findIndex(t=>t.id===e)+1,E=(e,t,n)=>{var r,o;const l=null===(r=u[e.id])||void 0===r?void 0:r[d],h=null===(o=c[e.id])||void 0===o?void 0:o[d],f=i.find(t=>t.id===e.categoryId),p=e.id===m,b=e.id===v,w=N(e.id);let x="-",k="";if("racing"===n&&l)x=Hm(l);else if("finished"===n&&h){if(x=h,C&&e.id!==C.id){var S;k="+"+(Wm(h)-Wm(null===(S=c[C.id])||void 0===S?void 0:S[d])).toFixed(3)}}else"not_started"===n&&l&&(x=l);const E={racing:{bg:"bg-gradient-to-r from-[#FF8C00]/20 to-transparent",border:"border-[#FF8C00]",text:"text-[#FACC15]"},finished:{bg:"bg-gradient-to-r from-[#22C55E]/20 to-transparent",border:"border-[#22C55E]",text:"text-[#22C55E]"},not_started:{bg:"bg-gradient-to-r from-zinc-700/20 to-transparent",border:"border-zinc-600",text:"text-zinc-500"}}[n];return(0,Bt.jsxs)("div",{className:"relative overflow-hidden transition-all duration-300 ".concat(e.streamUrl?"cursor-pointer":""," ").concat(p?"translate-x-2":""),children:[(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1",style:{backgroundColor:(null===f||void 0===f?void 0:f.color)||"#3f3f46"}}),(0,Bt.jsx)("div",{className:"".concat(E.bg," border-l-4 ").concat(E.border," ml-1 hover:bg-white/10 transition-colors"),onClick:()=>(e=>{var t;null!==(t=s.find(t=>t.id===e))&&void 0!==t&&t.streamUrl&&y(v===e?null:e)})(e.id),children:(0,Bt.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,Bt.jsx)("div",{className:"w-8 h-8 flex items-center justify-center font-black text-lg ".concat(1===w?"bg-[#FFD700] text-black":2===w?"bg-[#C0C0C0] text-black":3===w?"bg-[#CD7F32] text-black":"bg-zinc-800 text-white"),style:{fontFamily:"Barlow Condensed, sans-serif",clipPath:"polygon(0 0, 100% 0, 100% 70%, 50% 100%, 0 70%)"},children:w}),(0,Bt.jsx)("div",{className:"relative flex-shrink-0",children:e.streamUrl&&!a?(0,Bt.jsx)("div",{className:"w-14 h-9 rounded overflow-hidden bg-black border border-zinc-700",children:(0,Bt.jsx)(nm,{pilotId:e.id,streamUrl:e.streamUrl,name:e.name,className:"w-full h-full",forceMute:!0,showMuteIndicator:!1})}):e.picture?(0,Bt.jsx)("img",{src:e.picture,alt:e.name,className:"w-10 h-10 rounded object-cover"}):(0,Bt.jsx)("div",{className:"w-10 h-10 rounded bg-zinc-800 flex items-center justify-center",children:(0,Bt.jsx)("span",{className:"text-sm font-bold text-zinc-600",children:e.name.charAt(0)})})}),(0,Bt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Bt.jsx)("p",{className:"text-white font-bold uppercase text-sm truncate",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e.name}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Bt.jsx)("span",{className:"font-mono text-xs font-bold ".concat(E.text),style:{fontFamily:"JetBrains Mono, monospace"},children:x}),k&&(0,Bt.jsx)("span",{className:"text-red-400 text-xs font-mono font-bold",children:k})]})]}),e.streamUrl&&(0,Bt.jsx)("button",{onClick:t=>((e,t)=>{e.stopPropagation(),v===t&&y(null),g(t)})(t,e.id),className:"w-7 h-10 flex items-center justify-center transition-all duration-200 ".concat(p?"text-[#FF4500] bg-[#FF4500]/30 shadow-[0_0_15px_rgba(255,69,0,0.7)]":"text-zinc-500 hover:text-white hover:bg-white/10"),style:{clipPath:"polygon(0 0, 70% 0, 100% 50%, 70% 100%, 0 100%)"},children:(0,Bt.jsx)(qm,{className:"w-4 h-4 transition-transform ".concat(p?"scale-110":"")})})]})}),b&&e.streamUrl&&!a&&(0,Bt.jsx)("div",{className:"px-2 pb-2 pt-1 ml-1 bg-black/50",children:(0,Bt.jsx)("div",{className:"w-full h-[140px] rounded overflow-hidden border-2 border-[#FF4500] bg-black shadow-[0_0_20px_rgba(255,69,0,0.4)]",children:(0,Bt.jsx)(nm,{pilotId:e.id,streamUrl:e.streamUrl,name:e.name,className:"w-full h-full",forceUnmute:!0})})})]},e.id)},R=s.find(e=>e.id===m),O=R?N(R.id):null,j=R?Um(R.id,d,u,c):null,T=R?i.find(e=>e.id===R.categoryId):null;return(0,Bt.jsxs)("div",{className:"relative w-full h-full flex","data-testid":"scene-2-timing-tower",children:[(0,Bt.jsxs)("div",{className:"w-[280px] bg-gradient-to-b from-black/95 to-black/80 backdrop-blur-sm overflow-y-auto",children:[(0,Bt.jsxs)("div",{className:"relative p-4 pb-3 overflow-hidden",children:[(0,Bt.jsx)("div",{className:"absolute -right-10 -top-10 w-32 h-32 bg-[#FF4500]/20 rotate-45"}),(0,Bt.jsx)("h2",{className:"text-[#FF4500] text-2xl font-black uppercase tracking-wider relative z-10",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Live Timing"}),b&&(0,Bt.jsx)("div",{className:"flex items-center gap-2 mt-1 relative z-10",children:(0,Bt.jsxs)("span",{className:"text-zinc-400 text-xs font-bold uppercase",children:[b.ssNumber?"SS".concat(b.ssNumber):""," ",b.name]})})]}),(0,Bt.jsxs)("div",{className:"space-y-1 px-2 pb-4",children:[x.length>0&&(0,Bt.jsxs)("div",{children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,Bt.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#FACC15] animate-pulse"}),(0,Bt.jsx)("span",{className:"text-[#FACC15] text-xs font-bold uppercase tracking-wider",children:"On Stage"})]}),(0,Bt.jsx)("div",{className:"space-y-1",children:x.map((e,t)=>E(e,0,"racing"))})]}),k.length>0&&(0,Bt.jsxs)("div",{className:"mt-3",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,Bt.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#22C55E]"}),(0,Bt.jsx)("span",{className:"text-[#22C55E] text-xs font-bold uppercase tracking-wider",children:"Finished"})]}),(0,Bt.jsx)("div",{className:"space-y-1",children:k.map((e,t)=>E(e,0,"finished"))})]}),S.length>0&&(0,Bt.jsxs)("div",{className:"mt-3",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,Bt.jsx)("div",{className:"w-2 h-2 rounded-full bg-zinc-500"}),(0,Bt.jsx)("span",{className:"text-zinc-500 text-xs font-bold uppercase tracking-wider",children:"Waiting"})]}),(0,Bt.jsx)("div",{className:"space-y-1",children:S.map((e,t)=>E(e,0,"not_started"))})]})]})]}),(0,Bt.jsx)("div",{className:"flex-1 p-4 flex flex-col",children:R&&R.streamUrl?(0,Bt.jsxs)("div",{className:"relative flex-1 rounded-lg overflow-hidden border-2 border-[#FF4500]",children:[a?(0,Bt.jsx)("div",{className:"w-full h-full",style:{backgroundColor:h}}):(0,Bt.jsx)(nm,{pilotId:R.id,streamUrl:R.streamUrl,name:R.name,className:"w-full h-full"}),(0,Bt.jsxs)("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded",children:[(0,Bt.jsx)(Qm,{className:"w-4 h-4 animate-pulse"}),(0,Bt.jsx)("span",{className:"text-sm font-black uppercase tracking-wider",children:"LIVE"})]}),b&&(0,Bt.jsx)("div",{className:"absolute top-4 right-4 bg-black/80 backdrop-blur-sm px-4 py-2 rounded",children:(0,Bt.jsx)("span",{className:"text-[#FF4500] text-lg font-black uppercase",style:{fontFamily:"Barlow Condensed, sans-serif"},children:b.ssNumber?"SS".concat(b.ssNumber):b.name})}),(0,Bt.jsxs)("div",{className:"absolute bottom-0 left-0 right-0",children:[(0,Bt.jsx)("div",{className:"h-1 w-full",style:{background:"linear-gradient(90deg, ".concat((null===T||void 0===T?void 0:T.color)||"#FF4500"," 0%, transparent 100%)")}}),(0,Bt.jsx)("div",{className:"bg-gradient-to-t from-black via-black/95 to-transparent pt-8 pb-4 px-6",children:(0,Bt.jsxs)("div",{className:"flex items-end justify-between",children:[(0,Bt.jsxs)("div",{className:"flex items-end gap-4",children:[(0,Bt.jsxs)("div",{className:"w-16 h-16 flex items-center justify-center font-black text-3xl ".concat(1===O?"bg-[#FFD700] text-black":2===O?"bg-[#C0C0C0] text-black":3===O?"bg-[#CD7F32] text-black":"bg-zinc-800 text-white"),style:{fontFamily:"Barlow Condensed, sans-serif",clipPath:"polygon(0 0, 100% 0, 100% 70%, 50% 100%, 0 70%)"},children:["P",O]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)("p",{className:"text-white font-black text-3xl uppercase tracking-wide",style:{fontFamily:"Barlow Condensed, sans-serif"},children:R.name}),T&&(0,Bt.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,Bt.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:T.color}}),(0,Bt.jsx)("span",{className:"text-zinc-400 text-sm font-bold uppercase",children:T.name})]})]})]}),(0,Bt.jsxs)("div",{className:"text-right",children:["racing"===j&&(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("p",{className:"text-zinc-400 text-xs uppercase tracking-wider",children:"Stage Time"}),(0,Bt.jsx)("p",{className:"text-[#FACC15] text-4xl font-mono font-bold",style:{fontFamily:"JetBrains Mono, monospace"},children:Hm(null===(n=u[R.id])||void 0===n?void 0:n[d])})]}),"finished"===j&&(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("p",{className:"text-zinc-400 text-xs uppercase tracking-wider",children:"Stage Time"}),(0,Bt.jsx)("p",{className:"text-[#22C55E] text-4xl font-mono font-bold",style:{fontFamily:"JetBrains Mono, monospace"},children:(null===(r=c[R.id])||void 0===r?void 0:r[d])||"-"})]}),"not_started"===j&&(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)("p",{className:"text-zinc-400 text-xs uppercase tracking-wider",children:"Start Time"}),(0,Bt.jsx)("p",{className:"text-white text-4xl font-mono font-bold",style:{fontFamily:"JetBrains Mono, monospace"},children:(null===(o=u[R.id])||void 0===o?void 0:o[d])||"-"})]})]})]})})]})]}):(0,Bt.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Bt.jsx)("p",{className:"text-white text-2xl font-bold uppercase",style:{fontFamily:"Barlow Condensed, sans-serif"},children:R?"No Stream Available":"Click a pilot to view"})})})]})}function Xm(t){let{hideStreams:n=!1}=t;const{pilots:r,stages:o,times:a,startTimes:s,categories:i}=Ht(),[l,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(new Date),f=o.find(e=>e.id===l),p=[...o.filter(e=>"SS"===e.type)].sort((e,t)=>e.startTime?t.startTime?e.startTime.localeCompare(t.startTime):-1:1);(0,e.useEffect)(()=>{const e=setInterval(()=>h(new Date),100);return()=>clearInterval(e)},[]),(0,e.useEffect)(()=>{null===l&&p.length},[p,l]);const m=r.map(e=>{if(l){var t,n;const i=Um(e.id,l,s,a),u=null===(t=s[e.id])||void 0===t?void 0:t[l],d=null===(n=a[e.id])||void 0===n?void 0:n[l];let h="-",f="text-white",m=1/0;"racing"===i&&u?(h=Hm(u),f="text-[#FACC15]",m=Wm(h)||1/0):"finished"===i&&d&&(h=d,f="text-white",m=Wm(d));let g=0,v=0,y=!1;for(const t of p){var r;const n=null===(r=a[e.id])||void 0===r?void 0:r[t.id];if(n)g+=Wm(n),v++;else if(t.id===l){var o;const n=Um(e.id,t.id,s,a),r=null===(o=s[e.id])||void 0===o?void 0:o[t.id];if("racing"===n&&r){const e=Hm(r);g+=Wm(e)||0,y=!0}}if(t.id===l)break}const b=Math.floor(g/60),w=(g%60).toFixed(3).padStart(6,"0"),x=v>0||y?"".concat(b,":").concat(w):"-",k=y?"text-[#FACC15]":"text-white";return c(c({},e),{},{displayTime:h,timeColor:f,sortTime:m,overallTime:g,overallDisplay:x,overallColor:k,hasTime:"finished"===i||"racing"===i,status:i})}{let t=0,n=0,r=!1;p.forEach(o=>{var i;const l=null===(i=a[e.id])||void 0===i?void 0:i[o.id];if(l)t+=Wm(l),n++;else{var c;const n=Um(e.id,o.id,s,a),i=null===(c=s[e.id])||void 0===c?void 0:c[o.id];if("racing"===n&&i&&!r){const e=Hm(i);t+=Wm(e),r=!0}}});const o=Math.floor(t/60),i=(t%60).toFixed(3).padStart(6,"0"),l=n>0||r?"".concat(o,":").concat(i):"-";return c(c({},e),{},{totalTime:t,completedStages:n,displayTime:l,timeColor:r?"text-[#FACC15]":"text-white",sortTime:n>0||r?t:1/0,overallDisplay:l,hasTime:n>0||r})}}).sort((e,t)=>e.hasTime||t.hasTime?e.hasTime?t.hasTime?e.sortTime-t.sortTime:-1:1:0),g=m.find(e=>e.hasTime);return(0,Bt.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center p-8","data-testid":"scene-3-leaderboard",children:[(0,Bt.jsx)(ym,{children:(0,Bt.jsx)("div",{className:"space-y-4",children:(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white text-xs uppercase mb-2 block",children:"Select Stage"}),(0,Bt.jsxs)(nh,{value:l||"overall",onValueChange:e=>u("overall"===e?null:e),children:[(0,Bt.jsx)(oh,{className:"bg-[#18181B] border-zinc-700 text-white text-sm",children:(0,Bt.jsx)(rh,{})}),(0,Bt.jsxs)(ih,{children:[(0,Bt.jsx)(lh,{value:"overall",children:"Overall Standings"}),p.map(e=>(0,Bt.jsxs)(lh,{value:e.id,children:[e.ssNumber?"SS".concat(e.ssNumber," - "):"",e.name]},e.id))]})]})]})})}),(0,Bt.jsxs)("div",{className:"w-full max-w-6xl",children:[(0,Bt.jsx)("div",{className:"text-center mb-8",children:(0,Bt.jsx)("h1",{className:"text-6xl font-bold uppercase text-[#FF4500] mb-2",style:{fontFamily:"Barlow Condensed, sans-serif"},children:f?"".concat(f.ssNumber?"SS".concat(f.ssNumber," - "):"").concat(f.name):"Overall Standings"})}),(0,Bt.jsx)("div",{className:"bg-black/95 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden",children:(0,Bt.jsxs)("table",{className:"w-full",children:[(0,Bt.jsx)("thead",{children:(0,Bt.jsxs)("tr",{className:"bg-[#18181B] text-white border-b border-white/10",children:[(0,Bt.jsx)("th",{className:"p-1 w-1"}),(0,Bt.jsx)("th",{className:"p-4 text-left uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Pos"}),(0,Bt.jsx)("th",{className:"p-4 text-left uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Pilot"}),l&&(0,Bt.jsx)("th",{className:"p-4 text-right uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"SS Time"}),(0,Bt.jsx)("th",{className:"p-4 text-right uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Overall"}),(0,Bt.jsx)("th",{className:"p-4 text-right uppercase font-bold",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"Gap"})]})}),(0,Bt.jsx)("tbody",{children:m.map((e,t)=>{const r=g&&e.id!==g.id&&e.hasTime?"+"+(e.sortTime-g.sortTime).toFixed(3)+"s":e.hasTime?"LEADER":"-",o=i.find(t=>t.id===e.categoryId);return(0,Bt.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-colors relative",children:[(0,Bt.jsx)("td",{className:"p-1 w-1 relative",children:o&&(0,Bt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1",style:{backgroundColor:o.color}})}),(0,Bt.jsx)("td",{className:"p-4",children:(0,Bt.jsx)("span",{className:"text-3xl font-bold ".concat(0===t&&e.hasTime?"text-[#FACC15]":1===t&&e.hasTime?"text-zinc-300":2===t&&e.hasTime?"text-[#CD7F32]":"text-white"),style:{fontFamily:"JetBrains Mono, monospace"},children:e.hasTime?t+1:"-"})}),(0,Bt.jsx)("td",{className:"p-4",children:(0,Bt.jsxs)("div",{className:"flex items-center gap-3",children:[e.streamUrl&&e.isActive&&!n?(0,Bt.jsx)("div",{className:"w-32 h-18 rounded overflow-hidden bg-black",style:{aspectRatio:"16/9"},children:(0,Bt.jsx)(nm,{pilotId:e.id,streamUrl:e.streamUrl,name:e.name,className:"w-full h-full"})}):e.picture?(0,Bt.jsx)("img",{src:e.picture,alt:e.name,className:"w-12 h-12 rounded object-cover"}):(0,Bt.jsx)("div",{className:"w-12 h-12 rounded bg-zinc-800 flex items-center justify-center",children:(0,Bt.jsx)("span",{className:"text-lg font-bold text-zinc-600",children:e.name.charAt(0)})}),(0,Bt.jsx)("span",{className:"text-white text-xl font-bold uppercase",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e.name})]})}),l&&(0,Bt.jsx)("td",{className:"p-4 text-right",children:(0,Bt.jsx)("span",{className:"text-2xl font-mono ".concat(e.timeColor),style:{fontFamily:"JetBrains Mono, monospace"},children:e.displayTime})}),(0,Bt.jsx)("td",{className:"p-4 text-right",children:(0,Bt.jsx)("span",{className:"text-xl font-mono ".concat(l?e.overallColor||"text-white":e.timeColor),style:{fontFamily:"JetBrains Mono, monospace"},children:e.overallDisplay})}),(0,Bt.jsx)("td",{className:"p-4 text-right",children:(0,Bt.jsx)("span",{className:"text-zinc-400 text-lg font-mono",style:{fontFamily:"JetBrains Mono, monospace"},children:r})})]},e.id)})})]})}),0===m.length&&(0,Bt.jsx)("div",{className:"text-center py-12",children:(0,Bt.jsx)("p",{className:"text-zinc-500 text-xl",children:"No data available"})})]})]})}function Zm(t){var n,r;let{hideStreams:o=!1}=t;const{pilots:a,stages:s,times:i,startTimes:l,currentStageId:c,chromaKey:u}=Ht(),[d,h]=(0,e.useState)((null===(n=a[0])||void 0===n?void 0:n.id)||null),[f,p]=(0,e.useState)(c||(null===(r=s[0])||void 0===r?void 0:r.id)||null),[m,g]=(0,e.useState)(new Date);(0,e.useEffect)(()=>{const e=setInterval(()=>g(new Date),100);return()=>clearInterval(e)},[]),(0,e.useEffect)(()=>{!d&&a.length>0&&h(a[0].id)},[a,d]),(0,e.useEffect)(()=>{!f&&s.length>0&&p(s[0].id)},[s,f]),(0,e.useEffect)(()=>{c&&c!==f&&p(c)},[c]);const v=a.find(e=>e.id===d),y=s.find(e=>e.id===f);if(!v)return(0,Bt.jsx)("div",{className:"flex items-center justify-center h-full","data-testid":"scene-4-pilot-focus",children:(0,Bt.jsx)("p",{className:"text-white text-2xl font-bold uppercase",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"No Pilot Selected"})});const b=[...s].sort((e,t)=>e.startTime?t.startTime?e.startTime.localeCompare(t.startTime):-1:1),w=b.map(e=>{var t,n;const r=Um(v.id,e.id,l,i),o=null===(t=l[v.id])||void 0===t?void 0:t[e.id],a=null===(n=i[v.id])||void 0===n?void 0:n[e.id];let s="-";return"racing"===r&&o?s=Hm(o):"finished"===r&&a?s=a:"not_started"===r&&o&&(s="Start: "+o),{stage:e,time:s,status:r}}),x=w.find(e=>e.stage.id===f);return(0,Bt.jsxs)("div",{className:"relative w-full h-full flex","data-testid":"scene-4-pilot-focus",children:[(0,Bt.jsx)(ym,{children:(0,Bt.jsxs)("div",{className:"space-y-4",children:[(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white text-xs uppercase mb-2 block",children:"Select Pilot"}),(0,Bt.jsxs)(nh,{value:d,onValueChange:h,children:[(0,Bt.jsx)(oh,{className:"bg-[#18181B] border-zinc-700 text-white text-sm",children:(0,Bt.jsx)(rh,{})}),(0,Bt.jsx)(ih,{children:a.map(e=>(0,Bt.jsx)(lh,{value:e.id,children:e.name},e.id))})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)(ls,{className:"text-white text-xs uppercase mb-2 block",children:"Select Stage"}),(0,Bt.jsxs)(nh,{value:f,onValueChange:p,children:[(0,Bt.jsx)(oh,{className:"bg-[#18181B] border-zinc-700 text-white text-sm",children:(0,Bt.jsx)(rh,{})}),(0,Bt.jsx)(ih,{children:b.map(e=>(0,Bt.jsx)(lh,{value:e.id,children:e.ssNumber?"SS".concat(e.ssNumber):e.name},e.id))})]})]})]})}),(0,Bt.jsx)("div",{className:"flex-1 p-8",children:v.streamUrl&&!o?(0,Bt.jsxs)("div",{className:"h-full bg-black rounded overflow-hidden border-2 border-[#FF4500] relative",children:[(0,Bt.jsx)(nm,{pilotId:v.id,streamUrl:v.streamUrl,name:v.name,className:"w-full h-full"}),x&&(0,Bt.jsxs)("div",{className:"absolute top-4 right-4 bg-black/90 backdrop-blur-sm p-4 rounded border border-[#FF4500]",children:[(0,Bt.jsx)("p",{className:"text-zinc-400 text-xs uppercase",children:null!==y&&void 0!==y&&y.ssNumber?"SS".concat(y.ssNumber):null===y||void 0===y?void 0:y.name}),(0,Bt.jsx)("p",{className:"text-2xl font-mono font-bold ".concat("racing"===x.status?"text-[#FACC15]":"finished"===x.status?"text-[#22C55E]":"text-zinc-500"),style:{fontFamily:"JetBrains Mono, monospace"},children:x.time})]})]}):o&&v.streamUrl?(0,Bt.jsx)("div",{className:"h-full rounded overflow-hidden border-2 border-[#FF4500] relative",style:{backgroundColor:u},children:x&&(0,Bt.jsxs)("div",{className:"absolute top-4 right-4 bg-black/90 backdrop-blur-sm p-4 rounded border border-[#FF4500]",children:[(0,Bt.jsx)("p",{className:"text-zinc-400 text-xs uppercase",children:null!==y&&void 0!==y&&y.ssNumber?"SS".concat(y.ssNumber):null===y||void 0===y?void 0:y.name}),(0,Bt.jsx)("p",{className:"text-2xl font-mono font-bold ".concat("racing"===x.status?"text-[#FACC15]":"finished"===x.status?"text-[#22C55E]":"text-zinc-500"),style:{fontFamily:"JetBrains Mono, monospace"},children:x.time})]})}):(0,Bt.jsx)("div",{className:"h-full rounded border-2 border-[#FF4500] flex items-center justify-center",style:{backgroundColor:o?u:"black"},children:(0,Bt.jsx)("p",{className:"text-zinc-500 text-xl",children:"No stream available"})})}),(0,Bt.jsxs)("div",{className:"w-1/3 bg-black/95 backdrop-blur-sm p-6 overflow-y-auto",children:[(0,Bt.jsxs)("div",{className:"text-center mb-6",children:[v.picture?(0,Bt.jsx)("img",{src:v.picture,alt:v.name,className:"w-24 h-24 rounded-full object-cover mx-auto mb-3 border-4 border-[#FF4500]"}):(0,Bt.jsx)("div",{className:"w-24 h-24 rounded-full bg-zinc-800 mx-auto mb-3 flex items-center justify-center border-4 border-[#FF4500]",children:(0,Bt.jsx)("span",{className:"text-4xl font-bold text-white",children:v.name.charAt(0)})}),(0,Bt.jsx)("h2",{className:"text-3xl font-bold uppercase text-white",style:{fontFamily:"Barlow Condensed, sans-serif"},children:v.name}),v.isActive&&(0,Bt.jsxs)("div",{className:"inline-flex items-center gap-2 mt-2 px-3 py-1 bg-[#FF4500] rounded-full",children:[(0,Bt.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,Bt.jsx)("span",{className:"text-white text-xs font-bold uppercase",children:"LIVE"})]})]}),(0,Bt.jsxs)("div",{children:[(0,Bt.jsx)("h3",{className:"text-xl font-bold uppercase text-[#FF4500] mb-3",style:{fontFamily:"Barlow Condensed, sans-serif"},children:"All Stage Times"}),(0,Bt.jsx)("div",{className:"space-y-2",children:0===w.length?(0,Bt.jsx)("p",{className:"text-zinc-500 text-center py-8",children:"No stages registered"}):w.map(e=>(0,Bt.jsx)("div",{className:"border p-3 ".concat(e.stage.id===f?"bg-[#FF4500]/20 border-[#FF4500]":"bg-white/5 border-white/10"),children:(0,Bt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Bt.jsx)("span",{className:"text-zinc-400 uppercase text-sm",style:{fontFamily:"Barlow Condensed, sans-serif"},children:e.stage.ssNumber?"SS".concat(e.stage.ssNumber):e.stage.name}),(0,Bt.jsx)("span",{className:"text-lg font-mono ".concat("racing"===e.status?"text-[#FACC15]":"finished"===e.status?"text-white":"text-zinc-500"),style:{fontFamily:"JetBrains Mono, monospace"},children:e.time})]})},e.stage.id))})]})]})]})}const eg=Za("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function tg(){const[t]=Tt(),{chromaKey:n,currentScene:r,setCurrentScene:o,dataVersion:a,wsEnabled:s,wsConnectionStatus:i,wsError:l,connectWebSocket:c,disconnectWebSocket:u}=Ht(),[d,h]=(0,e.useState)(null),[f,p]=(0,e.useState)("normal"),[m,g]=(0,e.useState)(256),[v,y]=(0,e.useState)(!1),[b,w]=(0,e.useState)(""),[x,k]=(0,e.useState)(!1),[S,C]=(0,e.useState)(!1);(0,e.useEffect)(()=>{if(x)return;const e=t.get("ws");e&&"connected"!==i&&"connecting"!==i&&(k(!0),console.log("[Overlay] Auto-connecting with URL key:",e),c(e))},[t,i,c,x]),(0,e.useEffect)(()=>{const e=document.getElementById("emergent-badge");return e&&(e.style.display="none"),()=>{e&&(e.style.display="inline-flex")}},[]),(0,e.useEffect)(()=>{null===d&&h(a)},[a,d]),(0,e.useEffect)(()=>{const e=e=>{const t=parseInt(e.key);t>=1&&t<=4&&o(t)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o]),(0,e.useEffect)(()=>{if("connected"===i)return;const e=setInterval(()=>{p("checking");try{const e=localStorage.getItem("rally_data_version"),t=e?JSON.parse(e):null;t&&"number"===typeof t&&d&&t!==d?(p("changed"),h(t),window.dispatchEvent(new Event("rally-reload-data")),setTimeout(()=>p("normal"),1e3)):setTimeout(()=>p("normal"),300)}catch(ig){console.error("Heartbeat error:",ig),p("normal")}},2e3);return()=>clearInterval(e)},[d,i]);return(0,Bt.jsxs)("div",{className:"fixed inset-0 overflow-hidden",style:{backgroundColor:n},"data-testid":"overlay-container",children:[(0,Bt.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-50 bg-black/95 border-b-2 border-[#FF4500] backdrop-blur-sm",children:[(0,Bt.jsxs)("div",{className:"flex items-center justify-between px-4 py-2",children:[(0,Bt.jsx)("div",{className:"flex items-center gap-2",children:[{num:1,name:"Live Stage"},{num:2,name:"Timing Tower"},{num:3,name:"Leaderboard"},{num:4,name:"Pilot Focus"}].map(e=>(0,Bt.jsxs)("button",{onClick:()=>o(e.num),className:"px-4 py-1 rounded text-sm font-bold transition-all ".concat(r===e.num?"bg-[#FF4500] text-white":"bg-zinc-800 text-zinc-300 hover:bg-zinc-700"),style:{fontFamily:"Barlow Condensed, sans-serif"},children:[(0,Bt.jsx)("span",{className:"text-[#FACC15]",children:e.num})," ",e.name]},e.num))}),(0,Bt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Bt.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[(0,Bt.jsx)(Bm,{checked:S,onCheckedChange:C,className:"border-zinc-500 data-[state=checked]:bg-[#FF4500] data-[state=checked]:border-[#FF4500]","data-testid":"hide-streams-checkbox"}),(0,Bt.jsxs)("span",{className:"flex items-center gap-1 text-xs text-zinc-300 font-medium",children:[(0,Bt.jsx)(eg,{className:"w-3 h-3"}),"Hide Streams"]})]}),(0,Bt.jsx)("button",{onClick:()=>y(!v),className:"flex items-center gap-1 px-3 py-1 rounded text-xs font-bold transition-all ".concat("connected"===i?"bg-[#22C55E]/20 text-[#22C55E] border border-[#22C55E]/50":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),"data-testid":"ws-status-button",children:"connected"===i?(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(um,{className:"w-3 h-3"}),(0,Bt.jsx)("span",{children:"Live"})]}):(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(dm,{className:"w-3 h-3"}),(0,Bt.jsx)("span",{children:"Connect"})]})}),(0,Bt.jsxs)("div",{className:"flex items-center gap-2 min-w-[85px]",children:[(0,Bt.jsx)("div",{className:"w-3 h-3 rounded-full transition-all duration-200 flex-shrink-0 ".concat("connected"===i?"bg-[#22C55E]":"checking"===f?"bg-[#22C55E] animate-pulse":"changed"===f?"bg-[#FF4500] animate-pulse":"bg-zinc-700")}),(0,Bt.jsx)("span",{className:"text-xs text-zinc-500 whitespace-nowrap",children:"connected"===i?"WebSocket":"changed"===f?"Updated":"Local"})]})]})]}),v&&(0,Bt.jsxs)("div",{className:"absolute top-full right-4 mt-2 p-4 bg-[#18181B] border border-zinc-700 rounded-lg shadow-xl z-50 w-80",children:[(0,Bt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Bt.jsx)("h3",{className:"text-white font-bold text-sm",children:"WebSocket Connection"}),(0,Bt.jsx)("button",{onClick:()=>y(!1),className:"text-zinc-500 hover:text-white",children:(0,Bt.jsx)(Of,{className:"w-4 h-4"})})]}),"connected"===i?(0,Bt.jsxs)("div",{className:"space-y-3",children:[(0,Bt.jsxs)("div",{className:"flex items-center gap-2 text-[#22C55E] text-sm",children:[(0,Bt.jsx)(um,{className:"w-4 h-4"}),(0,Bt.jsx)("span",{children:"Connected to live sync"})]}),(0,Bt.jsx)(jr,{variant:"destructive",size:"sm",className:"w-full",onClick:()=>{u(),y(!1)},children:"Disconnect"})]}):(0,Bt.jsxs)("div",{className:"space-y-3",children:[(0,Bt.jsx)("p",{className:"text-zinc-400 text-xs",children:"Paste the key from the Setup page to receive live updates:"}),(0,Bt.jsx)(_r,{value:b,onChange:e=>w(e.target.value),placeholder:"1-XXXXXXXX",className:"bg-[#09090B] border-zinc-700 text-white font-mono text-sm","data-testid":"ws-key-input"}),l&&(0,Bt.jsx)("p",{className:"text-red-400 text-xs",children:l}),(0,Bt.jsx)(jr,{className:"w-full bg-[#FF4500] hover:bg-[#FF4500]/90",size:"sm",onClick:async()=>{if(!b.trim())return;await c(b.trim())&&(y(!1),w(""))},disabled:"connecting"===i||!b.trim(),"data-testid":"ws-connect-button",children:"connecting"===i?"Connecting...":"Connect"})]})]})]}),(0,Bt.jsx)("div",{className:"absolute left-0 top-12 bottom-0 bg-black/95 border-r-2 border-[#FF4500] backdrop-blur-sm z-40 p-4 overflow-y-auto resize-x",style:{width:"".concat(m,"px"),minWidth:"200px",maxWidth:"400px"},id:"left-controls"}),(0,Bt.jsx)("div",{className:"pt-12 h-full transition-all",style:{paddingLeft:"".concat(m,"px")},children:(()=>{switch(r){case 1:default:return(0,Bt.jsx)(Jm,{hideStreams:S});case 2:return(0,Bt.jsx)(Ym,{hideStreams:S});case 3:return(0,Bt.jsx)(Xm,{hideStreams:S});case 4:return(0,Bt.jsx)(Zm,{hideStreams:S})}})()})]})}var ng=(e,t,n,r,o,a,s,i)=>{let l=document.documentElement,c=["light","dark"];function u(t){(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,r=n&&a?o.map(e=>a[e]||e):o;n?(l.classList.remove(...r),l.classList.add(a&&a[t]?a[t]:t)):l.setAttribute(e,t)}),function(e){i&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(r)u(r);else try{let e=localStorage.getItem(t)||n;u(s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(d){}},rg=e.createContext(void 0),og={setTheme:e=>{},themes:[]};e.memo(t=>{let{forcedTheme:n,storageKey:r,attribute:o,enableSystem:a,enableColorScheme:s,defaultTheme:i,value:l,themes:u,nonce:d,scriptProps:h}=t,f=JSON.stringify([o,r,i,n,u,l,a,s]).slice(1,-1);return e.createElement("script",c(c({},h),{},{suppressHydrationWarning:!0,nonce:"undefined"==typeof window?d:"",dangerouslySetInnerHTML:{__html:"(".concat(ng.toString(),")(").concat(f,")")}}))});const ag=t=>{let n=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));const{theme:r="system"}=(()=>{var t;return null!=(t=e.useContext(rg))?t:og})();return(0,Bt.jsx)(qa,c({theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},n))};const sg=function(){return(0,Bt.jsx)(Gt,{children:(0,Bt.jsxs)(St,{basename:"/Nero-Rally-Show-Overlay",children:[(0,Bt.jsxs)(We,{children:[(0,Bt.jsx)(Ue,{path:"/",element:(0,Bt.jsx)(vm,{})}),(0,Bt.jsx)(Ue,{path:"/overlay",element:(0,Bt.jsx)(tg,{})})]}),(0,Bt.jsx)(ag,{position:"top-right"})]})})};r.createRoot(document.getElementById("root")).render((0,Bt.jsx)(e.StrictMode,{children:(0,Bt.jsx)(sg,{})}))})()})();
//# sourceMappingURL=main.6a17b3e9.js.map